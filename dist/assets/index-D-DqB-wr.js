function Jb(o,s){for(var l=0;l<s.length;l++){const i=s[l];if(typeof i!="string"&&!Array.isArray(i)){for(const u in i)if(u!=="default"&&!(u in o)){const h=Object.getOwnPropertyDescriptor(i,u);h&&Object.defineProperty(o,u,h.get?h:{enumerable:!0,get:()=>i[u]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function l(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(u){if(u.ep)return;u.ep=!0;const h=l(u);fetch(u.href,h)}})();function Su(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Nm(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var s=o.default;if(typeof s=="function"){var l=function i(){return this instanceof i?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};l.prototype=s.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var u=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(l,i,u.get?u:{enumerable:!0,get:function(){return o[i]}})}),l}var Ic={exports:{}},Rl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function Xb(){if(M0)return Rl;M0=1;var o=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(i,u,h){var f=null;if(h!==void 0&&(f=""+h),u.key!==void 0&&(f=""+u.key),"key"in u){h={};for(var g in u)g!=="key"&&(h[g]=u[g])}else h=u;return u=h.ref,{$$typeof:o,type:i,key:f,ref:u!==void 0?u:null,props:h}}return Rl.Fragment=s,Rl.jsx=l,Rl.jsxs=l,Rl}var U0;function Zb(){return U0||(U0=1,Ic.exports=Xb()),Ic.exports}var r=Zb(),Gc={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function Fb(){if(z0)return ve;z0=1;var o=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),w=Symbol.iterator;function _(S){return S===null||typeof S!="object"?null:(S=w&&S[w]||S["@@iterator"],typeof S=="function"?S:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,M={};function V(S,E,Q){this.props=S,this.context=E,this.refs=M,this.updater=Q||A}V.prototype.isReactComponent={},V.prototype.setState=function(S,E){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,E,"setState")},V.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function D(){}D.prototype=V.prototype;function O(S,E,Q){this.props=S,this.context=E,this.refs=M,this.updater=Q||A}var T=O.prototype=new D;T.constructor=O,C(T,V.prototype),T.isPureReactComponent=!0;var q=Array.isArray;function I(){}var $={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function pe(S,E,Q){var F=Q.ref;return{$$typeof:o,type:S,key:E,ref:F!==void 0?F:null,props:Q}}function Ne(S,E){return pe(S.type,E,S.props)}function X(S){return typeof S=="object"&&S!==null&&S.$$typeof===o}function ee(S){var E={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(Q){return E[Q]})}var ye=/\/+/g;function de(S,E){return typeof S=="object"&&S!==null&&S.key!=null?ee(""+S.key):E.toString(36)}function W(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(I,I):(S.status="pending",S.then(function(E){S.status==="pending"&&(S.status="fulfilled",S.value=E)},function(E){S.status==="pending"&&(S.status="rejected",S.reason=E)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function U(S,E,Q,F,ne){var oe=typeof S;(oe==="undefined"||oe==="boolean")&&(S=null);var we=!1;if(S===null)we=!0;else switch(oe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(S.$$typeof){case o:case s:we=!0;break;case v:return we=S._init,U(we(S._payload),E,Q,F,ne)}}if(we)return ne=ne(S),we=F===""?"."+de(S,0):F,q(ne)?(Q="",we!=null&&(Q=we.replace(ye,"$&/")+"/"),U(ne,E,Q,"",function(ot){return ot})):ne!=null&&(X(ne)&&(ne=Ne(ne,Q+(ne.key==null||S&&S.key===ne.key?"":(""+ne.key).replace(ye,"$&/")+"/")+we)),E.push(ne)),1;we=0;var Xe=F===""?".":F+":";if(q(S))for(var Ge=0;Ge<S.length;Ge++)F=S[Ge],oe=Xe+de(F,Ge),we+=U(F,E,Q,oe,ne);else if(Ge=_(S),typeof Ge=="function")for(S=Ge.call(S),Ge=0;!(F=S.next()).done;)F=F.value,oe=Xe+de(F,Ge++),we+=U(F,E,Q,oe,ne);else if(oe==="object"){if(typeof S.then=="function")return U(W(S),E,Q,F,ne);throw E=String(S),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.")}return we}function J(S,E,Q){if(S==null)return S;var F=[],ne=0;return U(S,F,"","",function(oe){return E.call(Q,oe,ne++)}),F}function te(S){if(S._status===-1){var E=S._result;E=E(),E.then(function(Q){(S._status===0||S._status===-1)&&(S._status=1,S._result=Q)},function(Q){(S._status===0||S._status===-1)&&(S._status=2,S._result=Q)}),S._status===-1&&(S._status=0,S._result=E)}if(S._status===1)return S._result.default;throw S._result}var G=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},le={map:J,forEach:function(S,E,Q){J(S,function(){E.apply(this,arguments)},Q)},count:function(S){var E=0;return J(S,function(){E++}),E},toArray:function(S){return J(S,function(E){return E})||[]},only:function(S){if(!X(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return ve.Activity=y,ve.Children=le,ve.Component=V,ve.Fragment=l,ve.Profiler=u,ve.PureComponent=O,ve.StrictMode=i,ve.Suspense=b,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ve.__COMPILER_RUNTIME={__proto__:null,c:function(S){return $.H.useMemoCache(S)}},ve.cache=function(S){return function(){return S.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(S,E,Q){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var F=C({},S.props),ne=S.key;if(E!=null)for(oe in E.key!==void 0&&(ne=""+E.key),E)!ae.call(E,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&E.ref===void 0||(F[oe]=E[oe]);var oe=arguments.length-2;if(oe===1)F.children=Q;else if(1<oe){for(var we=Array(oe),Xe=0;Xe<oe;Xe++)we[Xe]=arguments[Xe+2];F.children=we}return pe(S.type,ne,F)},ve.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:h,_context:S},S},ve.createElement=function(S,E,Q){var F,ne={},oe=null;if(E!=null)for(F in E.key!==void 0&&(oe=""+E.key),E)ae.call(E,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(ne[F]=E[F]);var we=arguments.length-2;if(we===1)ne.children=Q;else if(1<we){for(var Xe=Array(we),Ge=0;Ge<we;Ge++)Xe[Ge]=arguments[Ge+2];ne.children=Xe}if(S&&S.defaultProps)for(F in we=S.defaultProps,we)ne[F]===void 0&&(ne[F]=we[F]);return pe(S,oe,ne)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(S){return{$$typeof:g,render:S}},ve.isValidElement=X,ve.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:te}},ve.memo=function(S,E){return{$$typeof:p,type:S,compare:E===void 0?null:E}},ve.startTransition=function(S){var E=$.T,Q={};$.T=Q;try{var F=S(),ne=$.S;ne!==null&&ne(Q,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(I,G)}catch(oe){G(oe)}finally{E!==null&&Q.types!==null&&(E.types=Q.types),$.T=E}},ve.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ve.use=function(S){return $.H.use(S)},ve.useActionState=function(S,E,Q){return $.H.useActionState(S,E,Q)},ve.useCallback=function(S,E){return $.H.useCallback(S,E)},ve.useContext=function(S){return $.H.useContext(S)},ve.useDebugValue=function(){},ve.useDeferredValue=function(S,E){return $.H.useDeferredValue(S,E)},ve.useEffect=function(S,E){return $.H.useEffect(S,E)},ve.useEffectEvent=function(S){return $.H.useEffectEvent(S)},ve.useId=function(){return $.H.useId()},ve.useImperativeHandle=function(S,E,Q){return $.H.useImperativeHandle(S,E,Q)},ve.useInsertionEffect=function(S,E){return $.H.useInsertionEffect(S,E)},ve.useLayoutEffect=function(S,E){return $.H.useLayoutEffect(S,E)},ve.useMemo=function(S,E){return $.H.useMemo(S,E)},ve.useOptimistic=function(S,E){return $.H.useOptimistic(S,E)},ve.useReducer=function(S,E,Q){return $.H.useReducer(S,E,Q)},ve.useRef=function(S){return $.H.useRef(S)},ve.useState=function(S){return $.H.useState(S)},ve.useSyncExternalStore=function(S,E,Q){return $.H.useSyncExternalStore(S,E,Q)},ve.useTransition=function(){return $.H.useTransition()},ve.version="19.2.0",ve}var L0;function ju(){return L0||(L0=1,Gc.exports=Fb()),Gc.exports}var N=ju();const _u=Su(N);var Yc={exports:{}},Dl={},Pc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function Wb(){return B0||(B0=1,(function(o){function s(U,J){var te=U.length;U.push(J);e:for(;0<te;){var G=te-1>>>1,le=U[G];if(0<u(le,J))U[G]=J,U[te]=le,te=G;else break e}}function l(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var J=U[0],te=U.pop();if(te!==J){U[0]=te;e:for(var G=0,le=U.length,S=le>>>1;G<S;){var E=2*(G+1)-1,Q=U[E],F=E+1,ne=U[F];if(0>u(Q,te))F<le&&0>u(ne,Q)?(U[G]=ne,U[F]=te,G=F):(U[G]=Q,U[E]=te,G=E);else if(F<le&&0>u(ne,te))U[G]=ne,U[F]=te,G=F;else break e}}return J}function u(U,J){var te=U.sortIndex-J.sortIndex;return te!==0?te:U.id-J.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;o.unstable_now=function(){return h.now()}}else{var f=Date,g=f.now();o.unstable_now=function(){return f.now()-g}}var b=[],p=[],v=1,y=null,w=3,_=!1,A=!1,C=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function T(U){for(var J=l(p);J!==null;){if(J.callback===null)i(p);else if(J.startTime<=U)i(p),J.sortIndex=J.expirationTime,s(b,J);else break;J=l(p)}}function q(U){if(C=!1,T(U),!A)if(l(b)!==null)A=!0,I||(I=!0,ee());else{var J=l(p);J!==null&&W(q,J.startTime-U)}}var I=!1,$=-1,ae=5,pe=-1;function Ne(){return M?!0:!(o.unstable_now()-pe<ae)}function X(){if(M=!1,I){var U=o.unstable_now();pe=U;var J=!0;try{e:{A=!1,C&&(C=!1,D($),$=-1),_=!0;var te=w;try{t:{for(T(U),y=l(b);y!==null&&!(y.expirationTime>U&&Ne());){var G=y.callback;if(typeof G=="function"){y.callback=null,w=y.priorityLevel;var le=G(y.expirationTime<=U);if(U=o.unstable_now(),typeof le=="function"){y.callback=le,T(U),J=!0;break t}y===l(b)&&i(b),T(U)}else i(b);y=l(b)}if(y!==null)J=!0;else{var S=l(p);S!==null&&W(q,S.startTime-U),J=!1}}break e}finally{y=null,w=te,_=!1}J=void 0}}finally{J?ee():I=!1}}}var ee;if(typeof O=="function")ee=function(){O(X)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,de=ye.port2;ye.port1.onmessage=X,ee=function(){de.postMessage(null)}}else ee=function(){V(X,0)};function W(U,J){$=V(function(){U(o.unstable_now())},J)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(U){U.callback=null},o.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<U?Math.floor(1e3/U):5},o.unstable_getCurrentPriorityLevel=function(){return w},o.unstable_next=function(U){switch(w){case 1:case 2:case 3:var J=3;break;default:J=w}var te=w;w=J;try{return U()}finally{w=te}},o.unstable_requestPaint=function(){M=!0},o.unstable_runWithPriority=function(U,J){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var te=w;w=U;try{return J()}finally{w=te}},o.unstable_scheduleCallback=function(U,J,te){var G=o.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?G+te:G):te=G,U){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=te+le,U={id:v++,callback:J,priorityLevel:U,startTime:te,expirationTime:le,sortIndex:-1},te>G?(U.sortIndex=te,s(p,U),l(b)===null&&U===l(p)&&(C?(D($),$=-1):C=!0,W(q,te-G))):(U.sortIndex=le,s(b,U),A||_||(A=!0,I||(I=!0,ee()))),U},o.unstable_shouldYield=Ne,o.unstable_wrapCallback=function(U){var J=w;return function(){var te=w;w=J;try{return U.apply(this,arguments)}finally{w=te}}}})(Kc)),Kc}var q0;function ex(){return q0||(q0=1,Pc.exports=Wb()),Pc.exports}var Qc={exports:{}},vt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function tx(){if(H0)return vt;H0=1;var o=ju();function s(b){var p="https://react.dev/errors/"+b;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+b+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var i={d:{f:l,r:function(){throw Error(s(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},u=Symbol.for("react.portal");function h(b,p,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:y==null?null:""+y,children:b,containerInfo:p,implementation:v}}var f=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(b,p){if(b==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,vt.createPortal=function(b,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(s(299));return h(b,p,null,v)},vt.flushSync=function(b){var p=f.T,v=i.p;try{if(f.T=null,i.p=2,b)return b()}finally{f.T=p,i.p=v,i.d.f()}},vt.preconnect=function(b,p){typeof b=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(b,p))},vt.prefetchDNS=function(b){typeof b=="string"&&i.d.D(b)},vt.preinit=function(b,p){if(typeof b=="string"&&p&&typeof p.as=="string"){var v=p.as,y=g(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(b,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:_}):v==="script"&&i.d.X(b,{crossOrigin:y,integrity:w,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},vt.preinitModule=function(b,p){if(typeof b=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=g(p.as,p.crossOrigin);i.d.M(b,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(b)},vt.preload=function(b,p){if(typeof b=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,y=g(v,p.crossOrigin);i.d.L(b,v,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},vt.preloadModule=function(b,p){if(typeof b=="string")if(p){var v=g(p.as,p.crossOrigin);i.d.m(b,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(b)},vt.requestFormReset=function(b){i.d.r(b)},vt.unstable_batchedUpdates=function(b,p){return b(p)},vt.useFormState=function(b,p,v){return f.H.useFormState(b,p,v)},vt.useFormStatus=function(){return f.H.useHostTransitionStatus()},vt.version="19.2.0",vt}var $0;function ax(){if($0)return Qc.exports;$0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}}return o(),Qc.exports=tx(),Qc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function sx(){if(V0)return Dl;V0=1;var o=ex(),s=ju(),l=ax();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(h(e)!==e)throw Error(i(188))}function p(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,n=t;;){var c=a.return;if(c===null)break;var d=c.alternate;if(d===null){if(n=c.return,n!==null){a=n;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===a)return b(c),e;if(d===n)return b(c),t;d=d.sibling}throw Error(i(188))}if(a.return!==n.return)a=c,n=d;else{for(var m=!1,x=c.child;x;){if(x===a){m=!0,a=c,n=d;break}if(x===n){m=!0,n=c,a=d;break}x=x.sibling}if(!m){for(x=d.child;x;){if(x===a){m=!0,a=d,n=c;break}if(x===n){m=!0,n=d,a=c;break}x=x.sibling}if(!m)throw Error(i(189))}}if(a.alternate!==n)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),O=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),pe=Symbol.for("react.activity"),Ne=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=X&&e[X]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Symbol.for("react.client.reference");function de(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ye?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case V:return"Profiler";case M:return"StrictMode";case q:return"Suspense";case I:return"SuspenseList";case pe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case O:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case T:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return t=e.displayName||null,t!==null?t:de(e.type)||"Memo";case ae:t=e._payload,e=e._init;try{return de(e(t))}catch{}}return null}var W=Array.isArray,U=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},G=[],le=-1;function S(e){return{current:e}}function E(e){0>le||(e.current=G[le],G[le]=null,le--)}function Q(e,t){le++,G[le]=e.current,e.current=t}var F=S(null),ne=S(null),oe=S(null),we=S(null);function Xe(e,t){switch(Q(oe,t),Q(ne,e),Q(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?s0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=s0(t),e=n0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}E(F),Q(F,e)}function Ge(){E(F),E(ne),E(oe)}function ot(e){e.memoizedState!==null&&Q(we,e);var t=F.current,a=n0(t,e.type);t!==a&&(Q(ne,e),Q(F,a))}function Ma(e){ne.current===e&&(E(F),E(ne)),we.current===e&&(E(we),Tl._currentValue=te)}var fs,Ua;function Yt(e){if(fs===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);fs=t&&t[1]||"",Ua=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fs+e+Ua}var Z=!1;function be(e,t){if(!e||Z)return"";Z=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(H){var B=H}Reflect.construct(e,[],K)}else{try{K.call()}catch(H){B=H}e.call(K.prototype)}}else{try{throw Error()}catch(H){B=H}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(H){if(H&&B&&typeof H.stack=="string")return[H.stack,B.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=n.DetermineComponentFrameRoot(),m=d[0],x=d[1];if(m&&x){var j=m.split(`
`),L=x.split(`
`);for(c=n=0;n<j.length&&!j[n].includes("DetermineComponentFrameRoot");)n++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(n===j.length||c===L.length)for(n=j.length-1,c=L.length-1;1<=n&&0<=c&&j[n]!==L[c];)c--;for(;1<=n&&0<=c;n--,c--)if(j[n]!==L[c]){if(n!==1||c!==1)do if(n--,c--,0>c||j[n]!==L[c]){var Y=`
`+j[n].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=n&&0<=c);break}}}finally{Z=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Yt(a):""}function _e(e,t){switch(e.tag){case 26:case 27:case 5:return Yt(e.type);case 16:return Yt("Lazy");case 13:return e.child!==t&&t!==null?Yt("Suspense Fallback"):Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 15:return be(e.type,!1);case 11:return be(e.type.render,!1);case 1:return be(e.type,!0);case 31:return Yt("Activity");default:return""}}function Le(e){try{var t="",a=null;do t+=_e(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Ae=Object.prototype.hasOwnProperty,wt=o.unstable_scheduleCallback,za=o.unstable_cancelCallback,$s=o.unstable_shouldYield,Vs=o.unstable_requestPaint,dt=o.unstable_now,se=o.unstable_getCurrentPriorityLevel,ie=o.unstable_ImmediatePriority,me=o.unstable_UserBlockingPriority,ke=o.unstable_NormalPriority,De=o.unstable_LowPriority,Be=o.unstable_IdlePriority,ma=o.log,Yl=o.unstable_setDisableYieldValue,Ut=null,Fe=null;function Nt(e){if(typeof ma=="function"&&Yl(e),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(Ut,e)}catch{}}var St=Math.clz32?Math.clz32:Ug,Dg=Math.log,Mg=Math.LN2;function Ug(e){return e>>>=0,e===0?32:31-(Dg(e)/Mg|0)|0}var Pl=256,Kl=262144,Ql=4194304;function ms(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jl(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var c=0,d=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var x=n&134217727;return x!==0?(n=x&~d,n!==0?c=ms(n):(m&=x,m!==0?c=ms(m):a||(a=x&~e,a!==0&&(c=ms(a))))):(x=n&~d,x!==0?c=ms(x):m!==0?c=ms(m):a||(a=n&~e,a!==0&&(c=ms(a)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,a=t&-t,d>=a||d===32&&(a&4194048)!==0)?t:c}function $n(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function zg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lu(){var e=Ql;return Ql<<=1,(Ql&62914560)===0&&(Ql=4194304),e}function Or(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Vn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Lg(e,t,a,n,c,d){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var x=e.entanglements,j=e.expirationTimes,L=e.hiddenUpdates;for(a=m&~a;0<a;){var Y=31-St(a),K=1<<Y;x[Y]=0,j[Y]=-1;var B=L[Y];if(B!==null)for(L[Y]=null,Y=0;Y<B.length;Y++){var H=B[Y];H!==null&&(H.lane&=-536870913)}a&=~K}n!==0&&Bu(e,n,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(m&~t))}function Bu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-St(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function qu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-St(a),c=1<<n;c&t|e[n]&t&&(e[n]|=t),a&=~c}}function Hu(e,t){var a=t&-t;return a=(a&42)!==0?1:Cr(a),(a&(e.suspendedLanes|t))!==0?0:a}function Cr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Rr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $u(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:E0(e.type))}function Vu(e,t){var a=J.p;try{return J.p=e,t()}finally{J.p=a}}var La=Math.random().toString(36).slice(2),mt="__reactFiber$"+La,kt="__reactProps$"+La,Is="__reactContainer$"+La,Dr="__reactEvents$"+La,Bg="__reactListeners$"+La,qg="__reactHandles$"+La,Iu="__reactResources$"+La,In="__reactMarker$"+La;function Mr(e){delete e[mt],delete e[kt],delete e[Dr],delete e[Bg],delete e[qg]}function Gs(e){var t=e[mt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Is]||a[mt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=d0(e);e!==null;){if(a=e[mt])return a;e=d0(e)}return t}e=a,a=e.parentNode}return null}function Ys(e){if(e=e[mt]||e[Is]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Gn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Ps(e){var t=e[Iu];return t||(t=e[Iu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ht(e){e[In]=!0}var Gu=new Set,Yu={};function gs(e,t){Ks(e,t),Ks(e+"Capture",t)}function Ks(e,t){for(Yu[e]=t,e=0;e<t.length;e++)Gu.add(t[e])}var Hg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pu={},Ku={};function $g(e){return Ae.call(Ku,e)?!0:Ae.call(Pu,e)?!1:Hg.test(e)?Ku[e]=!0:(Pu[e]=!0,!1)}function Xl(e,t,a){if($g(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Zl(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ga(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function Pt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vg(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){a=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ur(e){if(!e._valueTracker){var t=Qu(e)?"checked":"value";e._valueTracker=Vg(e,t,""+e[t])}}function Ju(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=Qu(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function Fl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ig=/[\n"\\]/g;function Kt(e){return e.replace(Ig,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function zr(e,t,a,n,c,d,m,x){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Pt(t)):e.value!==""+Pt(t)&&(e.value=""+Pt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?Lr(e,m,Pt(t)):a!=null?Lr(e,m,Pt(a)):n!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+Pt(x):e.removeAttribute("name")}function Xu(e,t,a,n,c,d,m,x){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){Ur(e);return}a=a!=null?""+Pt(a):"",t=t!=null?""+Pt(t):a,x||t===e.value||(e.value=t),e.defaultValue=t}n=n??c,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=x?e.checked:!!n,e.defaultChecked=!!n,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Ur(e)}function Lr(e,t,a){t==="number"&&Fl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Qs(e,t,a,n){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Pt(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,n&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Zu(e,t,a){if(t!=null&&(t=""+Pt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Pt(a):""}function Fu(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(i(92));if(W(n)){if(1<n.length)throw Error(i(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Pt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),Ur(e)}function Js(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Gg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wu(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Gg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ed(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var c in t)n=t[c],t.hasOwnProperty(c)&&a[c]!==n&&Wu(e,c,n)}else for(var d in t)t.hasOwnProperty(d)&&Wu(e,d,t[d])}function Br(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wl(e){return Pg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function pa(){}var qr=null;function Hr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xs=null,Zs=null;function td(e){var t=Ys(e);if(t&&(e=t.stateNode)){var a=e[kt]||null;e:switch(e=t.stateNode,t.type){case"input":if(zr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var c=n[kt]||null;if(!c)throw Error(i(90));zr(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&Ju(n)}break e;case"textarea":Zu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Qs(e,!!a.multiple,t,!1)}}}var $r=!1;function ad(e,t,a){if($r)return e(t,a);$r=!0;try{var n=e(t);return n}finally{if($r=!1,(Xs!==null||Zs!==null)&&(Hi(),Xs&&(t=Xs,e=Zs,Zs=Xs=null,td(t),e)))for(t=0;t<e.length;t++)td(e[t])}}function Yn(e,t){var a=e.stateNode;if(a===null)return null;var n=a[kt]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vr=!1;if(ba)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){Vr=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{Vr=!1}var Ba=null,Ir=null,ei=null;function sd(){if(ei)return ei;var e,t=Ir,a=t.length,n,c="value"in Ba?Ba.value:Ba.textContent,d=c.length;for(e=0;e<a&&t[e]===c[e];e++);var m=a-e;for(n=1;n<=m&&t[a-n]===c[d-n];n++);return ei=c.slice(e,1<n?1-n:void 0)}function ti(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ai(){return!0}function nd(){return!1}function Et(e){function t(a,n,c,d,m){this._reactName=a,this._targetInst=c,this.type=n,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(a=e[x],this[x]=a?a(d):d[x]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ai:nd,this.isPropagationStopped=nd,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),t}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},si=Et(ps),Kn=y({},ps,{view:0,detail:0}),Kg=Et(Kn),Gr,Yr,Qn,ni=y({},Kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qn&&(Qn&&e.type==="mousemove"?(Gr=e.screenX-Qn.screenX,Yr=e.screenY-Qn.screenY):Yr=Gr=0,Qn=e),Gr)},movementY:function(e){return"movementY"in e?e.movementY:Yr}}),ld=Et(ni),Qg=y({},ni,{dataTransfer:0}),Jg=Et(Qg),Xg=y({},Kn,{relatedTarget:0}),Pr=Et(Xg),Zg=y({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),Fg=Et(Zg),Wg=y({},ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ep=Et(Wg),tp=y({},ps,{data:0}),id=Et(tp),ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},np={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=np[e])?!!t[e]:!1}function Kr(){return lp}var ip=y({},Kn,{key:function(e){if(e.key){var t=ap[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ti(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kr,charCode:function(e){return e.type==="keypress"?ti(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ti(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rp=Et(ip),op=y({},ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rd=Et(op),cp=y({},Kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kr}),up=Et(cp),dp=y({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),hp=Et(dp),fp=y({},ni,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mp=Et(fp),gp=y({},ps,{newState:0,oldState:0}),pp=Et(gp),bp=[9,13,27,32],Qr=ba&&"CompositionEvent"in window,Jn=null;ba&&"documentMode"in document&&(Jn=document.documentMode);var xp=ba&&"TextEvent"in window&&!Jn,od=ba&&(!Qr||Jn&&8<Jn&&11>=Jn),cd=" ",ud=!1;function dd(e,t){switch(e){case"keyup":return bp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fs=!1;function vp(e,t){switch(e){case"compositionend":return hd(t);case"keypress":return t.which!==32?null:(ud=!0,cd);case"textInput":return e=t.data,e===cd&&ud?null:e;default:return null}}function yp(e,t){if(Fs)return e==="compositionend"||!Qr&&dd(e,t)?(e=sd(),ei=Ir=Ba=null,Fs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return od&&t.locale!=="ko"?null:t.data;default:return null}}var wp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wp[e.type]:t==="textarea"}function md(e,t,a,n){Xs?Zs?Zs.push(n):Zs=[n]:Xs=n,t=Ki(t,"onChange"),0<t.length&&(a=new si("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Xn=null,Zn=null;function Sp(e){Zf(e,0)}function li(e){var t=Gn(e);if(Ju(t))return e}function gd(e,t){if(e==="change")return t}var pd=!1;if(ba){var Jr;if(ba){var Xr="oninput"in document;if(!Xr){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),Xr=typeof bd.oninput=="function"}Jr=Xr}else Jr=!1;pd=Jr&&(!document.documentMode||9<document.documentMode)}function xd(){Xn&&(Xn.detachEvent("onpropertychange",vd),Zn=Xn=null)}function vd(e){if(e.propertyName==="value"&&li(Zn)){var t=[];md(t,Zn,e,Hr(e)),ad(Sp,t)}}function jp(e,t,a){e==="focusin"?(xd(),Xn=t,Zn=a,Xn.attachEvent("onpropertychange",vd)):e==="focusout"&&xd()}function _p(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return li(Zn)}function Np(e,t){if(e==="click")return li(t)}function kp(e,t){if(e==="input"||e==="change")return li(t)}function Ep(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:Ep;function Fn(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var c=a[n];if(!Ae.call(t,c)||!zt(e[c],t[c]))return!1}return!0}function yd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wd(e,t){var a=yd(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yd(a)}}function Sd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Fl(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Fl(e.document)}return t}function Zr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Tp=ba&&"documentMode"in document&&11>=document.documentMode,Ws=null,Fr=null,Wn=null,Wr=!1;function _d(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wr||Ws==null||Ws!==Fl(n)||(n=Ws,"selectionStart"in n&&Zr(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Wn&&Fn(Wn,n)||(Wn=n,n=Ki(Fr,"onSelect"),0<n.length&&(t=new si("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=Ws)))}function bs(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var en={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionrun:bs("Transition","TransitionRun"),transitionstart:bs("Transition","TransitionStart"),transitioncancel:bs("Transition","TransitionCancel"),transitionend:bs("Transition","TransitionEnd")},eo={},Nd={};ba&&(Nd=document.createElement("div").style,"AnimationEvent"in window||(delete en.animationend.animation,delete en.animationiteration.animation,delete en.animationstart.animation),"TransitionEvent"in window||delete en.transitionend.transition);function xs(e){if(eo[e])return eo[e];if(!en[e])return e;var t=en[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Nd)return eo[e]=t[a];return e}var kd=xs("animationend"),Ed=xs("animationiteration"),Td=xs("animationstart"),Ap=xs("transitionrun"),Op=xs("transitionstart"),Cp=xs("transitioncancel"),Ad=xs("transitionend"),Od=new Map,to="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");to.push("scrollEnd");function sa(e,t){Od.set(e,t),gs(t,[e])}var ii=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Qt=[],tn=0,ao=0;function ri(){for(var e=tn,t=ao=tn=0;t<e;){var a=Qt[t];Qt[t++]=null;var n=Qt[t];Qt[t++]=null;var c=Qt[t];Qt[t++]=null;var d=Qt[t];if(Qt[t++]=null,n!==null&&c!==null){var m=n.pending;m===null?c.next=c:(c.next=m.next,m.next=c),n.pending=c}d!==0&&Cd(a,c,d)}}function oi(e,t,a,n){Qt[tn++]=e,Qt[tn++]=t,Qt[tn++]=a,Qt[tn++]=n,ao|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function so(e,t,a,n){return oi(e,t,a,n),ci(e)}function vs(e,t){return oi(e,null,null,t),ci(e)}function Cd(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var c=!1,d=e.return;d!==null;)d.childLanes|=a,n=d.alternate,n!==null&&(n.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-St(a),e=d.hiddenUpdates,n=e[c],n===null?e[c]=[t]:n.push(t),t.lane=a|536870912),d):null}function ci(e){if(50<wl)throw wl=0,fc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var an={};function Rp(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,a,n){return new Rp(e,t,a,n)}function no(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xa(e,t){var a=e.alternate;return a===null?(a=Lt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Rd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ui(e,t,a,n,c,d){var m=0;if(n=e,typeof e=="function")no(e)&&(m=1);else if(typeof e=="string")m=Lb(e,a,F.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case pe:return e=Lt(31,a,t,c),e.elementType=pe,e.lanes=d,e;case C:return ys(a.children,c,d,t);case M:m=8,c|=24;break;case V:return e=Lt(12,a,t,c|2),e.elementType=V,e.lanes=d,e;case q:return e=Lt(13,a,t,c),e.elementType=q,e.lanes=d,e;case I:return e=Lt(19,a,t,c),e.elementType=I,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:m=10;break e;case D:m=9;break e;case T:m=11;break e;case $:m=14;break e;case ae:m=16,n=null;break e}m=29,a=Error(i(130,e===null?"null":typeof e,"")),n=null}return t=Lt(m,a,t,c),t.elementType=e,t.type=n,t.lanes=d,t}function ys(e,t,a,n){return e=Lt(7,e,n,t),e.lanes=a,e}function lo(e,t,a){return e=Lt(6,e,null,t),e.lanes=a,e}function Dd(e){var t=Lt(18,null,null,0);return t.stateNode=e,t}function io(e,t,a){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Md=new WeakMap;function Jt(e,t){if(typeof e=="object"&&e!==null){var a=Md.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Le(t)},Md.set(e,t),t)}return{value:e,source:t,stack:Le(t)}}var sn=[],nn=0,di=null,el=0,Xt=[],Zt=0,qa=null,ua=1,da="";function va(e,t){sn[nn++]=el,sn[nn++]=di,di=e,el=t}function Ud(e,t,a){Xt[Zt++]=ua,Xt[Zt++]=da,Xt[Zt++]=qa,qa=e;var n=ua;e=da;var c=32-St(n)-1;n&=~(1<<c),a+=1;var d=32-St(t)+c;if(30<d){var m=c-c%5;d=(n&(1<<m)-1).toString(32),n>>=m,c-=m,ua=1<<32-St(t)+c|a<<c|n,da=d+e}else ua=1<<d|a<<c|n,da=e}function ro(e){e.return!==null&&(va(e,1),Ud(e,1,0))}function oo(e){for(;e===di;)di=sn[--nn],sn[nn]=null,el=sn[--nn],sn[nn]=null;for(;e===qa;)qa=Xt[--Zt],Xt[Zt]=null,da=Xt[--Zt],Xt[Zt]=null,ua=Xt[--Zt],Xt[Zt]=null}function zd(e,t){Xt[Zt++]=ua,Xt[Zt++]=da,Xt[Zt++]=qa,ua=t.id,da=t.overflow,qa=e}var gt=null,Ke=null,Re=!1,Ha=null,Ft=!1,co=Error(i(519));function $a(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(Jt(t,e)),co}function Ld(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[mt]=e,t[kt]=n,a){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(a=0;a<jl.length;a++)Te(jl[a],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),Xu(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),Fu(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||t0(t.textContent,a)?(n.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),n.onScroll!=null&&Te("scroll",t),n.onScrollEnd!=null&&Te("scrollend",t),n.onClick!=null&&(t.onclick=pa),t=!0):t=!1,t||$a(e,!0)}function Bd(e){for(gt=e.return;gt;)switch(gt.tag){case 5:case 31:case 13:Ft=!1;return;case 27:case 3:Ft=!0;return;default:gt=gt.return}}function ln(e){if(e!==gt)return!1;if(!Re)return Bd(e),Re=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Tc(e.type,e.memoizedProps)),a=!a),a&&Ke&&$a(e),Bd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ke=u0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ke=u0(e)}else t===27?(t=Ke,ts(e.type)?(e=Dc,Dc=null,Ke=e):Ke=t):Ke=gt?ea(e.stateNode.nextSibling):null;return!0}function ws(){Ke=gt=null,Re=!1}function uo(){var e=Ha;return e!==null&&(Ct===null?Ct=e:Ct.push.apply(Ct,e),Ha=null),e}function tl(e){Ha===null?Ha=[e]:Ha.push(e)}var ho=S(null),Ss=null,ya=null;function Va(e,t,a){Q(ho,t._currentValue),t._currentValue=a}function wa(e){e._currentValue=ho.current,E(ho)}function fo(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function mo(e,t,a,n){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var m=c.child;d=d.firstContext;e:for(;d!==null;){var x=d;d=c;for(var j=0;j<t.length;j++)if(x.context===t[j]){d.lanes|=a,x=d.alternate,x!==null&&(x.lanes|=a),fo(d.return,a,e),n||(m=null);break e}d=x.next}}else if(c.tag===18){if(m=c.return,m===null)throw Error(i(341));m.lanes|=a,d=m.alternate,d!==null&&(d.lanes|=a),fo(m,a,e),m=null}else m=c.child;if(m!==null)m.return=c;else for(m=c;m!==null;){if(m===e){m=null;break}if(c=m.sibling,c!==null){c.return=m.return,m=c;break}m=m.return}c=m}}function rn(e,t,a,n){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var m=c.alternate;if(m===null)throw Error(i(387));if(m=m.memoizedProps,m!==null){var x=c.type;zt(c.pendingProps.value,m.value)||(e!==null?e.push(x):e=[x])}}else if(c===we.current){if(m=c.alternate,m===null)throw Error(i(387));m.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Tl):e=[Tl])}c=c.return}e!==null&&mo(t,e,a,n),t.flags|=262144}function hi(e){for(e=e.firstContext;e!==null;){if(!zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function js(e){Ss=e,ya=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function pt(e){return qd(Ss,e)}function fi(e,t){return Ss===null&&js(e),qd(e,t)}function qd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ya===null){if(e===null)throw Error(i(308));ya=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ya=ya.next=t;return a}var Dp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Mp=o.unstable_scheduleCallback,Up=o.unstable_NormalPriority,st={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function go(){return{controller:new Dp,data:new Map,refCount:0}}function al(e){e.refCount--,e.refCount===0&&Mp(Up,function(){e.controller.abort()})}var sl=null,po=0,on=0,cn=null;function zp(e,t){if(sl===null){var a=sl=[];po=0,on=vc(),cn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return po++,t.then(Hd,Hd),t}function Hd(){if(--po===0&&sl!==null){cn!==null&&(cn.status="fulfilled");var e=sl;sl=null,on=0,cn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Lp(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(n.status="rejected",n.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),n}var $d=U.S;U.S=function(e,t){Nf=dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&zp(e,t),$d!==null&&$d(e,t)};var _s=S(null);function bo(){var e=_s.current;return e!==null?e:Ye.pooledCache}function mi(e,t){t===null?Q(_s,_s.current):Q(_s,t.pool)}function Vd(){var e=bo();return e===null?null:{parent:st._currentValue,pool:e}}var un=Error(i(460)),xo=Error(i(474)),gi=Error(i(542)),pi={then:function(){}};function Id(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Gd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(pa,pa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pd(e),e;default:if(typeof t.status=="string")t.then(pa,pa);else{if(e=Ye,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=n}},function(n){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pd(e),e}throw ks=t,un}}function Ns(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ks=a,un):a}}var ks=null;function Yd(){if(ks===null)throw Error(i(459));var e=ks;return ks=null,e}function Pd(e){if(e===un||e===gi)throw Error(i(483))}var dn=null,nl=0;function bi(e){var t=nl;return nl+=1,dn===null&&(dn=[]),Gd(dn,e,t)}function ll(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xi(e,t){throw t.$$typeof===w?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Kd(e){function t(R,k){if(e){var z=R.deletions;z===null?(R.deletions=[k],R.flags|=16):z.push(k)}}function a(R,k){if(!e)return null;for(;k!==null;)t(R,k),k=k.sibling;return null}function n(R){for(var k=new Map;R!==null;)R.key!==null?k.set(R.key,R):k.set(R.index,R),R=R.sibling;return k}function c(R,k){return R=xa(R,k),R.index=0,R.sibling=null,R}function d(R,k,z){return R.index=z,e?(z=R.alternate,z!==null?(z=z.index,z<k?(R.flags|=67108866,k):z):(R.flags|=67108866,k)):(R.flags|=1048576,k)}function m(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function x(R,k,z,P){return k===null||k.tag!==6?(k=lo(z,R.mode,P),k.return=R,k):(k=c(k,z),k.return=R,k)}function j(R,k,z,P){var fe=z.type;return fe===C?Y(R,k,z.props.children,P,z.key):k!==null&&(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ae&&Ns(fe)===k.type)?(k=c(k,z.props),ll(k,z),k.return=R,k):(k=ui(z.type,z.key,z.props,null,R.mode,P),ll(k,z),k.return=R,k)}function L(R,k,z,P){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=io(z,R.mode,P),k.return=R,k):(k=c(k,z.children||[]),k.return=R,k)}function Y(R,k,z,P,fe){return k===null||k.tag!==7?(k=ys(z,R.mode,P,fe),k.return=R,k):(k=c(k,z),k.return=R,k)}function K(R,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=lo(""+k,R.mode,z),k.return=R,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return z=ui(k.type,k.key,k.props,null,R.mode,z),ll(z,k),z.return=R,z;case A:return k=io(k,R.mode,z),k.return=R,k;case ae:return k=Ns(k),K(R,k,z)}if(W(k)||ee(k))return k=ys(k,R.mode,z,null),k.return=R,k;if(typeof k.then=="function")return K(R,bi(k),z);if(k.$$typeof===O)return K(R,fi(R,k),z);xi(R,k)}return null}function B(R,k,z,P){var fe=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return fe!==null?null:x(R,k,""+z,P);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case _:return z.key===fe?j(R,k,z,P):null;case A:return z.key===fe?L(R,k,z,P):null;case ae:return z=Ns(z),B(R,k,z,P)}if(W(z)||ee(z))return fe!==null?null:Y(R,k,z,P,null);if(typeof z.then=="function")return B(R,k,bi(z),P);if(z.$$typeof===O)return B(R,k,fi(R,z),P);xi(R,z)}return null}function H(R,k,z,P,fe){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return R=R.get(z)||null,x(k,R,""+P,fe);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case _:return R=R.get(P.key===null?z:P.key)||null,j(k,R,P,fe);case A:return R=R.get(P.key===null?z:P.key)||null,L(k,R,P,fe);case ae:return P=Ns(P),H(R,k,z,P,fe)}if(W(P)||ee(P))return R=R.get(z)||null,Y(k,R,P,fe,null);if(typeof P.then=="function")return H(R,k,z,bi(P),fe);if(P.$$typeof===O)return H(R,k,z,fi(k,P),fe);xi(k,P)}return null}function re(R,k,z,P){for(var fe=null,Me=null,ce=k,je=k=0,Ce=null;ce!==null&&je<z.length;je++){ce.index>je?(Ce=ce,ce=null):Ce=ce.sibling;var Ue=B(R,ce,z[je],P);if(Ue===null){ce===null&&(ce=Ce);break}e&&ce&&Ue.alternate===null&&t(R,ce),k=d(Ue,k,je),Me===null?fe=Ue:Me.sibling=Ue,Me=Ue,ce=Ce}if(je===z.length)return a(R,ce),Re&&va(R,je),fe;if(ce===null){for(;je<z.length;je++)ce=K(R,z[je],P),ce!==null&&(k=d(ce,k,je),Me===null?fe=ce:Me.sibling=ce,Me=ce);return Re&&va(R,je),fe}for(ce=n(ce);je<z.length;je++)Ce=H(ce,R,je,z[je],P),Ce!==null&&(e&&Ce.alternate!==null&&ce.delete(Ce.key===null?je:Ce.key),k=d(Ce,k,je),Me===null?fe=Ce:Me.sibling=Ce,Me=Ce);return e&&ce.forEach(function(is){return t(R,is)}),Re&&va(R,je),fe}function ge(R,k,z,P){if(z==null)throw Error(i(151));for(var fe=null,Me=null,ce=k,je=k=0,Ce=null,Ue=z.next();ce!==null&&!Ue.done;je++,Ue=z.next()){ce.index>je?(Ce=ce,ce=null):Ce=ce.sibling;var is=B(R,ce,Ue.value,P);if(is===null){ce===null&&(ce=Ce);break}e&&ce&&is.alternate===null&&t(R,ce),k=d(is,k,je),Me===null?fe=is:Me.sibling=is,Me=is,ce=Ce}if(Ue.done)return a(R,ce),Re&&va(R,je),fe;if(ce===null){for(;!Ue.done;je++,Ue=z.next())Ue=K(R,Ue.value,P),Ue!==null&&(k=d(Ue,k,je),Me===null?fe=Ue:Me.sibling=Ue,Me=Ue);return Re&&va(R,je),fe}for(ce=n(ce);!Ue.done;je++,Ue=z.next())Ue=H(ce,R,je,Ue.value,P),Ue!==null&&(e&&Ue.alternate!==null&&ce.delete(Ue.key===null?je:Ue.key),k=d(Ue,k,je),Me===null?fe=Ue:Me.sibling=Ue,Me=Ue);return e&&ce.forEach(function(Qb){return t(R,Qb)}),Re&&va(R,je),fe}function Ie(R,k,z,P){if(typeof z=="object"&&z!==null&&z.type===C&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case _:e:{for(var fe=z.key;k!==null;){if(k.key===fe){if(fe=z.type,fe===C){if(k.tag===7){a(R,k.sibling),P=c(k,z.props.children),P.return=R,R=P;break e}}else if(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ae&&Ns(fe)===k.type){a(R,k.sibling),P=c(k,z.props),ll(P,z),P.return=R,R=P;break e}a(R,k);break}else t(R,k);k=k.sibling}z.type===C?(P=ys(z.props.children,R.mode,P,z.key),P.return=R,R=P):(P=ui(z.type,z.key,z.props,null,R.mode,P),ll(P,z),P.return=R,R=P)}return m(R);case A:e:{for(fe=z.key;k!==null;){if(k.key===fe)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){a(R,k.sibling),P=c(k,z.children||[]),P.return=R,R=P;break e}else{a(R,k);break}else t(R,k);k=k.sibling}P=io(z,R.mode,P),P.return=R,R=P}return m(R);case ae:return z=Ns(z),Ie(R,k,z,P)}if(W(z))return re(R,k,z,P);if(ee(z)){if(fe=ee(z),typeof fe!="function")throw Error(i(150));return z=fe.call(z),ge(R,k,z,P)}if(typeof z.then=="function")return Ie(R,k,bi(z),P);if(z.$$typeof===O)return Ie(R,k,fi(R,z),P);xi(R,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(a(R,k.sibling),P=c(k,z),P.return=R,R=P):(a(R,k),P=lo(z,R.mode,P),P.return=R,R=P),m(R)):a(R,k)}return function(R,k,z,P){try{nl=0;var fe=Ie(R,k,z,P);return dn=null,fe}catch(ce){if(ce===un||ce===gi)throw ce;var Me=Lt(29,ce,null,R.mode);return Me.lanes=P,Me.return=R,Me}finally{}}}var Es=Kd(!0),Qd=Kd(!1),Ia=!1;function vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ga(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ya(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(ze&2)!==0){var c=n.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),n.pending=t,t=ci(e),Cd(e,null,a),t}return oi(e,n,t,a),ci(e)}function il(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,qu(e,a)}}function wo(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var c=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?c=d=m:d=d.next=m,a=a.next}while(a!==null);d===null?c=d=t:d=d.next=t}else c=d=t;a={baseState:n.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var So=!1;function rl(){if(So){var e=cn;if(e!==null)throw e}}function ol(e,t,a,n){So=!1;var c=e.updateQueue;Ia=!1;var d=c.firstBaseUpdate,m=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var j=x,L=j.next;j.next=null,m===null?d=L:m.next=L,m=j;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,x=Y.lastBaseUpdate,x!==m&&(x===null?Y.firstBaseUpdate=L:x.next=L,Y.lastBaseUpdate=j))}if(d!==null){var K=c.baseState;m=0,Y=L=j=null,x=d;do{var B=x.lane&-536870913,H=B!==x.lane;if(H?(Oe&B)===B:(n&B)===B){B!==0&&B===on&&(So=!0),Y!==null&&(Y=Y.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var re=e,ge=x;B=t;var Ie=a;switch(ge.tag){case 1:if(re=ge.payload,typeof re=="function"){K=re.call(Ie,K,B);break e}K=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ge.payload,B=typeof re=="function"?re.call(Ie,K,B):re,B==null)break e;K=y({},K,B);break e;case 2:Ia=!0}}B=x.callback,B!==null&&(e.flags|=64,H&&(e.flags|=8192),H=c.callbacks,H===null?c.callbacks=[B]:H.push(B))}else H={lane:B,tag:x.tag,payload:x.payload,callback:x.callback,next:null},Y===null?(L=Y=H,j=K):Y=Y.next=H,m|=B;if(x=x.next,x===null){if(x=c.shared.pending,x===null)break;H=x,x=H.next,H.next=null,c.lastBaseUpdate=H,c.shared.pending=null}}while(!0);Y===null&&(j=K),c.baseState=j,c.firstBaseUpdate=L,c.lastBaseUpdate=Y,d===null&&(c.shared.lanes=0),Xa|=m,e.lanes=m,e.memoizedState=K}}function Jd(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Xd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Jd(a[e],t)}var hn=S(null),vi=S(0);function Zd(e,t){e=Oa,Q(vi,e),Q(hn,t),Oa=e|t.baseLanes}function jo(){Q(vi,Oa),Q(hn,hn.current)}function _o(){Oa=vi.current,E(hn),E(vi)}var Bt=S(null),Wt=null;function Pa(e){var t=e.alternate;Q(tt,tt.current&1),Q(Bt,e),Wt===null&&(t===null||hn.current!==null||t.memoizedState!==null)&&(Wt=e)}function No(e){Q(tt,tt.current),Q(Bt,e),Wt===null&&(Wt=e)}function Fd(e){e.tag===22?(Q(tt,tt.current),Q(Bt,e),Wt===null&&(Wt=e)):Ka()}function Ka(){Q(tt,tt.current),Q(Bt,Bt.current)}function qt(e){E(Bt),Wt===e&&(Wt=null),E(tt)}var tt=S(0);function yi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Cc(a)||Rc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sa=0,Se=null,$e=null,nt=null,wi=!1,fn=!1,Ts=!1,Si=0,cl=0,mn=null,Bp=0;function We(){throw Error(i(321))}function ko(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!zt(e[a],t[a]))return!1;return!0}function Eo(e,t,a,n,c,d){return Sa=d,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?Uh:Vo,Ts=!1,d=a(n,c),Ts=!1,fn&&(d=eh(t,a,n,c)),Wd(e),d}function Wd(e){U.H=hl;var t=$e!==null&&$e.next!==null;if(Sa=0,nt=$e=Se=null,wi=!1,cl=0,mn=null,t)throw Error(i(300));e===null||lt||(e=e.dependencies,e!==null&&hi(e)&&(lt=!0))}function eh(e,t,a,n){Se=e;var c=0;do{if(fn&&(mn=null),cl=0,fn=!1,25<=c)throw Error(i(301));if(c+=1,nt=$e=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}U.H=zh,d=t(a,n)}while(fn);return d}function qp(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?ul(t):t,e=e.useState()[0],($e!==null?$e.memoizedState:null)!==e&&(Se.flags|=1024),t}function To(){var e=Si!==0;return Si=0,e}function Ao(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Oo(e){if(wi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wi=!1}Sa=0,nt=$e=Se=null,fn=!1,cl=Si=0,mn=null}function jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Se.memoizedState=nt=e:nt=nt.next=e,nt}function at(){if($e===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=nt===null?Se.memoizedState:nt.next;if(t!==null)nt=t,$e=e;else{if(e===null)throw Se.alternate===null?Error(i(467)):Error(i(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},nt===null?Se.memoizedState=nt=e:nt=nt.next=e}return nt}function ji(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(e){var t=cl;return cl+=1,mn===null&&(mn=[]),e=Gd(mn,e,t),t=Se,(nt===null?t.memoizedState:nt.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?Uh:Vo),e}function _i(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ul(e);if(e.$$typeof===O)return pt(e)}throw Error(i(438,String(e)))}function Co(e){var t=null,a=Se.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=Se.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=ji(),Se.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=Ne;return t.index++,a}function ja(e,t){return typeof t=="function"?t(e):t}function Ni(e){var t=at();return Ro(t,$e,e)}function Ro(e,t,a){var n=e.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=a;var c=e.baseQueue,d=n.pending;if(d!==null){if(c!==null){var m=c.next;c.next=d.next,d.next=m}t.baseQueue=c=d,n.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var x=m=null,j=null,L=t,Y=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(Oe&K)===K:(Sa&K)===K){var B=L.revertLane;if(B===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===on&&(Y=!0);else if((Sa&B)===B){L=L.next,B===on&&(Y=!0);continue}else K={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},j===null?(x=j=K,m=d):j=j.next=K,Se.lanes|=B,Xa|=B;K=L.action,Ts&&a(d,K),d=L.hasEagerState?L.eagerState:a(d,K)}else B={lane:K,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},j===null?(x=j=B,m=d):j=j.next=B,Se.lanes|=K,Xa|=K;L=L.next}while(L!==null&&L!==t);if(j===null?m=d:j.next=x,!zt(d,e.memoizedState)&&(lt=!0,Y&&(a=cn,a!==null)))throw a;e.memoizedState=d,e.baseState=m,e.baseQueue=j,n.lastRenderedState=d}return c===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Do(e){var t=at(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var n=a.dispatch,c=a.pending,d=t.memoizedState;if(c!==null){a.pending=null;var m=c=c.next;do d=e(d,m.action),m=m.next;while(m!==c);zt(d,t.memoizedState)||(lt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),a.lastRenderedState=d}return[d,n]}function th(e,t,a){var n=Se,c=at(),d=Re;if(d){if(a===void 0)throw Error(i(407));a=a()}else a=t();var m=!zt(($e||c).memoizedState,a);if(m&&(c.memoizedState=a,lt=!0),c=c.queue,zo(nh.bind(null,n,c,e),[e]),c.getSnapshot!==t||m||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,gn(9,{destroy:void 0},sh.bind(null,n,c,a,t),null),Ye===null)throw Error(i(349));d||(Sa&127)!==0||ah(n,t,a)}return a}function ah(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Se.updateQueue,t===null?(t=ji(),Se.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function sh(e,t,a,n){t.value=a,t.getSnapshot=n,lh(t)&&ih(e)}function nh(e,t,a){return a(function(){lh(t)&&ih(e)})}function lh(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!zt(e,a)}catch{return!0}}function ih(e){var t=vs(e,2);t!==null&&Rt(t,e,2)}function Mo(e){var t=jt();if(typeof e=="function"){var a=e;if(e=a(),Ts){Nt(!0);try{a()}finally{Nt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:e},t}function rh(e,t,a,n){return e.baseState=a,Ro(e,$e,typeof n=="function"?n:ja)}function Hp(e,t,a,n,c){if(Ti(e))throw Error(i(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){d.listeners.push(m)}};U.T!==null?a(!0):d.isTransition=!1,n(d),a=t.pending,a===null?(d.next=t.pending=d,oh(t,d)):(d.next=a.next,t.pending=a.next=d)}}function oh(e,t){var a=t.action,n=t.payload,c=e.state;if(t.isTransition){var d=U.T,m={};U.T=m;try{var x=a(c,n),j=U.S;j!==null&&j(m,x),ch(e,t,x)}catch(L){Uo(e,t,L)}finally{d!==null&&m.types!==null&&(d.types=m.types),U.T=d}}else try{d=a(c,n),ch(e,t,d)}catch(L){Uo(e,t,L)}}function ch(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){uh(e,t,n)},function(n){return Uo(e,t,n)}):uh(e,t,a)}function uh(e,t,a){t.status="fulfilled",t.value=a,dh(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,oh(e,a)))}function Uo(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,dh(t),t=t.next;while(t!==n)}e.action=null}function dh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hh(e,t){return t}function fh(e,t){if(Re){var a=Ye.formState;if(a!==null){e:{var n=Se;if(Re){if(Ke){t:{for(var c=Ke,d=Ft;c.nodeType!==8;){if(!d){c=null;break t}if(c=ea(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Ke=ea(c.nextSibling),n=c.data==="F!";break e}}$a(n)}n=!1}n&&(t=a[0])}}return a=jt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hh,lastRenderedState:t},a.queue=n,a=Rh.bind(null,Se,n),n.dispatch=a,n=Mo(!1),d=$o.bind(null,Se,!1,n.queue),n=jt(),c={state:t,dispatch:null,action:e,pending:null},n.queue=c,a=Hp.bind(null,Se,c,d,a),c.dispatch=a,n.memoizedState=e,[t,a,!1]}function mh(e){var t=at();return gh(t,$e,e)}function gh(e,t,a){if(t=Ro(e,t,hh)[0],e=Ni(ja)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=ul(t)}catch(m){throw m===un?gi:m}else n=t;t=at();var c=t.queue,d=c.dispatch;return a!==t.memoizedState&&(Se.flags|=2048,gn(9,{destroy:void 0},$p.bind(null,c,a),null)),[n,d,e]}function $p(e,t){e.action=t}function ph(e){var t=at(),a=$e;if(a!==null)return gh(t,a,e);at(),t=t.memoizedState,a=at();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function gn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=Se.updateQueue,t===null&&(t=ji(),Se.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function bh(){return at().memoizedState}function ki(e,t,a,n){var c=jt();Se.flags|=e,c.memoizedState=gn(1|t,{destroy:void 0},a,n===void 0?null:n)}function Ei(e,t,a,n){var c=at();n=n===void 0?null:n;var d=c.memoizedState.inst;$e!==null&&n!==null&&ko(n,$e.memoizedState.deps)?c.memoizedState=gn(t,d,a,n):(Se.flags|=e,c.memoizedState=gn(1|t,d,a,n))}function xh(e,t){ki(8390656,8,e,t)}function zo(e,t){Ei(2048,8,e,t)}function Vp(e){Se.flags|=4;var t=Se.updateQueue;if(t===null)t=ji(),Se.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function vh(e){var t=at().memoizedState;return Vp({ref:t,nextImpl:e}),function(){if((ze&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function yh(e,t){return Ei(4,2,e,t)}function wh(e,t){return Ei(4,4,e,t)}function Sh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jh(e,t,a){a=a!=null?a.concat([e]):null,Ei(4,4,Sh.bind(null,t,e),a)}function Lo(){}function _h(e,t){var a=at();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&ko(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Nh(e,t){var a=at();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&ko(t,n[1]))return n[0];if(n=e(),Ts){Nt(!0);try{e()}finally{Nt(!1)}}return a.memoizedState=[n,t],n}function Bo(e,t,a){return a===void 0||(Sa&1073741824)!==0&&(Oe&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Ef(),Se.lanes|=e,Xa|=e,a)}function kh(e,t,a,n){return zt(a,t)?a:hn.current!==null?(e=Bo(e,a,n),zt(e,t)||(lt=!0),e):(Sa&42)===0||(Sa&1073741824)!==0&&(Oe&261930)===0?(lt=!0,e.memoizedState=a):(e=Ef(),Se.lanes|=e,Xa|=e,t)}function Eh(e,t,a,n,c){var d=J.p;J.p=d!==0&&8>d?d:8;var m=U.T,x={};U.T=x,$o(e,!1,t,a);try{var j=c(),L=U.S;if(L!==null&&L(x,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var Y=Lp(j,n);dl(e,t,Y,Vt(e))}else dl(e,t,n,Vt(e))}catch(K){dl(e,t,{then:function(){},status:"rejected",reason:K},Vt())}finally{J.p=d,m!==null&&x.types!==null&&(m.types=x.types),U.T=m}}function Ip(){}function qo(e,t,a,n){if(e.tag!==5)throw Error(i(476));var c=Th(e).queue;Eh(e,c,t,te,a===null?Ip:function(){return Ah(e),a(n)})}function Th(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:te},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ah(e){var t=Th(e);t.next===null&&(t=e.alternate.memoizedState),dl(e,t.next.queue,{},Vt())}function Ho(){return pt(Tl)}function Oh(){return at().memoizedState}function Ch(){return at().memoizedState}function Gp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Vt();e=Ga(a);var n=Ya(t,e,a);n!==null&&(Rt(n,t,a),il(n,t,a)),t={cache:go()},e.payload=t;return}t=t.return}}function Yp(e,t,a){var n=Vt();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ti(e)?Dh(t,a):(a=so(e,t,a,n),a!==null&&(Rt(a,e,n),Mh(a,t,n)))}function Rh(e,t,a){var n=Vt();dl(e,t,a,n)}function dl(e,t,a,n){var c={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ti(e))Dh(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,x=d(m,a);if(c.hasEagerState=!0,c.eagerState=x,zt(x,m))return oi(e,t,c,0),Ye===null&&ri(),!1}catch{}finally{}if(a=so(e,t,c,n),a!==null)return Rt(a,e,n),Mh(a,t,n),!0}return!1}function $o(e,t,a,n){if(n={lane:2,revertLane:vc(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ti(e)){if(t)throw Error(i(479))}else t=so(e,a,n,2),t!==null&&Rt(t,e,2)}function Ti(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function Dh(e,t){fn=wi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Mh(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,qu(e,a)}}var hl={readContext:pt,use:_i,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};hl.useEffectEvent=We;var Uh={readContext:pt,use:_i,useCallback:function(e,t){return jt().memoizedState=[e,t===void 0?null:t],e},useContext:pt,useEffect:xh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,ki(4194308,4,Sh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return ki(4194308,4,e,t)},useInsertionEffect:function(e,t){ki(4,2,e,t)},useMemo:function(e,t){var a=jt();t=t===void 0?null:t;var n=e();if(Ts){Nt(!0);try{e()}finally{Nt(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=jt();if(a!==void 0){var c=a(t);if(Ts){Nt(!0);try{a(t)}finally{Nt(!1)}}}else c=t;return n.memoizedState=n.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},n.queue=e,e=e.dispatch=Yp.bind(null,Se,e),[n.memoizedState,e]},useRef:function(e){var t=jt();return e={current:e},t.memoizedState=e},useState:function(e){e=Mo(e);var t=e.queue,a=Rh.bind(null,Se,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Lo,useDeferredValue:function(e,t){var a=jt();return Bo(a,e,t)},useTransition:function(){var e=Mo(!1);return e=Eh.bind(null,Se,e.queue,!0,!1),jt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=Se,c=jt();if(Re){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),Ye===null)throw Error(i(349));(Oe&127)!==0||ah(n,t,a)}c.memoizedState=a;var d={value:a,getSnapshot:t};return c.queue=d,xh(nh.bind(null,n,d,e),[e]),n.flags|=2048,gn(9,{destroy:void 0},sh.bind(null,n,d,a,t),null),a},useId:function(){var e=jt(),t=Ye.identifierPrefix;if(Re){var a=da,n=ua;a=(n&~(1<<32-St(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Si++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Bp++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ho,useFormState:fh,useActionState:fh,useOptimistic:function(e){var t=jt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=$o.bind(null,Se,!0,a),a.dispatch=t,[e,t]},useMemoCache:Co,useCacheRefresh:function(){return jt().memoizedState=Gp.bind(null,Se)},useEffectEvent:function(e){var t=jt(),a={impl:e};return t.memoizedState=a,function(){if((ze&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Vo={readContext:pt,use:_i,useCallback:_h,useContext:pt,useEffect:zo,useImperativeHandle:jh,useInsertionEffect:yh,useLayoutEffect:wh,useMemo:Nh,useReducer:Ni,useRef:bh,useState:function(){return Ni(ja)},useDebugValue:Lo,useDeferredValue:function(e,t){var a=at();return kh(a,$e.memoizedState,e,t)},useTransition:function(){var e=Ni(ja)[0],t=at().memoizedState;return[typeof e=="boolean"?e:ul(e),t]},useSyncExternalStore:th,useId:Oh,useHostTransitionStatus:Ho,useFormState:mh,useActionState:mh,useOptimistic:function(e,t){var a=at();return rh(a,$e,e,t)},useMemoCache:Co,useCacheRefresh:Ch};Vo.useEffectEvent=vh;var zh={readContext:pt,use:_i,useCallback:_h,useContext:pt,useEffect:zo,useImperativeHandle:jh,useInsertionEffect:yh,useLayoutEffect:wh,useMemo:Nh,useReducer:Do,useRef:bh,useState:function(){return Do(ja)},useDebugValue:Lo,useDeferredValue:function(e,t){var a=at();return $e===null?Bo(a,e,t):kh(a,$e.memoizedState,e,t)},useTransition:function(){var e=Do(ja)[0],t=at().memoizedState;return[typeof e=="boolean"?e:ul(e),t]},useSyncExternalStore:th,useId:Oh,useHostTransitionStatus:Ho,useFormState:ph,useActionState:ph,useOptimistic:function(e,t){var a=at();return $e!==null?rh(a,$e,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Co,useCacheRefresh:Ch};zh.useEffectEvent=vh;function Io(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:y({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Go={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Vt(),c=Ga(n);c.payload=t,a!=null&&(c.callback=a),t=Ya(e,c,n),t!==null&&(Rt(t,e,n),il(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Vt(),c=Ga(n);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Ya(e,c,n),t!==null&&(Rt(t,e,n),il(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Vt(),n=Ga(a);n.tag=2,t!=null&&(n.callback=t),t=Ya(e,n,a),t!==null&&(Rt(t,e,a),il(t,e,a))}};function Lh(e,t,a,n,c,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,d,m):t.prototype&&t.prototype.isPureReactComponent?!Fn(a,n)||!Fn(c,d):!0}function Bh(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function As(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=y({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function qh(e){ii(e)}function Hh(e){console.error(e)}function $h(e){ii(e)}function Ai(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Vh(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Yo(e,t,a){return a=Ga(a),a.tag=3,a.payload={element:null},a.callback=function(){Ai(e,t)},a}function Ih(e){return e=Ga(e),e.tag=3,e}function Gh(e,t,a,n){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var d=n.value;e.payload=function(){return c(d)},e.callback=function(){Vh(t,a,n)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Vh(t,a,n),typeof c!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var x=n.stack;this.componentDidCatch(n.value,{componentStack:x!==null?x:""})})}function Pp(e,t,a,n,c){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&rn(t,a,c,!0),a=Bt.current,a!==null){switch(a.tag){case 31:case 13:return Wt===null?$i():a.alternate===null&&et===0&&(et=3),a.flags&=-257,a.flags|=65536,a.lanes=c,n===pi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),pc(e,n,c)),!1;case 22:return a.flags|=65536,n===pi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),pc(e,n,c)),!1}throw Error(i(435,a.tag))}return pc(e,n,c),$i(),!1}if(Re)return t=Bt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,n!==co&&(e=Error(i(422),{cause:n}),tl(Jt(e,a)))):(n!==co&&(t=Error(i(423),{cause:n}),tl(Jt(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,n=Jt(n,a),c=Yo(e.stateNode,n,c),wo(e,c),et!==4&&(et=2)),!1;var d=Error(i(520),{cause:n});if(d=Jt(d,a),yl===null?yl=[d]:yl.push(d),et!==4&&(et=2),t===null)return!0;n=Jt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Yo(a.stateNode,n,e),wo(a,e),!1;case 1:if(t=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Za===null||!Za.has(d))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Ih(c),Gh(c,e,a,n),wo(a,c),!1}a=a.return}while(a!==null);return!1}var Po=Error(i(461)),lt=!1;function bt(e,t,a,n){t.child=e===null?Qd(t,null,a,n):Es(t,e.child,a,n)}function Yh(e,t,a,n,c){a=a.render;var d=t.ref;if("ref"in n){var m={};for(var x in n)x!=="ref"&&(m[x]=n[x])}else m=n;return js(t),n=Eo(e,t,a,m,d,c),x=To(),e!==null&&!lt?(Ao(e,t,c),_a(e,t,c)):(Re&&x&&ro(t),t.flags|=1,bt(e,t,n,c),t.child)}function Ph(e,t,a,n,c){if(e===null){var d=a.type;return typeof d=="function"&&!no(d)&&d.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=d,Kh(e,t,d,n,c)):(e=ui(a.type,null,n,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!ec(e,c)){var m=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fn,a(m,n)&&e.ref===t.ref)return _a(e,t,c)}return t.flags|=1,e=xa(d,n),e.ref=t.ref,e.return=t,t.child=e}function Kh(e,t,a,n,c){if(e!==null){var d=e.memoizedProps;if(Fn(d,n)&&e.ref===t.ref)if(lt=!1,t.pendingProps=n=d,ec(e,c))(e.flags&131072)!==0&&(lt=!0);else return t.lanes=e.lanes,_a(e,t,c)}return Ko(e,t,a,n,c)}function Qh(e,t,a,n){var c=n.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(n=t.child=e.child,c=0;n!==null;)c=c|n.lanes|n.childLanes,n=n.sibling;n=c&~d}else n=0,t.child=null;return Jh(e,t,d,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&mi(t,d!==null?d.cachePool:null),d!==null?Zd(t,d):jo(),Fd(t);else return n=t.lanes=536870912,Jh(e,t,d!==null?d.baseLanes|a:a,a,n)}else d!==null?(mi(t,d.cachePool),Zd(t,d),Ka(),t.memoizedState=null):(e!==null&&mi(t,null),jo(),Ka());return bt(e,t,c,a),t.child}function fl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Jh(e,t,a,n,c){var d=bo();return d=d===null?null:{parent:st._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&mi(t,null),jo(),Fd(t),e!==null&&rn(e,t,n,!0),t.childLanes=c,null}function Oi(e,t){return t=Ri({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Xh(e,t,a){return Es(t,e.child,null,a),e=Oi(t,t.pendingProps),e.flags|=2,qt(t),t.memoizedState=null,e}function Kp(e,t,a){var n=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Re){if(n.mode==="hidden")return e=Oi(t,n),t.lanes=536870912,fl(null,e);if(No(t),(e=Ke)?(e=c0(e,Ft),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:qa!==null?{id:ua,overflow:da}:null,retryLane:536870912,hydrationErrors:null},a=Dd(e),a.return=t,t.child=a,gt=t,Ke=null)):e=null,e===null)throw $a(t);return t.lanes=536870912,null}return Oi(t,n)}var d=e.memoizedState;if(d!==null){var m=d.dehydrated;if(No(t),c)if(t.flags&256)t.flags&=-257,t=Xh(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(lt||rn(e,t,a,!1),c=(a&e.childLanes)!==0,lt||c){if(n=Ye,n!==null&&(m=Hu(n,a),m!==0&&m!==d.retryLane))throw d.retryLane=m,vs(e,m),Rt(n,e,m),Po;$i(),t=Xh(e,t,a)}else e=d.treeContext,Ke=ea(m.nextSibling),gt=t,Re=!0,Ha=null,Ft=!1,e!==null&&zd(t,e),t=Oi(t,n),t.flags|=4096;return t}return e=xa(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ci(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Ko(e,t,a,n,c){return js(t),a=Eo(e,t,a,n,void 0,c),n=To(),e!==null&&!lt?(Ao(e,t,c),_a(e,t,c)):(Re&&n&&ro(t),t.flags|=1,bt(e,t,a,c),t.child)}function Zh(e,t,a,n,c,d){return js(t),t.updateQueue=null,a=eh(t,n,a,c),Wd(e),n=To(),e!==null&&!lt?(Ao(e,t,d),_a(e,t,d)):(Re&&n&&ro(t),t.flags|=1,bt(e,t,a,d),t.child)}function Fh(e,t,a,n,c){if(js(t),t.stateNode===null){var d=an,m=a.contextType;typeof m=="object"&&m!==null&&(d=pt(m)),d=new a(n,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Go,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=n,d.state=t.memoizedState,d.refs={},vo(t),m=a.contextType,d.context=typeof m=="object"&&m!==null?pt(m):an,d.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(Io(t,a,m,n),d.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(m=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),m!==d.state&&Go.enqueueReplaceState(d,d.state,null),ol(t,n,d,c),rl(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){d=t.stateNode;var x=t.memoizedProps,j=As(a,x);d.props=j;var L=d.context,Y=a.contextType;m=an,typeof Y=="object"&&Y!==null&&(m=pt(Y));var K=a.getDerivedStateFromProps;Y=typeof K=="function"||typeof d.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(x||L!==m)&&Bh(t,d,n,m),Ia=!1;var B=t.memoizedState;d.state=B,ol(t,n,d,c),rl(),L=t.memoizedState,x||B!==L||Ia?(typeof K=="function"&&(Io(t,a,K,n),L=t.memoizedState),(j=Ia||Lh(t,a,j,n,B,L,m))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=L),d.props=n,d.state=L,d.context=m,n=j):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{d=t.stateNode,yo(e,t),m=t.memoizedProps,Y=As(a,m),d.props=Y,K=t.pendingProps,B=d.context,L=a.contextType,j=an,typeof L=="object"&&L!==null&&(j=pt(L)),x=a.getDerivedStateFromProps,(L=typeof x=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==K||B!==j)&&Bh(t,d,n,j),Ia=!1,B=t.memoizedState,d.state=B,ol(t,n,d,c),rl();var H=t.memoizedState;m!==K||B!==H||Ia||e!==null&&e.dependencies!==null&&hi(e.dependencies)?(typeof x=="function"&&(Io(t,a,x,n),H=t.memoizedState),(Y=Ia||Lh(t,a,Y,n,B,H,j)||e!==null&&e.dependencies!==null&&hi(e.dependencies))?(L||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,H,j),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,H,j)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=H),d.props=n,d.state=H,d.context=j,n=Y):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),n=!1)}return d=n,Ci(e,t),n=(t.flags&128)!==0,d||n?(d=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&n?(t.child=Es(t,e.child,null,c),t.child=Es(t,null,a,c)):bt(e,t,a,c),t.memoizedState=d.state,e=t.child):e=_a(e,t,c),e}function Wh(e,t,a,n){return ws(),t.flags|=256,bt(e,t,a,n),t.child}var Qo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jo(e){return{baseLanes:e,cachePool:Vd()}}function Xo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=$t),e}function ef(e,t,a){var n=t.pendingProps,c=!1,d=(t.flags&128)!==0,m;if((m=d)||(m=e!==null&&e.memoizedState===null?!1:(tt.current&2)!==0),m&&(c=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Re){if(c?Pa(t):Ka(),(e=Ke)?(e=c0(e,Ft),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:qa!==null?{id:ua,overflow:da}:null,retryLane:536870912,hydrationErrors:null},a=Dd(e),a.return=t,t.child=a,gt=t,Ke=null)):e=null,e===null)throw $a(t);return Rc(e)?t.lanes=32:t.lanes=536870912,null}var x=n.children;return n=n.fallback,c?(Ka(),c=t.mode,x=Ri({mode:"hidden",children:x},c),n=ys(n,c,a,null),x.return=t,n.return=t,x.sibling=n,t.child=x,n=t.child,n.memoizedState=Jo(a),n.childLanes=Xo(e,m,a),t.memoizedState=Qo,fl(null,n)):(Pa(t),Zo(t,x))}var j=e.memoizedState;if(j!==null&&(x=j.dehydrated,x!==null)){if(d)t.flags&256?(Pa(t),t.flags&=-257,t=Fo(e,t,a)):t.memoizedState!==null?(Ka(),t.child=e.child,t.flags|=128,t=null):(Ka(),x=n.fallback,c=t.mode,n=Ri({mode:"visible",children:n.children},c),x=ys(x,c,a,null),x.flags|=2,n.return=t,x.return=t,n.sibling=x,t.child=n,Es(t,e.child,null,a),n=t.child,n.memoizedState=Jo(a),n.childLanes=Xo(e,m,a),t.memoizedState=Qo,t=fl(null,n));else if(Pa(t),Rc(x)){if(m=x.nextSibling&&x.nextSibling.dataset,m)var L=m.dgst;m=L,n=Error(i(419)),n.stack="",n.digest=m,tl({value:n,source:null,stack:null}),t=Fo(e,t,a)}else if(lt||rn(e,t,a,!1),m=(a&e.childLanes)!==0,lt||m){if(m=Ye,m!==null&&(n=Hu(m,a),n!==0&&n!==j.retryLane))throw j.retryLane=n,vs(e,n),Rt(m,e,n),Po;Cc(x)||$i(),t=Fo(e,t,a)}else Cc(x)?(t.flags|=192,t.child=e.child,t=null):(e=j.treeContext,Ke=ea(x.nextSibling),gt=t,Re=!0,Ha=null,Ft=!1,e!==null&&zd(t,e),t=Zo(t,n.children),t.flags|=4096);return t}return c?(Ka(),x=n.fallback,c=t.mode,j=e.child,L=j.sibling,n=xa(j,{mode:"hidden",children:n.children}),n.subtreeFlags=j.subtreeFlags&65011712,L!==null?x=xa(L,x):(x=ys(x,c,a,null),x.flags|=2),x.return=t,n.return=t,n.sibling=x,t.child=n,fl(null,n),n=t.child,x=e.child.memoizedState,x===null?x=Jo(a):(c=x.cachePool,c!==null?(j=st._currentValue,c=c.parent!==j?{parent:j,pool:j}:c):c=Vd(),x={baseLanes:x.baseLanes|a,cachePool:c}),n.memoizedState=x,n.childLanes=Xo(e,m,a),t.memoizedState=Qo,fl(e.child,n)):(Pa(t),a=e.child,e=a.sibling,a=xa(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function Zo(e,t){return t=Ri({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ri(e,t){return e=Lt(22,e,null,t),e.lanes=0,e}function Fo(e,t,a){return Es(t,e.child,null,a),e=Zo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tf(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),fo(e.return,t,a)}function Wo(e,t,a,n,c,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:c,treeForkCount:d}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=n,m.tail=a,m.tailMode=c,m.treeForkCount=d)}function af(e,t,a){var n=t.pendingProps,c=n.revealOrder,d=n.tail;n=n.children;var m=tt.current,x=(m&2)!==0;if(x?(m=m&1|2,t.flags|=128):m&=1,Q(tt,m),bt(e,t,n,a),n=Re?el:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tf(e,a,t);else if(e.tag===19)tf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&yi(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),Wo(t,!1,c,a,d,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&yi(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Wo(t,!0,a,null,d,n);break;case"together":Wo(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function _a(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Xa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(rn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=xa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=xa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function ec(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&hi(e)))}function Qp(e,t,a){switch(t.tag){case 3:Xe(t,t.stateNode.containerInfo),Va(t,st,e.memoizedState.cache),ws();break;case 27:case 5:ot(t);break;case 4:Xe(t,t.stateNode.containerInfo);break;case 10:Va(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,No(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Pa(t),t.flags|=128,null):(a&t.child.childLanes)!==0?ef(e,t,a):(Pa(t),e=_a(e,t,a),e!==null?e.sibling:null);Pa(t);break;case 19:var c=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(rn(e,t,a,!1),n=(a&t.childLanes)!==0),c){if(n)return af(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Q(tt,tt.current),n)break;return null;case 22:return t.lanes=0,Qh(e,t,a,t.pendingProps);case 24:Va(t,st,e.memoizedState.cache)}return _a(e,t,a)}function sf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)lt=!0;else{if(!ec(e,a)&&(t.flags&128)===0)return lt=!1,Qp(e,t,a);lt=(e.flags&131072)!==0}else lt=!1,Re&&(t.flags&1048576)!==0&&Ud(t,el,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=Ns(t.elementType),t.type=e,typeof e=="function")no(e)?(n=As(e,n),t.tag=1,t=Fh(null,t,e,n,a)):(t.tag=0,t=Ko(null,t,e,n,a));else{if(e!=null){var c=e.$$typeof;if(c===T){t.tag=11,t=Yh(null,t,e,n,a);break e}else if(c===$){t.tag=14,t=Ph(null,t,e,n,a);break e}}throw t=de(e)||e,Error(i(306,t,""))}}return t;case 0:return Ko(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,c=As(n,t.pendingProps),Fh(e,t,n,c,a);case 3:e:{if(Xe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));n=t.pendingProps;var d=t.memoizedState;c=d.element,yo(e,t),ol(t,n,null,a);var m=t.memoizedState;if(n=m.cache,Va(t,st,n),n!==d.cache&&mo(t,[st],a,!0),rl(),n=m.element,d.isDehydrated)if(d={element:n,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=Wh(e,t,n,a);break e}else if(n!==c){c=Jt(Error(i(424)),t),tl(c),t=Wh(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ke=ea(e.firstChild),gt=t,Re=!0,Ha=null,Ft=!0,a=Qd(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ws(),n===c){t=_a(e,t,a);break e}bt(e,t,n,a)}t=t.child}return t;case 26:return Ci(e,t),e===null?(a=g0(t.type,null,t.pendingProps,null))?t.memoizedState=a:Re||(a=t.type,e=t.pendingProps,n=Qi(oe.current).createElement(a),n[mt]=t,n[kt]=e,xt(n,a,e),ht(n),t.stateNode=n):t.memoizedState=g0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ot(t),e===null&&Re&&(n=t.stateNode=h0(t.type,t.pendingProps,oe.current),gt=t,Ft=!0,c=Ke,ts(t.type)?(Dc=c,Ke=ea(n.firstChild)):Ke=c),bt(e,t,t.pendingProps.children,a),Ci(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Re&&((c=n=Ke)&&(n=_b(n,t.type,t.pendingProps,Ft),n!==null?(t.stateNode=n,gt=t,Ke=ea(n.firstChild),Ft=!1,c=!0):c=!1),c||$a(t)),ot(t),c=t.type,d=t.pendingProps,m=e!==null?e.memoizedProps:null,n=d.children,Tc(c,d)?n=null:m!==null&&Tc(c,m)&&(t.flags|=32),t.memoizedState!==null&&(c=Eo(e,t,qp,null,null,a),Tl._currentValue=c),Ci(e,t),bt(e,t,n,a),t.child;case 6:return e===null&&Re&&((e=a=Ke)&&(a=Nb(a,t.pendingProps,Ft),a!==null?(t.stateNode=a,gt=t,Ke=null,e=!0):e=!1),e||$a(t)),null;case 13:return ef(e,t,a);case 4:return Xe(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Es(t,null,n,a):bt(e,t,n,a),t.child;case 11:return Yh(e,t,t.type,t.pendingProps,a);case 7:return bt(e,t,t.pendingProps,a),t.child;case 8:return bt(e,t,t.pendingProps.children,a),t.child;case 12:return bt(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Va(t,t.type,n.value),bt(e,t,n.children,a),t.child;case 9:return c=t.type._context,n=t.pendingProps.children,js(t),c=pt(c),n=n(c),t.flags|=1,bt(e,t,n,a),t.child;case 14:return Ph(e,t,t.type,t.pendingProps,a);case 15:return Kh(e,t,t.type,t.pendingProps,a);case 19:return af(e,t,a);case 31:return Kp(e,t,a);case 22:return Qh(e,t,a,t.pendingProps);case 24:return js(t),n=pt(st),e===null?(c=bo(),c===null&&(c=Ye,d=go(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=a),c=d),t.memoizedState={parent:n,cache:c},vo(t),Va(t,st,c)):((e.lanes&a)!==0&&(yo(e,t),ol(t,null,null,a),rl()),c=e.memoizedState,d=t.memoizedState,c.parent!==n?(c={parent:n,cache:n},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Va(t,st,n)):(n=d.cache,Va(t,st,n),n!==c.cache&&mo(t,[st],a,!0))),bt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Na(e){e.flags|=4}function tc(e,t,a,n,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Cf())e.flags|=8192;else throw ks=pi,xo}else e.flags&=-16777217}function nf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!y0(t))if(Cf())e.flags|=8192;else throw ks=pi,xo}function Di(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Lu():536870912,e.lanes|=t,vn|=t)}function ml(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,n|=c.subtreeFlags&65011712,n|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,n|=c.subtreeFlags,n|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function Jp(e,t,a){var n=t.pendingProps;switch(oo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wa(st),Ge(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ln(t)?Na(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,uo())),Qe(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(Na(t),d!==null?(Qe(t),nf(t,d)):(Qe(t),tc(t,c,null,n,a))):d?d!==e.memoizedState?(Na(t),Qe(t),nf(t,d)):(Qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&Na(t),Qe(t),tc(t,c,e,n,a)),null;case 27:if(Ma(t),a=oe.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Na(t);else{if(!n){if(t.stateNode===null)throw Error(i(166));return Qe(t),null}e=F.current,ln(t)?Ld(t):(e=h0(c,n,a),t.stateNode=e,Na(t))}return Qe(t),null;case 5:if(Ma(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Na(t);else{if(!n){if(t.stateNode===null)throw Error(i(166));return Qe(t),null}if(d=F.current,ln(t))Ld(t);else{var m=Qi(oe.current);switch(d){case 1:d=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=m.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof n.is=="string"?m.createElement("select",{is:n.is}):m.createElement("select"),n.multiple?d.multiple=!0:n.size&&(d.size=n.size);break;default:d=typeof n.is=="string"?m.createElement(c,{is:n.is}):m.createElement(c)}}d[mt]=t,d[kt]=n;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)d.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=d;e:switch(xt(d,c,n),c){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Na(t)}}return Qe(t),tc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&Na(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(i(166));if(e=oe.current,ln(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,c=gt,c!==null)switch(c.tag){case 27:case 5:n=c.memoizedProps}e[mt]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||t0(e.nodeValue,a)),e||$a(t,!0)}else e=Qi(e).createTextNode(n),e[mt]=t,t.stateNode=e}return Qe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=ln(t),a!==null){if(e===null){if(!n)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[mt]=t}else ws(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),e=!1}else a=uo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(qt(t),t):(qt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Qe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ln(t),n!==null&&n.dehydrated!==null){if(e===null){if(!c)throw Error(i(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));c[mt]=t}else ws(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),c=!1}else c=uo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(qt(t),t):(qt(t),null)}return qt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,c=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(c=n.alternate.memoizedState.cachePool.pool),d=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),d!==c&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Di(t,t.updateQueue),Qe(t),null);case 4:return Ge(),e===null&&jc(t.stateNode.containerInfo),Qe(t),null;case 10:return wa(t.type),Qe(t),null;case 19:if(E(tt),n=t.memoizedState,n===null)return Qe(t),null;if(c=(t.flags&128)!==0,d=n.rendering,d===null)if(c)ml(n,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=yi(e),d!==null){for(t.flags|=128,ml(n,!1),e=d.updateQueue,t.updateQueue=e,Di(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Rd(a,e),a=a.sibling;return Q(tt,tt.current&1|2),Re&&va(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&dt()>Bi&&(t.flags|=128,c=!0,ml(n,!1),t.lanes=4194304)}else{if(!c)if(e=yi(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Di(t,e),ml(n,!0),n.tail===null&&n.tailMode==="hidden"&&!d.alternate&&!Re)return Qe(t),null}else 2*dt()-n.renderingStartTime>Bi&&a!==536870912&&(t.flags|=128,c=!0,ml(n,!1),t.lanes=4194304);n.isBackwards?(d.sibling=t.child,t.child=d):(e=n.last,e!==null?e.sibling=d:t.child=d,n.last=d)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=dt(),e.sibling=null,a=tt.current,Q(tt,c?a&1|2:a&1),Re&&va(t,n.treeForkCount),e):(Qe(t),null);case 22:case 23:return qt(t),_o(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),a=t.updateQueue,a!==null&&Di(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&E(_s),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),wa(st),Qe(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Xp(e,t){switch(oo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wa(st),Ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ma(t),null;case 31:if(t.memoizedState!==null){if(qt(t),t.alternate===null)throw Error(i(340));ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return E(tt),null;case 4:return Ge(),null;case 10:return wa(t.type),null;case 22:case 23:return qt(t),_o(),e!==null&&E(_s),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return wa(st),null;case 25:return null;default:return null}}function lf(e,t){switch(oo(t),t.tag){case 3:wa(st),Ge();break;case 26:case 27:case 5:Ma(t);break;case 4:Ge();break;case 31:t.memoizedState!==null&&qt(t);break;case 13:qt(t);break;case 19:E(tt);break;case 10:wa(t.type);break;case 22:case 23:qt(t),_o(),e!==null&&E(_s);break;case 24:wa(st)}}function gl(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var c=n.next;a=c;do{if((a.tag&e)===e){n=void 0;var d=a.create,m=a.inst;n=d(),m.destroy=n}a=a.next}while(a!==c)}}catch(x){He(t,t.return,x)}}function Qa(e,t,a){try{var n=t.updateQueue,c=n!==null?n.lastEffect:null;if(c!==null){var d=c.next;n=d;do{if((n.tag&e)===e){var m=n.inst,x=m.destroy;if(x!==void 0){m.destroy=void 0,c=t;var j=a,L=x;try{L()}catch(Y){He(c,j,Y)}}}n=n.next}while(n!==d)}}catch(Y){He(t,t.return,Y)}}function rf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Xd(t,a)}catch(n){He(e,e.return,n)}}}function of(e,t,a){a.props=As(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){He(e,t,n)}}function pl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(c){He(e,t,c)}}function ha(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(c){He(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){He(e,t,c)}else a.current=null}function cf(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(c){He(e,e.return,c)}}function ac(e,t,a){try{var n=e.stateNode;xb(n,e.type,a,t),n[kt]=t}catch(c){He(e,e.return,c)}}function uf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ts(e.type)||e.tag===4}function sc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ts(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nc(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=pa));else if(n!==4&&(n===27&&ts(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(nc(e,t,a),e=e.sibling;e!==null;)nc(e,t,a),e=e.sibling}function Mi(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&ts(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Mi(e,t,a),e=e.sibling;e!==null;)Mi(e,t,a),e=e.sibling}function df(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);xt(t,n,a),t[mt]=e,t[kt]=a}catch(d){He(e,e.return,d)}}var ka=!1,it=!1,lc=!1,hf=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Zp(e,t){if(e=e.containerInfo,kc=tr,e=jd(e),Zr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var c=n.anchorOffset,d=n.focusNode;n=n.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var m=0,x=-1,j=-1,L=0,Y=0,K=e,B=null;t:for(;;){for(var H;K!==a||c!==0&&K.nodeType!==3||(x=m+c),K!==d||n!==0&&K.nodeType!==3||(j=m+n),K.nodeType===3&&(m+=K.nodeValue.length),(H=K.firstChild)!==null;)B=K,K=H;for(;;){if(K===e)break t;if(B===a&&++L===c&&(x=m),B===d&&++Y===n&&(j=m),(H=K.nextSibling)!==null)break;K=B,B=K.parentNode}K=H}a=x===-1||j===-1?null:{start:x,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ec={focusedElem:e,selectionRange:a},tr=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){switch(t=ft,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=t,c=d.memoizedProps,d=d.memoizedState,n=a.stateNode;try{var re=As(a.type,c);e=n.getSnapshotBeforeUpdate(re,d),n.__reactInternalSnapshotBeforeUpdate=e}catch(ge){He(a,a.return,ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Oc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Oc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}}function ff(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:Ta(e,a),n&4&&gl(5,a);break;case 1:if(Ta(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){He(a,a.return,m)}else{var c=As(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){He(a,a.return,m)}}n&64&&rf(a),n&512&&pl(a,a.return);break;case 3:if(Ta(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Xd(e,t)}catch(m){He(a,a.return,m)}}break;case 27:t===null&&n&4&&df(a);case 26:case 5:Ta(e,a),t===null&&n&4&&cf(a),n&512&&pl(a,a.return);break;case 12:Ta(e,a);break;case 31:Ta(e,a),n&4&&pf(e,a);break;case 13:Ta(e,a),n&4&&bf(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=ib.bind(null,a),kb(e,a))));break;case 22:if(n=a.memoizedState!==null||ka,!n){t=t!==null&&t.memoizedState!==null||it,c=ka;var d=it;ka=n,(it=t)&&!d?Aa(e,a,(a.subtreeFlags&8772)!==0):Ta(e,a),ka=c,it=d}break;case 30:break;default:Ta(e,a)}}function mf(e){var t=e.alternate;t!==null&&(e.alternate=null,mf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Mr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Je=null,Tt=!1;function Ea(e,t,a){for(a=a.child;a!==null;)gf(e,t,a),a=a.sibling}function gf(e,t,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Ut,a)}catch{}switch(a.tag){case 26:it||ha(a,t),Ea(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:it||ha(a,t);var n=Je,c=Tt;ts(a.type)&&(Je=a.stateNode,Tt=!1),Ea(e,t,a),Nl(a.stateNode),Je=n,Tt=c;break;case 5:it||ha(a,t);case 6:if(n=Je,c=Tt,Je=null,Ea(e,t,a),Je=n,Tt=c,Je!==null)if(Tt)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(a.stateNode)}catch(d){He(a,t,d)}else try{Je.removeChild(a.stateNode)}catch(d){He(a,t,d)}break;case 18:Je!==null&&(Tt?(e=Je,r0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),En(e)):r0(Je,a.stateNode));break;case 4:n=Je,c=Tt,Je=a.stateNode.containerInfo,Tt=!0,Ea(e,t,a),Je=n,Tt=c;break;case 0:case 11:case 14:case 15:Qa(2,a,t),it||Qa(4,a,t),Ea(e,t,a);break;case 1:it||(ha(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&of(a,t,n)),Ea(e,t,a);break;case 21:Ea(e,t,a);break;case 22:it=(n=it)||a.memoizedState!==null,Ea(e,t,a),it=n;break;default:Ea(e,t,a)}}function pf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{En(e)}catch(a){He(t,t.return,a)}}}function bf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{En(e)}catch(a){He(t,t.return,a)}}function Fp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new hf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new hf),t;default:throw Error(i(435,e.tag))}}function Ui(e,t){var a=Fp(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var c=rb.bind(null,e,n);n.then(c,c)}})}function At(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var c=a[n],d=e,m=t,x=m;e:for(;x!==null;){switch(x.tag){case 27:if(ts(x.type)){Je=x.stateNode,Tt=!1;break e}break;case 5:Je=x.stateNode,Tt=!1;break e;case 3:case 4:Je=x.stateNode.containerInfo,Tt=!0;break e}x=x.return}if(Je===null)throw Error(i(160));gf(d,m,c),Je=null,Tt=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)xf(t,e),t=t.sibling}var na=null;function xf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:At(t,e),Ot(e),n&4&&(Qa(3,e,e.return),gl(3,e),Qa(5,e,e.return));break;case 1:At(t,e),Ot(e),n&512&&(it||a===null||ha(a,a.return)),n&64&&ka&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var c=na;if(At(t,e),Ot(e),n&512&&(it||a===null||ha(a,a.return)),n&4){var d=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(n){case"title":d=c.getElementsByTagName("title")[0],(!d||d[In]||d[mt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(n),c.head.insertBefore(d,c.querySelector("head > title"))),xt(d,n,a),d[mt]=e,ht(d),n=d;break e;case"link":var m=x0("link","href",c).get(n+(a.href||""));if(m){for(var x=0;x<m.length;x++)if(d=m[x],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(x,1);break t}}d=c.createElement(n),xt(d,n,a),c.head.appendChild(d);break;case"meta":if(m=x0("meta","content",c).get(n+(a.content||""))){for(x=0;x<m.length;x++)if(d=m[x],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(x,1);break t}}d=c.createElement(n),xt(d,n,a),c.head.appendChild(d);break;default:throw Error(i(468,n))}d[mt]=e,ht(d),n=d}e.stateNode=n}else v0(c,e.type,e.stateNode);else e.stateNode=b0(c,n,e.memoizedProps);else d!==n?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,n===null?v0(c,e.type,e.stateNode):b0(c,n,e.memoizedProps)):n===null&&e.stateNode!==null&&ac(e,e.memoizedProps,a.memoizedProps)}break;case 27:At(t,e),Ot(e),n&512&&(it||a===null||ha(a,a.return)),a!==null&&n&4&&ac(e,e.memoizedProps,a.memoizedProps);break;case 5:if(At(t,e),Ot(e),n&512&&(it||a===null||ha(a,a.return)),e.flags&32){c=e.stateNode;try{Js(c,"")}catch(re){He(e,e.return,re)}}n&4&&e.stateNode!=null&&(c=e.memoizedProps,ac(e,c,a!==null?a.memoizedProps:c)),n&1024&&(lc=!0);break;case 6:if(At(t,e),Ot(e),n&4){if(e.stateNode===null)throw Error(i(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(re){He(e,e.return,re)}}break;case 3:if(Zi=null,c=na,na=Ji(t.containerInfo),At(t,e),na=c,Ot(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{En(t.containerInfo)}catch(re){He(e,e.return,re)}lc&&(lc=!1,vf(e));break;case 4:n=na,na=Ji(e.stateNode.containerInfo),At(t,e),Ot(e),na=n;break;case 12:At(t,e),Ot(e);break;case 31:At(t,e),Ot(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ui(e,n)));break;case 13:At(t,e),Ot(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Li=dt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ui(e,n)));break;case 22:c=e.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,L=ka,Y=it;if(ka=L||c,it=Y||j,At(t,e),it=Y,ka=L,Ot(e),n&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||j||ka||it||Os(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){j=a=t;try{if(d=j.stateNode,c)m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{x=j.stateNode;var K=j.memoizedProps.style,B=K!=null&&K.hasOwnProperty("display")?K.display:null;x.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(re){He(j,j.return,re)}}}else if(t.tag===6){if(a===null){j=t;try{j.stateNode.nodeValue=c?"":j.memoizedProps}catch(re){He(j,j.return,re)}}}else if(t.tag===18){if(a===null){j=t;try{var H=j.stateNode;c?o0(H,!0):o0(j.stateNode,!1)}catch(re){He(j,j.return,re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Ui(e,a))));break;case 19:At(t,e),Ot(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ui(e,n)));break;case 30:break;case 21:break;default:At(t,e),Ot(e)}}function Ot(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(uf(n)){a=n;break}n=n.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var c=a.stateNode,d=sc(e);Mi(e,d,c);break;case 5:var m=a.stateNode;a.flags&32&&(Js(m,""),a.flags&=-33);var x=sc(e);Mi(e,x,m);break;case 3:case 4:var j=a.stateNode.containerInfo,L=sc(e);nc(e,L,j);break;default:throw Error(i(161))}}catch(Y){He(e,e.return,Y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ta(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ff(e,t.alternate,t),t=t.sibling}function Os(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Qa(4,t,t.return),Os(t);break;case 1:ha(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&of(t,t.return,a),Os(t);break;case 27:Nl(t.stateNode);case 26:case 5:ha(t,t.return),Os(t);break;case 22:t.memoizedState===null&&Os(t);break;case 30:Os(t);break;default:Os(t)}e=e.sibling}}function Aa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,c=e,d=t,m=d.flags;switch(d.tag){case 0:case 11:case 15:Aa(c,d,a),gl(4,d);break;case 1:if(Aa(c,d,a),n=d,c=n.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){He(n,n.return,L)}if(n=d,c=n.updateQueue,c!==null){var x=n.stateNode;try{var j=c.shared.hiddenCallbacks;if(j!==null)for(c.shared.hiddenCallbacks=null,c=0;c<j.length;c++)Jd(j[c],x)}catch(L){He(n,n.return,L)}}a&&m&64&&rf(d),pl(d,d.return);break;case 27:df(d);case 26:case 5:Aa(c,d,a),a&&n===null&&m&4&&cf(d),pl(d,d.return);break;case 12:Aa(c,d,a);break;case 31:Aa(c,d,a),a&&m&4&&pf(c,d);break;case 13:Aa(c,d,a),a&&m&4&&bf(c,d);break;case 22:d.memoizedState===null&&Aa(c,d,a),pl(d,d.return);break;case 30:break;default:Aa(c,d,a)}t=t.sibling}}function ic(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&al(a))}function rc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&al(e))}function la(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)yf(e,t,a,n),t=t.sibling}function yf(e,t,a,n){var c=t.flags;switch(t.tag){case 0:case 11:case 15:la(e,t,a,n),c&2048&&gl(9,t);break;case 1:la(e,t,a,n);break;case 3:la(e,t,a,n),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&al(e)));break;case 12:if(c&2048){la(e,t,a,n),e=t.stateNode;try{var d=t.memoizedProps,m=d.id,x=d.onPostCommit;typeof x=="function"&&x(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){He(t,t.return,j)}}else la(e,t,a,n);break;case 31:la(e,t,a,n);break;case 13:la(e,t,a,n);break;case 23:break;case 22:d=t.stateNode,m=t.alternate,t.memoizedState!==null?d._visibility&2?la(e,t,a,n):bl(e,t):d._visibility&2?la(e,t,a,n):(d._visibility|=2,pn(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),c&2048&&ic(m,t);break;case 24:la(e,t,a,n),c&2048&&rc(t.alternate,t);break;default:la(e,t,a,n)}}function pn(e,t,a,n,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,m=t,x=a,j=n,L=m.flags;switch(m.tag){case 0:case 11:case 15:pn(d,m,x,j,c),gl(8,m);break;case 23:break;case 22:var Y=m.stateNode;m.memoizedState!==null?Y._visibility&2?pn(d,m,x,j,c):bl(d,m):(Y._visibility|=2,pn(d,m,x,j,c)),c&&L&2048&&ic(m.alternate,m);break;case 24:pn(d,m,x,j,c),c&&L&2048&&rc(m.alternate,m);break;default:pn(d,m,x,j,c)}t=t.sibling}}function bl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,c=n.flags;switch(n.tag){case 22:bl(a,n),c&2048&&ic(n.alternate,n);break;case 24:bl(a,n),c&2048&&rc(n.alternate,n);break;default:bl(a,n)}t=t.sibling}}var xl=8192;function bn(e,t,a){if(e.subtreeFlags&xl)for(e=e.child;e!==null;)wf(e,t,a),e=e.sibling}function wf(e,t,a){switch(e.tag){case 26:bn(e,t,a),e.flags&xl&&e.memoizedState!==null&&Bb(a,na,e.memoizedState,e.memoizedProps);break;case 5:bn(e,t,a);break;case 3:case 4:var n=na;na=Ji(e.stateNode.containerInfo),bn(e,t,a),na=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=xl,xl=16777216,bn(e,t,a),xl=n):bn(e,t,a));break;default:bn(e,t,a)}}function Sf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function vl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];ft=n,_f(n,e)}Sf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jf(e),e=e.sibling}function jf(e){switch(e.tag){case 0:case 11:case 15:vl(e),e.flags&2048&&Qa(9,e,e.return);break;case 3:vl(e);break;case 12:vl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,zi(e)):vl(e);break;default:vl(e)}}function zi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];ft=n,_f(n,e)}Sf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Qa(8,t,t.return),zi(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,zi(t));break;default:zi(t)}e=e.sibling}}function _f(e,t){for(;ft!==null;){var a=ft;switch(a.tag){case 0:case 11:case 15:Qa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:al(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,ft=n;else e:for(a=e;ft!==null;){n=ft;var c=n.sibling,d=n.return;if(mf(n),n===a){ft=null;break e}if(c!==null){c.return=d,ft=c;break e}ft=d}}}var Wp={getCacheForType:function(e){var t=pt(st),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return pt(st).controller.signal}},eb=typeof WeakMap=="function"?WeakMap:Map,ze=0,Ye=null,Ee=null,Oe=0,qe=0,Ht=null,Ja=!1,xn=!1,oc=!1,Oa=0,et=0,Xa=0,Cs=0,cc=0,$t=0,vn=0,yl=null,Ct=null,uc=!1,Li=0,Nf=0,Bi=1/0,qi=null,Za=null,ct=0,Fa=null,yn=null,Ca=0,dc=0,hc=null,kf=null,wl=0,fc=null;function Vt(){return(ze&2)!==0&&Oe!==0?Oe&-Oe:U.T!==null?vc():$u()}function Ef(){if($t===0)if((Oe&536870912)===0||Re){var e=Kl;Kl<<=1,(Kl&3932160)===0&&(Kl=262144),$t=e}else $t=536870912;return e=Bt.current,e!==null&&(e.flags|=32),$t}function Rt(e,t,a){(e===Ye&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(wn(e,0),Wa(e,Oe,$t,!1)),Vn(e,a),((ze&2)===0||e!==Ye)&&(e===Ye&&((ze&2)===0&&(Cs|=a),et===4&&Wa(e,Oe,$t,!1)),fa(e))}function Tf(e,t,a){if((ze&6)!==0)throw Error(i(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||$n(e,t),c=n?sb(e,t):gc(e,t,!0),d=n;do{if(c===0){xn&&!n&&Wa(e,t,0,!1);break}else{if(a=e.current.alternate,d&&!tb(a)){c=gc(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var x=e;c=yl;var j=x.current.memoizedState.isDehydrated;if(j&&(wn(x,m).flags|=256),m=gc(x,m,!1),m!==2){if(oc&&!j){x.errorRecoveryDisabledLanes|=d,Cs|=d,c=4;break e}d=Ct,Ct=c,d!==null&&(Ct===null?Ct=d:Ct.push.apply(Ct,d))}c=m}if(d=!1,c!==2)continue}}if(c===1){wn(e,0),Wa(e,t,0,!0);break}e:{switch(n=e,d=c,d){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Wa(n,t,$t,!Ja);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(c=Li+300-dt(),10<c)){if(Wa(n,t,$t,!Ja),Jl(n,0,!0)!==0)break e;Ca=t,n.timeoutHandle=l0(Af.bind(null,n,a,Ct,qi,uc,t,$t,Cs,vn,Ja,d,"Throttled",-0,0),c);break e}Af(n,a,Ct,qi,uc,t,$t,Cs,vn,Ja,d,null,-0,0)}}break}while(!0);fa(e)}function Af(e,t,a,n,c,d,m,x,j,L,Y,K,B,H){if(e.timeoutHandle=-1,K=t.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},wf(t,d,K);var re=(d&62914560)===d?Li-dt():(d&4194048)===d?Nf-dt():0;if(re=qb(K,re),re!==null){Ca=d,e.cancelPendingCommit=re(Lf.bind(null,e,t,d,a,n,c,m,x,j,Y,K,null,B,H)),Wa(e,d,m,!L);return}}Lf(e,t,d,a,n,c,m,x,j)}function tb(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var c=a[n],d=c.getSnapshot;c=c.value;try{if(!zt(d(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wa(e,t,a,n){t&=~cc,t&=~Cs,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var c=t;0<c;){var d=31-St(c),m=1<<d;n[d]=-1,c&=~m}a!==0&&Bu(e,a,t)}function Hi(){return(ze&6)===0?(Sl(0),!1):!0}function mc(){if(Ee!==null){if(qe===0)var e=Ee.return;else e=Ee,ya=Ss=null,Oo(e),dn=null,nl=0,e=Ee;for(;e!==null;)lf(e.alternate,e),e=e.return;Ee=null}}function wn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,wb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ca=0,mc(),Ye=e,Ee=a=xa(e.current,null),Oe=t,qe=0,Ht=null,Ja=!1,xn=$n(e,t),oc=!1,vn=$t=cc=Cs=Xa=et=0,Ct=yl=null,uc=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var c=31-St(n),d=1<<c;t|=e[c],n&=~d}return Oa=t,ri(),a}function Of(e,t){Se=null,U.H=hl,t===un||t===gi?(t=Yd(),qe=3):t===xo?(t=Yd(),qe=4):qe=t===Po?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ht=t,Ee===null&&(et=1,Ai(e,Jt(t,e.current)))}function Cf(){var e=Bt.current;return e===null?!0:(Oe&4194048)===Oe?Wt===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?e===Wt:!1}function Rf(){var e=U.H;return U.H=hl,e===null?hl:e}function Df(){var e=U.A;return U.A=Wp,e}function $i(){et=4,Ja||(Oe&4194048)!==Oe&&Bt.current!==null||(xn=!0),(Xa&134217727)===0&&(Cs&134217727)===0||Ye===null||Wa(Ye,Oe,$t,!1)}function gc(e,t,a){var n=ze;ze|=2;var c=Rf(),d=Df();(Ye!==e||Oe!==t)&&(qi=null,wn(e,t)),t=!1;var m=et;e:do try{if(qe!==0&&Ee!==null){var x=Ee,j=Ht;switch(qe){case 8:mc(),m=6;break e;case 3:case 2:case 9:case 6:Bt.current===null&&(t=!0);var L=qe;if(qe=0,Ht=null,Sn(e,x,j,L),a&&xn){m=0;break e}break;default:L=qe,qe=0,Ht=null,Sn(e,x,j,L)}}ab(),m=et;break}catch(Y){Of(e,Y)}while(!0);return t&&e.shellSuspendCounter++,ya=Ss=null,ze=n,U.H=c,U.A=d,Ee===null&&(Ye=null,Oe=0,ri()),m}function ab(){for(;Ee!==null;)Mf(Ee)}function sb(e,t){var a=ze;ze|=2;var n=Rf(),c=Df();Ye!==e||Oe!==t?(qi=null,Bi=dt()+500,wn(e,t)):xn=$n(e,t);e:do try{if(qe!==0&&Ee!==null){t=Ee;var d=Ht;t:switch(qe){case 1:qe=0,Ht=null,Sn(e,t,d,1);break;case 2:case 9:if(Id(d)){qe=0,Ht=null,Uf(t);break}t=function(){qe!==2&&qe!==9||Ye!==e||(qe=7),fa(e)},d.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Id(d)?(qe=0,Ht=null,Uf(t)):(qe=0,Ht=null,Sn(e,t,d,7));break;case 5:var m=null;switch(Ee.tag){case 26:m=Ee.memoizedState;case 5:case 27:var x=Ee;if(m?y0(m):x.stateNode.complete){qe=0,Ht=null;var j=x.sibling;if(j!==null)Ee=j;else{var L=x.return;L!==null?(Ee=L,Vi(L)):Ee=null}break t}}qe=0,Ht=null,Sn(e,t,d,5);break;case 6:qe=0,Ht=null,Sn(e,t,d,6);break;case 8:mc(),et=6;break e;default:throw Error(i(462))}}nb();break}catch(Y){Of(e,Y)}while(!0);return ya=Ss=null,U.H=n,U.A=c,ze=a,Ee!==null?0:(Ye=null,Oe=0,ri(),et)}function nb(){for(;Ee!==null&&!$s();)Mf(Ee)}function Mf(e){var t=sf(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,t===null?Vi(e):Ee=t}function Uf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Zh(a,t,t.pendingProps,t.type,void 0,Oe);break;case 11:t=Zh(a,t,t.pendingProps,t.type.render,t.ref,Oe);break;case 5:Oo(t);default:lf(a,t),t=Ee=Rd(t,Oa),t=sf(a,t,Oa)}e.memoizedProps=e.pendingProps,t===null?Vi(e):Ee=t}function Sn(e,t,a,n){ya=Ss=null,Oo(t),dn=null,nl=0;var c=t.return;try{if(Pp(e,c,t,a,Oe)){et=1,Ai(e,Jt(a,e.current)),Ee=null;return}}catch(d){if(c!==null)throw Ee=c,d;et=1,Ai(e,Jt(a,e.current)),Ee=null;return}t.flags&32768?(Re||n===1?e=!0:xn||(Oe&536870912)!==0?e=!1:(Ja=e=!0,(n===2||n===9||n===3||n===6)&&(n=Bt.current,n!==null&&n.tag===13&&(n.flags|=16384))),zf(t,e)):Vi(t)}function Vi(e){var t=e;do{if((t.flags&32768)!==0){zf(t,Ja);return}e=t.return;var a=Jp(t.alternate,t,Oa);if(a!==null){Ee=a;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);et===0&&(et=5)}function zf(e,t){do{var a=Xp(e.alternate,e);if(a!==null){a.flags&=32767,Ee=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=a}while(e!==null);et=6,Ee=null}function Lf(e,t,a,n,c,d,m,x,j){e.cancelPendingCommit=null;do Ii();while(ct!==0);if((ze&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(d=t.lanes|t.childLanes,d|=ao,Lg(e,a,d,m,x,j),e===Ye&&(Ee=Ye=null,Oe=0),yn=t,Fa=e,Ca=a,dc=d,hc=c,kf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ob(ke,function(){return Vf(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=U.T,U.T=null,c=J.p,J.p=2,m=ze,ze|=4;try{Zp(e,t,a)}finally{ze=m,J.p=c,U.T=n}}ct=1,Bf(),qf(),Hf()}}function Bf(){if(ct===1){ct=0;var e=Fa,t=yn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var n=J.p;J.p=2;var c=ze;ze|=4;try{xf(t,e);var d=Ec,m=jd(e.containerInfo),x=d.focusedElem,j=d.selectionRange;if(m!==x&&x&&x.ownerDocument&&Sd(x.ownerDocument.documentElement,x)){if(j!==null&&Zr(x)){var L=j.start,Y=j.end;if(Y===void 0&&(Y=L),"selectionStart"in x)x.selectionStart=L,x.selectionEnd=Math.min(Y,x.value.length);else{var K=x.ownerDocument||document,B=K&&K.defaultView||window;if(B.getSelection){var H=B.getSelection(),re=x.textContent.length,ge=Math.min(j.start,re),Ie=j.end===void 0?ge:Math.min(j.end,re);!H.extend&&ge>Ie&&(m=Ie,Ie=ge,ge=m);var R=wd(x,ge),k=wd(x,Ie);if(R&&k&&(H.rangeCount!==1||H.anchorNode!==R.node||H.anchorOffset!==R.offset||H.focusNode!==k.node||H.focusOffset!==k.offset)){var z=K.createRange();z.setStart(R.node,R.offset),H.removeAllRanges(),ge>Ie?(H.addRange(z),H.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),H.addRange(z))}}}}for(K=[],H=x;H=H.parentNode;)H.nodeType===1&&K.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<K.length;x++){var P=K[x];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}tr=!!kc,Ec=kc=null}finally{ze=c,J.p=n,U.T=a}}e.current=t,ct=2}}function qf(){if(ct===2){ct=0;var e=Fa,t=yn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var n=J.p;J.p=2;var c=ze;ze|=4;try{ff(e,t.alternate,t)}finally{ze=c,J.p=n,U.T=a}}ct=3}}function Hf(){if(ct===4||ct===3){ct=0,Vs();var e=Fa,t=yn,a=Ca,n=kf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ct=5:(ct=0,yn=Fa=null,$f(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Za=null),Rr(a),t=t.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Ut,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=U.T,c=J.p,J.p=2,U.T=null;try{for(var d=e.onRecoverableError,m=0;m<n.length;m++){var x=n[m];d(x.value,{componentStack:x.stack})}}finally{U.T=t,J.p=c}}(Ca&3)!==0&&Ii(),fa(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===fc?wl++:(wl=0,fc=e):wl=0,Sl(0)}}function $f(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,al(t)))}function Ii(){return Bf(),qf(),Hf(),Vf()}function Vf(){if(ct!==5)return!1;var e=Fa,t=dc;dc=0;var a=Rr(Ca),n=U.T,c=J.p;try{J.p=32>a?32:a,U.T=null,a=hc,hc=null;var d=Fa,m=Ca;if(ct=0,yn=Fa=null,Ca=0,(ze&6)!==0)throw Error(i(331));var x=ze;if(ze|=4,jf(d.current),yf(d,d.current,m,a),ze=x,Sl(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Ut,d)}catch{}return!0}finally{J.p=c,U.T=n,$f(e,t)}}function If(e,t,a){t=Jt(a,t),t=Yo(e.stateNode,t,2),e=Ya(e,t,2),e!==null&&(Vn(e,2),fa(e))}function He(e,t,a){if(e.tag===3)If(e,e,a);else for(;t!==null;){if(t.tag===3){If(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Za===null||!Za.has(n))){e=Jt(a,e),a=Ih(2),n=Ya(t,a,2),n!==null&&(Gh(a,n,t,e),Vn(n,2),fa(n));break}}t=t.return}}function pc(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new eb;var c=new Set;n.set(t,c)}else c=n.get(t),c===void 0&&(c=new Set,n.set(t,c));c.has(a)||(oc=!0,c.add(a),e=lb.bind(null,e,t,a),t.then(e,e))}function lb(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ye===e&&(Oe&a)===a&&(et===4||et===3&&(Oe&62914560)===Oe&&300>dt()-Li?(ze&2)===0&&wn(e,0):cc|=a,vn===Oe&&(vn=0)),fa(e)}function Gf(e,t){t===0&&(t=Lu()),e=vs(e,t),e!==null&&(Vn(e,t),fa(e))}function ib(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Gf(e,a)}function rb(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(i(314))}n!==null&&n.delete(t),Gf(e,a)}function ob(e,t){return wt(e,t)}var Gi=null,jn=null,bc=!1,Yi=!1,xc=!1,es=0;function fa(e){e!==jn&&e.next===null&&(jn===null?Gi=jn=e:jn=jn.next=e),Yi=!0,bc||(bc=!0,ub())}function Sl(e,t){if(!xc&&Yi){xc=!0;do for(var a=!1,n=Gi;n!==null;){if(e!==0){var c=n.pendingLanes;if(c===0)var d=0;else{var m=n.suspendedLanes,x=n.pingedLanes;d=(1<<31-St(42|e)+1)-1,d&=c&~(m&~x),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Qf(n,d))}else d=Oe,d=Jl(n,n===Ye?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(d&3)===0||$n(n,d)||(a=!0,Qf(n,d));n=n.next}while(a);xc=!1}}function cb(){Yf()}function Yf(){Yi=bc=!1;var e=0;es!==0&&yb()&&(e=es);for(var t=dt(),a=null,n=Gi;n!==null;){var c=n.next,d=Pf(n,t);d===0?(n.next=null,a===null?Gi=c:a.next=c,c===null&&(jn=a)):(a=n,(e!==0||(d&3)!==0)&&(Yi=!0)),n=c}ct!==0&&ct!==5||Sl(e),es!==0&&(es=0)}function Pf(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var m=31-St(d),x=1<<m,j=c[m];j===-1?((x&a)===0||(x&n)!==0)&&(c[m]=zg(x,t)):j<=t&&(e.expiredLanes|=x),d&=~x}if(t=Ye,a=Oe,a=Jl(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&za(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||$n(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&za(n),Rr(a)){case 2:case 8:a=me;break;case 32:a=ke;break;case 268435456:a=Be;break;default:a=ke}return n=Kf.bind(null,e),a=wt(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&za(n),e.callbackPriority=2,e.callbackNode=null,2}function Kf(e,t){if(ct!==0&&ct!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ii()&&e.callbackNode!==a)return null;var n=Oe;return n=Jl(e,e===Ye?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Tf(e,n,t),Pf(e,dt()),e.callbackNode!=null&&e.callbackNode===a?Kf.bind(null,e):null)}function Qf(e,t){if(Ii())return null;Tf(e,t,!0)}function ub(){Sb(function(){(ze&6)!==0?wt(ie,cb):Yf()})}function vc(){if(es===0){var e=on;e===0&&(e=Pl,Pl<<=1,(Pl&261888)===0&&(Pl=256)),es=e}return es}function Jf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wl(""+e)}function Xf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function db(e,t,a,n,c){if(t==="submit"&&a&&a.stateNode===c){var d=Jf((c[kt]||null).action),m=n.submitter;m&&(t=(t=m[kt]||null)?Jf(t.formAction):m.getAttribute("formAction"),t!==null&&(d=t,m=null));var x=new si("action","action",null,n,c);e.push({event:x,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(es!==0){var j=m?Xf(c,m):new FormData(c);qo(a,{pending:!0,data:j,method:c.method,action:d},null,j)}}else typeof d=="function"&&(x.preventDefault(),j=m?Xf(c,m):new FormData(c),qo(a,{pending:!0,data:j,method:c.method,action:d},d,j))},currentTarget:c}]})}}for(var yc=0;yc<to.length;yc++){var wc=to[yc],hb=wc.toLowerCase(),fb=wc[0].toUpperCase()+wc.slice(1);sa(hb,"on"+fb)}sa(kd,"onAnimationEnd"),sa(Ed,"onAnimationIteration"),sa(Td,"onAnimationStart"),sa("dblclick","onDoubleClick"),sa("focusin","onFocus"),sa("focusout","onBlur"),sa(Ap,"onTransitionRun"),sa(Op,"onTransitionStart"),sa(Cp,"onTransitionCancel"),sa(Ad,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function Zf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],c=n.event;n=n.listeners;e:{var d=void 0;if(t)for(var m=n.length-1;0<=m;m--){var x=n[m],j=x.instance,L=x.currentTarget;if(x=x.listener,j!==d&&c.isPropagationStopped())break e;d=x,c.currentTarget=L;try{d(c)}catch(Y){ii(Y)}c.currentTarget=null,d=j}else for(m=0;m<n.length;m++){if(x=n[m],j=x.instance,L=x.currentTarget,x=x.listener,j!==d&&c.isPropagationStopped())break e;d=x,c.currentTarget=L;try{d(c)}catch(Y){ii(Y)}c.currentTarget=null,d=j}}}}function Te(e,t){var a=t[Dr];a===void 0&&(a=t[Dr]=new Set);var n=e+"__bubble";a.has(n)||(Ff(t,e,2,!1),a.add(n))}function Sc(e,t,a){var n=0;t&&(n|=4),Ff(a,e,n,t)}var Pi="_reactListening"+Math.random().toString(36).slice(2);function jc(e){if(!e[Pi]){e[Pi]=!0,Gu.forEach(function(a){a!=="selectionchange"&&(mb.has(a)||Sc(a,!1,e),Sc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pi]||(t[Pi]=!0,Sc("selectionchange",!1,t))}}function Ff(e,t,a,n){switch(E0(t)){case 2:var c=Vb;break;case 8:c=Ib;break;default:c=Bc}a=c.bind(null,t,a,e),c=void 0,!Vr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),n?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function _c(e,t,a,n,c){var d=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var m=n.tag;if(m===3||m===4){var x=n.stateNode.containerInfo;if(x===c)break;if(m===4)for(m=n.return;m!==null;){var j=m.tag;if((j===3||j===4)&&m.stateNode.containerInfo===c)return;m=m.return}for(;x!==null;){if(m=Gs(x),m===null)return;if(j=m.tag,j===5||j===6||j===26||j===27){n=d=m;continue e}x=x.parentNode}}n=n.return}ad(function(){var L=d,Y=Hr(a),K=[];e:{var B=Od.get(e);if(B!==void 0){var H=si,re=e;switch(e){case"keypress":if(ti(a)===0)break e;case"keydown":case"keyup":H=rp;break;case"focusin":re="focus",H=Pr;break;case"focusout":re="blur",H=Pr;break;case"beforeblur":case"afterblur":H=Pr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Jg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=up;break;case kd:case Ed:case Td:H=Fg;break;case Ad:H=hp;break;case"scroll":case"scrollend":H=Kg;break;case"wheel":H=mp;break;case"copy":case"cut":case"paste":H=ep;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=rd;break;case"toggle":case"beforetoggle":H=pp}var ge=(t&4)!==0,Ie=!ge&&(e==="scroll"||e==="scrollend"),R=ge?B!==null?B+"Capture":null:B;ge=[];for(var k=L,z;k!==null;){var P=k;if(z=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||z===null||R===null||(P=Yn(k,R),P!=null&&ge.push(_l(k,P,z))),Ie)break;k=k.return}0<ge.length&&(B=new H(B,re,null,a,Y),K.push({event:B,listeners:ge}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",B&&a!==qr&&(re=a.relatedTarget||a.fromElement)&&(Gs(re)||re[Is]))break e;if((H||B)&&(B=Y.window===Y?Y:(B=Y.ownerDocument)?B.defaultView||B.parentWindow:window,H?(re=a.relatedTarget||a.toElement,H=L,re=re?Gs(re):null,re!==null&&(Ie=h(re),ge=re.tag,re!==Ie||ge!==5&&ge!==27&&ge!==6)&&(re=null)):(H=null,re=L),H!==re)){if(ge=ld,P="onMouseLeave",R="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ge=rd,P="onPointerLeave",R="onPointerEnter",k="pointer"),Ie=H==null?B:Gn(H),z=re==null?B:Gn(re),B=new ge(P,k+"leave",H,a,Y),B.target=Ie,B.relatedTarget=z,P=null,Gs(Y)===L&&(ge=new ge(R,k+"enter",re,a,Y),ge.target=z,ge.relatedTarget=Ie,P=ge),Ie=P,H&&re)t:{for(ge=gb,R=H,k=re,z=0,P=R;P;P=ge(P))z++;P=0;for(var fe=k;fe;fe=ge(fe))P++;for(;0<z-P;)R=ge(R),z--;for(;0<P-z;)k=ge(k),P--;for(;z--;){if(R===k||k!==null&&R===k.alternate){ge=R;break t}R=ge(R),k=ge(k)}ge=null}else ge=null;H!==null&&Wf(K,B,H,ge,!1),re!==null&&Ie!==null&&Wf(K,Ie,re,ge,!0)}}e:{if(B=L?Gn(L):window,H=B.nodeName&&B.nodeName.toLowerCase(),H==="select"||H==="input"&&B.type==="file")var Me=gd;else if(fd(B))if(pd)Me=kp;else{Me=_p;var ce=jp}else H=B.nodeName,!H||H.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?L&&Br(L.elementType)&&(Me=gd):Me=Np;if(Me&&(Me=Me(e,L))){md(K,Me,a,Y);break e}ce&&ce(e,B,L),e==="focusout"&&L&&B.type==="number"&&L.memoizedProps.value!=null&&Lr(B,"number",B.value)}switch(ce=L?Gn(L):window,e){case"focusin":(fd(ce)||ce.contentEditable==="true")&&(Ws=ce,Fr=L,Wn=null);break;case"focusout":Wn=Fr=Ws=null;break;case"mousedown":Wr=!0;break;case"contextmenu":case"mouseup":case"dragend":Wr=!1,_d(K,a,Y);break;case"selectionchange":if(Tp)break;case"keydown":case"keyup":_d(K,a,Y)}var je;if(Qr)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Fs?dd(e,a)&&(Ce="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(od&&a.locale!=="ko"&&(Fs||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Fs&&(je=sd()):(Ba=Y,Ir="value"in Ba?Ba.value:Ba.textContent,Fs=!0)),ce=Ki(L,Ce),0<ce.length&&(Ce=new id(Ce,e,null,a,Y),K.push({event:Ce,listeners:ce}),je?Ce.data=je:(je=hd(a),je!==null&&(Ce.data=je)))),(je=xp?vp(e,a):yp(e,a))&&(Ce=Ki(L,"onBeforeInput"),0<Ce.length&&(ce=new id("onBeforeInput","beforeinput",null,a,Y),K.push({event:ce,listeners:Ce}),ce.data=je)),db(K,e,L,a,Y)}Zf(K,t)})}function _l(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ki(e,t){for(var a=t+"Capture",n=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Yn(e,a),c!=null&&n.unshift(_l(e,c,d)),c=Yn(e,t),c!=null&&n.push(_l(e,c,d))),e.tag===3)return n;e=e.return}return[]}function gb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wf(e,t,a,n,c){for(var d=t._reactName,m=[];a!==null&&a!==n;){var x=a,j=x.alternate,L=x.stateNode;if(x=x.tag,j!==null&&j===n)break;x!==5&&x!==26&&x!==27||L===null||(j=L,c?(L=Yn(a,d),L!=null&&m.unshift(_l(a,L,j))):c||(L=Yn(a,d),L!=null&&m.push(_l(a,L,j)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var pb=/\r\n?/g,bb=/\u0000|\uFFFD/g;function e0(e){return(typeof e=="string"?e:""+e).replace(pb,`
`).replace(bb,"")}function t0(e,t){return t=e0(t),e0(e)===t}function Ve(e,t,a,n,c,d){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Js(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Js(e,""+n);break;case"className":Zl(e,"class",n);break;case"tabIndex":Zl(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Zl(e,a,n);break;case"style":ed(e,n,d);break;case"data":if(t!=="object"){Zl(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Wl(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(t!=="input"&&Ve(e,t,"name",c.name,c,null),Ve(e,t,"formEncType",c.formEncType,c,null),Ve(e,t,"formMethod",c.formMethod,c,null),Ve(e,t,"formTarget",c.formTarget,c,null)):(Ve(e,t,"encType",c.encType,c,null),Ve(e,t,"method",c.method,c,null),Ve(e,t,"target",c.target,c,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Wl(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=pa);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(i(61));if(a=n.__html,a!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=Wl(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":Te("beforetoggle",e),Te("toggle",e),Xl(e,"popover",n);break;case"xlinkActuate":ga(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":ga(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":ga(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":ga(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":ga(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":ga(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":ga(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":ga(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":ga(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Xl(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Yg.get(a)||a,Xl(e,a,n))}}function Nc(e,t,a,n,c,d){switch(a){case"style":ed(e,n,d);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(i(61));if(a=n.__html,a!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof n=="string"?Js(e,n):(typeof n=="number"||typeof n=="bigint")&&Js(e,""+n);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"onClick":n!=null&&(e.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),d=e[kt]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof n=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,c);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):Xl(e,a,n)}}}function xt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var n=!1,c=!1,d;for(d in a)if(a.hasOwnProperty(d)){var m=a[d];if(m!=null)switch(d){case"src":n=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ve(e,t,d,m,a,null)}}c&&Ve(e,t,"srcSet",a.srcSet,a,null),n&&Ve(e,t,"src",a.src,a,null);return;case"input":Te("invalid",e);var x=d=m=c=null,j=null,L=null;for(n in a)if(a.hasOwnProperty(n)){var Y=a[n];if(Y!=null)switch(n){case"name":c=Y;break;case"type":m=Y;break;case"checked":j=Y;break;case"defaultChecked":L=Y;break;case"value":d=Y;break;case"defaultValue":x=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,t));break;default:Ve(e,t,n,Y,a,null)}}Xu(e,d,x,j,L,m,c,!1);return;case"select":Te("invalid",e),n=m=d=null;for(c in a)if(a.hasOwnProperty(c)&&(x=a[c],x!=null))switch(c){case"value":d=x;break;case"defaultValue":m=x;break;case"multiple":n=x;default:Ve(e,t,c,x,a,null)}t=d,a=m,e.multiple=!!n,t!=null?Qs(e,!!n,t,!1):a!=null&&Qs(e,!!n,a,!0);return;case"textarea":Te("invalid",e),d=c=n=null;for(m in a)if(a.hasOwnProperty(m)&&(x=a[m],x!=null))switch(m){case"value":n=x;break;case"defaultValue":c=x;break;case"children":d=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:Ve(e,t,m,x,a,null)}Fu(e,n,c,d);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(n=a[j],n!=null))switch(j){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Ve(e,t,j,n,a,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(n=0;n<jl.length;n++)Te(jl[n],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(n=a[L],n!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ve(e,t,L,n,a,null)}return;default:if(Br(t)){for(Y in a)a.hasOwnProperty(Y)&&(n=a[Y],n!==void 0&&Nc(e,t,Y,n,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(n=a[x],n!=null&&Ve(e,t,x,n,a,null))}function xb(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,m=null,x=null,j=null,L=null,Y=null;for(H in a){var K=a[H];if(a.hasOwnProperty(H)&&K!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":j=K;default:n.hasOwnProperty(H)||Ve(e,t,H,null,n,K)}}for(var B in n){var H=n[B];if(K=a[B],n.hasOwnProperty(B)&&(H!=null||K!=null))switch(B){case"type":d=H;break;case"name":c=H;break;case"checked":L=H;break;case"defaultChecked":Y=H;break;case"value":m=H;break;case"defaultValue":x=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,t));break;default:H!==K&&Ve(e,t,B,H,n,K)}}zr(e,m,x,j,L,Y,d,c);return;case"select":H=m=x=B=null;for(d in a)if(j=a[d],a.hasOwnProperty(d)&&j!=null)switch(d){case"value":break;case"multiple":H=j;default:n.hasOwnProperty(d)||Ve(e,t,d,null,n,j)}for(c in n)if(d=n[c],j=a[c],n.hasOwnProperty(c)&&(d!=null||j!=null))switch(c){case"value":B=d;break;case"defaultValue":x=d;break;case"multiple":m=d;default:d!==j&&Ve(e,t,c,d,n,j)}t=x,a=m,n=H,B!=null?Qs(e,!!a,B,!1):!!n!=!!a&&(t!=null?Qs(e,!!a,t,!0):Qs(e,!!a,a?[]:"",!1));return;case"textarea":H=B=null;for(x in a)if(c=a[x],a.hasOwnProperty(x)&&c!=null&&!n.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ve(e,t,x,null,n,c)}for(m in n)if(c=n[m],d=a[m],n.hasOwnProperty(m)&&(c!=null||d!=null))switch(m){case"value":B=c;break;case"defaultValue":H=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(i(91));break;default:c!==d&&Ve(e,t,m,c,n,d)}Zu(e,B,H);return;case"option":for(var re in a)if(B=a[re],a.hasOwnProperty(re)&&B!=null&&!n.hasOwnProperty(re))switch(re){case"selected":e.selected=!1;break;default:Ve(e,t,re,null,n,B)}for(j in n)if(B=n[j],H=a[j],n.hasOwnProperty(j)&&B!==H&&(B!=null||H!=null))switch(j){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Ve(e,t,j,B,n,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in a)B=a[ge],a.hasOwnProperty(ge)&&B!=null&&!n.hasOwnProperty(ge)&&Ve(e,t,ge,null,n,B);for(L in n)if(B=n[L],H=a[L],n.hasOwnProperty(L)&&B!==H&&(B!=null||H!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(137,t));break;default:Ve(e,t,L,B,n,H)}return;default:if(Br(t)){for(var Ie in a)B=a[Ie],a.hasOwnProperty(Ie)&&B!==void 0&&!n.hasOwnProperty(Ie)&&Nc(e,t,Ie,void 0,n,B);for(Y in n)B=n[Y],H=a[Y],!n.hasOwnProperty(Y)||B===H||B===void 0&&H===void 0||Nc(e,t,Y,B,n,H);return}}for(var R in a)B=a[R],a.hasOwnProperty(R)&&B!=null&&!n.hasOwnProperty(R)&&Ve(e,t,R,null,n,B);for(K in n)B=n[K],H=a[K],!n.hasOwnProperty(K)||B===H||B==null&&H==null||Ve(e,t,K,B,n,H)}function a0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var c=a[n],d=c.transferSize,m=c.initiatorType,x=c.duration;if(d&&x&&a0(m)){for(m=0,x=c.responseEnd,n+=1;n<a.length;n++){var j=a[n],L=j.startTime;if(L>x)break;var Y=j.transferSize,K=j.initiatorType;Y&&a0(K)&&(j=j.responseEnd,m+=Y*(j<x?1:(x-L)/(j-L)))}if(--n,t+=8*(d+m)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var kc=null,Ec=null;function Qi(e){return e.nodeType===9?e:e.ownerDocument}function s0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Tc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ac=null;function yb(){var e=window.event;return e&&e.type==="popstate"?e===Ac?!1:(Ac=e,!0):(Ac=null,!1)}var l0=typeof setTimeout=="function"?setTimeout:void 0,wb=typeof clearTimeout=="function"?clearTimeout:void 0,i0=typeof Promise=="function"?Promise:void 0,Sb=typeof queueMicrotask=="function"?queueMicrotask:typeof i0<"u"?function(e){return i0.resolve(null).then(e).catch(jb)}:l0;function jb(e){setTimeout(function(){throw e})}function ts(e){return e==="head"}function r0(e,t){var a=t,n=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(c),En(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Nl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Nl(a);for(var d=a.firstChild;d;){var m=d.nextSibling,x=d.nodeName;d[In]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=m}}else a==="body"&&Nl(e.ownerDocument.body);a=c}while(a);En(t)}function o0(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function Oc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Oc(a),Mr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function _b(e,t,a,n){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[In])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ea(e.nextSibling),e===null)break}return null}function Nb(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ea(e.nextSibling),e===null))return null;return e}function c0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ea(e.nextSibling),e===null))return null;return e}function Cc(e){return e.data==="$?"||e.data==="$~"}function Rc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function kb(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function ea(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Dc=null;function u0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return ea(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function d0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function h0(e,t,a){switch(t=Qi(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Nl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Mr(e)}var ta=new Map,f0=new Set;function Ji(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ra=J.d;J.d={f:Eb,r:Tb,D:Ab,C:Ob,L:Cb,m:Rb,X:Mb,S:Db,M:Ub};function Eb(){var e=Ra.f(),t=Hi();return e||t}function Tb(e){var t=Ys(e);t!==null&&t.tag===5&&t.type==="form"?Ah(t):Ra.r(e)}var _n=typeof document>"u"?null:document;function m0(e,t,a){var n=_n;if(n&&typeof t=="string"&&t){var c=Kt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),f0.has(c)||(f0.add(c),e={rel:e,crossOrigin:a,href:t},n.querySelector(c)===null&&(t=n.createElement("link"),xt(t,"link",e),ht(t),n.head.appendChild(t)))}}function Ab(e){Ra.D(e),m0("dns-prefetch",e,null)}function Ob(e,t){Ra.C(e,t),m0("preconnect",e,t)}function Cb(e,t,a){Ra.L(e,t,a);var n=_n;if(n&&e&&t){var c='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Kt(a.imageSizes)+'"]')):c+='[href="'+Kt(e)+'"]';var d=c;switch(t){case"style":d=Nn(e);break;case"script":d=kn(e)}ta.has(d)||(e=y({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ta.set(d,e),n.querySelector(c)!==null||t==="style"&&n.querySelector(kl(d))||t==="script"&&n.querySelector(El(d))||(t=n.createElement("link"),xt(t,"link",e),ht(t),n.head.appendChild(t)))}}function Rb(e,t){Ra.m(e,t);var a=_n;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Kt(n)+'"][href="'+Kt(e)+'"]',d=c;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=kn(e)}if(!ta.has(d)&&(e=y({rel:"modulepreload",href:e},t),ta.set(d,e),a.querySelector(c)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(El(d)))return}n=a.createElement("link"),xt(n,"link",e),ht(n),a.head.appendChild(n)}}}function Db(e,t,a){Ra.S(e,t,a);var n=_n;if(n&&e){var c=Ps(n).hoistableStyles,d=Nn(e);t=t||"default";var m=c.get(d);if(!m){var x={loading:0,preload:null};if(m=n.querySelector(kl(d)))x.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ta.get(d))&&Mc(e,a);var j=m=n.createElement("link");ht(j),xt(j,"link",e),j._p=new Promise(function(L,Y){j.onload=L,j.onerror=Y}),j.addEventListener("load",function(){x.loading|=1}),j.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Xi(m,t,n)}m={type:"stylesheet",instance:m,count:1,state:x},c.set(d,m)}}}function Mb(e,t){Ra.X(e,t);var a=_n;if(a&&e){var n=Ps(a).hoistableScripts,c=kn(e),d=n.get(c);d||(d=a.querySelector(El(c)),d||(e=y({src:e,async:!0},t),(t=ta.get(c))&&Uc(e,t),d=a.createElement("script"),ht(d),xt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(c,d))}}function Ub(e,t){Ra.M(e,t);var a=_n;if(a&&e){var n=Ps(a).hoistableScripts,c=kn(e),d=n.get(c);d||(d=a.querySelector(El(c)),d||(e=y({src:e,async:!0,type:"module"},t),(t=ta.get(c))&&Uc(e,t),d=a.createElement("script"),ht(d),xt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(c,d))}}function g0(e,t,a,n){var c=(c=oe.current)?Ji(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Nn(a.href),a=Ps(c).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Nn(a.href);var d=Ps(c).hoistableStyles,m=d.get(e);if(m||(c=c.ownerDocument||c,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,m),(d=c.querySelector(kl(e)))&&!d._p&&(m.instance=d,m.state.loading=5),ta.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ta.set(e,a),d||zb(c,e,a,m.state))),t&&n===null)throw Error(i(528,""));return m}if(t&&n!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=kn(a),a=Ps(c).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Nn(e){return'href="'+Kt(e)+'"'}function kl(e){return'link[rel="stylesheet"]['+e+"]"}function p0(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function zb(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),xt(t,"link",a),ht(t),e.head.appendChild(t))}function kn(e){return'[src="'+Kt(e)+'"]'}function El(e){return"script[async]"+e}function b0(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Kt(a.href)+'"]');if(n)return t.instance=n,ht(n),n;var c=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ht(n),xt(n,"style",c),Xi(n,a.precedence,e),t.instance=n;case"stylesheet":c=Nn(a.href);var d=e.querySelector(kl(c));if(d)return t.state.loading|=4,t.instance=d,ht(d),d;n=p0(a),(c=ta.get(c))&&Mc(n,c),d=(e.ownerDocument||e).createElement("link"),ht(d);var m=d;return m._p=new Promise(function(x,j){m.onload=x,m.onerror=j}),xt(d,"link",n),t.state.loading|=4,Xi(d,a.precedence,e),t.instance=d;case"script":return d=kn(a.src),(c=e.querySelector(El(d)))?(t.instance=c,ht(c),c):(n=a,(c=ta.get(d))&&(n=y({},a),Uc(n,c)),e=e.ownerDocument||e,c=e.createElement("script"),ht(c),xt(c,"link",n),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Xi(n,a.precedence,e));return t.instance}function Xi(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=n.length?n[n.length-1]:null,d=c,m=0;m<n.length;m++){var x=n[m];if(x.dataset.precedence===t)d=x;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Mc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Uc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Zi=null;function x0(e,t,a){if(Zi===null){var n=new Map,c=Zi=new Map;c.set(a,n)}else c=Zi,n=c.get(a),n||(n=new Map,c.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var d=a[c];if(!(d[In]||d[mt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var m=d.getAttribute(t)||"";m=e+m;var x=n.get(m);x?x.push(d):n.set(m,[d])}}return n}function v0(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Lb(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function y0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Bb(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=Nn(n.href),d=t.querySelector(kl(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Fi.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=d,ht(d);return}d=t.ownerDocument||t,n=p0(n),(c=ta.get(c))&&Mc(n,c),d=d.createElement("link"),ht(d);var m=d;m._p=new Promise(function(x,j){m.onload=x,m.onerror=j}),xt(d,"link",n),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Fi.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var zc=0;function qb(e,t){return e.stylesheets&&e.count===0&&er(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&er(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&zc===0&&(zc=62500*vb());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&er(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>zc?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(c)}}:null}function Fi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)er(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wi=null;function er(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wi=new Map,t.forEach(Hb,e),Wi=null,Fi.call(e))}function Hb(e,t){if(!(t.state.loading&4)){var a=Wi.get(e);if(a)var n=a.get(null);else{a=new Map,Wi.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var m=c[d];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),n=m)}n&&a.set(null,n)}c=t.instance,m=c.getAttribute("data-precedence"),d=a.get(m)||n,d===n&&a.set(null,c),a.set(m,c),this.count++,n=Fi.bind(this),c.addEventListener("load",n),c.addEventListener("error",n),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Tl={$$typeof:O,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function $b(e,t,a,n,c,d,m,x,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Or(0),this.hiddenUpdates=Or(null),this.identifierPrefix=n,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function w0(e,t,a,n,c,d,m,x,j,L,Y,K){return e=new $b(e,t,a,m,j,L,Y,K,x),t=1,d===!0&&(t|=24),d=Lt(3,null,null,t),e.current=d,d.stateNode=e,t=go(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:n,isDehydrated:a,cache:t},vo(d),e}function S0(e){return e?(e=an,e):an}function j0(e,t,a,n,c,d){c=S0(c),n.context===null?n.context=c:n.pendingContext=c,n=Ga(t),n.payload={element:a},d=d===void 0?null:d,d!==null&&(n.callback=d),a=Ya(e,n,t),a!==null&&(Rt(a,e,t),il(a,e,t))}function _0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Lc(e,t){_0(e,t),(e=e.alternate)&&_0(e,t)}function N0(e){if(e.tag===13||e.tag===31){var t=vs(e,67108864);t!==null&&Rt(t,e,67108864),Lc(e,67108864)}}function k0(e){if(e.tag===13||e.tag===31){var t=Vt();t=Cr(t);var a=vs(e,t);a!==null&&Rt(a,e,t),Lc(e,t)}}var tr=!0;function Vb(e,t,a,n){var c=U.T;U.T=null;var d=J.p;try{J.p=2,Bc(e,t,a,n)}finally{J.p=d,U.T=c}}function Ib(e,t,a,n){var c=U.T;U.T=null;var d=J.p;try{J.p=8,Bc(e,t,a,n)}finally{J.p=d,U.T=c}}function Bc(e,t,a,n){if(tr){var c=qc(n);if(c===null)_c(e,t,n,ar,a),T0(e,n);else if(Yb(c,e,t,a,n))n.stopPropagation();else if(T0(e,n),t&4&&-1<Gb.indexOf(e)){for(;c!==null;){var d=Ys(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=ms(d.pendingLanes);if(m!==0){var x=d;for(x.pendingLanes|=2,x.entangledLanes|=2;m;){var j=1<<31-St(m);x.entanglements[1]|=j,m&=~j}fa(d),(ze&6)===0&&(Bi=dt()+500,Sl(0))}}break;case 31:case 13:x=vs(d,2),x!==null&&Rt(x,d,2),Hi(),Lc(d,2)}if(d=qc(n),d===null&&_c(e,t,n,ar,a),d===c)break;c=d}c!==null&&n.stopPropagation()}else _c(e,t,n,null,a)}}function qc(e){return e=Hr(e),Hc(e)}var ar=null;function Hc(e){if(ar=null,e=Gs(e),e!==null){var t=h(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ar=e,null}function E0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case ie:return 2;case me:return 8;case ke:case De:return 32;case Be:return 268435456;default:return 32}default:return 32}}var $c=!1,as=null,ss=null,ns=null,Al=new Map,Ol=new Map,ls=[],Gb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T0(e,t){switch(e){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Al.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(t.pointerId)}}function Cl(e,t,a,n,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Ys(t),t!==null&&N0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Yb(e,t,a,n,c){switch(t){case"focusin":return as=Cl(as,e,t,a,n,c),!0;case"dragenter":return ss=Cl(ss,e,t,a,n,c),!0;case"mouseover":return ns=Cl(ns,e,t,a,n,c),!0;case"pointerover":var d=c.pointerId;return Al.set(d,Cl(Al.get(d)||null,e,t,a,n,c)),!0;case"gotpointercapture":return d=c.pointerId,Ol.set(d,Cl(Ol.get(d)||null,e,t,a,n,c)),!0}return!1}function A0(e){var t=Gs(e.target);if(t!==null){var a=h(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Vu(e.priority,function(){k0(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,Vu(e.priority,function(){k0(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=qc(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);qr=n,a.target.dispatchEvent(n),qr=null}else return t=Ys(a),t!==null&&N0(t),e.blockedOn=a,!1;t.shift()}return!0}function O0(e,t,a){sr(e)&&a.delete(t)}function Pb(){$c=!1,as!==null&&sr(as)&&(as=null),ss!==null&&sr(ss)&&(ss=null),ns!==null&&sr(ns)&&(ns=null),Al.forEach(O0),Ol.forEach(O0)}function nr(e,t){e.blockedOn===t&&(e.blockedOn=null,$c||($c=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Pb)))}var lr=null;function C0(e){lr!==e&&(lr=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){lr===e&&(lr=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],c=e[t+2];if(typeof n!="function"){if(Hc(n||a)===null)continue;break}var d=Ys(a);d!==null&&(e.splice(t,3),t-=3,qo(d,{pending:!0,data:c,method:a.method,action:n},n,c))}}))}function En(e){function t(j){return nr(j,e)}as!==null&&nr(as,e),ss!==null&&nr(ss,e),ns!==null&&nr(ns,e),Al.forEach(t),Ol.forEach(t);for(var a=0;a<ls.length;a++){var n=ls[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ls.length&&(a=ls[0],a.blockedOn===null);)A0(a),a.blockedOn===null&&ls.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var c=a[n],d=a[n+1],m=c[kt]||null;if(typeof d=="function")m||C0(a);else if(m){var x=null;if(d&&d.hasAttribute("formAction")){if(c=d,m=d[kt]||null)x=m.formAction;else if(Hc(c)!==null)continue}else x=m.action;typeof x=="function"?a[n+1]=x:(a.splice(n,3),n-=3),C0(a)}}}function R0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(m){return c=m})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Vc(e){this._internalRoot=e}ir.prototype.render=Vc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,n=Vt();j0(a,n,e,t,null,null)},ir.prototype.unmount=Vc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;j0(e.current,2,null,e,null,null),Hi(),t[Is]=null}};function ir(e){this._internalRoot=e}ir.prototype.unstable_scheduleHydration=function(e){if(e){var t=$u();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ls.length&&t!==0&&t<ls[a].priority;a++);ls.splice(a,0,e),a===0&&A0(e)}};var D0=s.version;if(D0!=="19.2.0")throw Error(i(527,D0,"19.2.0"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Kb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rr.isDisabled&&rr.supportsFiber)try{Ut=rr.inject(Kb),Fe=rr}catch{}}return Dl.createRoot=function(e,t){if(!u(e))throw Error(i(299));var a=!1,n="",c=qh,d=Hh,m=$h;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=w0(e,1,!1,null,null,a,n,null,c,d,m,R0),e[Is]=t.current,jc(e),new Vc(t)},Dl.hydrateRoot=function(e,t,a){if(!u(e))throw Error(i(299));var n=!1,c="",d=qh,m=Hh,x=$h,j=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),t=w0(e,1,!0,t,a??null,n,c,j,d,m,x,R0),t.context=S0(null),a=t.current,n=Vt(),n=Cr(n),c=Ga(n),c.callback=null,Ya(a,c,n),a=n,t.current.lanes=a,Vn(t,a),fa(t),e[Is]=t.current,jc(e),new ir(t)},Dl.version="19.2.0",Dl}var I0;function nx(){if(I0)return Yc.exports;I0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}}return o(),Yc.exports=sx(),Yc.exports}var lx=nx();const ix=Su(lx),rx=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6m-6 4.5h6M3.75 6.75h-.75v-.75m.75 0v.75m-.75 0h.75m16.5 0h.75v-.75m-.75 0v.75m.75 0h-.75M3.75 17.25h-.75v.75m.75 0v-.75m-.75 0h.75m16.5 0h.75v.75m-.75 0v-.75m.75 0h-.75"})}),ox=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),cx=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),xr=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),ux=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10.5 11.25h3M12 15h.008"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 7.5h16.5M12 3.75l-3 3.75h6l-3-3.75z"})]}),km=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-1.5h5.25m-5.25 0h5.25m-5.25 0h5.25m-5.25 0h5.25M5.25 6.75h13.5"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 21H5.25a2.25 2.25 0 01-2.25-2.25V5.25A2.25 2.25 0 015.25 3h13.5A2.25 2.25 0 0121 5.25v13.5a2.25 2.25 0 01-2.25 2.25z"})]}),dx=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h13.5A2.25 2.25 0 0121 5.25"})}),hx=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-2.25 13.5H5.952L3.75 7.5h16.5zm-1.5 0l-2.625-3.75h-7.25L6.75 7.5m12 0H5.25"})}),Em=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),fx=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.008 1.11-.962l.548.046c.55.046 1.02.522 1.11.962l.196.983c.25.041.5.09.742.145l.933-.373c.51-.204 1.094.027 1.32.518l.495.858c.227.393.123.895-.242 1.19l-.793.642c.04.24.072.484.094.73l1.043.11c.553.06.95.533.894 1.085l-.096.963c-.056.552-.533.95-.1.085l-1.043.11c-.022.246-.054.49-.094.73l.793.642c.365.295.469.797.242 1.19l-.495.858c-.226.391-.81.722-1.32.518l-.933-.373c-.242.055-.492.104-.742.145l-.196.983c-.09.44-.56.916-1.11.962l-.548.046c-.55.046-1.02-.422-1.11-.962l-.196-.983a6.746 6.746 0 01-.742-.145l-.933.373c-.51.204-1.094-.027-1.32-.518l-.495-.858c-.227-.393-.123-.895.242-1.19l.793-.642a6.746 6.746 0 01-.094-.73l-1.043-.11c-.553-.06-.95-.533-.894-1.085l.096-.963c.056-.552.533-.95.1.085l1.043.11c.022-.246.054.49.094-.73l-.793-.642c-.365-.295-.469-.797-.242-1.19l.495-.858c.226-.391.81-.722-1.32-.518l.933.373c.242-.055.492-.104.742-.145l.196-.983z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Tm=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),mx=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Nr=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Am=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.067-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Om=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),gx=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 2.25v3M18 2.25v3M3.75 8.25h16.5"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.25h13.5A2.25 2.25 0 0121 7.5v11.25A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75V7.5A2.25 2.25 0 015.25 5.25z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12.75h.008v.008H8v-.008zM12 12.75h.008v.008H12v-.008zM16 12.75h.008v.008H16v-.008zM8 16h.008v.008H8V16zM12 16h.008v.008H12V16z"})]}),px=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 7.5h16.5v2.25a2.25 2.25 0 010 4.5v2.25H3.75v-2.25a2.25 2.25 0 010-4.5V7.5z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 8.25v7.5"})]}),bx=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 20.25a7.5 7.5 0 0115 0"})]}),xx=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 18.75a2.25 2.25 0 11-4.5 0"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 9a7.5 7.5 0 0115 0v3.375c0 .621.249 1.218.69 1.659l.06.06A1.5 1.5 0 0119.5 16.5h-15a1.5 1.5 0 01-1.06-2.566l.06-.06c.441-.441.69-1.038.69-1.659V9z"})]}),vx=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 100-18 9 9 0 000 18z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12h19.5M12 2.25c2.485 2.91 2.485 15.09 0 17.5M7.5 4.8a15.6 15.6 0 000 14.4M16.5 4.8a15.6 15.6 0 010 14.4"})]}),yx=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12l7.5-7.5M3 12h18"})}),wx=({theme:o,setTheme:s,storeName:l,stores:i,currentStoreId:u,onStoreChange:h,currentUser:f,onLogout:g})=>{const b=()=>{s(o==="light"?"dark":"light")};return r.jsx("header",{className:"bg-white dark:bg-slate-800 shadow-md sticky top-0 z-40",children:r.jsxs("div",{className:"container mx-auto px-4 lg:px-6 py-4 flex items-center justify-between",children:[r.jsxs("a",{href:(f==null?void 0:f.role)==="super_admin"?"#/admin":"#/",className:"flex items-center space-x-3",title:(f==null?void 0:f.role)==="super_admin"?"Go to Super Admin Dashboard":"Go to Home",children:[r.jsx(rx,{className:"h-8 w-8 text-indigo-600"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"hidden sm:inline text-sm font-medium text-slate-500 dark:text-slate-400",children:"myPOS"}),i&&h&&i.length>1&&r.jsx("select",{className:"ml-3 bg-transparent border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200 text-sm rounded-md px-2 py-1",value:u||"",onChange:p=>h(p.target.value),children:i.map(p=>r.jsx("option",{value:p.id,children:p.name},p.id))}),f?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200",children:f.role==="super_admin"?"Super Admin":"Store User"}),r.jsx("button",{onClick:g,className:"px-3 py-1.5 text-sm font-medium rounded-md bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-300 dark:hover:bg-slate-600",children:"Logout"})]}):r.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm",children:[r.jsx("a",{href:"#/login-store",className:"px-3 py-1.5 rounded-md bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-300 dark:hover:bg-slate-600",children:"Owner Login"}),r.jsx("a",{href:"#/login-admin",className:"px-3 py-1.5 rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"Super Admin"})]}),r.jsx("button",{onClick:b,className:"p-2 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"Toggle theme",children:o==="light"?r.jsx(cx,{className:"h-6 w-6"}):r.jsx(ox,{className:"h-6 w-6"})})]})]})})};function Sx({title:o="Confirm Deletion",message:s,confirmWord:l="DELETE",confirmButtonLabel:i="Delete",onConfirm:u,onClose:h}){const[f,g]=N.useState(""),[b,p]=N.useState(""),[v,y]=N.useState(!1),w=async()=>{if(p(""),f.trim()!==l){p(`Type ${l} to confirm.`);return}y(!0);try{await u(),h()}catch(_){p((_==null?void 0:_.message)||"Action failed")}finally{y(!1)}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:r.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-lg shadow-xl",children:[r.jsx("div",{className:"px-5 py-4 border-b border-slate-200 dark:border-slate-700",children:r.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:o})}),r.jsxs("div",{className:"p-5 space-y-3",children:[r.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:s}),r.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Type ",l," to confirm"]}),r.jsx("input",{type:"text",value:f,onChange:_=>g(_.target.value),className:"w-full px-3 py-2 border rounded-md border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",placeholder:l,disabled:v}),b&&r.jsx("div",{className:"text-sm text-red-600",children:b})]}),r.jsxs("div",{className:"px-5 py-4 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-2",children:[r.jsx("button",{onClick:h,disabled:v,className:"px-4 py-2 rounded-md bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-600 disabled:opacity-60",children:"Cancel"}),r.jsx("button",{onClick:w,disabled:v,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 disabled:opacity-60",children:v?"Deleting...":i})]})]})})}const Cm=N.createContext(null);function kr(){const o=N.useContext(Cm);if(!o)throw new Error("useConfirm must be used within ConfirmProvider");return o}function jx({children:o}){const[s,l]=N.useState(!1),[i,u]=N.useState(null),[h,f]=N.useState(null),[g,b]=N.useState(null),p=N.useCallback(_=>(u(_),l(!0),new Promise((A,C)=>{f(()=>A),b(()=>C)})),[]),v=N.useCallback(()=>{l(!1),u(null),g&&g(),f(null),b(null)},[g]),y=N.useCallback(()=>{l(!1),h&&h(),f(null),b(null),u(null)},[h]),w=N.useMemo(()=>p,[p]);return r.jsxs(Cm.Provider,{value:w,children:[o,s&&i&&r.jsx(Sx,{title:i.title||"Please Confirm",message:i.message,confirmWord:i.confirmWord||"DELETE",confirmButtonLabel:i.confirmButtonLabel||"Confirm",onClose:v,onConfirm:y})]})}const _x=({product:o,onCardClick:s,lowStockThreshold:l,showExpiryBadge:i})=>{var b;const u=o.stock<=0,h=o.stock>0&&o.stock<=l&&o.stock!==1/0,f=(b=o==null?void 0:o.metadata)==null?void 0:b.expiryDate;let g=!1;if(i&&f){const p=new Date;g=(new Date(f).getTime()-p.getTime())/(1e3*60*60*24)<=30}return r.jsxs("div",{onClick:()=>s(o),"aria-label":o.name,className:`relative group bg-white dark:bg-slate-800 rounded-lg shadow-md flex flex-col transition-all duration-300 ease-in-out cursor-pointer hover:shadow-lg hover:scale-105
        ${u?"opacity-60 grayscale":""}
        ${h?"ring-2 ring-yellow-400":""}`,children:[r.jsxs("div",{className:"relative rounded-t-lg overflow-hidden",children:[r.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-full h-24 object-cover"}),u&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-1",children:r.jsx("span",{className:"text-white font-bold text-xs text-center bg-red-600 px-2 py-1 rounded",children:"UNAVAILABLE"})}),h&&r.jsx("div",{className:"absolute top-1 left-1 bg-yellow-400 text-yellow-800 text-[10px] font-bold px-1.5 py-0.5 rounded-full z-10",children:"LOW"}),g&&r.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full z-10",children:"EXPIRING"})]}),r.jsxs("div",{className:"p-2 text-left flex-grow flex flex-col",children:[r.jsxs("div",{className:"relative flex-grow",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 truncate cursor-help",title:o.name,children:o.name}),o.description&&r.jsxs("div",{role:"tooltip",className:"absolute bottom-full left-1/2 z-30 -translate-x-1/2 mb-2 w-56 p-3 text-sm font-normal text-white bg-slate-900 dark:bg-black rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300 pointer-events-none",children:[o.description,r.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-4 border-x-transparent border-t-4 border-t-slate-900 dark:border-t-black"})]})]}),r.jsxs("div",{className:"mt-1",children:[r.jsxs("p",{className:"text-base font-bold text-slate-900 dark:text-white",children:["",o.price.toFixed(2)]}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Cost: ",o.cost.toFixed(2)]})]})]})]})},Nx=({products:o,onProductClick:s,lowStockThreshold:l,showExpiryBadge:i})=>r.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 xl:grid-cols-8 gap-2",children:o.map(u=>r.jsx(_x,{product:u,onCardClick:s,lowStockThreshold:l,showExpiryBadge:i},u.id))}),kx=({value:o,stock:s,onChange:l})=>{const i=h=>{const f=parseInt(h.target.value,10);isNaN(f)?h.target.value===""&&l(0):l(f)},u=h=>{(h.target.value===""||o<=0)&&l(1)};return r.jsxs("div",{className:"flex items-center w-full",children:[r.jsx("button",{onClick:()=>l(o-1),disabled:o<=1,className:"w-7 h-7 flex items-center justify-center rounded-l-md bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 font-bold disabled:opacity-50 flex-shrink-0","aria-label":"Decrease quantity",children:"-"}),r.jsx("input",{type:"number",value:o===0?"":o,onChange:i,onBlur:u,className:"flex-1 min-w-0 h-7 text-center border-y border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-sm font-semibold [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",min:"1",max:s===1/0?void 0:s,"aria-label":"Item quantity"}),r.jsx("button",{onClick:()=>l(o+1),disabled:o>=s,className:"w-7 h-7 flex items-center justify-center rounded-r-md bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 font-bold disabled:opacity-50 flex-shrink-0","aria-label":"Increase quantity",children:"+"})]})},Ex=({item:o,onUpdateQuantity:s})=>{const l=o.price??0,i=o.quantity??1,u=l*i;return r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-16 h-16 object-cover rounded-md"}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:o.name}),r.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["",l.toFixed(2)]})]}),r.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[r.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:["",u.toFixed(2)]}),r.jsx(kx,{value:i,stock:o.stock,onChange:h=>s(o.id,h)})]})]})},Tx=({items:o,settings:s,discount:l,onUpdateQuantity:i,onClearCart:u,onCheckout:h,onOpenDiscountModal:f})=>{const g=o.reduce((y,w)=>y+w.price*w.quantity,0),b=g-l,p=b*(s.taxRate/100),v=b+p;return r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md flex flex-col h-full",children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Current Order"}),r.jsx("button",{onClick:u,disabled:o.length===0,className:"p-2 text-slate-500 hover:text-red-600 disabled:opacity-50 disabled:hover:text-slate-500 dark:text-slate-400 dark:hover:text-red-500","aria-label":"Clear order",children:r.jsx(Am,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-4",children:o.length===0?r.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-10",children:"Your order is empty."}):o.map(y=>r.jsx(Ex,{item:y,onUpdateQuantity:i},y.id))}),r.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Subtotal"}),r.jsxs("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:["",g.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm items-center",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Discount"}),r.jsxs("button",{onClick:f,className:"text-indigo-600 dark:text-indigo-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",disabled:o.length===0,children:[r.jsx(Om,{className:"w-4 h-4"}),r.jsx("span",{children:l>0?"Edit":"Add"})]})]}),r.jsxs("span",{className:"font-medium text-green-600",children:["- ",l.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Tax (",s.taxRate,"%)"]}),r.jsxs("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:["",p.toFixed(2)]})]}),r.jsx("div",{className:"border-t border-dashed border-slate-300 dark:border-slate-600 my-2"}),r.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[r.jsx("span",{className:"text-slate-800 dark:text-slate-200",children:"Total"}),r.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:["",v.toFixed(2)]})]}),r.jsx("button",{onClick:h,disabled:o.length===0||v<0,className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-md hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed dark:disabled:bg-indigo-800 transition-colors",children:"Place Order & Pay"})]})]})},Ax=({categories:o,selectedCategory:s,onSelectCategory:l})=>r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"flex space-x-2 border-b border-slate-200 dark:border-slate-700 overflow-x-auto pb-2",children:o.map(i=>r.jsx("button",{onClick:()=>l(i),className:`px-4 py-2 text-sm font-semibold rounded-md whitespace-nowrap transition-colors duration-200 ${s===i?"bg-indigo-600 text-white shadow":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800"}`,children:i},i))})}),Ox=({productToEdit:o,onClose:s,onSave:l,hideCategory:i=!1,allProducts:u=[]})=>{const[h,f]=N.useState({name:"",price:0,cost:0,stock:1/0,imageUrl:"",description:"",category:"Main Courses",isCommissionable:!1,commissionRate:null,itemType:"product"});N.useEffect(()=>{f(o?{...o,isCommissionable:!!o.isCommissionable,commissionRate:typeof o.commissionRate=="number"?o.commissionRate:null,itemType:o.itemType||"product"}:{name:"",price:0,cost:0,stock:1/0,imageUrl:"https://picsum.photos/400/300",description:"",category:"Main Courses",isCommissionable:!1,commissionRate:null,itemType:"product"})},[o]);const g=T=>{const{name:q,value:I}=T.target;f($=>({...$,[q]:T.target.type==="number"?parseFloat(I)||0:I}))},b=T=>{const q=Number(T);f(I=>({...I,commissionRate:!isNaN(q)&&q>0?q/100:null}))},p=T=>{T.preventDefault();const q={...h};if(!String(q.name||"").trim()){alert("Please enter an item name.");return}if(q.isCommissionable){if(!q.commissionRate||q.commissionRate<=0){alert("Please set a valid commission rate (e.g. 5, 10, 35).");return}}else q.commissionRate=null;l(o?{...q,id:o.id}:q)},v=_u.useRef(null),[y,w]=N.useState(!1),_=()=>{var T;return(T=v.current)==null?void 0:T.click()},A=T=>{var $;const q=($=T.target.files)==null?void 0:$[0];if(!q)return;const I=new FileReader;I.onload=()=>f(ae=>({...ae,imageUrl:String(I.result||"")})),I.readAsDataURL(q)},C=T=>{var $;T.preventDefault(),w(!1);const q=($=T.dataTransfer.files)==null?void 0:$[0];if(!q)return;const I=new FileReader;I.onload=()=>f(ae=>({...ae,imageUrl:String(I.result||"")})),I.readAsDataURL(q)},M=h.itemType||"product",V=M==="service",D=V||h.stock===1/0,O=Array.isArray(u)?u.filter(T=>T.itemType==="ingredient"||T.itemType==="consumable"):[];return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-3xl overflow-hidden relative",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-slate-700",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:o?"Edit Item":"Add New Item"}),r.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",children:r.jsx(Nr,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:p,children:[r.jsxs("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Photo"}),r.jsxs("div",{className:`rounded-lg border-2 ${y?"border-indigo-500":"border-dashed border-slate-300 dark:border-slate-600"} p-2 bg-slate-50 dark:bg-slate-700/30 min-h-[96px] max-w-[240px] flex items-center justify-center cursor-pointer`,onClick:_,onDragOver:T=>{T.preventDefault(),w(!0)},onDragLeave:()=>w(!1),onDrop:C,title:"Click or drop an image",children:[h.imageUrl?r.jsx("img",{src:h.imageUrl,alt:"Preview",className:"max-h-24 object-contain rounded-md"}):r.jsx("div",{className:"text-center text-slate-500 dark:text-slate-400",children:r.jsx("div",{className:"text-xs",children:"Upload"})}),r.jsx("input",{ref:v,type:"file",accept:"image/*",className:"hidden",onChange:A})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(Jc,{label:"Item Name",name:"name",value:h.name,onChange:g,required:!0}),!i&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category"}),r.jsxs("select",{id:"category",name:"category",value:h.category,onChange:g,className:"mt-1 block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",children:[r.jsx("option",{children:"Appetizers"}),r.jsx("option",{children:"Main Courses"}),r.jsx("option",{children:"Desserts"}),r.jsx("option",{children:"Drinks"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Type"}),r.jsx("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[{key:"product",label:"Product",icon:""},{key:"service",label:"Service",icon:""},{key:"menu",label:"Menu",icon:""},{key:"ingredient",label:"Ingredient",icon:""},{key:"consumable",label:"Consumable",icon:""}].map(({key:T,label:q,icon:I})=>r.jsxs("button",{type:"button",onClick:()=>f($=>({...$,itemType:T,stock:T==="service"?1/0:$.stock})),className:`px-2 py-2 rounded-lg text-sm font-medium border transition-colors ${(h.itemType||"product")===T?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,"aria-pressed":(h.itemType||"product")===T,children:[r.jsx("span",{className:"mr-1",children:I}),q]},T))}),r.jsxs("select",{value:h.itemType,onChange:T=>f(q=>({...q,itemType:T.target.value})),className:"hidden",children:[r.jsx("option",{value:"product",children:"Product"}),r.jsx("option",{value:"service",children:"Service"}),r.jsx("option",{value:"menu",children:"Menu"}),r.jsx("option",{value:"ingredient",children:"Ingredient"}),r.jsx("option",{value:"consumable",children:"Consumable"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(Jc,{label:"Price ()",name:"price",type:"number",value:h.price,onChange:g,required:!0,min:0,step:.01}),r.jsx(Jc,{label:"Cost ()",name:"cost",type:"number",value:h.cost,onChange:g,required:!0,min:0,step:.01}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Stock"}),r.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[!D&&r.jsx("input",{id:"stock",name:"stock",type:"number",min:0,value:Number.isFinite(h.stock)?h.stock:0,onChange:g,className:"block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 px-3"}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:D,onChange:T=>{const q=T.target.checked;f(I=>({...I,stock:q?1/0:Number.isFinite(I.stock)?I.stock:0}))},disabled:V,className:"h-4 w-4 text-indigo-600 border-slate-300 rounded"}),r.jsxs("span",{children:["Unlimited",V?" (Service)":""]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:4,value:h.description,onChange:g,className:"mt-1 block w-full rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 p-3"})]}),(M==="product"||M==="service"||M==="menu")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:M==="menu"?"Bundle Items":"Consumed Ingredients/Consumables"}),r.jsxs("div",{className:"space-y-2",children:[(h[M==="menu"?"bundleItems":"consumedItems"]||[]).map((T,q)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{value:T.itemId,onChange:I=>{const $=M==="menu"?"bundleItems":"consumedItems",ae=I.target.value;f(pe=>{const Ne=[...pe[$]||[]];return Ne[q]={...Ne[q],itemId:ae},{...pe,[$]:Ne}})},className:"w-full md:w-2/3 h-11 rounded-lg border-2 border-slate-300 px-3 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",children:[r.jsx("option",{value:"",children:"Select item"}),O.map(I=>r.jsx("option",{value:I.id,children:I.name},I.id))]}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:T.qty||1,onChange:I=>{const $=M==="menu"?"bundleItems":"consumedItems",ae=parseFloat(I.target.value)||0;f(pe=>{const Ne=[...pe[$]||[]];return Ne[q]={...Ne[q],qty:ae},{...pe,[$]:Ne}})},className:"w-28 h-11 rounded-lg border-2 border-slate-300 px-3 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"}),r.jsx("button",{type:"button",onClick:()=>{const I=M==="menu"?"bundleItems":"consumedItems";f($=>{const ae=[...$[I]||[]];return ae.splice(q,1),{...$,[I]:ae}})},className:"px-2 py-2 text-sm rounded border border-slate-300 hover:bg-slate-50 dark:border-slate-600",children:"Remove"})]},q)),r.jsxs("button",{type:"button",onClick:()=>{const T=M==="menu"?"bundleItems":"consumedItems";f(q=>({...q,[T]:[...q[T]||[],{itemId:"",qty:1}]}))},className:"px-3 py-2 rounded bg-slate-100 hover:bg-slate-200 text-sm dark:bg-slate-700 dark:hover:bg-slate-600",children:["Add ",M==="menu"?"Bundle Item":"Consumed Item"]})]})]}),r.jsxs("div",{className:"space-y-2 border-t border-slate-200 pt-4",children:[r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:!!h.isCommissionable,onChange:T=>f(q=>({...q,isCommissionable:T.target.checked,commissionRate:T.target.checked?q.commissionRate:null})),className:"h-4 w-4 text-indigo-600 border-slate-300 rounded"}),"Enable commission for this item"]}),h.isCommissionable&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Commission Rate (%)"}),r.jsx("input",{type:"number",min:0,step:.01,value:h.commissionRate?(h.commissionRate*100).toString():"",onChange:T=>b(T.target.value),placeholder:"e.g., 5, 10, 35",className:"mt-1 block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 px-3"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Percentage of this item's sales paid as commission."})]})]})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white rounded-md border border-slate-300 hover:bg-slate-50 dark:text-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:bg-slate-600",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Save Item"})]})]})]})})},Jc=({label:o,name:s,...l})=>r.jsxs("div",{children:[r.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o}),r.jsx("input",{id:s,name:s,...l,className:"mt-1 block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 px-3"})]}),Cx=({products:o,onAddProduct:s,onUpdateProduct:l,onDeleteProduct:i,onDeleteMultipleProducts:u,lowStockThreshold:h,hideCategory:f})=>{const[g,b]=N.useState(!1),[p,v]=N.useState(null),[y,w]=N.useState([]),[_,A]=N.useState("All"),[C,M]=N.useState("all"),[V,D]=N.useState("all"),[O,T]=N.useState(()=>{const G=localStorage.getItem("product_enabled_status");return G?JSON.parse(G):{}}),q=kr(),I=N.useRef(null),$=N.useMemo(()=>["All",...new Set(o.map(le=>le.category))],[o]),ae=N.useMemo(()=>o.filter(G=>{const le=_==="All"||G.category===_,S=G.itemType||"product",E=V==="all"||S===V,Q=G.stock<=0,F=G.stock>0&&G.stock<=h&&G.stock!==1/0;let ne=!0;switch(C){case"in-stock":ne=!Q&&!F;break;case"low-stock":ne=F;break;case"out-of-stock":ne=Q;break;default:ne=!0}return le&&ne&&E}),[o,_,C,V,h]),pe=ae.length>0&&ae.every(G=>y.includes(G.id)),Ne=ae.some(G=>y.includes(G.id))&&!pe;N.useEffect(()=>{I.current&&(I.current.indeterminate=Ne)},[Ne]);const X=G=>{G.target.checked?w([...y,...ae.filter(le=>!y.includes(le.id)).map(le=>le.id)]):w(y.filter(le=>!ae.find(S=>S.id===le)))},ee=G=>{w(le=>le.includes(G)?le.filter(S=>S!==G):[...le,G])},ye=G=>{const le=!O[G],S={...O,[G]:le};T(S),localStorage.setItem("product_enabled_status",JSON.stringify(S))},de=G=>{v(G||null),b(!0)},W=()=>{b(!1),v(null)},U=G=>{"id"in G?l(G):s(G),W()},J=async G=>{const le=o.find(S=>S.id===G);try{await q({message:`You are about to delete "${(le==null?void 0:le.name)||"this item"}". This action cannot be undone.`,confirmButtonLabel:"Delete Item"}),i(G),w(S=>S.filter(E=>E!==G))}catch{}},te=async()=>{if(y.length!==0)try{await q({message:`You are about to delete ${y.length} selected item(s). This action cannot be undone.`,confirmButtonLabel:"Delete Selected"}),u(y),w([])}catch{}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>{window.history.back()},className:"px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-200 dark:bg-slate-700 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600","aria-label":"Back to Main Menu",children:" Back"}),r.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Item Management"})]}),r.jsx("button",{onClick:()=>de(),className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Add New Item"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4 space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Filters"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Category"}),r.jsx("select",{value:_,onChange:G=>A(G.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-indigo-500 focus:border-indigo-500",children:$.map(G=>r.jsx("option",{value:G,children:G},G))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Status"}),r.jsxs("select",{value:C,onChange:G=>M(G.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Items"}),r.jsx("option",{value:"in-stock",children:"In Stock"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Type"}),r.jsxs("select",{value:V,onChange:G=>D(G.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"product",children:"Product"}),r.jsx("option",{value:"service",children:"Service"}),r.jsx("option",{value:"menu",children:"Menu"}),r.jsx("option",{value:"ingredient",children:"Ingredient"}),r.jsx("option",{value:"consumable",children:"Consumable"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:[y.length>0&&r.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/50 p-3 flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-semibold text-indigo-800 dark:text-indigo-200",children:[y.length," item(s) selected"]}),r.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:[r.jsx(Am,{className:"h-4 w-4"}),"Delete Selected"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left text-slate-500 dark:text-slate-400",children:[r.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-50 dark:bg-slate-700 dark:text-slate-300",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-4 py-3 w-4",children:r.jsx("input",{type:"checkbox",ref:I,checked:pe,onChange:X,className:"rounded border-slate-300 dark:border-slate-500 text-indigo-600 focus:ring-indigo-500","aria-label":"Select all products"})}),r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Menu Item"}),r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Category"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Price"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Cost"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Stock"}),r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),r.jsx("tbody",{children:ae.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-slate-500 dark:text-slate-400",children:"No menu items found matching the selected filters."})}):ae.map(G=>{const le=y.includes(G.id),S=G.stock<=0,E=G.stock>0&&G.stock<=h&&G.stock!==1/0,Q=O[G.id]!==!1;let F="",ne="";return S?(F="Out of Stock",ne="bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200"):E?(F="Low Stock",ne="bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200"):(F="In Stock",ne="bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200"),r.jsxs("tr",{className:`border-b dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 ${le?"bg-indigo-50 dark:bg-indigo-900/50":"bg-white dark:bg-slate-800"} ${Q?"":"opacity-50"}`,children:[r.jsx("td",{className:"px-4 py-4",children:r.jsx("input",{type:"checkbox",checked:le,onChange:()=>ee(G.id),className:"rounded border-slate-300 dark:border-slate-500 text-indigo-600 focus:ring-indigo-500","aria-label":`Select ${G.name}`})}),r.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap dark:text-white",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("img",{src:G.imageUrl,alt:G.name,className:"w-10 h-10 object-cover rounded-md"}),r.jsx("span",{children:G.name}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-slate-700 ml-2",children:(G.itemType||"product")==="product"?" Product":G.itemType==="service"?" Service":G.itemType==="menu"?" Menu":G.itemType==="consumable"?" Consumable":" Ingredient"})]})}),r.jsx("td",{className:"px-6 py-4",children:G.category}),r.jsxs("td",{className:"px-6 py-4 text-right font-medium text-slate-800 dark:text-slate-200",children:["",G.price.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-right",children:["",G.cost.toFixed(2)]}),r.jsx("td",{className:`px-6 py-4 text-right font-bold ${S?"text-red-500":E?"text-yellow-500":""}`,children:G.stock===1/0?"":G.stock}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${ne}`,children:F})}),r.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[r.jsx("button",{onClick:()=>ye(G.id),className:`font-medium px-2 py-1 rounded text-xs ${Q?"text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-900/30"}`,title:Q?"Click to disable":"Click to enable",children:Q?" Enabled":" Disabled"}),r.jsx("button",{onClick:()=>de(G),className:"font-medium text-indigo-600 dark:text-indigo-500 hover:underline",children:"Edit"}),r.jsx("button",{onClick:()=>J(G.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})]},G.id)})})]})})]}),g&&r.jsx(Ox,{productToEdit:p,onClose:W,onSave:U,hideCategory:!!f,allProducts:o})]})},Ml=({title:o,value:s,icon:l,color:i})=>r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow flex items-center",children:[r.jsx("div",{className:`p-3 rounded-full mr-4 ${i}`,children:l}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:o}),r.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:s})]})]}),Rx=({title:o,metrics:s})=>{const l={totalRevenue:isNaN(s.totalRevenue)?0:s.totalRevenue,totalCogs:isNaN(s.totalCogs)?0:s.totalCogs,itemsSold:isNaN(s.itemsSold)?0:s.itemsSold,transactions:isNaN(s.transactions)?0:s.transactions},i=l.totalRevenue-l.totalCogs;return r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-3",children:o}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(Ml,{title:"Total Revenue",value:`${l.totalRevenue.toFixed(2)}`,icon:r.jsx(xr,{className:"h-6 w-6 text-green-800"}),color:"bg-green-100 dark:bg-green-900/50"}),r.jsx(Ml,{title:"Total COGS",value:`${l.totalCogs.toFixed(2)}`,icon:r.jsx(xr,{className:"h-6 w-6 text-red-800"}),color:"bg-red-100 dark:bg-red-900/50"}),r.jsx(Ml,{title:"Gross Profit",value:`${i.toFixed(2)}`,icon:r.jsx(xr,{className:"h-6 w-6 text-emerald-800"}),color:"bg-emerald-100 dark:bg-emerald-900/50"}),r.jsx(Ml,{title:"Items Sold",value:l.itemsSold,icon:r.jsx(ux,{className:"h-6 w-6 text-blue-800"}),color:"bg-blue-100 dark:bg-blue-900/50"}),r.jsx(Ml,{title:"Transactions",value:l.transactions,icon:r.jsx(km,{className:"h-6 w-6 text-indigo-800"}),color:"bg-indigo-100 dark:bg-indigo-900/50"})]})]})},Dx=({onClose:o,onSave:s})=>{const[l,i]=N.useState(""),[u,h]=N.useState(""),[f,g]=N.useState("Other"),b=p=>{if(p.preventDefault(),!l||Number(u)<=0){alert("Please fill out all fields correctly.");return}s({description:l,amount:Number(u),category:f,date:new Date})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md overflow-hidden relative",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-slate-700",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Log New Expense"}),r.jsx("button",{onClick:o,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",children:r.jsx(Nr,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:b,children:[r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),r.jsx("input",{type:"text",id:"description",value:l,onChange:p=>i(p.target.value),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",required:!0,autoFocus:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Amount ()"}),r.jsx("input",{type:"number",id:"amount",value:u,onChange:p=>h(parseFloat(p.target.value)||""),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",required:!0,min:"0.01",step:"0.01"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category"}),r.jsxs("select",{id:"category",value:f,onChange:p=>g(p.target.value),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",children:[r.jsx("option",{children:"Payroll"}),r.jsx("option",{children:"Rent"}),r.jsx("option",{children:"Utilities"}),r.jsx("option",{children:"Marketing"}),r.jsx("option",{children:"Supplies"}),r.jsx("option",{children:"Other"})]})]})]})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white rounded-md border border-slate-300 hover:bg-slate-50 dark:text-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:bg-slate-600",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Save Expense"})]})]})]})})},G0=(o,s)=>!(s.from&&o<s.from||s.to&&o>s.to);function Mx(o,s,l,i){const h=s.filter(b=>{if(b.category!=="COMMISSIONS"||i.storeId&&b.storeId!==i.storeId)return!1;const p=new Date(b.createdAt||b.date);return G0(p,i)}).reduce((b,p)=>b+(p.amount||0),0),f=new Map;o.forEach(b=>{if(!b.commissionTotal||b.commissionTotal<=0||i.storeId&&b.storeId!==i.storeId)return;const p=new Date(b.timestamp);if(!G0(p,i))return;const v=b.staffId||b.staffName||"UNASSIGNED";let y=b.staffName||"Unassigned / Not Tagged";if(b.staffId&&l&&l.length){const _=l.find(A=>A.id===b.staffId);_&&(y=_.name)}const w=f.get(v)||{name:y,amount:0};w.amount+=b.commissionTotal,f.set(v,w)});const g=Array.from(f.entries()).map(([b,p])=>({key:b,name:p.name,amount:p.amount}));return{totalCommission:h,byStaff:g}}const Rm="micropos_staff_v1";function or(){try{const o=localStorage.getItem(Rm);return o?JSON.parse(o).map(l=>({...l,createdAt:l.createdAt?new Date(l.createdAt):new Date})):[]}catch{return[]}}function Xc(o){localStorage.setItem(Rm,JSON.stringify(o))}const Dt={getAll(){return or()},create(o){var i,u;const s=or(),l={...o,modules:o.modules||[],id:((u=(i=globalThis.crypto)==null?void 0:i.randomUUID)==null?void 0:u.call(i))||`staff_${Date.now()}`,createdAt:new Date};return s.push(l),Xc(s),l},update(o,s){const l=or(),i=l.findIndex(u=>u.id===o);return i===-1?null:(l[i]={...l[i],...s},Xc(l),l[i])},delete(o){const s=or().filter(l=>l.id!==o);Xc(s)}},Dm=({stores:o,transactions:s,expenses:l,currentStoreId:i})=>{const[u,h]=N.useState(()=>Dt.getAll()),[f,g]=N.useState(i||"all"),[b,p]=N.useState("today"),[v,y]=N.useState(new Date().toISOString().split("T")[0]),[w,_]=N.useState(new Date().toISOString().split("T")[0]),{from:A,to:C,label:M}=N.useMemo(()=>{const O=new Date;let T=new Date,q=new Date;switch(b){case"today":T.setHours(0,0,0,0),q.setHours(23,59,59,999);break;case"7d":T=new Date(O),T.setDate(T.getDate()-6),T.setHours(0,0,0,0),q.setHours(23,59,59,999);break;case"30d":T=new Date(O),T.setDate(T.getDate()-29),T.setHours(0,0,0,0),q.setHours(23,59,59,999);break;case"custom":T=new Date(v),T.setHours(0,0,0,0),q=new Date(w),q.setHours(23,59,59,999);break}const I=b==="today"?"Today's Commissions":`Commissions for ${T.toLocaleDateString()} - ${q.toLocaleDateString()}`;return{from:T,to:q,label:I}},[b,v,w]),V=N.useMemo(()=>({storeId:f==="all"?void 0:f,from:A,to:C}),[f,A,C]),D=N.useMemo(()=>Mx(s,l,u,V),[s,l,u,V]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 flex flex-wrap gap-4 items-center",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Store"}),r.jsxs("select",{className:"border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-md px-3 py-2 text-sm",value:f,onChange:O=>g(O.target.value),children:[r.jsx("option",{value:"all",children:"All Stores"}),o.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["today","7d","30d","custom"].map(O=>r.jsx("button",{onClick:()=>p(O),className:`px-3 py-2 rounded-md text-sm font-medium border ${b===O?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border-slate-300 dark:border-slate-600"}`,children:O==="today"?"Today":O==="7d"?"Last 7 Days":O==="30d"?"Last 30 Days":"Custom"},O))}),b==="custom"&&r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-600 dark:text-slate-300",children:["Start Date",r.jsx("input",{type:"date",value:v,onChange:O=>y(O.target.value),className:"mt-1 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 px-3 py-2"})]}),r.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-600 dark:text-slate-300",children:["End Date",r.jsx("input",{type:"date",value:w,onChange:O=>_(O.target.value),className:"mt-1 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 px-3 py-2"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Commission Summary"}),r.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:M})]}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Note: Commissions are treated as Operating Expenses. Total sales are reported in full under Revenue, and commissions are shown separately for transparency."}),r.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Commissions"}),r.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:["PHP ",D.totalCommission.toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Auto-posted commission expenses"})]})})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:r.jsx("h4",{className:"text-md font-semibold text-slate-700 dark:text-slate-200",children:"Commissions by Staff"})}),r.jsx("div",{className:"overflow-x-auto",children:D.byStaff.length>0?r.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Staff"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Total Commission"})]})}),r.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:D.byStaff.map(O=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-200",children:O.name}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-slate-900 dark:text-slate-100",children:["PHP ",O.amount.toFixed(2)]})]},O.key))})]}):r.jsx("div",{className:"px-6 py-8 text-center text-sm text-slate-500 dark:text-slate-400",children:"No commission records found for the selected filters."})})]})]})},Ux=({transactions:o,expenses:s,onAddExpense:l,stores:i,currentStoreId:u,onStoreFilterChange:h})=>{const[f,g]=N.useState(!1),[b,p]=N.useState("SUMMARY"),[v,y]=N.useState("today"),[w,_]=N.useState(new Date().toISOString().split("T")[0]),[A,C]=N.useState(new Date().toISOString().split("T")[0]),[M,V]=N.useState(u||"all"),D=i||[],O=N.useMemo(()=>M==="all"?o:o.filter(W=>W.storeId===M),[o,M]),T=N.useMemo(()=>M==="all"?s:s.filter(W=>W.storeId===M),[s,M]),{filteredTransactions:q,filteredExpenses:I,dateRangeTitle:$}=N.useMemo(()=>{const W=new Date;let U=new Date,J=new Date;switch(v){case"today":U.setHours(0,0,0,0),J.setHours(23,59,59,999);break;case"7d":U.setDate(W.getDate()-6),U.setHours(0,0,0,0),J.setHours(23,59,59,999);break;case"30d":U.setDate(W.getDate()-29),U.setHours(0,0,0,0),J.setHours(23,59,59,999);break;case"custom":U=new Date(w),U.setHours(0,0,0,0),J=new Date(A),J.setHours(23,59,59,999);break}const te=O.filter(S=>new Date(S.timestamp)>=U&&new Date(S.timestamp)<=J),G=T.filter(S=>new Date(S.date)>=U&&new Date(S.date)<=J),le=v==="today"?"Today's Summary":`Summary for ${U.toLocaleDateString()} - ${J.toLocaleDateString()}`;return{filteredTransactions:te,filteredExpenses:G,dateRangeTitle:le}},[O,T,v,w,A]),ae=N.useMemo(()=>{const W=q.reduce((U,J)=>(U.totalRevenue+=J.total||0,U.transactions+=1,J.items.forEach(te=>{U.itemsSold+=te.quantity||0,U.totalCogs+=(te.cost||0)*(te.quantity||0)}),U),{totalRevenue:0,itemsSold:0,transactions:0,totalCogs:0});return{totalRevenue:isNaN(W.totalRevenue)?0:W.totalRevenue,itemsSold:isNaN(W.itemsSold)?0:W.itemsSold,transactions:isNaN(W.transactions)?0:W.transactions,totalCogs:isNaN(W.totalCogs)?0:W.totalCogs}},[q]),{totalCommissions:pe,totalOtherExpenses:Ne,totalExpenses:X}=N.useMemo(()=>{const W=I.reduce((U,J)=>{const te=J.amount||0;return J.category==="COMMISSIONS"?U.totalCommissions+=te:U.totalOtherExpenses+=te,U},{totalCommissions:0,totalOtherExpenses:0});return{totalCommissions:W.totalCommissions,totalOtherExpenses:W.totalOtherExpenses,totalExpenses:W.totalCommissions+W.totalOtherExpenses}},[I]),ee=N.useMemo(()=>{const W=ae.totalRevenue-ae.totalCogs-X;return isNaN(W)?0:W},[ae,X]),ye=W=>{l(W),g(!1)},de=()=>{let W="data:text/csv;charset=utf-8,";W+=`Date,Type,Description,Category,Amount
`;const U=[...q.map(G=>[new Date(G.timestamp).toLocaleString(),"Sale",`Order #${G.id.slice(-6)} (${G.items.length} items)`,"",G.total.toFixed(2)]),...I.map(G=>[new Date(G.date).toLocaleString(),"Expense",G.description,G.category,(-G.amount).toFixed(2)])];U.sort((G,le)=>new Date(le[0]).getTime()-new Date(G[0]).getTime()),U.forEach(G=>{let le=G.join(",");W+=le+`\r
`});const J=encodeURI(W),te=document.createElement("a");te.setAttribute("href",J),te.setAttribute("download",`report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(te),te.click(),document.body.removeChild(te)};return r.jsxs("div",{className:"max-w-7xl mx-auto w-full px-4 lg:px-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>{window.history.back()},className:"px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-200 dark:bg-slate-700 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600","aria-label":"Back to Main Menu",children:" Back"}),r.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Reports"})]}),b==="SUMMARY"&&r.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[["today","7d","30d","custom"].map(W=>r.jsx("button",{onClick:()=>y(W),className:`px-4 py-2 text-sm font-semibold rounded-md whitespace-nowrap transition-colors duration-200 ${v===W?"bg-indigo-600 text-white shadow":"bg-white dark:bg-slate-800 text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"}`,children:W==="today"?"Today":W==="7d"?"Last 7 Days":W==="30d"?"Last 30 Days":"Custom"},W)),r.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[r.jsx(Tm,{className:"h-4 w-4"})," Download Report"]}),r.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:[r.jsx(mx,{className:"h-4 w-4"})," Log Expense"]})]})]}),r.jsxs("div",{className:"flex gap-3 border-b border-slate-200 dark:border-slate-700 pb-2",children:[r.jsx("button",{onClick:()=>p("SUMMARY"),className:`px-4 py-2 rounded-md text-sm font-semibold ${b==="SUMMARY"?"bg-indigo-600 text-white":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700"}`,children:"Sales & Profit"}),r.jsx("button",{onClick:()=>p("COMMISSIONS"),className:`px-4 py-2 rounded-md text-sm font-semibold ${b==="COMMISSIONS"?"bg-indigo-600 text-white":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700"}`,children:"Commission Summary"})]}),b==="SUMMARY"?r.jsxs(r.Fragment,{children:[D.length>0&&r.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[r.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mr-2",children:"Store:"}),r.jsxs("select",{className:"border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-md px-2 py-1 text-sm",value:M,onChange:W=>{const U=W.target.value;V(U),h==null||h(U)},children:[r.jsx("option",{value:"all",children:"All Stores"}),D.map(W=>r.jsx("option",{value:W.id,children:W.name},W.id))]})]}),v==="custom"&&r.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:["Start Date:",r.jsx("input",{type:"date",value:w,onChange:W=>_(W.target.value),className:"rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:["End Date:",r.jsx("input",{type:"date",value:A,onChange:W=>C(W.target.value),className:"rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"})]})]}),r.jsx(Rx,{title:$,metrics:ae}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Profit & Loss Summary"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Gross Profit"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["PHP ",(ae.totalRevenue-ae.totalCogs).toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Total Revenue - COGS"})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Commissions"}),r.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["- PHP ",pe.toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Auto-posted commission expenses"})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Expenses"}),r.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["- PHP ",X.toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Commissions + other operating expenses"})]}),r.jsxs("div",{className:`bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg border-t-4 ${ee>=0?"border-green-500":"border-red-500"}`,children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Net Profit"}),r.jsxs("p",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["PHP ",ee.toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Gross Profit - (Commissions + Other Expenses)"})]})]})]}),f&&r.jsx(Dx,{onClose:()=>g(!1),onSave:ye})]}):r.jsx(Dm,{stores:D,transactions:o,expenses:s,currentStoreId:u})]})},ou="current_user",Y0="userRole",Mm="store_owners_v1";function Um(){try{const o=localStorage.getItem(Mm);return o?JSON.parse(o):{}}catch{return{}}}function zx(o){localStorage.setItem(Mm,JSON.stringify(o))}function Ul(){const o=localStorage.getItem(ou);if(!o)return null;try{const s=JSON.parse(o);return s&&s.createdAt&&(s.createdAt=new Date(s.createdAt)),s&&s.lastLogin&&(s.lastLogin=new Date(s.lastLogin)),s}catch{return null}}function Nu(o){o?(localStorage.setItem(ou,JSON.stringify(o)),localStorage.setItem(Y0,o.role)):(localStorage.removeItem(ou),localStorage.removeItem(Y0))}async function Lx(o,s){if(!o||!s)throw new Error("Email and password are required");const l={id:`sa_${Date.now()}`,email:o,name:"Super Admin",password:"local",role:"super_admin",storeId:null,enabled:!0,createdAt:new Date,lastLogin:new Date};return Nu(l),l}async function Bx(o){const{storeId:s,email:l,password:i}=o;if(!s)throw new Error("Please select a store");if(!l||!i)throw new Error("Email and password are required");try{const u=localStorage.getItem("store_owners_v1"),f=(u?JSON.parse(u):{})[s];if(!f)throw new Error("Owner not provisioned for this store");if(f.email!==l||f.password!==i)throw new Error("Invalid credentials");const g={id:f.id,email:f.email,name:f.name,password:"local",role:"store_manager",storeId:s,enabled:!0,createdAt:new Date,lastLogin:new Date};return Nu(g),g}catch(u){throw new Error((u==null?void 0:u.message)||"Login failed")}}function qx(){Nu(null)}function P0(o){return[]}function K0(o){return[]}async function Hx(o){throw new Error("Store logins are disabled")}function $x(o,s){const l=Um(),i=`owner_${Date.now()}`,u={id:i,name:s.name,email:s.email,phone:s.phone,password:s.password,storeId:o.id};return l[o.id]=u,zx(l),{id:i,email:s.email,name:s.name,password:"local",role:"store_manager",storeId:o.id,enabled:!0,createdAt:new Date,lastLogin:void 0}}function Vx(o){const l=Um()[o];if(!l)return null;const{id:i,name:u,email:h,phone:f}=l;return{id:i,name:u,email:h,phone:f}}const Ix=({settings:o,store:s,modules:l,staff:i,onSave:u,onStaffsChanged:h})=>{const[f,g]=N.useState(o),b=Vx(s.id),[p,v]=N.useState(()=>i.filter(E=>E.storeIds.includes(s.id))),[y,w]=N.useState(""),[_,A]=N.useState(""),[C,M]=N.useState(""),[V,D]=N.useState(""),[O,T]=N.useState(""),[q,I]=N.useState("STAFF"),[$,ae]=N.useState(!0),[pe,Ne]=N.useState([]),[X,ee]=N.useState(null),ye=kr(),de=N.useMemo(()=>Object.entries(l).filter(([,E])=>E).map(([E])=>E),[l]);N.useEffect(()=>{v(i.filter(E=>E.storeIds.includes(s.id)))},[i,s.id]),N.useEffect(()=>{Ne(E=>E.filter(Q=>de.includes(Q)))},[de]);const W=()=>{w(""),A(""),M(""),D(""),T(""),I("STAFF"),ae(!0),Ne([]),ee(null)},U=E=>{E.preventDefault(),u({...f,taxRate:Number(f.taxRate)||0,lowStockThreshold:Number(f.lowStockThreshold)||0})},J=E=>{const Q=E.name.split(/\s+/),F=Q[0]||"",ne=Q.length===1?"":Q[Q.length-1],oe=Q.length>2?Q.slice(1,-1).join(" "):"";w(F),A(oe),M(ne),D(E.nickname||""),T(E.contactPhone||""),I(E.role),ae(E.isActive),Ne(E.modules?E.modules.filter(we=>de.includes(we)):[]),ee(E.id)},te=E=>{if(E.preventDefault(),!y.trim()||!C.trim())return;const F={name:[y.trim(),_.trim(),C.trim()].filter(Boolean).join(" "),nickname:V.trim()||void 0,role:q,storeIds:[s.id],contactPhone:O.trim()||void 0,isActive:$,modules:pe};if(X){const ne=Dt.update(X,F);ne&&v(oe=>oe.map(we=>we.id===ne.id?ne:we))}else{const ne=Dt.create(F);v(oe=>[...oe,ne])}h(Dt.getAll()),W()},G=async E=>{try{await ye({message:`You are about to delete ${E.name}. This action cannot be undone.`,confirmButtonLabel:"Delete Staff"}),Dt.delete(E.id);const Q=Dt.getAll();v(Q.filter(F=>F.storeIds.includes(s.id))),h(Q),X===E.id&&W()}catch{}},le=(E,Q)=>{if(Dt.update(E,{isActive:Q})){const ne=Dt.getAll();v(ne.filter(oe=>oe.storeIds.includes(s.id))),h(ne)}},S=E=>{const{name:Q,value:F}=E.target;g(ne=>({...ne,[Q]:Q==="taxRate"||Q==="lowStockThreshold"?F===""?"":Number(F):F}))};return r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("button",{onClick:()=>window.history.back(),className:"px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-200 dark:bg-slate-700 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600",children:" Back"}),r.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Store Settings"})]}),r.jsxs("form",{onSubmit:U,className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 sm:p-8 space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 text-sm text-slate-600 shadow-lg shadow-slate-200 dark:shadow-none",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Store Owner"}),r.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:s.ownerName||(b==null?void 0:b.name)||"Unassigned"}),r.jsx("p",{className:"text-sm text-slate-500",children:(b==null?void 0:b.email)||o.contactInfo||"Email not provided"}),r.jsx("p",{className:"text-sm text-slate-500",children:(b==null?void 0:b.phone)||s.phone||"Phone not provided"}),r.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"Owner details are read-only."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(Rs,{label:"Tax Rate (%)",name:"taxRate",type:"number",value:f.taxRate,onChange:S,required:!0,min:"0",step:"0.01"}),r.jsx(Rs,{label:"Low Stock Threshold",name:"lowStockThreshold",type:"number",value:f.lowStockThreshold,onChange:S,required:!0,min:"0",step:"1"})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save Settings"})})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 sm:p-8 space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[r.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Manage Staff"}),r.jsx("span",{className:"text-sm text-slate-500",children:"Only staff assigned to this store are listed."})]}),r.jsxs("form",{onSubmit:te,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(Rs,{label:"First Name *",name:"staffFirstName",value:y,onChange:E=>w(E.target.value)}),r.jsx(Rs,{label:"Middle Name",name:"staffMiddleName",value:_,onChange:E=>A(E.target.value)}),r.jsx(Rs,{label:"Last Name *",name:"staffLastName",value:C,onChange:E=>M(E.target.value)}),r.jsx(Rs,{label:"Nickname",name:"staffNickname",value:V,onChange:E=>D(E.target.value)}),r.jsx(Rs,{label:"Contact Phone",name:"staffPhone",value:O,onChange:E=>T(E.target.value)}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Role"}),r.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-600 dark:text-slate-200",value:q,onChange:E=>I(E.target.value),children:[r.jsx("option",{value:"STAFF",children:"Staff"}),r.jsx("option",{value:"CASHIER",children:"Cashier"}),r.jsx("option",{value:"THERAPIST",children:"Therapist"}),r.jsx("option",{value:"BARBER",children:"Barber"}),r.jsx("option",{value:"WAITER",children:"Waiter"}),r.jsx("option",{value:"OTHER",children:"Other"})]})]}),r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Module Access (limited to enabled modules)"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:de.map(E=>r.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1 border rounded-full text-xs bg-white dark:bg-slate-900",children:[r.jsx("input",{type:"checkbox",checked:pe.includes(E),onChange:Q=>Ne(F=>Q.target.checked?Array.from(new Set([...F,E])):F.filter(ne=>ne!==E))}),r.jsx("span",{children:E.replace("_"," ")})]},E))})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:$,onChange:E=>ae(E.target.checked)}),r.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Active"})]}),r.jsxs("div",{className:"md:col-span-3 flex items-center justify-between",children:[X&&r.jsx("button",{type:"button",onClick:W,className:"px-4 py-2 border rounded-md text-sm",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:X?"Save Changes":"Add Staff"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Name"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Role"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Modules"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-2"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-200",children:[p.map(E=>{var Q;return r.jsxs("tr",{children:[r.jsxs("td",{className:"px-4 py-2 text-sm",children:[E.name,E.nickname?` (${E.nickname})`:""]}),r.jsx("td",{className:"px-4 py-2 text-sm",children:E.role}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("div",{className:"flex flex-wrap gap-1 text-xs",children:(Q=E.modules)!=null&&Q.length?E.modules.map(F=>r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100",children:F.replace("_"," ")},F)):r.jsx("span",{className:"text-slate-400",children:"No modules"})})}),r.jsx("td",{className:"px-4 py-2 text-sm",children:E.isActive?"Active":"Inactive"}),r.jsxs("td",{className:"px-4 py-2 text-right space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>J(E),className:"px-3 py-1.5 text-xs rounded-md border bg-white hover:bg-slate-50",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>G(E),className:"px-3 py-1.5 text-xs rounded-md border border-red-200 bg-red-50 text-red-700 hover:bg-red-100",children:"Delete"}),r.jsx("button",{type:"button",onClick:()=>le(E.id,!E.isActive),className:"px-3 py-1.5 text-xs rounded-md border bg-white hover:bg-slate-50",children:E.isActive?"Mark Inactive":"Mark Active"})]})]},E.id)}),p.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-4 py-6 text-sm text-slate-500 text-center",children:"No staff assigned to this store yet."})})]})]})})]})]})},Rs=({label:o,name:s,...l})=>r.jsxs("div",{children:[r.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o}),r.jsx("input",{id:s,name:s,...l,className:"mt-1 block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 px-3"})]}),vr={RESTAURANT:{enableTables:!0},SALON:{enableAppointments:!0},LAUNDRY:{},SARI_SARI:{enableUtangLedger:!0},PHARMACY:{enableExpiryAlerts:!0},RETAIL:{}},us={async getAllStores(){const o=localStorage.getItem("stores");return(o?JSON.parse(o):[]).map(l=>{const i=l.businessType||"RESTAURANT";return{...l,businessType:i,features:vr[i]}})},async getStore(o){return(await this.getAllStores()).find(l=>l.id===o)||null},async createStore(o){const s=o.businessType||"RESTAURANT",l=o.features||vr[s]||{},i={...o,businessType:s,features:l,id:`store_${Date.now()}`,createdAt:new Date,updatedAt:new Date},h=[...await this.getAllStores(),i];return localStorage.setItem("stores",JSON.stringify(h)),i},async updateStore(o,s){const l=await this.getAllStores(),i=l.findIndex(h=>h.id===o);if(i===-1)throw new Error("Store not found");let u={...s};if(s&&"businessType"in s&&!s.features){const h=s.businessType||l[i].businessType;h&&(u.features=vr[h])}return l[i]={...l[i],...u,updatedAt:new Date},localStorage.setItem("stores",JSON.stringify(l)),l[i]},async deleteStore(o){const l=(await this.getAllStores()).filter(i=>i.id!==o);localStorage.setItem("stores",JSON.stringify(l))},async updateStoreSettings(o,s){const l=await this.getStore(o);if(!l)throw new Error("Store not found");const i={...l,settings:{...l.settings,...s}};return this.updateStore(o,i)},async getStoresByManager(o){return(await this.getAllStores()).filter(l=>l.managerId===o)}};function zm({value:o,onChange:s}){var q,I,$,ae,pe,Ne;const l=((I=(q=import.meta)==null?void 0:q.env)==null?void 0:I.BASE_URL)||"/",i=X=>`${String(l).replace(/\/$/,"")}/${X.replace(/^\//,"")}`,u=N.useMemo(()=>String(Date.now()),[]),[h,f]=N.useState((($=o==null?void 0:o.region)==null?void 0:$.region_code)??""),[g,b]=N.useState(((ae=o==null?void 0:o.province)==null?void 0:ae.province_code)??""),[p,v]=N.useState(((pe=o==null?void 0:o.city)==null?void 0:pe.city_code)??""),[y,w]=N.useState(((Ne=o==null?void 0:o.barangay)==null?void 0:Ne.brgy_code)??""),[_,A]=N.useState([]),[C,M]=N.useState([]),[V,D]=N.useState([]),[O,T]=N.useState([]);return N.useEffect(()=>{(async()=>{try{const ee=await fetch(`${i("ph-addresses/region.json")}?v=${u}`,{cache:"no-store"});if(!ee.ok)throw new Error(`Failed to fetch regions: ${ee.status}`);const ye=await ee.json();A(ye)}catch(ee){console.error(ee)}})()},[]),N.useEffect(()=>{const X=async()=>{try{const ee=await fetch(`${i("ph-addresses/province.json")}?v=${u}`,{cache:"no-store"});if(!ee.ok)throw new Error(`Failed to fetch provinces: ${ee.status}`);const de=(await ee.json()).filter(W=>W.region_code===h);M(de)}catch(ee){console.error(ee)}};if(!h){M([]),D([]),T([]),b(""),v(""),w("");return}b(""),v(""),w(""),D([]),T([]),X()},[h]),N.useEffect(()=>{const X=async()=>{try{const ee=await fetch(`${i("ph-addresses/city.json")}?v=${u}`,{cache:"no-store"});if(!ee.ok)throw new Error(`Failed to fetch cities: ${ee.status}`);const de=(await ee.json()).filter(W=>W.province_code===g);D(de)}catch(ee){console.error(ee)}};if(!g){D([]),T([]),v(""),w("");return}v(""),w(""),T([]),X()},[g]),N.useEffect(()=>{const X=async()=>{try{const ee=await fetch(`${i("ph-addresses/barangay.json")}?v=${u}`,{cache:"no-store"});if(!ee.ok)throw new Error(`Failed to fetch barangays: ${ee.status}`);const de=(await ee.json()).filter(W=>W.city_code===p);T(de)}catch(ee){console.error(ee)}};if(!p){T([]),w("");return}w(""),X()},[p]),N.useEffect(()=>{if(!s)return;const X=_.find(W=>W.region_code===h),ee=C.find(W=>W.province_code===g),ye=V.find(W=>W.city_code===p),de=O.find(W=>W.brgy_code===y);s({region:X,province:ee,city:ye,barangay:de})},[h,g,p,y,_,C,V,O,s]),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Region"}),r.jsxs("select",{className:"w-full border rounded px-2 py-1",value:h,onChange:X=>f(X.target.value),children:[r.jsx("option",{value:"",children:"Select region"}),_.map(X=>r.jsx("option",{value:X.region_code,children:X.region_name},X.region_code))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Province"}),r.jsxs("select",{className:"w-full border rounded px-2 py-1",value:g,onChange:X=>b(X.target.value),disabled:!h,children:[r.jsx("option",{value:"",children:"Select province"}),C.map(X=>r.jsx("option",{value:X.province_code,children:X.province_name},X.province_code))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"City / Municipality"}),r.jsxs("select",{className:"w-full border rounded px-2 py-1",value:p,onChange:X=>v(X.target.value),disabled:!g,children:[r.jsx("option",{value:"",children:"Select city / municipality"}),V.map(X=>r.jsx("option",{value:X.city_code,children:X.city_name},X.city_code))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Barangay"}),r.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:X=>w(X.target.value),disabled:!p,children:[r.jsx("option",{value:"",children:"Select barangay"}),O.map(X=>r.jsx("option",{value:X.brgy_code,children:X.brgy_name},X.brgy_code))]})]})]})}var cu=function(o,s){return cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,i){l.__proto__=i}||function(l,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(l[u]=i[u])},cu(o,s)};function Lm(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");cu(o,s);function l(){this.constructor=o}o.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}var yr=function(){return yr=Object.assign||function(s){for(var l,i=1,u=arguments.length;i<u;i++){l=arguments[i];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])}return s},yr.apply(this,arguments)};function Bn(o,s){var l={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&s.indexOf(i)<0&&(l[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)s.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(l[i[u]]=o[i[u]]);return l}function Bm(o,s,l,i){var u=arguments.length,h=u<3?s:i===null?i=Object.getOwnPropertyDescriptor(s,l):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(o,s,l,i);else for(var g=o.length-1;g>=0;g--)(f=o[g])&&(h=(u<3?f(h):u>3?f(s,l,h):f(s,l))||h);return u>3&&h&&Object.defineProperty(s,l,h),h}function qm(o,s){return function(l,i){s(l,i,o)}}function Hm(o,s,l,i,u,h){function f(V){if(V!==void 0&&typeof V!="function")throw new TypeError("Function expected");return V}for(var g=i.kind,b=g==="getter"?"get":g==="setter"?"set":"value",p=!s&&o?i.static?o:o.prototype:null,v=s||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),y,w=!1,_=l.length-1;_>=0;_--){var A={};for(var C in i)A[C]=C==="access"?{}:i[C];for(var C in i.access)A.access[C]=i.access[C];A.addInitializer=function(V){if(w)throw new TypeError("Cannot add initializers after decoration has completed");h.push(f(V||null))};var M=(0,l[_])(g==="accessor"?{get:v.get,set:v.set}:v[b],A);if(g==="accessor"){if(M===void 0)continue;if(M===null||typeof M!="object")throw new TypeError("Object expected");(y=f(M.get))&&(v.get=y),(y=f(M.set))&&(v.set=y),(y=f(M.init))&&u.unshift(y)}else(y=f(M))&&(g==="field"?u.unshift(y):v[b]=y)}p&&Object.defineProperty(p,i.name,v),w=!0}function $m(o,s,l){for(var i=arguments.length>2,u=0;u<s.length;u++)l=i?s[u].call(o,l):s[u].call(o);return i?l:void 0}function Vm(o){return typeof o=="symbol"?o:"".concat(o)}function Im(o,s,l){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:l?"".concat(l," ",s):s})}function Gm(o,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,s)}function ue(o,s,l,i){function u(h){return h instanceof l?h:new l(function(f){f(h)})}return new(l||(l=Promise))(function(h,f){function g(v){try{p(i.next(v))}catch(y){f(y)}}function b(v){try{p(i.throw(v))}catch(y){f(y)}}function p(v){v.done?h(v.value):u(v.value).then(g,b)}p((i=i.apply(o,s||[])).next())})}function Ym(o,s){var l={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},i,u,h,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=g(0),f.throw=g(1),f.return=g(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(p){return function(v){return b([p,v])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(l=0)),l;)try{if(i=1,u&&(h=p[0]&2?u.return:p[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,p[1])).done)return h;switch(u=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return l.label++,{value:p[1],done:!1};case 5:l.label++,u=p[1],p=[0];continue;case 7:p=l.ops.pop(),l.trys.pop();continue;default:if(h=l.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){l=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){l.label=p[1];break}if(p[0]===6&&l.label<h[1]){l.label=h[1],h=p;break}if(h&&l.label<h[2]){l.label=h[2],l.ops.push(p);break}h[2]&&l.ops.pop(),l.trys.pop();continue}p=s.call(o,l)}catch(v){p=[6,v],u=0}finally{i=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Er=Object.create?(function(o,s,l,i){i===void 0&&(i=l);var u=Object.getOwnPropertyDescriptor(s,l);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,i,u)}):(function(o,s,l,i){i===void 0&&(i=l),o[i]=s[l]});function Pm(o,s){for(var l in o)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&Er(s,o,l)}function wr(o){var s=typeof Symbol=="function"&&Symbol.iterator,l=s&&o[s],i=0;if(l)return l.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function ku(o,s){var l=typeof Symbol=="function"&&o[Symbol.iterator];if(!l)return o;var i=l.call(o),u,h=[],f;try{for(;(s===void 0||s-- >0)&&!(u=i.next()).done;)h.push(u.value)}catch(g){f={error:g}}finally{try{u&&!u.done&&(l=i.return)&&l.call(i)}finally{if(f)throw f.error}}return h}function Km(){for(var o=[],s=0;s<arguments.length;s++)o=o.concat(ku(arguments[s]));return o}function Qm(){for(var o=0,s=0,l=arguments.length;s<l;s++)o+=arguments[s].length;for(var i=Array(o),u=0,s=0;s<l;s++)for(var h=arguments[s],f=0,g=h.length;f<g;f++,u++)i[u]=h[f];return i}function Jm(o,s,l){if(l||arguments.length===2)for(var i=0,u=s.length,h;i<u;i++)(h||!(i in s))&&(h||(h=Array.prototype.slice.call(s,0,i)),h[i]=s[i]);return o.concat(h||Array.prototype.slice.call(s))}function zn(o){return this instanceof zn?(this.v=o,this):new zn(o)}function Xm(o,s,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=l.apply(o,s||[]),u,h=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",f),u[Symbol.asyncIterator]=function(){return this},u;function f(_){return function(A){return Promise.resolve(A).then(_,y)}}function g(_,A){i[_]&&(u[_]=function(C){return new Promise(function(M,V){h.push([_,C,M,V])>1||b(_,C)})},A&&(u[_]=A(u[_])))}function b(_,A){try{p(i[_](A))}catch(C){w(h[0][3],C)}}function p(_){_.value instanceof zn?Promise.resolve(_.value.v).then(v,y):w(h[0][2],_)}function v(_){b("next",_)}function y(_){b("throw",_)}function w(_,A){_(A),h.shift(),h.length&&b(h[0][0],h[0][1])}}function Zm(o){var s,l;return s={},i("next"),i("throw",function(u){throw u}),i("return"),s[Symbol.iterator]=function(){return this},s;function i(u,h){s[u]=o[u]?function(f){return(l=!l)?{value:zn(o[u](f)),done:!1}:h?h(f):f}:h}}function Fm(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o[Symbol.asyncIterator],l;return s?s.call(o):(o=typeof wr=="function"?wr(o):o[Symbol.iterator](),l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l);function i(h){l[h]=o[h]&&function(f){return new Promise(function(g,b){f=o[h](f),u(g,b,f.done,f.value)})}}function u(h,f,g,b){Promise.resolve(b).then(function(p){h({value:p,done:g})},f)}}function Wm(o,s){return Object.defineProperty?Object.defineProperty(o,"raw",{value:s}):o.raw=s,o}var Gx=Object.create?(function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}):function(o,s){o.default=s},uu=function(o){return uu=Object.getOwnPropertyNames||function(s){var l=[];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(l[l.length]=i);return l},uu(o)};function eg(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l=uu(o),i=0;i<l.length;i++)l[i]!=="default"&&Er(s,o,l[i]);return Gx(s,o),s}function tg(o){return o&&o.__esModule?o:{default:o}}function ag(o,s,l,i){if(l==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?o!==s||!i:!s.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l==="m"?i:l==="a"?i.call(o):i?i.value:s.get(o)}function sg(o,s,l,i,u){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?o!==s||!u:!s.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?u.call(o,l):u?u.value=l:s.set(o,l),l}function ng(o,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?s===o:o.has(s)}function lg(o,s,l){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var i,u;if(l){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=s[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=s[Symbol.dispose],l&&(u=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");u&&(i=function(){try{u.call(this)}catch(h){return Promise.reject(h)}}),o.stack.push({value:s,dispose:i,async:l})}else l&&o.stack.push({async:!0});return s}var Yx=typeof SuppressedError=="function"?SuppressedError:function(o,s,l){var i=new Error(l);return i.name="SuppressedError",i.error=o,i.suppressed=s,i};function ig(o){function s(h){o.error=o.hasError?new Yx(h,o.error,"An error was suppressed during disposal."):h,o.hasError=!0}var l,i=0;function u(){for(;l=o.stack.pop();)try{if(!l.async&&i===1)return i=0,o.stack.push(l),Promise.resolve().then(u);if(l.dispose){var h=l.dispose.call(l.value);if(l.async)return i|=2,Promise.resolve(h).then(u,function(f){return s(f),u()})}else i|=1}catch(f){s(f)}if(i===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return u()}function rg(o,s){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(l,i,u,h,f){return i?s?".jsx":".js":u&&(!h||!f)?l:u+h+"."+f.toLowerCase()+"js"}):o}const Px={__extends:Lm,__assign:yr,__rest:Bn,__decorate:Bm,__param:qm,__esDecorate:Hm,__runInitializers:$m,__propKey:Vm,__setFunctionName:Im,__metadata:Gm,__awaiter:ue,__generator:Ym,__createBinding:Er,__exportStar:Pm,__values:wr,__read:ku,__spread:Km,__spreadArrays:Qm,__spreadArray:Jm,__await:zn,__asyncGenerator:Xm,__asyncDelegator:Zm,__asyncValues:Fm,__makeTemplateObject:Wm,__importStar:eg,__importDefault:tg,__classPrivateFieldGet:ag,__classPrivateFieldSet:sg,__classPrivateFieldIn:ng,__addDisposableResource:lg,__disposeResources:ig,__rewriteRelativeImportExtension:rg},Kx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:lg,get __assign(){return yr},__asyncDelegator:Zm,__asyncGenerator:Xm,__asyncValues:Fm,__await:zn,__awaiter:ue,__classPrivateFieldGet:ag,__classPrivateFieldIn:ng,__classPrivateFieldSet:sg,__createBinding:Er,__decorate:Bm,__disposeResources:ig,__esDecorate:Hm,__exportStar:Pm,__extends:Lm,__generator:Ym,__importDefault:tg,__importStar:eg,__makeTemplateObject:Wm,__metadata:Gm,__param:qm,__propKey:Vm,__read:ku,__rest:Bn,__rewriteRelativeImportExtension:rg,__runInitializers:$m,__setFunctionName:Im,__spread:Km,__spreadArray:Jm,__spreadArrays:Qm,__values:wr,default:Px},Symbol.toStringTag,{value:"Module"})),Qx="modulepreload",Jx=function(o){return"/"+o},Q0={},qn=function(s,l,i){let u=Promise.resolve();if(l&&l.length>0){let f=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),b=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));u=f(l.map(p=>{if(p=Jx(p),p in Q0)return;Q0[p]=!0;const v=p.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":Qx,v||(w.as="script"),w.crossOrigin="",w.href=p,b&&w.setAttribute("nonce",b),document.head.appendChild(w),v)return new Promise((_,A)=>{w.addEventListener("load",_),w.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})}))}function h(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return u.then(f=>{for(const g of f||[])g.status==="rejected"&&h(g.reason);return s().catch(h)})},Xx=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...l)=>qn(async()=>{const{default:i}=await Promise.resolve().then(()=>Hs);return{default:i}},void 0).then(({default:i})=>i(...l)):s=fetch,(...l)=>s(...l)};class Eu extends Error{constructor(s,l="FunctionsError",i){super(s),this.name=l,this.context=i}}class J0 extends Eu{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class X0 extends Eu{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class Z0 extends Eu{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var du;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(du||(du={}));class Zx{constructor(s,{headers:l={},customFetch:i,region:u=du.Any}={}){this.url=s,this.headers=l,this.region=u,this.fetch=Xx(i)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return ue(this,arguments,void 0,function*(l,i={}){var u;try{const{headers:h,method:f,body:g,signal:b}=i;let p={},{region:v}=i;v||(v=this.region);const y=new URL(`${this.url}/${l}`);v&&v!=="any"&&(p["x-region"]=v,y.searchParams.set("forceFunctionRegion",v));let w;g&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=g):typeof g=="string"?(p["Content-Type"]="text/plain",w=g):typeof FormData<"u"&&g instanceof FormData?w=g:(p["Content-Type"]="application/json",w=JSON.stringify(g)):w=g;const _=yield this.fetch(y.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),h),body:w,signal:b}).catch(V=>{throw V.name==="AbortError"?V:new J0(V)}),A=_.headers.get("x-relay-error");if(A&&A==="true")throw new X0(_);if(!_.ok)throw new Z0(_);let C=((u=_.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),M;return C==="application/json"?M=yield _.json():C==="application/octet-stream"||C==="application/pdf"?M=yield _.blob():C==="text/event-stream"?M=_:C==="multipart/form-data"?M=yield _.formData():M=yield _.text(),{data:M,error:null,response:_}}catch(h){return h instanceof Error&&h.name==="AbortError"?{data:null,error:new J0(h)}:{data:null,error:h,response:h instanceof Z0||h instanceof X0?h.context:void 0}}})}}var yt={};const Hn=Nm(Kx);var cr={},ur={},dr={},hr={},fr={},Fx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ln=Fx();const Wx=Ln.fetch,og=Ln.fetch.bind(Ln),cg=Ln.Headers,ev=Ln.Request,tv=Ln.Response,Hs=Object.freeze(Object.defineProperty({__proto__:null,Headers:cg,Request:ev,Response:tv,default:og,fetch:Wx},Symbol.toStringTag,{value:"Module"})),av=Nm(Hs);var mr={},F0;function ug(){if(F0)return mr;F0=1,Object.defineProperty(mr,"__esModule",{value:!0});class o extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}}return mr.default=o,mr}var W0;function dg(){if(W0)return fr;W0=1,Object.defineProperty(fr,"__esModule",{value:!0});const o=Hn,s=o.__importDefault(av),l=o.__importDefault(ug());class i{constructor(h){var f,g;this.shouldThrowOnError=!1,this.method=h.method,this.url=h.url,this.headers=new Headers(h.headers),this.schema=h.schema,this.body=h.body,this.shouldThrowOnError=(f=h.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=h.signal,this.isMaybeSingle=(g=h.isMaybeSingle)!==null&&g!==void 0?g:!1,h.fetch?this.fetch=h.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(h,f){return this.headers=new Headers(this.headers),this.headers.set(h,f),this}then(h,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let b=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var v,y,w,_;let A=null,C=null,M=null,V=p.status,D=p.statusText;if(p.ok){if(this.method!=="HEAD"){const I=await p.text();I===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?C=I:C=JSON.parse(I))}const T=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),q=(w=p.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");T&&q&&q.length>1&&(M=parseInt(q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(A={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,M=null,V=406,D="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const T=await p.text();try{A=JSON.parse(T),Array.isArray(A)&&p.status===404&&(C=[],A=null,V=200,D="OK")}catch{p.status===404&&T===""?(V=204,D="No Content"):A={message:T}}if(A&&this.isMaybeSingle&&(!((_=A==null?void 0:A.details)===null||_===void 0)&&_.includes("0 rows"))&&(A=null,V=200,D="OK"),A&&this.shouldThrowOnError)throw new l.default(A)}return{error:A,data:C,count:M,status:V,statusText:D}});return this.shouldThrowOnError||(b=b.catch(p=>{var v,y,w;return{error:{message:`${(v=p==null?void 0:p.name)!==null&&v!==void 0?v:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(y=p==null?void 0:p.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(w=p==null?void 0:p.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),b.then(h,f)}returns(){return this}overrideTypes(){return this}}return fr.default=i,fr}var em;function hg(){if(em)return hr;em=1,Object.defineProperty(hr,"__esModule",{value:!0});const s=Hn.__importDefault(dg());class l extends s.default{select(u){let h=!1;const f=(u??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:h=!0,nullsFirst:f,foreignTable:g,referencedTable:b=g}={}){const p=b?`${b}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${u}.${h?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:h,referencedTable:f=h}={}){const g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${u}`),this}range(u,h,{foreignTable:f,referencedTable:g=f}={}){const b=typeof g>"u"?"offset":`${g}.offset`,p=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(b,`${u}`),this.url.searchParams.set(p,`${h-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:h=!1,settings:f=!1,buffers:g=!1,wal:b=!1,format:p="text"}={}){var v;const y=[u?"analyze":null,h?"verbose":null,f?"settings":null,g?"buffers":null,b?"wal":null].filter(Boolean).join("|"),w=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${w}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return hr.default=l,hr}var tm;function Tu(){if(tm)return dr;tm=1,Object.defineProperty(dr,"__esModule",{value:!0});const s=Hn.__importDefault(hg()),l=new RegExp("[,()]");class i extends s.default{eq(h,f){return this.url.searchParams.append(h,`eq.${f}`),this}neq(h,f){return this.url.searchParams.append(h,`neq.${f}`),this}gt(h,f){return this.url.searchParams.append(h,`gt.${f}`),this}gte(h,f){return this.url.searchParams.append(h,`gte.${f}`),this}lt(h,f){return this.url.searchParams.append(h,`lt.${f}`),this}lte(h,f){return this.url.searchParams.append(h,`lte.${f}`),this}like(h,f){return this.url.searchParams.append(h,`like.${f}`),this}likeAllOf(h,f){return this.url.searchParams.append(h,`like(all).{${f.join(",")}}`),this}likeAnyOf(h,f){return this.url.searchParams.append(h,`like(any).{${f.join(",")}}`),this}ilike(h,f){return this.url.searchParams.append(h,`ilike.${f}`),this}ilikeAllOf(h,f){return this.url.searchParams.append(h,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(h,f){return this.url.searchParams.append(h,`ilike(any).{${f.join(",")}}`),this}is(h,f){return this.url.searchParams.append(h,`is.${f}`),this}in(h,f){const g=Array.from(new Set(f)).map(b=>typeof b=="string"&&l.test(b)?`"${b}"`:`${b}`).join(",");return this.url.searchParams.append(h,`in.(${g})`),this}contains(h,f){return typeof f=="string"?this.url.searchParams.append(h,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(h,`cs.{${f.join(",")}}`):this.url.searchParams.append(h,`cs.${JSON.stringify(f)}`),this}containedBy(h,f){return typeof f=="string"?this.url.searchParams.append(h,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(h,`cd.{${f.join(",")}}`):this.url.searchParams.append(h,`cd.${JSON.stringify(f)}`),this}rangeGt(h,f){return this.url.searchParams.append(h,`sr.${f}`),this}rangeGte(h,f){return this.url.searchParams.append(h,`nxl.${f}`),this}rangeLt(h,f){return this.url.searchParams.append(h,`sl.${f}`),this}rangeLte(h,f){return this.url.searchParams.append(h,`nxr.${f}`),this}rangeAdjacent(h,f){return this.url.searchParams.append(h,`adj.${f}`),this}overlaps(h,f){return typeof f=="string"?this.url.searchParams.append(h,`ov.${f}`):this.url.searchParams.append(h,`ov.{${f.join(",")}}`),this}textSearch(h,f,{config:g,type:b}={}){let p="";b==="plain"?p="pl":b==="phrase"?p="ph":b==="websearch"&&(p="w");const v=g===void 0?"":`(${g})`;return this.url.searchParams.append(h,`${p}fts${v}.${f}`),this}match(h){return Object.entries(h).forEach(([f,g])=>{this.url.searchParams.append(f,`eq.${g}`)}),this}not(h,f,g){return this.url.searchParams.append(h,`not.${f}.${g}`),this}or(h,{foreignTable:f,referencedTable:g=f}={}){const b=g?`${g}.or`:"or";return this.url.searchParams.append(b,`(${h})`),this}filter(h,f,g){return this.url.searchParams.append(h,`${f}.${g}`),this}}return dr.default=i,dr}var am;function fg(){if(am)return ur;am=1,Object.defineProperty(ur,"__esModule",{value:!0});const s=Hn.__importDefault(Tu());class l{constructor(u,{headers:h={},schema:f,fetch:g}){this.url=u,this.headers=new Headers(h),this.schema=f,this.fetch=g}select(u,h){const{head:f=!1,count:g}=h??{},b=f?"HEAD":"GET";let p=!1;const v=(u??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",v),g&&this.headers.append("Prefer",`count=${g}`),new s.default({method:b,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:h,defaultToNull:f=!0}={}){var g;const b="POST";if(h&&this.headers.append("Prefer",`count=${h}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const p=u.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(p.length>0){const v=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new s.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(u,{onConflict:h,ignoreDuplicates:f=!1,count:g,defaultToNull:b=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),h!==void 0&&this.url.searchParams.set("on_conflict",h),g&&this.headers.append("Prefer",`count=${g}`),b||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const y=u.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(y.length>0){const w=[...new Set(y)].map(_=>`"${_}"`);this.url.searchParams.set("columns",w.join(","))}}return new s.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(u,{count:h}={}){var f;const g="PATCH";return h&&this.headers.append("Prefer",`count=${h}`),new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:u}={}){var h;const f="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new s.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return ur.default=l,ur}var sm;function sv(){if(sm)return cr;sm=1,Object.defineProperty(cr,"__esModule",{value:!0});const o=Hn,s=o.__importDefault(fg()),l=o.__importDefault(Tu());class i{constructor(h,{headers:f={},schema:g,fetch:b}={}){this.url=h,this.headers=new Headers(f),this.schemaName=g,this.fetch=b}from(h){const f=new URL(`${this.url}/${h}`);return new s.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new i(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,f={},{head:g=!1,get:b=!1,count:p}={}){var v;let y;const w=new URL(`${this.url}/rpc/${h}`);let _;g||b?(y=g?"HEAD":"GET",Object.entries(f).filter(([C,M])=>M!==void 0).map(([C,M])=>[C,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([C,M])=>{w.searchParams.append(C,M)})):(y="POST",_=f);const A=new Headers(this.headers);return p&&A.set("Prefer",`count=${p}`),new l.default({method:y,url:w,headers:A,schema:this.schemaName,body:_,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return cr.default=i,cr}var nm;function nv(){if(nm)return yt;nm=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;const o=Hn,s=o.__importDefault(sv());yt.PostgrestClient=s.default;const l=o.__importDefault(fg());yt.PostgrestQueryBuilder=l.default;const i=o.__importDefault(Tu());yt.PostgrestFilterBuilder=i.default;const u=o.__importDefault(hg());yt.PostgrestTransformBuilder=u.default;const h=o.__importDefault(dg());yt.PostgrestBuilder=h.default;const f=o.__importDefault(ug());return yt.PostgrestError=f.default,yt.default={PostgrestClient:s.default,PostgrestQueryBuilder:l.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:h.default,PostgrestError:f.default},yt}var mg=nv();const gg=Su(mg),lv=Jb({__proto__:null,default:gg},[mg]),{PostgrestClient:iv,PostgrestQueryBuilder:tS,PostgrestFilterBuilder:aS,PostgrestTransformBuilder:sS,PostgrestBuilder:nS,PostgrestError:lS}=gg||lv;class rv{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const l=process.versions;if(l&&l.node){const i=l.node,u=parseInt(i.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let l=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(l+=`

Suggested solution: ${s.workaround}`),new Error(l)}static createWebSocket(s,l){const i=this.getWebSocketConstructor();return new i(s,l)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const ov="2.78.0",cv=`realtime-js/${ov}`,uv="1.0.0",hu=1e4,dv=1e3,hv=100;var Ll;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Ll||(Ll={}));var ut;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(ut||(ut={}));var ca;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(ca||(ca={}));var fu;(function(o){o.websocket="websocket"})(fu||(fu={}));var Ls;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(Ls||(Ls={}));class fv{constructor(){this.HEADER_LENGTH=1}decode(s,l){return s.constructor===ArrayBuffer?l(this._binaryDecode(s)):l(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const l=new DataView(s),i=new TextDecoder;return this._decodeBroadcast(s,l,i)}_decodeBroadcast(s,l,i){const u=l.getUint8(1),h=l.getUint8(2);let f=this.HEADER_LENGTH+2;const g=i.decode(s.slice(f,f+u));f=f+u;const b=i.decode(s.slice(f,f+h));f=f+h;const p=JSON.parse(i.decode(s.slice(f,s.byteLength)));return{ref:null,topic:g,event:b,payload:p}}}class pg{constructor(s,l){this.callback=s,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Pe||(Pe={}));const lm=(o,s,l={})=>{var i;const u=(i=l.skipTypes)!==null&&i!==void 0?i:[];return s?Object.keys(s).reduce((h,f)=>(h[f]=mv(f,o,s,u),h),{}):{}},mv=(o,s,l,i)=>{const u=s.find(g=>g.name===o),h=u==null?void 0:u.type,f=l[o];return h&&!i.includes(h)?bg(h,f):mu(f)},bg=(o,s)=>{if(o.charAt(0)==="_"){const l=o.slice(1,o.length);return xv(s,l)}switch(o){case Pe.bool:return gv(s);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return pv(s);case Pe.json:case Pe.jsonb:return bv(s);case Pe.timestamp:return vv(s);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return mu(s);default:return mu(s)}},mu=o=>o,gv=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},pv=o=>{if(typeof o=="string"){const s=parseFloat(o);if(!Number.isNaN(s))return s}return o},bv=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(s){return console.log(`JSON parse error: ${s}`),o}return o},xv=(o,s)=>{if(typeof o!="string")return o;const l=o.length-1,i=o[l];if(o[0]==="{"&&i==="}"){let h;const f=o.slice(1,l);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(g=>bg(s,g))}return o},vv=o=>typeof o=="string"?o.replace(" ","T"):o,xg=o=>{const s=new URL(o);return s.protocol=s.protocol.replace(/^ws/i,"http"),s.pathname=s.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),s.pathname===""||s.pathname==="/"?s.pathname="/api/broadcast":s.pathname=s.pathname+"/api/broadcast",s.href};class Zc{constructor(s,l,i={},u=hu){this.channel=s,this.event=l,this.payload=i,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,l){var i;return this._hasReceived(s)&&l((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:s,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:l}){this.recHooks.filter(i=>i.status===s).forEach(i=>i.callback(l))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var im;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(im||(im={}));class Bl{constructor(s,l){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(l==null?void 0:l.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},u=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bl.syncState(this.state,u,h,f),this.pendingDiffs.forEach(b=>{this.state=Bl.syncDiff(this.state,b,h,f)}),this.pendingDiffs=[],g()}),this.channel._on(i.diff,{},u=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Bl.syncDiff(this.state,u,h,f),g())}),this.onJoin((u,h,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:h,newPresences:f})}),this.onLeave((u,h,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,l,i,u){const h=this.cloneDeep(s),f=this.transformState(l),g={},b={};return this.map(h,(p,v)=>{f[p]||(b[p]=v)}),this.map(f,(p,v)=>{const y=h[p];if(y){const w=v.map(M=>M.presence_ref),_=y.map(M=>M.presence_ref),A=v.filter(M=>_.indexOf(M.presence_ref)<0),C=y.filter(M=>w.indexOf(M.presence_ref)<0);A.length>0&&(g[p]=A),C.length>0&&(b[p]=C)}else g[p]=v}),this.syncDiff(h,{joins:g,leaves:b},i,u)}static syncDiff(s,l,i,u){const{joins:h,leaves:f}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return i||(i=()=>{}),u||(u=()=>{}),this.map(h,(g,b)=>{var p;const v=(p=s[g])!==null&&p!==void 0?p:[];if(s[g]=this.cloneDeep(b),v.length>0){const y=s[g].map(_=>_.presence_ref),w=v.filter(_=>y.indexOf(_.presence_ref)<0);s[g].unshift(...w)}i(g,v,b)}),this.map(f,(g,b)=>{let p=s[g];if(!p)return;const v=b.map(y=>y.presence_ref);p=p.filter(y=>v.indexOf(y.presence_ref)<0),s[g]=p,u(g,p,b),p.length===0&&delete s[g]}),s}static map(s,l){return Object.getOwnPropertyNames(s).map(i=>l(i,s[i]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((l,i)=>{const u=s[i];return"metas"in u?l[i]=u.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):l[i]=u,l},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rm;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(rm||(rm={}));var ql;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(ql||(ql={}));var Da;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(Da||(Da={}));class Au{constructor(s,l={config:{}},i){var u,h;if(this.topic=s,this.params=l,this.socket=i,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Zc(this,ca.join,this.params,this.timeout),this.rejoinTimer=new pg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ca.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new Bl(this),this.broadcastEndpointURL=xg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,l=this.timeout){var i,u,h;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:f,presence:g,private:b}}=this.params,p=(u=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(_=>_.filter))!==null&&u!==void 0?u:[],v=!!this.bindings[ql.PRESENCE]&&this.bindings[ql.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,y={},w={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:v}),postgres_changes:p,private:b};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(_=>s==null?void 0:s(Da.CHANNEL_ERROR,_)),this._onClose(()=>s==null?void 0:s(Da.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:_})=>{var A;if(this.socket.setAuth(),_===void 0){s==null||s(Da.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,M=(A=C==null?void 0:C.length)!==null&&A!==void 0?A:0,V=[];for(let D=0;D<M;D++){const O=C[D],{filter:{event:T,schema:q,table:I,filter:$}}=O,ae=_&&_[D];if(ae&&ae.event===T&&ae.schema===q&&ae.table===I&&ae.filter===$)V.push(Object.assign(Object.assign({},O),{id:ae.id}));else{this.unsubscribe(),this.state=ut.errored,s==null||s(Da.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=V,s&&s(Da.SUBSCRIBED);return}}).receive("error",_=>{this.state=ut.errored,s==null||s(Da.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Da.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,l={}){return await this.send({type:"presence",event:"track",payload:s},l.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,l,i){return this.state===ut.joined&&s===ql.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,l,i)}async httpSend(s,l,i={}){var u;const h=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(l==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:h,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=i.timeout)!==null&&u!==void 0?u:this.timeout);if(g.status===202)return{success:!0};let b=g.statusText;try{const p=await g.json();b=p.error||p.message||b}catch{}return Promise.reject(new Error(b))}async send(s,l={}){var i,u;if(!this._canPush()&&s.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=s,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(i=l.timeout)!==null&&i!==void 0?i:this.timeout);return await((u=p.body)===null||u===void 0?void 0:u.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,g,b;const p=this._push(s.type,s,l.timeout||this.timeout);s.type==="broadcast"&&!(!((b=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||b===void 0)&&b.ack)&&h("ok"),p.receive("ok",()=>h("ok")),p.receive("error",()=>h("error")),p.receive("timeout",()=>h("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=ut.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ca.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(u=>{i=new Zc(this,ca.leave,{},s),i.receive("ok",()=>{l(),u("ok")}).receive("timeout",()=>{l(),u("timed out")}).receive("error",()=>{u("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(s,l,i){const u=new AbortController,h=setTimeout(()=>u.abort(),i),f=await this.socket.fetch(s,Object.assign(Object.assign({},l),{signal:u.signal}));return clearTimeout(h),f}_push(s,l,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Zc(this,s,l,i);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>hv){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(s,l,i){return l}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,l,i){var u,h;const f=s.toLocaleLowerCase(),{close:g,error:b,leave:p,join:v}=ca;if(i&&[g,b,p,v].indexOf(f)>=0&&i!==this._joinRef())return;let w=this._onMessage(f,l,i);if(l&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(_=>{var A,C,M;return((A=_.filter)===null||A===void 0?void 0:A.event)==="*"||((M=(C=_.filter)===null||C===void 0?void 0:C.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===f}).map(_=>_.callback(w,i)):(h=this.bindings[f])===null||h===void 0||h.filter(_=>{var A,C,M,V,D,O;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in _){const T=_.id,q=(A=_.filter)===null||A===void 0?void 0:A.event;return T&&((C=l.ids)===null||C===void 0?void 0:C.includes(T))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((M=l.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const T=(D=(V=_==null?void 0:_.filter)===null||V===void 0?void 0:V.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return T==="*"||T===((O=l==null?void 0:l.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===f}).map(_=>{if(typeof w=="object"&&"ids"in w){const A=w.data,{schema:C,table:M,commit_timestamp:V,type:D,errors:O}=A;w=Object.assign(Object.assign({},{schema:C,table:M,commit_timestamp:V,eventType:D,new:{},old:{},errors:O}),this._getPayloadRecords(A))}_.callback(w,i)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,l,i){const u=s.toLocaleLowerCase(),h={type:u,filter:l,callback:i};return this.bindings[u]?this.bindings[u].push(h):this.bindings[u]=[h],this}_off(s,l){const i=s.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(u=>{var h;return!(((h=u.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===i&&Au.isEqual(u.filter,l))})),this}static isEqual(s,l){if(Object.keys(s).length!==Object.keys(l).length)return!1;for(const i in s)if(s[i]!==l[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(ca.close,{},s)}_onError(s){this._on(ca.error,{},l=>s(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const l={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(l.new=lm(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(l.old=lm(s.columns,s.old_record)),l}}const Fc=()=>{},gr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},yv=[1e3,2e3,5e3,1e4],wv=1e4,Sv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jv{constructor(s,l){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hu,this.transport=null,this.heartbeatIntervalMs=gr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fc,this.ref=0,this.reconnectTimer=null,this.logger=Fc,this.conn=null,this.sendBuffer=[],this.serializer=new fv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>{let h;return u?h=u:typeof fetch>"u"?h=(...f)=>qn(async()=>{const{default:g}=await Promise.resolve().then(()=>Hs);return{default:g}},void 0).then(({default:g})=>g(...f)).catch(g=>{throw new Error(`Failed to load @supabase/node-fetch: ${g.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):h=fetch,(...f)=>h(...f)},!(!((i=l==null?void 0:l.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${s}/${fu.websocket}`,this.httpEndpoint=xg(s),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l==null?void 0:l.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rv.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const l=s.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uv}))}disconnect(s,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},s?this.conn.close(s,l??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const l=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const s=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,l,i){this.logger(s,l,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ll.connecting:return Ls.Connecting;case Ll.open:return Ls.Open;case Ll.closing:return Ls.Closing;default:return Ls.Closed}}isConnected(){return this.connectionState()===Ls.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,l={config:{}}){const i=`realtime:${s}`,u=this.getChannels().find(h=>h.topic===i);if(u)return u;{const h=new Au(`realtime:${s}`,l,this);return this.channels.push(h),h}}push(s){const{topic:l,event:i,payload:u,ref:h}=s,f=()=>{this.encode(s,g=>{var b;(b=this.conn)===null||b===void 0||b.send(g)})};this.log("push",`${l} ${i} (${h})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(dv,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},gr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let l=this.channels.find(i=>i.topic===s&&(i._isJoined()||i._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${s}"`),l.unsubscribe())}_remove(s){this.channels=this.channels.filter(l=>l.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply")try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}l.ref&&l.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:u,payload:h,ref:f}=l,g=f?`(${f})`:"",b=h.status||"";this.log("receive",`${b} ${i} ${u} ${g}`.trim(),h),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(u,h,f)),this._triggerStateCallbacks("message",l)})}_clearTimer(s){var l;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this.workerRef.terminate()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var l;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(ca.error))}_appendParams(s,l){if(Object.keys(l).length===0)return s;const i=s.match(/\?/)?"&":"?",u=new URLSearchParams(l);return`${s}${i}${u}`}_workerObjectUrl(s){let l;if(s)l=s;else{const i=new Blob([Sv],{type:"application/javascript"});l=URL.createObjectURL(i)}return l}_setConnectionState(s,l=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(s=null){let l;s?l=s:this.accessToken?l=await this.accessToken():l=this.accessTokenValue,this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(i=>{const u={access_token:l,version:cv};l&&i.updateJoinPayload(u),i.joinedOnce&&i._isJoined()&&i._push(ca.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(l=>{this.log("error",`error setting auth in ${s}`,l)})}_triggerStateCallbacks(s,l){try{this.stateChangeCallbacks[s].forEach(i=>{try{i(l)}catch(u){this.log("error",`error in ${s} callback`,u)}})}catch(i){this.log("error",`error triggering ${s} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new pg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var l,i,u,h,f,g,b,p,v;if(this.transport=(l=s==null?void 0:s.transport)!==null&&l!==void 0?l:null,this.timeout=(i=s==null?void 0:s.timeout)!==null&&i!==void 0?i:hu,this.heartbeatIntervalMs=(u=s==null?void 0:s.heartbeatIntervalMs)!==null&&u!==void 0?u:gr.HEARTBEAT_INTERVAL,this.worker=(h=s==null?void 0:s.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=s==null?void 0:s.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=s==null?void 0:s.heartbeatCallback)!==null&&g!==void 0?g:Fc,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=s==null?void 0:s.reconnectAfterMs)!==null&&b!==void 0?b:(y=>yv[y-1]||wv),this.encode=(p=s==null?void 0:s.encode)!==null&&p!==void 0?p:((y,w)=>w(JSON.stringify(y))),this.decode=(v=s==null?void 0:s.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}class Ou extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function Ze(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class _v extends Ou{constructor(s,l,i){super(s),this.name="StorageApiError",this.status=l,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gu extends Ou{constructor(s,l){super(s),this.name="StorageUnknownError",this.originalError=l}}const Cu=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...l)=>qn(async()=>{const{default:i}=await Promise.resolve().then(()=>Hs);return{default:i}},void 0).then(({default:i})=>i(...l)):s=fetch,(...l)=>s(...l)},Nv=()=>ue(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qn(()=>Promise.resolve().then(()=>Hs),void 0)).Response:Response}),pu=o=>{if(Array.isArray(o))return o.map(l=>pu(l));if(typeof o=="function"||o!==Object(o))return o;const s={};return Object.entries(o).forEach(([l,i])=>{const u=l.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));s[u]=pu(i)}),s},kv=o=>{if(typeof o!="object"||o===null)return!1;const s=Object.getPrototypeOf(o);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},Wc=o=>{var s;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(s=o.error)===null||s===void 0?void 0:s.message)||JSON.stringify(o)},Ev=(o,s,l)=>ue(void 0,void 0,void 0,function*(){const i=yield Nv();o instanceof i&&!(l!=null&&l.noResolveJson)?o.json().then(u=>{const h=o.status||500,f=(u==null?void 0:u.statusCode)||h+"";s(new _v(Wc(u),h,f))}).catch(u=>{s(new gu(Wc(u),u))}):s(new gu(Wc(o),o))}),Tv=(o,s,l,i)=>{const u={method:o,headers:(s==null?void 0:s.headers)||{}};return o==="GET"||!i?u:(kv(i)?(u.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),u.body=JSON.stringify(i)):u.body=i,s!=null&&s.duplex&&(u.duplex=s.duplex),Object.assign(Object.assign({},u),l))};function Gl(o,s,l,i,u,h){return ue(this,void 0,void 0,function*(){return new Promise((f,g)=>{o(l,Tv(s,i,u,h)).then(b=>{if(!b.ok)throw b;return i!=null&&i.noResolveJson?b:b.json()}).then(b=>f(b)).catch(b=>Ev(b,g,i))})})}function Hl(o,s,l,i){return ue(this,void 0,void 0,function*(){return Gl(o,"GET",s,l,i)})}function oa(o,s,l,i,u){return ue(this,void 0,void 0,function*(){return Gl(o,"POST",s,i,u,l)})}function bu(o,s,l,i,u){return ue(this,void 0,void 0,function*(){return Gl(o,"PUT",s,i,u,l)})}function Av(o,s,l,i){return ue(this,void 0,void 0,function*(){return Gl(o,"HEAD",s,Object.assign(Object.assign({},l),{noResolveJson:!0}),i)})}function Ru(o,s,l,i,u){return ue(this,void 0,void 0,function*(){return Gl(o,"DELETE",s,i,u,l)})}class Ov{constructor(s,l){this.downloadFn=s,this.shouldThrowOnError=l}then(s,l){return this.execute().then(s,l)}execute(){return ue(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}}var vg;class Cv{constructor(s,l){this.downloadFn=s,this.shouldThrowOnError=l,this[vg]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ov(this.downloadFn,this.shouldThrowOnError)}then(s,l){return this.getPromise().then(s,l)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ue(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}}vg=Symbol.toStringTag;const Rv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},om={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Dv{constructor(s,l={},i,u){this.shouldThrowOnError=!1,this.url=s,this.headers=l,this.bucketId=i,this.fetch=Cu(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,l,i,u){return ue(this,void 0,void 0,function*(){try{let h;const f=Object.assign(Object.assign({},om),u);let g=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const b=f.metadata;typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),b&&h.append("metadata",this.encodeMetadata(b)),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.append("cacheControl",f.cacheControl),b&&h.append("metadata",this.encodeMetadata(b))):(h=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,b&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(b)))),u!=null&&u.headers&&(g=Object.assign(Object.assign({},g),u.headers));const p=this._removeEmptyFolders(l),v=this._getFinalPath(p),y=yield(s=="PUT"?bu:oa)(this.fetch,`${this.url}/object/${v}`,h,Object.assign({headers:g},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Ze(h))return{data:null,error:h};throw h}})}upload(s,l,i){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,l,i)})}uploadToSignedUrl(s,l,i,u){return ue(this,void 0,void 0,function*(){const h=this._removeEmptyFolders(s),f=this._getFinalPath(h),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",l);try{let b;const p=Object.assign({upsert:om.upsert},u),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(b=new FormData,b.append("cacheControl",p.cacheControl),b.append("",i)):typeof FormData<"u"&&i instanceof FormData?(b=i,b.append("cacheControl",p.cacheControl)):(b=i,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const y=yield bu(this.fetch,g.toString(),b,{headers:v});return{data:{path:h,fullPath:y.Key},error:null}}catch(b){if(this.shouldThrowOnError)throw b;if(Ze(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(s,l){return ue(this,void 0,void 0,function*(){try{let i=this._getFinalPath(s);const u=Object.assign({},this.headers);l!=null&&l.upsert&&(u["x-upsert"]="true");const h=yield oa(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:u}),f=new URL(this.url+h.url),g=f.searchParams.get("token");if(!g)throw new Ou("No token returned by API");return{data:{signedUrl:f.toString(),path:s,token:g},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}update(s,l,i){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,l,i)})}move(s,l,i){return ue(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:l,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ze(u))return{data:null,error:u};throw u}})}copy(s,l,i){return ue(this,void 0,void 0,function*(){try{return{data:{path:(yield oa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:l,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ze(u))return{data:null,error:u};throw u}})}createSignedUrl(s,l,i){return ue(this,void 0,void 0,function*(){try{let u=this._getFinalPath(s),h=yield oa(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:l},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return h={signedUrl:encodeURI(`${this.url}${h.signedURL}${f}`)},{data:h,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ze(u))return{data:null,error:u};throw u}})}createSignedUrls(s,l,i){return ue(this,void 0,void 0,function*(){try{const u=yield oa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:l,paths:s},{headers:this.headers}),h=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:u.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${h}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ze(u))return{data:null,error:u};throw u}})}download(s,l){const u=typeof(l==null?void 0:l.transform)<"u"?"render/image/authenticated":"object",h=this.transformOptsToQueryString((l==null?void 0:l.transform)||{}),f=h?`?${h}`:"",g=this._getFinalPath(s),b=()=>Hl(this.fetch,`${this.url}/${u}/${g}${f}`,{headers:this.headers,noResolveJson:!0});return new Cv(b,this.shouldThrowOnError)}info(s){return ue(this,void 0,void 0,function*(){const l=this._getFinalPath(s);try{const i=yield Hl(this.fetch,`${this.url}/object/info/${l}`,{headers:this.headers});return{data:pu(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}exists(s){return ue(this,void 0,void 0,function*(){const l=this._getFinalPath(s);try{return yield Av(this.fetch,`${this.url}/object/${l}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i)&&i instanceof gu){const u=i.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:i}}throw i}})}getPublicUrl(s,l){const i=this._getFinalPath(s),u=[],h=l!=null&&l.download?`download=${l.download===!0?"":l.download}`:"";h!==""&&u.push(h);const g=typeof(l==null?void 0:l.transform)<"u"?"render/image":"object",b=this.transformOptsToQueryString((l==null?void 0:l.transform)||{});b!==""&&u.push(b);let p=u.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${i}${p}`)}}}remove(s){return ue(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}list(s,l,i){return ue(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},Rv),l),{prefix:s||""});return{data:yield oa(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},i),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ze(u))return{data:null,error:u};throw u}})}listV2(s,l){return ue(this,void 0,void 0,function*(){try{const i=Object.assign({},s);return{data:yield oa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},l),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const l=[];return s.width&&l.push(`width=${s.width}`),s.height&&l.push(`height=${s.height}`),s.resize&&l.push(`resize=${s.resize}`),s.format&&l.push(`format=${s.format}`),s.quality&&l.push(`quality=${s.quality}`),l.join("&")}}const yg="2.78.0",wg={"X-Client-Info":`storage-js/${yg}`};class Mv{constructor(s,l={},i,u){this.shouldThrowOnError=!1;const h=new URL(s);u!=null&&u.useNewHostname&&/supabase\.(co|in|red)$/.test(h.hostname)&&!h.hostname.includes("storage.supabase.")&&(h.hostname=h.hostname.replace("supabase.","storage.supabase.")),this.url=h.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wg),l),this.fetch=Cu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(s){return ue(this,void 0,void 0,function*(){try{const l=this.listBucketOptionsToQueryString(s);return{data:yield Hl(this.fetch,`${this.url}/bucket${l}`,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}getBucket(s){return ue(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}createBucket(s){return ue(this,arguments,void 0,function*(l,i={public:!1}){try{return{data:yield oa(this.fetch,`${this.url}/bucket`,{id:l,name:l,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ze(u))return{data:null,error:u};throw u}})}updateBucket(s,l){return ue(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}emptyBucket(s){return ue(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}deleteBucket(s){return ue(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}listBucketOptionsToQueryString(s){const l={};return s&&("limit"in s&&(l.limit=String(s.limit)),"offset"in s&&(l.offset=String(s.offset)),s.search&&(l.search=s.search),s.sortColumn&&(l.sortColumn=s.sortColumn),s.sortOrder&&(l.sortOrder=s.sortOrder)),Object.keys(l).length>0?"?"+new URLSearchParams(l).toString():""}}class Uv{constructor(s,l={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wg),l),this.fetch=Cu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return ue(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/bucket`,{name:s},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}listBuckets(s){return ue(this,void 0,void 0,function*(){try{const l=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&l.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&l.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&l.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&l.set("sortOrder",s.sortOrder),s!=null&&s.search&&l.set("search",s.search);const i=l.toString(),u=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Hl(this.fetch,u,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}deleteBucket(s){return ue(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}}const Du={"X-Client-Info":`storage-js/${yg}`,"Content-Type":"application/json"};class Sg extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function It(o){return typeof o=="object"&&o!==null&&"__isStorageVectorsError"in o}class eu extends Sg{constructor(s,l,i){super(s),this.name="StorageVectorsApiError",this.status=l,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zv extends Sg{constructor(s,l){super(s),this.name="StorageVectorsUnknownError",this.originalError=l}}var cm;(function(o){o.InternalError="InternalError",o.S3VectorConflictException="S3VectorConflictException",o.S3VectorNotFoundException="S3VectorNotFoundException",o.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",o.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",o.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(cm||(cm={}));const Mu=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...l)=>qn(async()=>{const{default:i}=await Promise.resolve().then(()=>Hs);return{default:i}},void 0).then(({default:i})=>i(...l)):s=fetch,(...l)=>s(...l)},Lv=o=>{if(typeof o!="object"||o===null)return!1;const s=Object.getPrototypeOf(o);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},um=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Bv=(o,s,l)=>ue(void 0,void 0,void 0,function*(){if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!(l!=null&&l.noResolveJson)){const u=o.status||500,h=o;if(typeof h.json=="function")h.json().then(f=>{const g=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||u+"";s(new eu(um(f),u,g))}).catch(()=>{const f=u+"",g=h.statusText||`HTTP ${u} error`;s(new eu(g,u,f))});else{const f=u+"",g=h.statusText||`HTTP ${u} error`;s(new eu(g,u,f))}}else s(new zv(um(o),o))}),qv=(o,s,l,i)=>{const u={method:o,headers:(s==null?void 0:s.headers)||{}};return i?(Lv(i)?(u.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),u.body=JSON.stringify(i)):u.body=i,Object.assign(Object.assign({},u),l)):u};function Hv(o,s,l,i,u,h){return ue(this,void 0,void 0,function*(){return new Promise((f,g)=>{o(l,qv(s,i,u,h)).then(b=>{if(!b.ok)throw b;if(i!=null&&i.noResolveJson)return b;const p=b.headers.get("content-type");return!p||!p.includes("application/json")?{}:b.json()}).then(b=>f(b)).catch(b=>Bv(b,g,i))})})}function Gt(o,s,l,i,u){return ue(this,void 0,void 0,function*(){return Hv(o,"POST",s,i,u,l)})}class $v{constructor(s,l={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Du),l),this.fetch=Mu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(s){return ue(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/CreateIndex`,s,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}getIndex(s,l){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:s,indexName:l},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}listIndexes(s){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/ListIndexes`,s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}deleteIndex(s,l){return ue(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:s,indexName:l},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}}class Vv{constructor(s,l={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Du),l),this.fetch=Mu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(s){return ue(this,void 0,void 0,function*(){try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Gt(this.fetch,`${this.url}/PutVectors`,s,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}getVectors(s){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/GetVectors`,s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}listVectors(s){return ue(this,void 0,void 0,function*(){try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:yield Gt(this.fetch,`${this.url}/ListVectors`,s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}queryVectors(s){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/QueryVectors`,s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}deleteVectors(s){return ue(this,void 0,void 0,function*(){try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Gt(this.fetch,`${this.url}/DeleteVectors`,s,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}}class Iv{constructor(s,l={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Du),l),this.fetch=Mu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return ue(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}getBucket(s){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:s},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}listBuckets(){return ue(this,arguments,void 0,function*(s={}){try{return{data:yield Gt(this.fetch,`${this.url}/ListVectorBuckets`,s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}deleteBucket(s){return ue(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(It(l))return{data:null,error:l};throw l}})}}class Gv extends Iv{constructor(s,l={}){super(s,l.headers||{},l.fetch)}from(s){return new Yv(this.url,this.headers,s,this.fetch)}}class Yv extends $v{constructor(s,l,i,u){super(s,l,u),this.vectorBucketName=i}createIndex(s){const l=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ue(this,void 0,void 0,function*(){return l.createIndex.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const s=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ue(this,arguments,void 0,function*(l={}){return s.listIndexes.call(this,Object.assign(Object.assign({},l),{vectorBucketName:this.vectorBucketName}))})}getIndex(s){const l=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ue(this,void 0,void 0,function*(){return l.getIndex.call(this,this.vectorBucketName,s)})}deleteIndex(s){const l=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ue(this,void 0,void 0,function*(){return l.deleteIndex.call(this,this.vectorBucketName,s)})}index(s){return new Pv(this.url,this.headers,this.vectorBucketName,s,this.fetch)}}class Pv extends Vv{constructor(s,l,i,u,h){super(s,l,h),this.vectorBucketName=i,this.indexName=u}putVectors(s){const l=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ue(this,void 0,void 0,function*(){return l.putVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(s){const l=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ue(this,void 0,void 0,function*(){return l.getVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const s=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ue(this,arguments,void 0,function*(l={}){return s.listVectors.call(this,Object.assign(Object.assign({},l),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(s){const l=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ue(this,void 0,void 0,function*(){return l.queryVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(s){const l=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ue(this,void 0,void 0,function*(){return l.deleteVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Kv extends Mv{constructor(s,l={},i,u){super(s,l,i,u)}from(s){return new Dv(this.url,this.headers,s,this.fetch)}get vectors(){return new Gv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Uv(this.url+"/iceberg",this.headers,this.fetch)}}const Qv="2.78.0";let zl="";typeof Deno<"u"?zl="deno":typeof document<"u"?zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zl="react-native":zl="node";const Jv={"X-Client-Info":`supabase-js-${zl}/${Qv}`},Xv={headers:Jv},Zv={schema:"public"},Fv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wv={},ey=o=>{let s;return o?s=o:typeof fetch>"u"?s=og:s=fetch,(...l)=>s(...l)},ty=()=>typeof Headers>"u"?cg:Headers,ay=(o,s,l)=>{const i=ey(l),u=ty();return async(h,f)=>{var g;const b=(g=await s())!==null&&g!==void 0?g:o;let p=new u(f==null?void 0:f.headers);return p.has("apikey")||p.set("apikey",o),p.has("Authorization")||p.set("Authorization",`Bearer ${b}`),i(h,Object.assign(Object.assign({},f),{headers:p}))}};function sy(o){return o.endsWith("/")?o:o+"/"}function ny(o,s){var l,i;const{db:u,auth:h,realtime:f,global:g}=o,{db:b,auth:p,realtime:v,global:y}=s,w={db:Object.assign(Object.assign({},b),u),auth:Object.assign(Object.assign({},p),h),realtime:Object.assign(Object.assign({},v),f),storage:{},global:Object.assign(Object.assign(Object.assign({},y),g),{headers:Object.assign(Object.assign({},(l=y==null?void 0:y.headers)!==null&&l!==void 0?l:{}),(i=g==null?void 0:g.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return o.accessToken?w.accessToken=o.accessToken:delete w.accessToken,w}function ly(o){const s=o==null?void 0:o.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(sy(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const jg="2.78.0",Dn=30*1e3,xu=3,tu=xu*Dn,iy="http://localhost:9999",ry="supabase.auth.token",oy={"X-Client-Info":`gotrue-js/${jg}`},vu="X-Supabase-Api-Version",_g={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uy=600*1e3;class $l extends Error{constructor(s,l,i){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=i}}function he(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class dy extends $l{constructor(s,l,i){super(s,l,i),this.name="AuthApiError",this.status=l,this.code=i}}function hy(o){return he(o)&&o.name==="AuthApiError"}class Bs extends $l{constructor(s,l){super(s),this.name="AuthUnknownError",this.originalError=l}}class ds extends $l{constructor(s,l,i,u){super(s,i,u),this.name=l,this.status=i}}class ia extends ds{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fy(o){return he(o)&&o.name==="AuthSessionMissingError"}class Tn extends ds{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pr extends ds{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class br extends ds{constructor(s,l=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function my(o){return he(o)&&o.name==="AuthImplicitGrantRedirectError"}class dm extends ds{constructor(s,l=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yu extends ds{constructor(s,l){super(s,"AuthRetryableFetchError",l,void 0)}}function au(o){return he(o)&&o.name==="AuthRetryableFetchError"}class hm extends ds{constructor(s,l,i){super(s,"AuthWeakPasswordError",l,"weak_password"),this.reasons=i}}class wu extends ds{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fm=` 	
\r=`.split(""),gy=(()=>{const o=new Array(128);for(let s=0;s<o.length;s+=1)o[s]=-1;for(let s=0;s<fm.length;s+=1)o[fm[s].charCodeAt(0)]=-2;for(let s=0;s<Sr.length;s+=1)o[Sr[s].charCodeAt(0)]=s;return o})();function mm(o,s,l){if(o!==null)for(s.queue=s.queue<<8|o,s.queuedBits+=8;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;l(Sr[i]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;l(Sr[i]),s.queuedBits-=6}}function Ng(o,s,l){const i=gy[o];if(i>-1)for(s.queue=s.queue<<6|i,s.queuedBits+=6;s.queuedBits>=8;)l(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function gm(o){const s=[],l=f=>{s.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},h=f=>{xy(f,i,l)};for(let f=0;f<o.length;f+=1)Ng(o.charCodeAt(f),u,h);return s.join("")}function py(o,s){if(o<=127){s(o);return}else if(o<=2047){s(192|o>>6),s(128|o&63);return}else if(o<=65535){s(224|o>>12),s(128|o>>6&63),s(128|o&63);return}else if(o<=1114111){s(240|o>>18),s(128|o>>12&63),s(128|o>>6&63),s(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function by(o,s){for(let l=0;l<o.length;l+=1){let i=o.charCodeAt(l);if(i>55295&&i<=56319){const u=(i-55296)*1024&65535;i=(o.charCodeAt(l+1)-56320&65535|u)+65536,l+=1}py(i,s)}}function xy(o,s,l){if(s.utf8seq===0){if(o<=127){l(o);return}for(let i=1;i<6;i+=1)if((o>>7-i&1)===0){s.utf8seq=i;break}if(s.utf8seq===2)s.codepoint=o&31;else if(s.utf8seq===3)s.codepoint=o&15;else if(s.utf8seq===4)s.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|o&63,s.utf8seq-=1,s.utf8seq===0&&l(s.codepoint)}}function Un(o){const s=[],l={queue:0,queuedBits:0},i=u=>{s.push(u)};for(let u=0;u<o.length;u+=1)Ng(o.charCodeAt(u),l,i);return new Uint8Array(s)}function vy(o){const s=[];return by(o,l=>s.push(l)),new Uint8Array(s)}function qs(o){const s=[],l={queue:0,queuedBits:0},i=u=>{s.push(u)};return o.forEach(u=>mm(u,l,i)),mm(null,l,i),s.join("")}function yy(o){return Math.round(Date.now()/1e3)+o}function wy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const s=Math.random()*16|0;return(o=="x"?s:s&3|8).toString(16)})}const _t=()=>typeof window<"u"&&typeof document<"u",Ds={tested:!1,writable:!1},kg=()=>{if(!_t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ds.tested)return Ds.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Ds.tested=!0,Ds.writable=!0}catch{Ds.tested=!0,Ds.writable=!1}return Ds.writable};function Sy(o){const s={},l=new URL(o);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((u,h)=>{s[h]=u})}catch{}return l.searchParams.forEach((i,u)=>{s[u]=i}),s}const Eg=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...l)=>qn(async()=>{const{default:i}=await Promise.resolve().then(()=>Hs);return{default:i}},void 0).then(({default:i})=>i(...l)):s=fetch,(...l)=>s(...l)},jy=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Mn=async(o,s,l)=>{await o.setItem(s,JSON.stringify(l))},Ms=async(o,s)=>{const l=await o.getItem(s);if(!l)return null;try{return JSON.parse(l)}catch{return l}},rs=async(o,s)=>{await o.removeItem(s)};class Tr{constructor(){this.promise=new Tr.promiseConstructor((s,l)=>{this.resolve=s,this.reject=l})}}Tr.promiseConstructor=Promise;function su(o){const s=o.split(".");if(s.length!==3)throw new wu("Invalid JWT structure");for(let i=0;i<s.length;i++)if(!cy.test(s[i]))throw new wu("JWT not in base64url format");return{header:JSON.parse(gm(s[0])),payload:JSON.parse(gm(s[1])),signature:Un(s[2]),raw:{header:s[0],payload:s[1]}}}async function _y(o){return await new Promise(s=>{setTimeout(()=>s(null),o)})}function Ny(o,s){return new Promise((i,u)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await o(h);if(!s(h,null,f)){i(f);return}}catch(f){if(!s(h,f)){u(f);return}}})()})}function ky(o){return("0"+o.toString(16)).substr(-2)}function Ey(){const s=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=l.length;let u="";for(let h=0;h<56;h++)u+=l.charAt(Math.floor(Math.random()*i));return u}return crypto.getRandomValues(s),Array.from(s,ky).join("")}async function Ty(o){const l=new TextEncoder().encode(o),i=await crypto.subtle.digest("SHA-256",l),u=new Uint8Array(i);return Array.from(u).map(h=>String.fromCharCode(h)).join("")}async function Ay(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const l=await Ty(o);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function An(o,s,l=!1){const i=Ey();let u=i;l&&(u+="/PASSWORD_RECOVERY"),await Mn(o,`${s}-code-verifier`,u);const h=await Ay(i);return[h,i===h?"plain":"s256"]}const Oy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Cy(o){const s=o.headers.get(vu);if(!s||!s.match(Oy))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function Ry(o){if(!o)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(o<=s)throw new Error("JWT has expired")}function Dy(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const My=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function On(o){if(!My.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nu(){const o={};return new Proxy(o,{get:(s,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const i=l.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Uy(o,s){return new Proxy(o,{get:(l,i,u)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const h=i.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,i,u)}return!s.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s.value=!0),Reflect.get(l,i,u)}})}function pm(o){return JSON.parse(JSON.stringify(o))}const zs=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),zy=[502,503,504];async function bm(o){var s;if(!jy(o))throw new yu(zs(o),0);if(zy.includes(o.status))throw new yu(zs(o),o.status);let l;try{l=await o.json()}catch(h){throw new Bs(zs(h),h)}let i;const u=Cy(o);if(u&&u.getTime()>=_g["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?i=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(i=l.error_code),i){if(i==="weak_password")throw new hm(zs(l),o.status,((s=l.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(i==="session_not_found")throw new ia}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new hm(zs(l),o.status,l.weak_password.reasons);throw new dy(zs(l),o.status||500,i)}const Ly=(o,s,l,i)=>{const u={method:o,headers:(s==null?void 0:s.headers)||{}};return o==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),u.body=JSON.stringify(i),Object.assign(Object.assign({},u),l))};async function xe(o,s,l,i){var u;const h=Object.assign({},i==null?void 0:i.headers);h[vu]||(h[vu]=_g["2024-01-01"].name),i!=null&&i.jwt&&(h.Authorization=`Bearer ${i.jwt}`);const f=(u=i==null?void 0:i.query)!==null&&u!==void 0?u:{};i!=null&&i.redirectTo&&(f.redirect_to=i.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",b=await By(o,s,l+g,{headers:h,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(b):{data:Object.assign({},b),error:null}}async function By(o,s,l,i,u,h){const f=Ly(s,i,u,h);let g;try{g=await o(l,Object.assign({},f))}catch(b){throw console.error(b),new yu(zs(b),0)}if(g.ok||await bm(g),i!=null&&i.noResolveJson)return g;try{return await g.json()}catch(b){await bm(b)}}function ra(o){var s;let l=null;$y(o)&&(l=Object.assign({},o),o.expires_at||(l.expires_at=yy(o.expires_in)));const i=(s=o.user)!==null&&s!==void 0?s:o;return{data:{session:l,user:i},error:null}}function xm(o){const s=ra(o);return!s.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((l,i)=>l&&typeof i=="string",!0)&&(s.data.weak_password=o.weak_password),s}function os(o){var s;return{data:{user:(s=o.user)!==null&&s!==void 0?s:o},error:null}}function qy(o){return{data:o,error:null}}function Hy(o){const{action_link:s,email_otp:l,hashed_token:i,redirect_to:u,verification_type:h}=o,f=Bn(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:s,email_otp:l,hashed_token:i,redirect_to:u,verification_type:h},b=Object.assign({},f);return{data:{properties:g,user:b},error:null}}function vm(o){return o}function $y(o){return o.access_token&&o.refresh_token&&o.expires_in}const lu=["global","local","others"];class Vy{constructor({url:s="",headers:l={},fetch:i}){this.url=s,this.headers=l,this.fetch=Eg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,l=lu[0]){if(lu.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lu.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}}async inviteUserByEmail(s,l={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:os})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async generateLink(s){try{const{options:l}=s,i=Bn(s,["options"]),u=Object.assign(Object.assign({},i),l);return"newEmail"in i&&(u.new_email=i==null?void 0:i.newEmail,delete u.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Hy,redirectTo:l==null?void 0:l.redirectTo})}catch(l){if(he(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(s){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:os})}catch(l){if(he(l))return{data:{user:null},error:l};throw l}}async listUsers(s){var l,i,u,h,f,g,b;try{const p={nextPage:null,lastPage:0,total:0},v=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(l=s==null?void 0:s.page)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:"",per_page:(h=(u=s==null?void 0:s.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:vm});if(v.error)throw v.error;const y=await v.json(),w=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(b=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&b!==void 0?b:[];return _.length>0&&(_.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(A.split(";")[1].split("=")[1]);p[`${M}Page`]=C}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(he(p))return{data:{users:[]},error:p};throw p}}async getUserById(s){On(s);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:os})}catch(l){if(he(l))return{data:{user:null},error:l};throw l}}async updateUserById(s,l){On(s);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:l,headers:this.headers,xform:os})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async deleteUser(s,l=!1){On(s);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:l},xform:os})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async _listFactors(s){On(s.userId);try{const{data:l,error:i}=await xe(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:l,error:i}}catch(l){if(he(l))return{data:null,error:l};throw l}}async _deleteFactor(s){On(s.userId),On(s.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(l){if(he(l))return{data:null,error:l};throw l}}async _listOAuthClients(s){var l,i,u,h,f,g,b;try{const p={nextPage:null,lastPage:0,total:0},v=await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(l=s==null?void 0:s.page)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:"",per_page:(h=(u=s==null?void 0:s.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:vm});if(v.error)throw v.error;const y=await v.json(),w=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(b=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&b!==void 0?b:[];return _.length>0&&(_.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(A.split(";")[1].split("=")[1]);p[`${M}Page`]=C}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(he(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(s){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(he(l))return{data:null,error:l};throw l}}async _getOAuthClient(s){try{return await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(he(l))return{data:null,error:l};throw l}}async _updateOAuthClient(s,l){try{return await xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${s}`,{body:l,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(s){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(he(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(s){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(he(l))return{data:null,error:l};throw l}}}function ym(o={}){return{getItem:s=>o[s]||null,setItem:(s,l)=>{o[s]=l},removeItem:s=>{delete o[s]}}}const Cn={debug:!!(globalThis&&kg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tg extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class Iy extends Tg{}async function Gy(o,s,l){Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,s);const i=new globalThis.AbortController;return s>0&&setTimeout(()=>{i.abort(),Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async u=>{if(u){Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,u.name);try{return await l()}finally{Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,u.name)}}else{if(s===0)throw Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Iy(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(Cn.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}function Yy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ag(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function Py(o){return parseInt(o,16)}function Ky(o){const s=new TextEncoder().encode(o);return"0x"+Array.from(s,i=>i.toString(16).padStart(2,"0")).join("")}function Qy(o){var s;const{chainId:l,domain:i,expirationTime:u,issuedAt:h=new Date,nonce:f,notBefore:g,requestId:b,resources:p,scheme:v,uri:y,version:w}=o;{if(!Number.isInteger(l))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${l}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((s=o.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const _=Ag(o.address),A=v?`${v}://${i}`:i,C=o.statement?`${o.statement}
`:"",M=`${A} wants you to sign in with your Ethereum account:
${_}

${C}`;let V=`URI: ${y}
Version: ${w}
Chain ID: ${l}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(u&&(V+=`
Expiration Time: ${u.toISOString()}`),g&&(V+=`
Not Before: ${g.toISOString()}`),b&&(V+=`
Request ID: ${b}`),p){let D=`
Resources:`;for(const O of p){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);D+=`
- ${O}`}V+=D}return`${M}
${V}`}class rt extends Error{constructor({message:s,code:l,cause:i,name:u}){var h;super(s,{cause:i}),this.__isWebAuthnError=!0,this.name=(h=u??(i instanceof Error?i.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=l}}class jr extends rt{constructor(s,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:s}),this.name="WebAuthnUnknownError",this.originalError=l}}function Jy({error:o,options:s}){var l,i,u;const{publicKey:h}=s;if(!h)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(s.signal instanceof AbortSignal)return new rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((l=h.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(s.mediation==="conditional"&&((i=h.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((u=h.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new rt({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return h.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const f=window.location.hostname;if(Og(f)){if(h.rp.id!==f)return new rt({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function Xy({error:o,options:s}){const{publicKey:l}=s;if(!l)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(s.signal instanceof AbortSignal)return new rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new rt({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const i=window.location.hostname;if(Og(i)){if(l.rpId!==i)return new rt({message:`The RP ID "${l.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class Zy{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const Fy=new Zy;function Wy(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:s,user:l,excludeCredentials:i}=o,u=Bn(o,["challenge","user","excludeCredentials"]),h=Un(s).buffer,f=Object.assign(Object.assign({},l),{id:Un(l.id).buffer}),g=Object.assign(Object.assign({},u),{challenge:h,user:f});if(i&&i.length>0){g.excludeCredentials=new Array(i.length);for(let b=0;b<i.length;b++){const p=i[b];g.excludeCredentials[b]=Object.assign(Object.assign({},p),{id:Un(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function ew(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:s,allowCredentials:l}=o,i=Bn(o,["challenge","allowCredentials"]),u=Un(s).buffer,h=Object.assign(Object.assign({},i),{challenge:u});if(l&&l.length>0){h.allowCredentials=new Array(l.length);for(let f=0;f<l.length;f++){const g=l[f];h.allowCredentials[f]=Object.assign(Object.assign({},g),{id:Un(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return h}function tw(o){var s;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o;return{id:o.id,rawId:o.id,response:{attestationObject:qs(new Uint8Array(o.response.attestationObject)),clientDataJSON:qs(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(s=l.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function aw(o){var s;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o,i=o.getClientExtensionResults(),u=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:qs(new Uint8Array(u.authenticatorData)),clientDataJSON:qs(new Uint8Array(u.clientDataJSON)),signature:qs(new Uint8Array(u.signature)),userHandle:u.userHandle?qs(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(s=l.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function Og(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function wm(){var o,s;return!!(_t()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator==null?void 0:navigator.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.get)=="function")}async function sw(o){try{const s=await navigator.credentials.create(o);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new jr("Browser returned unexpected credential type",s)}:{data:null,error:new jr("Empty credential response",s)}}catch(s){return{data:null,error:Jy({error:s,options:o})}}}async function nw(o){try{const s=await navigator.credentials.get(o);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new jr("Browser returned unexpected credential type",s)}:{data:null,error:new jr("Empty credential response",s)}}catch(s){return{data:null,error:Xy({error:s,options:o})}}}const lw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},iw={userVerification:"preferred",hints:["security-key"]};function _r(...o){const s=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),l=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),i={};for(const u of o)if(u)for(const h in u){const f=u[h];if(f!==void 0)if(Array.isArray(f))i[h]=f;else if(l(f))i[h]=f;else if(s(f)){const g=i[h];s(g)?i[h]=_r(g,f):i[h]=_r(f)}else i[h]=f}return i}function rw(o,s){return _r(lw,o,s||{})}function ow(o,s){return _r(iw,o,s||{})}class cw{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:l,friendlyName:i,signal:u},h){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:s,webauthn:l});if(!f)return{data:null,error:g};const b=u??Fy.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:p}=f.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(f.webauthn.type){case"create":{const p=rw(f.webauthn.credential_options.publicKey,h==null?void 0:h.create),{data:v,error:y}=await sw({publicKey:p,signal:b});return v?{data:{factorId:s,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const p=ow(f.webauthn.credential_options.publicKey,h==null?void 0:h.request),{data:v,error:y}=await nw(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:p,signal:b}));return v?{data:{factorId:s,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(f){return he(f)?{data:null,error:f}:{data:null,error:new Bs("Unexpected error in challenge",f)}}}async _verify({challengeId:s,factorId:l,webauthn:i}){return this.client.mfa.verify({factorId:l,challengeId:s,webauthn:i})}async _authenticate({factorId:s,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:u}},h){if(!l)return{data:null,error:new $l("rpId is required for WebAuthn authentication")};try{if(!wm())return{data:null,error:new Bs("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:s,webauthn:{rpId:l,rpOrigins:i},signal:u},{request:h});if(!f)return{data:null,error:g};const{webauthn:b}=f;return this._verify({factorId:s,challengeId:f.challengeId,webauthn:{type:b.type,rpId:l,rpOrigins:i,credential_response:b.credential_response}})}catch(f){return he(f)?{data:null,error:f}:{data:null,error:new Bs("Unexpected error in authenticate",f)}}}async _register({friendlyName:s,rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:u},h){if(!l)return{data:null,error:new $l("rpId is required for WebAuthn registration")};try{if(!wm())return{data:null,error:new Bs("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:s});if(!f)return await this.client.mfa.listFactors().then(v=>{var y;return(y=v.data)===null||y===void 0?void 0:y.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===s&&w.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:g};const{data:b,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:l,rpOrigins:i},signal:u},{create:h});return b?this._verify({factorId:f.id,challengeId:b.challengeId,webauthn:{rpId:l,rpOrigins:i,type:b.webauthn.type,credential_response:b.webauthn.credential_response}}):{data:null,error:p}}catch(f){return he(f)?{data:null,error:f}:{data:null,error:new Bs("Unexpected error in register",f)}}}}Yy();const uw={url:iy,storageKey:ry,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Sm(o,s,l){return await l()}const Rn={};class Vl{get jwks(){var s,l;return(l=(s=Rn[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(s){Rn[this.storageKey]=Object.assign(Object.assign({},Rn[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,l;return(l=(s=Rn[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){Rn[this.storageKey]=Object.assign(Object.assign({},Rn[this.storageKey]),{cachedAt:s})}constructor(s){var l,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vl.nextInstanceID,Vl.nextInstanceID+=1,this.instanceID>0&&_t()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},uw),s);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Vy({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Eg(u.fetch),this.lock=u.lock||Sm,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:_t()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=Gy:this.lock=Sm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new cw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:kg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ym(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=ym(this.memoryStorage)),_t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jg}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const l=Sy(window.location.href);let i="none";if(this._isImplicitGrantCallback(l)?i="implicit":await this._isPKCECallback(l)&&(i="pkce"),_t()&&this.detectSessionInUrl&&i!=="none"){const{data:u,error:h}=await this._getSessionFromURL(l,i);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),my(h)){const b=(s=h.details)===null||s===void 0?void 0:s.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:h}}return await this._removeSession(),{error:h}}const{session:f,redirectType:g}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return he(l)?{error:l}:{error:new Bs("Unexpected error during initialization",l)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var l,i,u;try{const h=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(l=s==null?void 0:s.options)===null||l===void 0?void 0:l.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(u=s==null?void 0:s.options)===null||u===void 0?void 0:u.captchaToken}},xform:ra}),{data:f,error:g}=h;if(g||!f)return{data:{user:null,session:null},error:g};const b=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:p,session:b},error:null}}catch(h){if(he(h))return{data:{user:null,session:null},error:h};throw h}}async signUp(s){var l,i,u;try{let h;if("email"in s){const{email:v,password:y,options:w}=s;let _=null,A=null;this.flowType==="pkce"&&([_,A]=await An(this.storage,this.storageKey)),h=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:v,password:y,data:(l=w==null?void 0:w.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:_,code_challenge_method:A},xform:ra})}else if("phone"in s){const{phone:v,password:y,options:w}=s;h=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:y,data:(i=w==null?void 0:w.data)!==null&&i!==void 0?i:{},channel:(u=w==null?void 0:w.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:ra})}else throw new pr("You must provide either an email or phone number and a password");const{data:f,error:g}=h;if(g||!f)return{data:{user:null,session:null},error:g};const b=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:p,session:b},error:null}}catch(h){if(he(h))return{data:{user:null,session:null},error:h};throw h}}async signInWithPassword(s){try{let l;if("email"in s){const{email:h,password:f,options:g}=s;l=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:xm})}else if("phone"in s){const{phone:h,password:f,options:g}=s;l=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:xm})}else throw new pr("You must provide either an email or phone number and a password");const{data:i,error:u}=l;return u?{data:{user:null,session:null},error:u}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Tn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:u})}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOAuth(s){var l,i,u,h;return await this._handleProviderSignIn(s.provider,{redirectTo:(l=s.options)===null||l===void 0?void 0:l.redirectTo,scopes:(i=s.options)===null||i===void 0?void 0:i.scopes,queryParams:(u=s.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(h=s.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:l}=s;switch(l){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}}async signInWithEthereum(s){var l,i,u,h,f,g,b,p,v,y,w;let _,A;if("message"in s)_=s.message,A=s.signature;else{const{chain:C,wallet:M,statement:V,options:D}=s;let O;if(_t())if(typeof M=="object")O=M;else{const pe=window;if("ethereum"in pe&&typeof pe.ethereum=="object"&&"request"in pe.ethereum&&typeof pe.ethereum.request=="function")O=pe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=M}const T=new URL((l=D==null?void 0:D.url)!==null&&l!==void 0?l:window.location.href),q=await O.request({method:"eth_requestAccounts"}).then(pe=>pe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=Ag(q[0]);let $=(i=D==null?void 0:D.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!$){const pe=await O.request({method:"eth_chainId"});$=Py(pe)}const ae={domain:T.host,address:I,statement:V,uri:T.href,version:"1",chainId:$,nonce:(u=D==null?void 0:D.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(h=D==null?void 0:D.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=D==null?void 0:D.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(b=D==null?void 0:D.signInWithEthereum)===null||b===void 0?void 0:b.notBefore,requestId:(p=D==null?void 0:D.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=D==null?void 0:D.signInWithEthereum)===null||v===void 0?void 0:v.resources};_=Qy(ae),A=await O.request({method:"personal_sign",params:[Ky(_),I]})}try{const{data:C,error:M}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:A},!((y=s.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=s.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ra});if(M)throw M;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Tn}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:M})}catch(C){if(he(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(s){var l,i,u,h,f,g,b,p,v,y,w,_;let A,C;if("message"in s)A=s.message,C=s.signature;else{const{chain:M,wallet:V,statement:D,options:O}=s;let T;if(_t())if(typeof V=="object")T=V;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))T=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof V!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=V}const q=new URL((l=O==null?void 0:O.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in T&&T.signIn){const I=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),D?{statement:D}:null));let $;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")$=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)$=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)A=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),C=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${q.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(u=(i=O==null?void 0:O.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((h=O==null?void 0:O.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((f=O==null?void 0:O.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((g=O==null?void 0:O.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((b=O==null?void 0:O.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((p=O==null?void 0:O.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((y=(v=O==null?void 0:O.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||y===void 0)&&y.length?["Resources",...O.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const I=await T.signMessage(new TextEncoder().encode(A),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=I}}try{const{data:M,error:V}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:qs(C)},!((w=s.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=s.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:ra});if(V)throw V;return!M||!M.session||!M.user?{data:{user:null,session:null},error:new Tn}:(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:V})}catch(M){if(he(M))return{data:{user:null,session:null},error:M};throw M}}async _exchangeCodeForSession(s){const l=await Ms(this.storage,`${this.storageKey}-code-verifier`),[i,u]=(l??"").split("/");try{const{data:h,error:f}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:i},xform:ra});if(await rs(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!h||!h.session||!h.user?{data:{user:null,session:null,redirectType:null},error:new Tn}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:Object.assign(Object.assign({},h),{redirectType:u??null}),error:f})}catch(h){if(he(h))return{data:{user:null,session:null,redirectType:null},error:h};throw h}}async signInWithIdToken(s){try{const{options:l,provider:i,token:u,access_token:h,nonce:f}=s,g=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:u,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ra}),{data:b,error:p}=g;return p?{data:{user:null,session:null},error:p}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Tn}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:b,error:p})}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOtp(s){var l,i,u,h,f;try{if("email"in s){const{email:g,options:b}=s;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await An(this.storage,this.storageKey));const{error:y}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(l=b==null?void 0:b.data)!==null&&l!==void 0?l:{},create_user:(i=b==null?void 0:b.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:b==null?void 0:b.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in s){const{phone:g,options:b}=s,{data:p,error:v}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(u=b==null?void 0:b.data)!==null&&u!==void 0?u:{},create_user:(h=b==null?void 0:b.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(f=b==null?void 0:b.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v}}throw new pr("You must provide either an email or phone number.")}catch(g){if(he(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(s){var l,i;try{let u,h;"options"in s&&(u=(l=s.options)===null||l===void 0?void 0:l.redirectTo,h=(i=s.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:g}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:h}}),redirectTo:u,xform:ra});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const b=f.session,p=f.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),{data:{user:p,session:b},error:null}}catch(u){if(he(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(s){var l,i,u;try{let h=null,f=null;return this.flowType==="pkce"&&([h,f]=await An(this.storage,this.storageKey)),await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(i=(l=s.options)===null||l===void 0?void 0:l.redirectTo)!==null&&i!==void 0?i:void 0}),!((u=s==null?void 0:s.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:f}),headers:this.headers,xform:qy})}catch(h){if(he(h))return{data:null,error:h};throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:l},error:i}=s;if(i)throw i;if(!l)throw new ia;const{error:u}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return{data:{user:null,session:null},error:u}})}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const l=`${this.url}/resend`;if("email"in s){const{email:i,type:u,options:h}=s,{error:f}=await xe(this.fetch,"POST",l,{headers:this.headers,body:{email:i,type:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in s){const{phone:i,type:u,options:h}=s,{data:f,error:g}=await xe(this.fetch,"POST",l,{headers:this.headers,body:{phone:i,type:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new pr("You must provide either an email or phone number and a type")}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async l=>l))}async _acquireLock(s,l){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await i,await l()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=l();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await s(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const l=await Ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?s=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const i=s.expires_at?s.expires_at*1e3-Date.now()<tu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",s.expires_at),!i){if(this.userStorage){const f=await Ms(this.userStorage,this.storageKey+"-user");f!=null&&f.user?s.user=f.user:s.user=nu()}if(this.storage.isServer&&s.user&&!s.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};s.user=Uy(s.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:s},error:null}}const{data:u,error:h}=await this._callRefreshToken(s.refresh_token);return h?{data:{session:null},error:h}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:os}):await this._useSession(async l=>{var i,u,h;const{data:f,error:g}=l;if(g)throw g;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ia}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0,xform:os})})}catch(l){if(he(l))return fy(l)&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:l};throw l}}async updateUser(s,l={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,l))}async _updateUser(s,l={}){try{return await this._useSession(async i=>{const{data:u,error:h}=i;if(h)throw h;if(!u.session)throw new ia;const f=u.session;let g=null,b=null;this.flowType==="pkce"&&s.email!=null&&([g,b]=await An(this.storage,this.storageKey));const{data:p,error:v}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l==null?void 0:l.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:g,code_challenge_method:b}),jwt:f.access_token,xform:os});if(v)throw v;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new ia;const l=Date.now()/1e3;let i=l,u=!0,h=null;const{payload:f}=su(s.access_token);if(f.exp&&(i=f.exp,u=i<=l),u){const{data:g,error:b}=await this._callRefreshToken(s.refresh_token);if(b)return{data:{user:null,session:null},error:b};if(!g)return{data:{user:null,session:null},error:null};h=g}else{const{data:g,error:b}=await this._getUser(s.access_token);if(b)throw b;h={access_token:s.access_token,refresh_token:s.refresh_token,user:g.user,token_type:"bearer",expires_in:i-l,expires_at:i},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return{data:{user:h.user,session:h},error:null}}catch(l){if(he(l))return{data:{session:null,user:null},error:l};throw l}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async l=>{var i;if(!s){const{data:f,error:g}=l;if(g)throw g;s=(i=f.session)!==null&&i!==void 0?i:void 0}if(!(s!=null&&s.refresh_token))throw new ia;const{data:u,error:h}=await this._callRefreshToken(s.refresh_token);return h?{data:{user:null,session:null},error:h}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async _getSessionFromURL(s,l){try{if(!_t())throw new br("No browser detected.");if(s.error||s.error_description||s.error_code)throw new br(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new dm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new br("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new dm("No code detected.");const{data:D,error:O}=await this._exchangeCodeForSession(s.code);if(O)throw O;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:u,access_token:h,refresh_token:f,expires_in:g,expires_at:b,token_type:p}=s;if(!h||!g||!f||!p)throw new br("No session defined in URL");const v=Math.round(Date.now()/1e3),y=parseInt(g);let w=v+y;b&&(w=parseInt(b));const _=w-v;_*1e3<=Dn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${y}s`);const A=w-y;v-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,w,v):v-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,w,v);const{data:C,error:M}=await this._getUser(h);if(M)throw M;const V={provider_token:i,provider_refresh_token:u,access_token:h,expires_in:y,expires_at:w,refresh_token:f,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:V,redirectType:s.type},error:null}}catch(i){if(he(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const l=await Ms(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&l)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async l=>{var i;const{data:u,error:h}=l;if(h)return{error:h};const f=(i=u.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:g}=await this.admin.signOut(f,s);if(g&&!(hy(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return s!=="others"&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const l=wy(),i={id:l,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:i}}}async _emitInitialSession(s){return await this._useSession(async l=>{var i,u;try{const{data:{session:h},error:f}=l;if(f)throw f;await((i=this.stateChangeEmitters.get(s))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",s,"session",h)}catch(h){await((u=this.stateChangeEmitters.get(s))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",h),console.error(h)}})}async resetPasswordForEmail(s,l={}){let i=null,u=null;this.flowType==="pkce"&&([i,u]=await An(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:i,code_challenge_method:u,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(h){if(he(h))return{data:null,error:h};throw h}}async getUserIdentities(){var s;try{const{data:l,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(s=l.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(l){if(he(l))return{data:null,error:l};throw l}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var l;try{const{data:i,error:u}=await this._useSession(async h=>{var f,g,b,p,v;const{data:y,error:w}=h;if(w)throw w;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(f=s.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=s.options)===null||g===void 0?void 0:g.scopes,queryParams:(b=s.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",_,{headers:this.headers,jwt:(v=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(u)throw u;return _t()&&!(!((l=s.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:s.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(he(i))return{data:{provider:s.provider,url:null},error:i};throw i}}async linkIdentityIdToken(s){return await this._useSession(async l=>{var i;try{const{error:u,data:{session:h}}=l;if(u)throw u;const{options:f,provider:g,token:b,access_token:p,nonce:v}=s,y=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=h==null?void 0:h.access_token)!==null&&i!==void 0?i:void 0,body:{provider:g,id_token:b,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ra}),{data:w,error:_}=y;return _?{data:{user:null,session:null},error:_}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new Tn}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:_})}catch(u){if(he(u))return{data:{user:null,session:null},error:u};throw u}})}async unlinkIdentity(s){try{return await this._useSession(async l=>{var i,u;const{data:h,error:f}=l;if(f)throw f;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(u=(i=h.session)===null||i===void 0?void 0:i.access_token)!==null&&u!==void 0?u:void 0})})}catch(l){if(he(l))return{data:null,error:l};throw l}}async _refreshAccessToken(s){const l=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(l,"begin");try{const i=Date.now();return await Ny(async u=>(u>0&&await _y(200*Math.pow(2,u-1)),this._debug(l,"refreshing attempt",u),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:ra})),(u,h)=>{const f=200*Math.pow(2,u);return h&&au(h)&&Date.now()+f-i<Dn})}catch(i){if(this._debug(l,"error",i),he(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(l,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,l){const i=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",l,"url",i),_t()&&!l.skipBrowserRedirect&&window.location.assign(i),{data:{provider:s,url:i},error:null}}async _recoverAndRefresh(){var s,l;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const u=await Ms(this.storage,this.storageKey);if(u&&this.userStorage){let f=await Ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await Mn(this.userStorage,this.storageKey+"-user",f)),u.user=(s=f==null?void 0:f.user)!==null&&s!==void 0?s:nu()}else if(u&&!u.user&&!u.user){const f=await Ms(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(u.user=f.user,await rs(this.storage,this.storageKey+"-user"),await Mn(this.storage,this.storageKey,u)):u.user=nu()}if(this._debug(i,"session from storage",u),!this._isValidSession(u)){this._debug(i,"session is not valid"),u!==null&&await this._removeSession();return}const h=((l=u.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<tu;if(this._debug(i,`session has${h?"":" not"} expired with margin of ${tu}s`),h){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),au(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(u.access_token);!g&&(f!=null&&f.user)?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(i,"error",u),console.error(u);return}finally{this._debug(i,"end")}}async _callRefreshToken(s){var l,i;if(!s)throw new ia;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Tr;const{data:h,error:f}=await this._refreshAccessToken(s);if(f)throw f;if(!h.session)throw new ia;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const g={data:h.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(h){if(this._debug(u,"error",h),he(h)){const f={data:null,error:h};return au(h)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(h),h}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(s,l,i=!0){const u=`#_notifyAllSubscribers(${s})`;this._debug(u,"begin",l,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:s,session:l});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(s,l)}catch(b){h.push(b)}});if(await Promise.all(f),h.length>0){for(let g=0;g<h.length;g+=1)console.error(h[g]);throw h[0]}}finally{this._debug(u,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const l=Object.assign({},s),i=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&l.user&&await Mn(this.userStorage,this.storageKey+"-user",{user:l.user});const u=Object.assign({},l);delete u.user;const h=pm(u);await Mn(this.storage,this.storageKey,h)}else{const u=pm(l);await Mn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await rs(this.storage,this.storageKey),await rs(this.storage,this.storageKey+"-code-verifier"),await rs(this.storage,this.storageKey+"-user"),this.userStorage&&await rs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&_t()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),Dn);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async l=>{const{data:{session:i}}=l;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((i.expires_at*1e3-s)/Dn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Dn}ms, refresh threshold is ${xu} ticks`),u<=xu&&await this._callRefreshToken(i.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof Tg)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_t()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const l=`#_onVisibilityChanged(${s})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,l,i){const u=[`provider=${encodeURIComponent(l)}`];if(i!=null&&i.redirectTo&&u.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&u.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[h,f]=await An(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(g.toString())}if(i!=null&&i.queryParams){const h=new URLSearchParams(i.queryParams);u.push(h.toString())}return i!=null&&i.skipBrowserRedirect&&u.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${s}?${u.join("&")}`}async _unenroll(s){try{return await this._useSession(async l=>{var i;const{data:u,error:h}=l;return h?{data:null,error:h}:await xe(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(i=u==null?void 0:u.session)===null||i===void 0?void 0:i.access_token})})}catch(l){if(he(l))return{data:null,error:l};throw l}}async _enroll(s){try{return await this._useSession(async l=>{var i,u;const{data:h,error:f}=l;if(f)return{data:null,error:f};const g=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:b,error:p}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(i=h==null?void 0:h.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(s.factorType==="totp"&&b.type==="totp"&&(!((u=b==null?void 0:b.totp)===null||u===void 0)&&u.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),{data:b,error:null})})}catch(l){if(he(l))return{data:null,error:l};throw l}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:u,error:h}=l;if(h)return{data:null,error:h};const f=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?tw(s.webauthn.credential_response):aw(s.webauthn.credential_response)})}:{code:s.code}),{data:g,error:b}=await xe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=u==null?void 0:u.session)===null||i===void 0?void 0:i.access_token});return b?{data:null,error:b}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:b})})}catch(l){if(he(l))return{data:null,error:l};throw l}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:u,error:h}=l;if(h)return{data:null,error:h};const f=await xe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(i=u==null?void 0:u.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Wy(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:ew(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(he(l))return{data:null,error:l};throw l}})}async _challengeAndVerify(s){const{data:l,error:i}=await this._challenge({factorId:s.factorId});return i?{data:null,error:i}:await this._verify({factorId:s.factorId,challengeId:l.id,code:s.code})}async _listFactors(){var s;const{data:{user:l},error:i}=await this.getUser();if(i)return{data:null,error:i};const u={all:[],phone:[],totp:[],webauthn:[]};for(const h of(s=l==null?void 0:l.factors)!==null&&s!==void 0?s:[])u.all.push(h),h.status==="verified"&&u[h.factor_type].push(h);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var s,l;const{data:{session:i},error:u}=await this.getSession();if(u)return{data:null,error:u};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=su(i.access_token);let f=null;h.aal&&(f=h.aal);let g=f;((l=(s=i.user.factors)===null||s===void 0?void 0:s.filter(v=>v.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(g="aal2");const p=h.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(s){try{return await this._useSession(async l=>{const{data:{session:i},error:u}=l;return u?{data:null,error:u}:i?await xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${s}`,{headers:this.headers,jwt:i.access_token,xform:h=>({data:h,error:null})}):{data:null,error:new ia}})}catch(l){if(he(l))return{data:null,error:l};throw l}}async _approveAuthorization(s,l){try{return await this._useSession(async i=>{const{data:{session:u},error:h}=i;if(h)return{data:null,error:h};if(!u)return{data:null,error:new ia};const f=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&_t()&&!(l!=null&&l.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _denyAuthorization(s,l){try{return await this._useSession(async i=>{const{data:{session:u},error:h}=i;if(h)return{data:null,error:h};if(!u)return{data:null,error:new ia};const f=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&_t()&&!(l!=null&&l.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(he(i))return{data:null,error:i};throw i}}async fetchJwk(s,l={keys:[]}){let i=l.keys.find(g=>g.kid===s);if(i)return i;const u=Date.now();if(i=this.jwks.keys.find(g=>g.kid===s),i&&this.jwks_cached_at+uy>u)return i;const{data:h,error:f}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=u,i=h.keys.find(g=>g.kid===s),!i)?null:i}async getClaims(s,l={}){try{let i=s;if(!i){const{data:_,error:A}=await this.getSession();if(A||!_.session)return{data:null,error:A};i=_.session.access_token}const{header:u,payload:h,signature:f,raw:{header:g,payload:b}}=su(i);l!=null&&l.allowExpired||Ry(h.exp);const p=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,l!=null&&l.keys?{keys:l.keys}:l==null?void 0:l.jwks);if(!p){const{error:_}=await this.getUser(i);if(_)throw _;return{data:{claims:h,header:u,signature:f},error:null}}const v=Dy(u.alg),y=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,y,f,vy(`${g}.${b}`)))throw new wu("Invalid JWT signature");return{data:{claims:h,header:u,signature:f},error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}}}Vl.nextInstanceID=0;const dw=Vl;class hw extends dw{constructor(s){super(s)}}class fw{constructor(s,l,i){var u,h,f;this.supabaseUrl=s,this.supabaseKey=l;const g=ly(s);if(!l)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const b=`sb-${g.hostname.split(".")[0]}-auth-token`,p={db:Zv,realtime:Wv,auth:Object.assign(Object.assign({},Fv),{storageKey:b}),global:Xv},v=ny(i??{},p);this.storageKey=(u=v.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(h=v.global.headers)!==null&&h!==void 0?h:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(y,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=v.auth)!==null&&f!==void 0?f:{},this.headers,v.global.fetch),this.fetch=ay(l,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new iv(new URL("rest/v1",g).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new Kv(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Zx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,l={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,l,i)}channel(s,l={config:{}}){return this.realtime.channel(s,l)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s,l;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(l=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:l,detectSessionInUrl:i,storage:u,userStorage:h,storageKey:f,flowType:g,lock:b,debug:p},v,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hw({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),v),storageKey:f,autoRefreshToken:s,persistSession:l,detectSessionInUrl:i,storage:u,userStorage:h,flowType:g,lock:b,debug:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new jv(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,i)=>{this._handleTokenChanged(l,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(s,l,i){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),l=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mw=(o,s,l)=>new fw(o,s,l);function gw(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const s=o.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}gw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const pw="https://emqbuwjorozkzlbfonah.supabase.co",bw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVtcWJ1d2pvcm96a3psYmZvbmFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5Mjk2NDUsImV4cCI6MjA3ODUwNTY0NX0.L4b_fVqc7St_c4ZNsdEWlSMQO2PDr96UpLQjtYDhOOQ",Mt=mw(pw,bw),xw=["pos","inventory","reports","staff","appointments","commissions","clients","tips","multi_branch","export","reminders","loyalty","tickets"],aa={pos:!0,inventory:!0,staff:!0,reports:!0,appointments:!1,commissions:!1,clients:!1,tips:!1,multi_branch:!1,export:!1,reminders:!1,loyalty:!1,tickets:!1},Il={...aa,appointments:!0,commissions:!0,clients:!0,tips:!0,multi_branch:!0,export:!0,reminders:!0,tickets:!0};function Uu(){return!0}function zu(o){return`store_modules_${o}`}async function Ar(o){try{if(Uu()){const{data:l,error:i}=await Mt.from("store_modules").select("module_name,is_enabled").eq("store_id",o);if(i)throw i;const u={...aa};return(l||[]).forEach(h=>{u[h.module_name]=!!h.is_enabled}),u}}catch(l){console.warn("Falling back to local module map",l)}const s=localStorage.getItem(zu(o));return s?JSON.parse(s):{...aa}}async function Cg(o,s,l){try{if(Uu()){const{error:u}=await Mt.from("store_modules").upsert({store_id:o,module_name:s,is_enabled:l},{onConflict:"store_id,module_name"});if(u)throw u;return}}catch(u){console.warn("Supabase module update failed; using localStorage",u)}const i=await Ar(o);i[s]=l,localStorage.setItem(zu(o),JSON.stringify(i))}async function vw(o,s){const l=s==="premium"?Il:aa;try{if(Uu()){const i=xw.map(h=>({store_id:o,module_name:h,is_enabled:!!l[h]})),{error:u}=await Mt.from("store_modules").upsert(i,{onConflict:"store_id,module_name"});if(u)throw u;return}}catch(i){console.warn("Supabase seed failed; using localStorage",i)}localStorage.setItem(zu(o),JSON.stringify(l))}const cs={salon:{starter:["pos","inventory","reports","staff"],pro:["pos","inventory","reports","staff","appointments","commissions","tickets","clients","loyalty","tips","export","reminders"],scale:["pos","inventory","reports","staff","appointments","commissions","tickets","clients","loyalty","tips","export","reminders","multi_branch"]},restaurant:{starter:["pos","inventory","reports","staff","tables"],pro:["pos","inventory","reports","staff","tables","tips","loyalty","clients","export","reminders"],scale:["pos","inventory","reports","staff","tables","tips","loyalty","clients","export","reminders","multi_branch"]},laundry:{starter:["pos","inventory","reports","staff","tickets"],pro:["pos","inventory","reports","staff","tickets","commissions","clients","loyalty","export","reminders"],scale:["pos","inventory","reports","staff","tickets","commissions","clients","loyalty","export","reminders","multi_branch"]},sari_sari:{starter:["pos","inventory","reports","expenses","utang_ledger"],pro:["pos","inventory","reports","expenses","utang_ledger","clients","loyalty","export","reminders"],scale:["pos","inventory","reports","expenses","utang_ledger","clients","loyalty","export","reminders","multi_branch"]},pharmacy:{starter:["pos","inventory","reports","expenses","expiry_alerts"],pro:["pos","inventory","reports","expenses","expiry_alerts","clients","export","reminders","loyalty"],scale:["pos","inventory","reports","expenses","expiry_alerts","clients","export","reminders","loyalty","multi_branch"]},retail:{starter:["pos","inventory","reports","staff"],pro:["pos","inventory","reports","staff","clients","loyalty","export","reminders","tips"],scale:["pos","inventory","reports","staff","clients","loyalty","export","reminders","tips","multi_branch"]}};function yw({onClose:o,onStoreCreated:s}){const[l,i]=N.useState(!1),[u,h]=N.useState(""),[f,g]=N.useState("Starter"),[b,p]=N.useState(()=>Object.entries(aa).filter(([,q])=>!!q).map(([q])=>q)),[v,y]=N.useState({name:"",ownerFirstName:"",ownerMiddleName:"",ownerLastName:"",contactPhone:"",contactEmail:"",timezone:"UTC",businessType:"RESTAURANT",ownerPassword:""}),[w,_]=N.useState({}),[A,C]=N.useState(""),M=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Anchorage","Pacific/Honolulu","Europe/London","Europe/Paris","Asia/Tokyo","Asia/Shanghai","Asia/Hong_Kong","Australia/Sydney"],V=()=>{const q=new Set([...Object.keys(aa),...Object.keys(Il)]);return Object.values(cs).forEach(I=>{Object.values(I).forEach($=>$.forEach(ae=>q.add(ae)))}),Array.from(q)};function D(q,I,$){const ae=(q||"retail").toLowerCase(),pe=cs[ae]??cs.retail;$(pe[I]||[])}const O=q=>{const{name:I,value:$}=q.target;y(ae=>({...ae,[I]:$}))},T=async q=>{var I,$,ae,pe,Ne,X;if(q.preventDefault(),!v.name.trim()){h("Store name is required");return}if(!v.ownerFirstName.trim()){h("Owner first name is required");return}if(!v.ownerLastName.trim()){h("Owner last name is required");return}if(!w.province){h("Province is required");return}if(!w.city){h("City / Municipality is required");return}if(!w.barangay){h("Barangay is required");return}if(!A.trim()){h("Street address is required");return}if(!v.contactPhone.trim()){h("Contact phone is required");return}if(!v.contactEmail.trim()){h("Contact email is required");return}if(!v.ownerPassword.trim()){h("Owner password is required");return}i(!0),h("");try{const ee=[v.ownerFirstName.trim(),v.ownerMiddleName.trim(),v.ownerLastName.trim()].filter(Boolean).join(" "),ye={id:`store_${Date.now()}`,name:v.name.trim(),code:`STORE${Date.now().toString().slice(-4)}`,address:A.trim(),phone:v.contactPhone.trim(),email:v.contactEmail.trim(),ownerName:ee,contactPhone:v.contactPhone.trim(),contactEmail:v.contactEmail.trim(),addressStructured:{street:A.trim(),province:((I=w.province)==null?void 0:I.province_name)||"",city:(($=w.city)==null?void 0:$.city_name)||"",barangay:((ae=w.barangay)==null?void 0:ae.brgy_name)||""},businessType:v.businessType,enabled:!0,settings:{storeName:v.name.trim(),storeAddress:[(pe=w.barangay)==null?void 0:pe.brgy_name,(Ne=w.city)==null?void 0:Ne.city_name,(X=w.province)==null?void 0:X.province_name].filter(Boolean).join(", "),contactInfo:ee,phone:v.contactPhone.trim(),email:v.contactEmail.trim(),taxRate:0,lowStockThreshold:10,currency:"USD",timezone:v.timezone},createdAt:new Date,updatedAt:new Date},de=await us.createStore(ye),W=$x(de,{name:ee,email:v.contactEmail.trim(),phone:v.contactPhone.trim(),password:v.ownerPassword});try{await us.updateStore(de.id,{managerId:W.id})}catch{}try{await vw(de.id,f==="Starter"?"free":"premium");const U=Array.from(new Set([...Object.keys(aa),...Object.keys(Il),...Object.values(cs).flatMap(te=>Object.values(te).flat())])),J={};U.forEach(te=>{J[te]=b.includes(te)}),await Promise.all(Object.entries(J).map(([te,G])=>Cg(de.id,te,!!G)))}catch{}s(de)}catch(ee){h(ee instanceof Error?ee.message:"Failed to create store")}finally{i(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[95vw] max-w-3xl sm:max-w-4xl lg:max-w-5xl max-h-[92vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Store"}),r.jsx("button",{onClick:o,disabled:l,className:"text-slate-400 hover:text-slate-600 transition disabled:opacity-50",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("form",{onSubmit:T,className:"p-6 space-y-6",children:[u&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-700 text-sm font-medium",children:u})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Store Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:v.name,onChange:O,placeholder:"e.g., Main Branch",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ownerFirstName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Owner First Name *"}),r.jsx("input",{type:"text",id:"ownerFirstName",name:"ownerFirstName",value:v.ownerFirstName,onChange:O,placeholder:"e.g., Juan",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ownerMiddleName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Middle Name"}),r.jsx("input",{type:"text",id:"ownerMiddleName",name:"ownerMiddleName",value:v.ownerMiddleName,onChange:O,placeholder:"e.g., Santos",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ownerLastName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Last Name *"}),r.jsx("input",{type:"text",id:"ownerLastName",name:"ownerLastName",value:v.ownerLastName,onChange:O,placeholder:"e.g., Dela Cruz",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"contactPhone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone *"}),r.jsx("input",{type:"tel",id:"contactPhone",name:"contactPhone",value:v.contactPhone,onChange:O,placeholder:"e.g., +63 912 345 6789",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Email *"}),r.jsx("input",{type:"email",id:"contactEmail",name:"contactEmail",value:v.contactEmail,onChange:O,placeholder:"e.g., owner@store.com",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(zm,{value:w,onChange:_}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Street Address *"}),r.jsx("input",{type:"text",value:A,onChange:q=>C(q.target.value),placeholder:"House / Building / Street",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"businessType",className:"block text-sm font-medium text-slate-700 mb-1",children:"Business Type *"}),r.jsxs("select",{id:"businessType",name:"businessType",value:v.businessType,onChange:O,disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition",children:[r.jsx("option",{value:"RESTAURANT",children:"Restaurant"}),r.jsx("option",{value:"SALON",children:"Salon"}),r.jsx("option",{value:"SARI_SARI",children:"Sari-Sari"}),r.jsx("option",{value:"LAUNDRY",children:"Laundry"}),r.jsx("option",{value:"PHARMACY",children:"Pharmacy"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Timezone"}),r.jsx("select",{id:"timezone",name:"timezone",value:v.timezone,onChange:O,disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition",children:M.map(q=>r.jsx("option",{value:q,children:q},q))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ownerPassword",className:"block text-sm font-medium text-slate-700 mb-1",children:"Owner Password *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",id:"ownerPassword",name:"ownerPassword",value:v.ownerPassword,onChange:O,placeholder:"Set or generate a password",disabled:l,className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"}),r.jsx("button",{type:"button",onClick:()=>{const q=Math.random().toString(36).slice(-10)+Math.random().toString(36).slice(-2);y(I=>({...I,ownerPassword:q}))},className:"px-3 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition",disabled:l,children:"Generate"})]}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Share this with the owner for future access. Store logins are currently disabled."})]}),r.jsxs("div",{className:"p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Modules for customer"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${f==="Starter"?"bg-slate-800 text-white":"bg-slate-100"}`,onClick:()=>{g("Starter"),D(v.businessType,"starter",p)},children:"Seed Starter"}),r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${f==="Pro"?"bg-amber-500 text-white":"bg-amber-100"}`,onClick:()=>{g("Pro"),D(v.businessType,"pro",p)},children:"Seed Pro"}),r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${f==="Scale"?"bg-emerald-500 text-white":"bg-emerald-100"}`,onClick:()=>{g("Scale"),D(v.businessType,"scale",p)},children:"Seed Scale"})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:V().map(q=>r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:b.includes(q),onChange:I=>{p($=>I.target.checked?Array.from(new Set([...$,q])):$.filter(ae=>ae!==q))}}),r.jsx("span",{className:"capitalize",children:q.replace("_"," ")})]},q))})]}),r.jsxs("div",{className:"flex gap-3 pt-6 border-t border-slate-200",children:[r.jsx("button",{type:"button",onClick:o,disabled:l,className:"flex-1 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[l&&r.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l?"Creating...":"Create Store"]})]})]})]})})}function ww({store:o,onClose:s,onStoreUpdated:l}){var Yt;const[i,u]=N.useState(!1),[h,f]=N.useState(""),[g,b]=N.useState({name:o.name,ownerFirstName:"",ownerMiddleName:"",ownerLastName:"",phone:o.phone,email:o.email,taxRate:o.settings.taxRate,lowStockThreshold:o.settings.lowStockThreshold,timezone:o.settings.timezone,currency:o.settings.currency,enabled:o.enabled});N.useEffect(()=>{const Z=(o.ownerName||"").trim();if(!Z)return;const be=Z.split(/\s+/);if(be.length===1)b(_e=>({..._e,ownerFirstName:be[0]}));else if(be.length===2)b(_e=>({..._e,ownerFirstName:be[0],ownerLastName:be[1]}));else{const _e=be[0],Le=be[be.length-1],Ae=be.slice(1,-1).join(" ");b(wt=>({...wt,ownerFirstName:_e,ownerMiddleName:Ae,ownerLastName:Le}))}},[o.ownerName]);const[p,v]=N.useState("Starter"),[y,w]=N.useState([]),[_,A]=N.useState({}),[C,M]=N.useState(((Yt=o.addressStructured)==null?void 0:Yt.street)||o.address||""),[V,D]=N.useState([]),[O,T]=N.useState(""),[q,I]=N.useState(""),[$,ae]=N.useState(""),[pe,Ne]=N.useState(""),[X,ee]=N.useState(""),[ye,de]=N.useState("STAFF"),[W,U]=N.useState(!0),[J,te]=N.useState(null),[G,le]=N.useState([]),S=kr();N.useEffect(()=>{Ar(o.id).then(Z=>{const be=Object.entries(Z).filter(([,_e])=>!!_e).map(([_e])=>_e);w(be),be.includes("multi_branch")?v("Scale"):be.includes("clients")||be.includes("appointments")||be.includes("loyalty")?v("Pro"):v("Starter")}).catch(()=>w(Object.entries(aa).filter(([,Z])=>!!Z).map(([Z])=>Z)))},[o.id]),N.useEffect(()=>{D(Z=>Z.filter(be=>y.includes(be)))},[y]),N.useEffect(()=>{try{const Z=Dt.getAll();le(Z.filter(be=>be.storeIds.includes(o.id)))}catch{le([])}},[o.id]);const E=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Anchorage","Pacific/Honolulu","Europe/London","Europe/Paris","Asia/Tokyo","Asia/Shanghai","Asia/Hong_Kong","Australia/Sydney"],Q=["USD","PHP","EUR","GBP","JPY","CNY","AUD","CAD","SGD","HKD"],F=N.useMemo(()=>{const Z=new Set([...Object.keys(aa),...Object.keys(Il)]);return Object.values(cs).forEach(be=>{Object.values(be).forEach(_e=>_e.forEach(Le=>Z.add(Le)))}),Array.from(Z)},[]),ne=(Z,be,_e)=>{const Le=(Z||"retail").toLowerCase(),Ae=cs[Le]??cs.retail;_e(Ae[be]||[])},oe=Z=>{const{name:be,value:_e,type:Le}=Z.target;b(Ae=>({...Ae,[be]:Le==="checkbox"?Z.target.checked:Le==="number"?parseFloat(_e):_e}))},we=N.useMemo(()=>Array.from(new Set([...y,...V])),[y,V]),Xe=()=>{T(""),I(""),ae(""),Ne(""),ee(""),de("STAFF"),U(!0),D(Z=>Z.filter(be=>y.includes(be))),te(null)},Ge=Z=>{const[be,_e,Le]=(()=>{const Ae=Z.name.split(/\s+/);return Ae.length===1?[Ae[0],"",""]:Ae.length===2?[Ae[0],"",Ae[1]]:[Ae[0],Ae.slice(1,-1).join(" "),Ae[Ae.length-1]]})();T(be),I(_e),ae(Le),Ne(Z.nickname||""),ee(Z.contactPhone||""),de(Z.role),U(Z.isActive),D(Z.modules?Z.modules.filter(Ae=>y.includes(Ae)):[]),te(Z.id)},ot=Z=>{if(Z.preventDefault(),!O.trim()||!$.trim())return;const _e={name:[O.trim(),q.trim(),$.trim()].filter(Boolean).join(" "),nickname:pe.trim()||void 0,role:ye,storeIds:[o.id],contactPhone:X.trim()||void 0,isActive:W,modules:V};if(J){const Le=Dt.update(J,_e);Le&&le(Ae=>Ae.map(wt=>wt.id===Le.id?Le:wt))}else{const Le=Dt.create(_e);le(Ae=>[...Ae,Le])}Xe()},Ma=async Z=>{try{await S({message:`You are about to delete ${Z.name}. This action cannot be undone.`,confirmButtonLabel:"Delete Staff"}),Dt.delete(Z.id),le(be=>be.filter(_e=>_e.id!==Z.id)),J===Z.id&&Xe()}catch{}},fs=(Z,be)=>{const _e=Dt.update(Z,{isActive:be});_e&&le(Le=>Le.map(Ae=>Ae.id===Z?_e:Ae))},Ua=async Z=>{var be,_e,Le,Ae,wt,za,$s,Vs,dt;if(Z.preventDefault(),!g.name.trim()){f("Store name is required");return}if(!C.trim()){f("Street address is required");return}if(!g.phone.trim()){f("Contact phone is required");return}if(!g.email.trim()){f("Contact email is required");return}u(!0),f("");try{const se=[g.ownerFirstName.trim(),g.ownerMiddleName.trim(),g.ownerLastName.trim()].filter(Boolean).join(" "),ie={...o,name:g.name.trim(),address:C.trim(),phone:g.phone.trim(),email:g.email.trim(),ownerName:se,enabled:g.enabled,settings:{...o.settings,storeName:g.name.trim(),storeAddress:[(be=_.barangay)==null?void 0:be.brgy_name,(_e=_.city)==null?void 0:_e.city_name,(Le=_.province)==null?void 0:Le.province_name].filter(Boolean).join(", "),phone:g.phone.trim(),email:g.email.trim(),taxRate:g.taxRate,lowStockThreshold:g.lowStockThreshold,timezone:g.timezone,currency:g.currency},addressStructured:{street:C.trim(),province:((Ae=_.province)==null?void 0:Ae.province_name)||((wt=o.addressStructured)==null?void 0:wt.province)||"",city:((za=_.city)==null?void 0:za.city_name)||(($s=o.addressStructured)==null?void 0:$s.city)||"",barangay:((Vs=_.barangay)==null?void 0:Vs.brgy_name)||((dt=o.addressStructured)==null?void 0:dt.barangay)||""},updatedAt:new Date},me=await us.updateStore(o.id,ie);try{const ke=Array.from(new Set([...Object.keys(aa),...Object.keys(Il),...Object.values(cs).flatMap(Be=>Object.values(Be).flat())])),De={};ke.forEach(Be=>{De[Be]=y.includes(Be)}),await Promise.all(Object.entries(De).map(([Be,ma])=>Cg(o.id,Be,!!ma)))}catch{}l(me)}catch(se){f(se instanceof Error?se.message:"Failed to update store")}finally{u(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[95vw] max-w-3xl sm:max-w-4xl lg:max-w-5xl max-h-[92vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Edit Store"}),r.jsx("button",{onClick:s,disabled:i,className:"text-slate-400 hover:text-slate-600 transition disabled:opacity-50",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("form",{onSubmit:Ua,className:"p-6 space-y-4",children:[h&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-700 text-sm font-medium",children:h})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-slate-700 mb-1",children:"Store Code"}),r.jsx("input",{type:"text",id:"code",value:o.code,disabled:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-600 cursor-not-allowed"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Store codes cannot be changed"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Store Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:g.name,onChange:oe,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Owner First Name *"}),r.jsx("input",{name:"ownerFirstName",value:g.ownerFirstName,onChange:oe,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Middle Name"}),r.jsx("input",{name:"ownerMiddleName",value:g.ownerMiddleName,onChange:oe,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Last Name *"}),r.jsx("input",{name:"ownerLastName",value:g.ownerLastName,onChange:oe,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(zm,{value:_,onChange:A}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Street Address *"}),r.jsx("input",{type:"text",value:C,onChange:Z=>M(Z.target.value),disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone *"}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:g.phone,onChange:oe,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Email *"}),r.jsx("input",{type:"email",id:"email",name:"email",value:g.email,onChange:oe,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Timezone"}),r.jsx("select",{id:"timezone",name:"timezone",value:g.timezone,onChange:oe,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition",children:E.map(Z=>r.jsx("option",{value:Z,children:Z},Z))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-slate-700 mb-1",children:"Currency"}),r.jsx("select",{id:"currency",name:"currency",value:g.currency,onChange:oe,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition",children:Q.map(Z=>r.jsx("option",{value:Z,children:Z},Z))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"taxRate",className:"block text-sm font-medium text-slate-700 mb-1",children:"Tax Rate (%)"}),r.jsx("input",{type:"number",id:"taxRate",name:"taxRate",value:g.taxRate,onChange:oe,min:"0",max:"100",step:"0.01",disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-slate-700 mb-1",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",id:"lowStockThreshold",name:"lowStockThreshold",value:g.lowStockThreshold,onChange:oe,min:"0",step:"1",disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[r.jsx("input",{type:"checkbox",id:"enabled",name:"enabled",checked:g.enabled,onChange:oe,disabled:i,className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500 disabled:cursor-not-allowed"}),r.jsx("label",{htmlFor:"enabled",className:"text-sm font-medium text-slate-700 cursor-pointer",children:"Store is Active"})]}),r.jsxs("div",{className:"p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Modules"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${p==="Starter"?"bg-slate-800 text-white":"bg-slate-100"}`,onClick:()=>{v("Starter"),ne(o.businessType||"retail","starter",w)},children:"Seed Starter"}),r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${p==="Pro"?"bg-amber-500 text-white":"bg-amber-100"}`,onClick:()=>{v("Pro"),ne(o.businessType||"retail","pro",w)},children:"Seed Pro"}),r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${p==="Scale"?"bg-emerald-500 text-white":"bg-emerald-100"}`,onClick:()=>{v("Scale"),ne(o.businessType||"retail","scale",w)},children:"Seed Scale"})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:F.map(Z=>r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:y.includes(Z),onChange:be=>w(_e=>be.target.checked?Array.from(new Set([..._e,Z])):_e.filter(Le=>Le!==Z))}),r.jsx("span",{className:"capitalize",children:Z.replace("_"," ")})]},Z))})]}),r.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-4",children:[r.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Store Staff"}),r.jsxs("form",{onSubmit:ot,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"First Name *"}),r.jsx("input",{value:O,onChange:Z=>T(Z.target.value),className:"w-full px-3 py-2 border rounded-md",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Middle Name"}),r.jsx("input",{value:q,onChange:Z=>I(Z.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Last Name *"}),r.jsx("input",{value:$,onChange:Z=>ae(Z.target.value),className:"w-full px-3 py-2 border rounded-md",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nickname"}),r.jsx("input",{value:pe,onChange:Z=>Ne(Z.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone"}),r.jsx("input",{value:X,onChange:Z=>ee(Z.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),r.jsxs("select",{value:ye,onChange:Z=>de(Z.target.value),className:"w-full px-3 py-2 border rounded-md",children:[r.jsx("option",{value:"STAFF",children:"Staff"}),r.jsx("option",{value:"CASHIER",children:"Cashier"}),r.jsx("option",{value:"THERAPIST",children:"Therapist"}),r.jsx("option",{value:"BARBER",children:"Barber"}),r.jsx("option",{value:"WAITER",children:"Waiter"}),r.jsx("option",{value:"OTHER",children:"Other"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:W,onChange:Z=>U(Z.target.checked)}),r.jsx("span",{className:"text-sm",children:"Active"})]}),r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Module Access"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:we.map(Z=>{const be=y.includes(Z),_e=`inline-flex items-center gap-2 px-2 py-1 border rounded-full text-xs ${be?"bg-white":"bg-slate-100 text-slate-400"}`;return r.jsxs("label",{className:_e,children:[r.jsx("input",{type:"checkbox",disabled:!be,checked:V.includes(Z),onChange:Le=>{D(Ae=>Le.target.checked?Array.from(new Set([...Ae,Z])):Ae.filter(wt=>wt!==Z))}}),r.jsx("span",{children:Z.replace("_"," ")})]},Z)})})]}),r.jsxs("div",{className:"md:col-span-3 flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:J&&r.jsx("button",{type:"button",onClick:Xe,disabled:i,className:"px-4 py-2 border rounded-md text-sm",children:"Cancel"})}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:J?"Save Changes":"Add Staff"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Name"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Role"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Contact"}),r.jsx("th",{className:"px-4 py-2"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-200",children:[G.map(Z=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-4 py-2 text-sm",children:[Z.name,Z.nickname?` (${Z.nickname})`:""]}),r.jsx("td",{className:"px-4 py-2 text-sm",children:Z.role}),r.jsx("td",{className:"px-4 py-2 text-sm",children:Z.contactPhone||""}),r.jsxs("td",{className:"px-4 py-2 text-right space-x-2",children:[r.jsx("button",{onClick:()=>Ge(Z),className:"px-3 py-1.5 text-xs rounded-md border bg-white hover:bg-slate-50",children:"Edit"}),r.jsx("button",{onClick:()=>Ma(Z),className:"px-3 py-1.5 text-xs rounded-md border border-red-200 bg-red-50 text-red-700 hover:bg-red-100",children:"Delete"}),r.jsx("button",{onClick:()=>fs(Z.id,!Z.isActive),className:"px-3 py-1.5 text-xs rounded-md border bg-white hover:bg-slate-50",children:Z.isActive?"Mark Inactive":"Mark Active"})]})]},Z.id)),G.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"px-4 py-6 text-sm text-slate-500",colSpan:4,children:"No staff yet for this store."})})]})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-6 border-t border-slate-200",children:[r.jsx("button",{type:"button",onClick:s,disabled:i,className:"flex-1 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[i&&r.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i?"Saving...":"Save Changes"]})]})]})]})})}function Sw(){const[o,s]=N.useState([]),[l,i]=N.useState(!1),[u,h]=N.useState(null),[f,g]=N.useState(!1),[b,p]=N.useState(!0),[v,y]=N.useState({}),w=kr();N.useEffect(()=>{_()},[]);const _=async()=>{p(!0);try{const T=await us.getAllStores();s(T||[]);try{const q=await Promise.all((T||[]).map(async $=>[$.id,await Ar($.id)])),I={};q.forEach(([$,ae])=>{I[$]=ae}),y(I)}catch{}}catch(T){console.error("Failed to load stores:",T)}finally{p(!1)}},A=async T=>{let q=T;if(!T.businessType)try{q=await us.updateStore(T.id,{businessType:"RESTAURANT",features:vr.RESTAURANT})}catch{}s([...o,q]),i(!1)},C=T=>{s(o.map(q=>q.id===T.id?T:q)),h(null),g(!1)},M=async T=>{try{await us.deleteStore(T),s(o.filter(q=>q.id!==T))}catch(q){console.error("Failed to delete store:",q),alert("Failed to delete store")}},V=T=>{h(T),g(!0)},D=async T=>{try{await w({message:`You are about to delete "${T.name}". This action cannot be undone.`,confirmButtonLabel:"Delete Store"}),await M(T.id)}catch{}},O=T=>{const q=v[T]||{},I=Object.keys(q).filter($=>q[$]);return I.includes("multi_branch")?"Scale":I.includes("clients")||I.includes("appointments")||I.includes("loyalty")?"Pro":"Starter"};return b?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"Loading stores..."})]})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("div",{className:"bg-white shadow-sm border-b border-slate-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Super Admin Dashboard"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Manage all stores and locations"})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Store"]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-600",children:[r.jsx("p",{className:"text-slate-600 text-sm font-medium",children:"Total Stores"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:o.length})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-600",children:[r.jsx("p",{className:"text-slate-600 text-sm font-medium",children:"Active Stores"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:o.filter(T=>T.enabled).length})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-amber-600",children:[r.jsx("p",{className:"text-slate-600 text-sm font-medium",children:"Disabled Stores"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:o.filter(T=>!T.enabled).length})]})]}),o.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-12 text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m5 0h5M9 7h.01M7 7a2 2 0 104 0 2 2 0 00-4 0z"})}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mt-4",children:"No stores yet"}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Create your first store to get started"}),r.jsx("button",{onClick:()=>i(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:"Create Store"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(T=>r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 hover:shadow-md transition overflow-hidden",children:[r.jsx("div",{className:`h-2 ${T.enabled?"bg-green-500":"bg-slate-300"}`}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:T.name}),r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${T.enabled?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:T.enabled?"Active":"Inactive"})}),r.jsxs("div",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900",children:T.address}),r.jsx("p",{children:T.settings.storeAddress})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("span",{children:T.email})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 00.948-.684l1.498-4.493a1 1 0 011.502-.684l1.498 4.493a1 1 0 00.948.684H19a2 2 0 012 2v1M3 5h18v1a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm0 8h18v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8z"})}),r.jsx("span",{children:T.phone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"font-medium text-slate-900",children:T.settings.timezone})]})]}),T.settings&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 text-xs text-slate-500 space-y-1",children:[r.jsxs("p",{children:[" Store Code: ",T.code]}),r.jsxs("p",{children:[" Currency: ",T.settings.currency]}),r.jsxs("p",{children:[" Tax Rate: ",T.settings.taxRate,"%"]})]}),r.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:[r.jsx("span",{className:"text-slate-500",children:"Business:"})," ",r.jsx("span",{className:"font-medium text-slate-800",children:T.businessType||"RESTAURANT"}),r.jsx("span",{className:"mx-2 text-slate-400",children:""}),r.jsx("span",{className:"text-slate-500",children:"Plan:"})," ",r.jsx("span",{className:"font-medium text-slate-800",children:O(T.id)})]}),r.jsxs("div",{className:"mt-6 flex gap-2",children:[r.jsxs("button",{onClick:()=>V(T),className:"flex-1 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition font-medium text-sm flex items-center justify-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),r.jsxs("button",{onClick:()=>D(T),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition font-medium text-sm flex items-center justify-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]},T.id))})]}),l&&r.jsx(yw,{onClose:()=>i(!1),onStoreCreated:A}),f&&u&&r.jsx(ww,{store:u,onClose:()=>{g(!1),h(null)},onStoreUpdated:C})]})}const jw=[{key:"pos",label:"POS"},{key:"inventory",label:"Inventory"},{key:"reports",label:"Sales Reports"},{key:"staff",label:"Staff"},{key:"appointments",label:"Appointments"},{key:"commissions",label:"Commissions"},{key:"clients",label:"Client Profiles"},{key:"tips",label:"Tips"},{key:"multi_branch",label:"Multi-Branch"},{key:"export",label:"Export (CSV/PDF)"},{key:"reminders",label:"Reminders (SMS/Email)"},{key:"loyalty",label:"Loyalty (Punch Card)"}];function _w({storeId:o}){const[s,l]=N.useState(o||""),[i,u]=N.useState("Free"),[h,f]=N.useState({}),[g,b]=N.useState(!1);N.useEffect(()=>{o&&l(o)},[o]);async function p(){if(!s)return;b(!0);const[{data:_},{data:A}]=await Promise.all([Mt.from("stores").select("store_plan").eq("id",s).maybeSingle(),Mt.from("store_modules").select("module_name,is_enabled").eq("store_id",s)]);_&&u(_.store_plan??"Free");const C={};(A??[]).forEach(M=>C[M.module_name]=M.is_enabled),f(C),b(!1)}N.useEffect(()=>{p()},[s]);async function v(_){u(_),await Mt.from("stores").update({store_plan:_}).eq("id",s),await p()}async function y(_,A){f(C=>({...C,[_]:A})),await Mt.from("store_modules").upsert({store_id:s,module_name:_,is_enabled:A},{onConflict:"store_id,module_name"})}const w=N.useMemo(()=>jw.map(_=>({..._,enabled:!!h[_.key]})),[h]);return s?g?r.jsx("div",{className:"p-4",children:"Loading"}):r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Store Modules"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm opacity-70",children:"Plan:"}),r.jsx("button",{className:`px-3 py-1 rounded ${i==="Free"?"bg-black text-white":"border"}`,onClick:()=>v("Free"),children:"Free"}),r.jsx("button",{className:`px-3 py-1 rounded ${i==="Premium"?"bg-black text-white":"border"}`,onClick:()=>v("Premium"),children:"Premium"})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-2",children:w.map(_=>r.jsxs("label",{className:"flex items-center gap-2 border rounded p-2",children:[r.jsx("input",{type:"checkbox",checked:_.enabled,onChange:A=>y(_.key,A.target.checked)}),r.jsx("span",{children:_.label}),r.jsx("span",{className:"ml-auto text-xs px-2 py-0.5 rounded border",children:_.key})]},_.key))})]}):r.jsx("div",{className:"p-4",children:"Set storeId in code or via a selector."})}const iu=({onSuccess:o})=>{const[s,l]=N.useState(""),[i,u]=N.useState(""),[h,f]=N.useState(!1),[g,b]=N.useState(null),p=async v=>{v.preventDefault(),b(null),f(!0);try{await Lx(s,i),o?o():window.location.hash="#/admin"}catch(y){b((y==null?void 0:y.message)||"Login failed")}finally{f(!1)}};return r.jsxs("div",{className:"max-w-md w-full mx-auto bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100",children:"Super Admin Login"}),r.jsx("p",{className:"text-sm mb-6 text-slate-500 dark:text-slate-400",children:"Manage customer stores and tenants."}),g&&r.jsx("div",{className:"mb-4 text-sm text-red-600 dark:text-red-400",children:g}),r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),r.jsx("input",{type:"email",className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:s,onChange:v=>l(v.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Password"}),r.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:i,onChange:v=>u(v.target.value),required:!0})]}),r.jsx("button",{type:"submit",disabled:h,className:"w-full py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white font-medium disabled:opacity-60",children:h?"Signing in...":"Sign In"})]})]})},Nw=({stores:o,onSuccess:s})=>{const[l,i]=N.useState(o||[]),[u,h]=N.useState(""),[f,g]=N.useState(""),[b,p]=N.useState(""),[v,y]=N.useState(!1),[w,_]=N.useState(null),[A,C]=N.useState([]);N.useEffect(()=>{let V=!0;return(async()=>{if(o&&o.length){u||h(o[0].id);return}try{const O=await us.getAllStores();V&&(i(O),!u&&O.length>0&&h(O[0].id))}catch{}})(),()=>{V=!1}},[o]),N.useEffect(()=>{var O;const V=u||((O=l[0])==null?void 0:O.id)||"";if(!V)return;let D=K0();if((!D||D.length===0)&&l.find(q=>q.id===V)&&(D=P0()),C(D||[]),!f&&D&&D.length>0){const T=D.find(q=>q.role==="store_manager");g((T||D[0]).email)}},[u,l]);const M=async V=>{var D;V.preventDefault(),_(null),y(!0);try{const O=u||((D=l[0])==null?void 0:D.id)||"",T=await Bx({storeId:O,email:f,password:b});s?s(T.storeId||O):window.location.hash="#/"}catch(O){_((O==null?void 0:O.message)||"Login failed")}finally{y(!1)}};return r.jsxs("div",{className:"max-w-md w-full mx-auto bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100",children:"Store Login"}),r.jsx("p",{className:"text-sm mb-6 text-slate-500 dark:text-slate-400",children:"Sign in to manage your store or branches."}),w&&r.jsx("div",{className:"mb-4 text-sm text-red-600 dark:text-red-400",children:w}),r.jsxs("form",{onSubmit:M,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Store"}),r.jsxs("select",{className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:u,onChange:V=>{const D=V.target.value;h(D);try{let O=K0(D);if(!O||O.length===0){const T=l.find(q=>q.id===D);T&&(O=P0(T))}if(O&&O.length>0){const T=O.find(q=>q.role==="store_manager");g((T||O[0]).email)}}catch{}},children:[r.jsx("option",{value:"",disabled:l.length>0,children:"Select a store"}),l.map(V=>r.jsx("option",{value:V.id,children:V.name},V.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),r.jsx("input",{type:"email",className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:f,onChange:V=>g(V.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Password"}),r.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:b,onChange:V=>p(V.target.value),required:!0})]}),r.jsx("button",{type:"submit",disabled:v||l.length===0,className:"w-full py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white font-medium disabled:opacity-60",children:v?"Signing in...":"Sign In"})]}),l.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 mb-2",children:"Test Logins"}),r.jsx("div",{className:"flex flex-col gap-2",children:A&&A.map(V=>r.jsxs("button",{onClick:async D=>{D.preventDefault(),_(null),y(!0);try{await Hx(V),s?s(V.storeId):window.location.hash="#/"}catch(O){_((O==null?void 0:O.message)||"Login failed")}finally{y(!1)}},className:"w-full py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 hover:bg-slate-100",children:["Login as ",V.role.replace("_"," ")," (",V.email,")"]},V.email))}),r.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Passwords: manager123, cashier123"})]}),r.jsxs("div",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:["Super admin? ",r.jsx("a",{className:"text-indigo-600",href:"#/login-admin",children:"Go to Super Admin Login"})]})]})},kw=()=>r.jsxs("div",{className:"max-w-xl w-full mx-auto bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100",children:"Welcome to myPOS"}),r.jsx("p",{className:"text-sm mb-6 text-slate-500 dark:text-slate-400",children:"Choose how you want to sign in."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("a",{href:"#/login-store",className:"block p-4 rounded-md border border-slate-200 dark:border-slate-700 hover:border-indigo-400 hover:shadow transition",children:[r.jsx("div",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Owner Login"}),r.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Access POS, inventory and reports."})]}),r.jsxs("a",{href:"#/login-admin",className:"block p-4 rounded-md border border-slate-200 dark:border-slate-700 hover:border-indigo-400 hover:shadow transition",children:[r.jsx("div",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Super Admin"}),r.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Manage customer stores and tenants."})]})]})]}),Ew=({cartItems:o,subtotal:s,tax:l,discount:i,total:u,settings:h,onClose:f,onConfirm:g})=>{const[b,p]=N.useState("Cash"),[v,y]=N.useState(""),w=N.useMemo(()=>{const C=parseFloat(v);return b==="Cash"&&!isNaN(C)&&C>=u?C-u:0},[b,v,u]),_=N.useMemo(()=>{if(b==="Card")return!0;const C=parseFloat(v);return!isNaN(C)&&C>=u},[b,v,u]),A=C=>{y(M=>{const V=C.toString();if(V==="."&&M.includes("."))return M;const D=M+V;return D.startsWith("0")&&!D.startsWith("0.")?D.replace(/^0+/,""):D})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[92vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-slate-700",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Confirm Order"}),r.jsx("button",{onClick:f,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",children:r.jsx(Nr,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"flex-1 overflow-hidden p-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[r.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2",children:[r.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Order Summary"}),o.length===0&&r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cart is empty."}),o.map(C=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[C.quantity," x ",C.name]}),r.jsxs("span",{className:"text-slate-800 dark:text-slate-200",children:["",(C.price*C.quantity).toFixed(2)]})]},C.id)),r.jsx("div",{className:"border-t border-dashed border-slate-300 dark:border-slate-600 my-2"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Subtotal"}),r.jsxs("span",{children:["",s.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Discount"}),r.jsxs("span",{className:"text-green-600",children:["- ",i.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Tax (",h.taxRate,"%)"]}),r.jsxs("span",{children:["",l.toFixed(2)]})]})]}),r.jsx("div",{className:"border-t border-slate-300 dark:border-slate-600 my-2"}),r.jsxs("div",{className:"flex justify-between text-2xl font-bold text-slate-800 dark:text-slate-200",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",u.toFixed(2)]})]})]}),r.jsxs("div",{className:"space-y-4 overflow-y-auto pl-2 bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Payment Method"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>p("Cash"),className:`py-3 rounded-md text-sm font-bold transition-colors ${b==="Cash"?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-white dark:bg-slate-700"}`,children:"CASH"}),r.jsx("button",{onClick:()=>p("Card"),className:`py-3 rounded-md text-sm font-bold transition-colors ${b==="Card"?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-white dark:bg-slate-700"}`,children:"CARD"})]}),b==="Cash"?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount Tendered ()"}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[[1e3,500,100].map(C=>r.jsxs("button",{type:"button",className:`px-3 py-2 text-sm font-semibold rounded-md border ${v===C.toString()?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border-slate-300 dark:border-slate-600"}`,onClick:()=>y(C.toString()),children:["",C.toLocaleString()]},C)),r.jsx("button",{type:"button",className:`px-3 py-2 text-sm font-semibold rounded-md border ${v===""?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border-slate-300 dark:border-slate-600"}`,onClick:()=>y(""),children:"Custom"})]}),r.jsx("input",{id:"amountTendered",type:"number",value:v,onChange:C=>y(C.target.value),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",placeholder:"Enter amount from customer",autoFocus:!0})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/50 p-3 rounded-md",children:[r.jsx("span",{children:"Change Due"}),r.jsxs("span",{children:["",w.toFixed(2)]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[[1,2,3,4,5,6,7,8,9,"0","."].map(C=>r.jsx("button",{type:"button",onClick:()=>A(C),className:"rounded-md border border-slate-300 bg-white py-2 text-base font-semibold text-slate-700 hover:bg-slate-100",children:C},C)),r.jsx("button",{type:"button",onClick:()=>y(C=>C.slice(0,-1)),className:"rounded-md border border-slate-300 bg-white py-2 text-base font-semibold text-slate-700 hover:bg-slate-100",children:""}),r.jsx("button",{type:"button",onClick:()=>y(""),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-base font-semibold text-slate-700 hover:bg-slate-100",children:"Clear"})]})]}):r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Process the card payment externally, then confirm below."})]})]})}),r.jsx("div",{className:"p-4 border-t dark:border-slate-700 bg-white dark:bg-slate-800",children:r.jsx("button",{onClick:()=>g(b),disabled:!_,className:"w-full bg-green-600 text-white font-bold py-3 rounded-md hover:bg-green-700 transition-colors disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:cursor-not-allowed",children:"Confirm Payment"})})]})})},Tw=({onClose:o,onApply:s,subtotal:l,currentDiscount:i})=>{const[u,h]=N.useState("pwd"),[f,g]=N.useState("percent"),[b,p]=N.useState("");N.useEffect(()=>{i&&(i.type==="percent"&&i.value===20?h("pwd"):(h("manager"),g(i.type),p(i.value)))},[i]);const v=N.useMemo(()=>{if(u==="pwd")return l*.2;if(b===""||b<0)return 0;if(f==="percent"){const w=l*(b/100);return Math.min(l,w)}return Math.min(l,b)},[u,f,b,l]),y=()=>{u==="pwd"?s({type:"percent",value:20}):b!==""&&b>0&&s({type:f,value:b})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-sm",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-slate-700",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Apply Discount"}),r.jsx("button",{onClick:o,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",children:r.jsx(Nr,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Discount Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>h("pwd"),className:`py-3 rounded-md text-sm font-bold transition-colors ${u==="pwd"?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-white dark:bg-slate-700"}`,children:"PWD Discount (20%)"}),r.jsx("button",{onClick:()=>h("manager"),className:`py-3 rounded-md text-sm font-bold transition-colors ${u==="manager"?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-white dark:bg-slate-700"}`,children:"Manager's Discount"})]})]}),u==="manager"&&r.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-lg space-y-4",children:[r.jsxs("div",{className:"flex rounded-md shadow-sm",children:[r.jsx("button",{onClick:()=>g("percent"),className:`px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-l-md text-sm font-medium transition-colors ${f==="percent"?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:"Percent (%)"}),r.jsx("button",{onClick:()=>g("fixed"),className:`px-4 py-2 border-y border-r border-slate-300 dark:border-slate-600 rounded-r-md text-sm font-medium transition-colors ${f==="fixed"?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:"Fixed ()"})]}),r.jsx("input",{type:"number",value:b,onChange:w=>p(parseFloat(w.target.value)||""),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",placeholder:f==="percent"?"e.g., 10 for 10%":"e.g., 50 for 50",min:"0",autoFocus:!0})]}),r.jsxs("div",{className:"text-center bg-indigo-50 dark:bg-indigo-900/50 p-3 rounded-md",children:[r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Discount to be applied:"}),r.jsxs("p",{className:"font-bold text-xl text-indigo-600 dark:text-indigo-300",children:["",v.toFixed(2)]})]})]}),r.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 px-6 py-4 flex justify-end",children:r.jsx("button",{onClick:y,className:"w-full px-4 py-3 text-sm font-bold text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Apply Discount"})})]})})},Aw=({product:o,onClose:s,onAddToCart:l})=>{const[i,u]=N.useState(1),h=o.stock<=0,f=o.stock===1/0?999:o.stock,g=y=>{const w=Math.max(1,Math.min(f,parseInt(y.target.value)||1));u(w)},b=()=>{l(i),s()},p=()=>{u(y=>Math.min(y+1,f))},v=()=>{u(y=>Math.max(y-1,1))};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-6 max-w-sm w-full mx-4 space-y-6",children:[r.jsxs("div",{children:[r.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-full h-40 object-cover rounded-lg mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:o.name}),o.description&&r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:o.description}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-3xl font-bold text-indigo-600",children:["",o.price.toFixed(2)]}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Cost: ",o.cost.toFixed(2)]})]}),o.stock!==1/0&&r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Stock"}),r.jsx("p",{className:`text-lg font-bold ${o.stock<=0?"text-red-600":"text-green-600"}`,children:o.stock})]})]})]}),!h&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Quantity"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:v,className:"w-10 h-10 rounded-lg bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white font-bold hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",disabled:i<=1,children:""}),r.jsx("input",{type:"number",value:i,onChange:g,className:"flex-grow text-center text-lg font-bold border-2 border-indigo-600 rounded-lg dark:bg-slate-700 dark:text-white dark:border-indigo-500 px-3 py-2",min:"1",max:f}),r.jsx("button",{onClick:p,className:"w-10 h-10 rounded-lg bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white font-bold hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",disabled:i>=f,children:"+"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:s,className:"flex-1 px-4 py-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white font-semibold rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:b,className:"flex-1 px-4 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition-colors",children:["Add to Order (",i,")"]})]})]}),h&&r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("p",{className:"text-lg font-semibold text-red-600",children:"Out of Stock"}),r.jsx("button",{onClick:s,className:"w-full px-4 py-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white font-semibold rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Close"})]})]})})},jm=({label:o,icon:s,href:l,description:i})=>r.jsx("a",{href:l,className:"group block bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg hover:-translate-y-1 transition-all duration-300 text-left",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-500/20 p-3 rounded-full",children:_u.cloneElement(s,{className:"h-8 w-8 text-indigo-600 dark:text-indigo-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:o}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:i})]})]})}),Ow=[{key:"pos",label:"POS Terminal",description:"Process sales and manage orders.",href:"#/pos",icon:r.jsx(dx,{})},{key:"inventory",label:"Menu & Inventory",description:"Manage your products and stock levels.",href:"#/inventory",icon:r.jsx(hx,{})},{key:"reports",label:"Sales Reports",description:"View sales data and analytics.",href:"#/reports",icon:r.jsx(Em,{})},{key:"settings",label:"Store Settings",description:"Configure your store and tax settings.",href:"#/settings",icon:r.jsx(fx,{})}],Cw=[{key:"appointments",label:"Appointments",description:"Manage bookings and staff schedules.",href:"#/appointments",icon:r.jsx(gx,{})},{key:"tickets",label:"Tickets & Queue",description:"Track service tickets or laundry loads.",href:"#/tickets",icon:r.jsx(px,{})},{key:"clients",label:"Clients & CRM",description:"Maintain client profiles and history.",href:"#/clients",icon:r.jsx(bx,{})},{key:"tips",label:"Tips & Gratuity",description:"Record and settle shared tips.",href:"#/tips",icon:r.jsx(xr,{})},{key:"commissions",label:"Commissions",description:"Track payouts per staff member.",href:"#/commissions",icon:r.jsx(km,{})},{key:"export",label:"Data Export",description:"Download sales and inventory data.",href:"#/export",icon:r.jsx(Tm,{})},{key:"reminders",label:"Reminders",description:"Automate follow-ups and alerts.",href:"#/reminders",icon:r.jsx(xx,{})},{key:"multi_branch",label:"Multi-Branch",description:"Monitor and manage other branches.",href:"#/multi-branch",icon:r.jsx(vx,{})},{key:"loyalty",label:"Loyalty",description:"Reward and retain loyal customers.",href:"#/clients",icon:r.jsx(Om,{})}],Rw={appointments:"enableAppointments",tickets:"enableTickets"},Dw=({storeName:o,modules:s,features:l})=>{const i=typeof window<"u"?window.location.hostname:"",u=i==="localhost"||i==="127.0.0.1"||i==="::1",h=typeof window<"u"?localStorage.getItem("userRole"):null,f=u&&h==="super_admin",g=v=>{if(s?!!s[v]:!1)return!0;const w=Rw[v];return w?!!(l!=null&&l[w]):!1},b=Cw.filter(v=>g(v.key)),p=[...Ow,...b];return r.jsxs("div",{className:"text-center",children:[r.jsxs("h2",{className:"text-4xl font-extrabold text-slate-800 dark:text-slate-200",children:["Welcome to ",o]}),r.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-400",children:"Select an option to get started."}),r.jsxs("div",{className:"mt-10 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[p.map(v=>r.jsx(jm,{...v},v.key)),f&&r.jsx(jm,{label:"Super Admin",icon:r.jsx(Em,{}),href:"#/admin",description:"(dev) Create and manage stores - visible on localhost only."},"admin")]})]})},Mw=({message:o,type:s,onClose:l})=>{const[i,u]=N.useState(!1);N.useEffect(()=>{u(!0);const g=setTimeout(()=>{u(!1),setTimeout(l,300)},2700);return()=>clearTimeout(g)},[l]);const h=s==="success"?"bg-green-500":"bg-red-500",f=s==="success"?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});return r.jsxs("div",{className:`flex items-center p-4 rounded-lg shadow-lg text-white ${h} transition-all duration-300 ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,children:[f,r.jsx("span",{className:"ml-3 font-medium",children:o})]})},Uw=({children:o})=>r.jsx("div",{className:"fixed bottom-5 right-5 z-50",children:o}),zw={async getProducts(o){const s=`products_${o}`,l=localStorage.getItem(s);return l?JSON.parse(l):[]},async getProduct(o,s){return(await this.getProducts(o)).find(i=>i.id===s)||null},async createProduct(o,s){const l={...s,id:`prod_${Date.now()}`,createdAt:new Date,updatedAt:new Date},u=[...await this.getProducts(o),l];return localStorage.setItem(`products_${o}`,JSON.stringify(u)),l},async updateProduct(o,s,l){const i=await this.getProducts(o),u=i.findIndex(h=>h.id===s);if(u===-1)throw new Error("Product not found");return i[u]={...i[u],...l,updatedAt:new Date},localStorage.setItem(`products_${o}`,JSON.stringify(i)),i[u]},async deleteProduct(o,s){const i=(await this.getProducts(o)).filter(u=>u.id!==s);localStorage.setItem(`products_${o}`,JSON.stringify(i))},async searchProducts(o,s){const l=await this.getProducts(o),i=s.toLowerCase();return l.filter(u=>u.name.toLowerCase().includes(i)||u.sku.toLowerCase().includes(i)||u.description.toLowerCase().includes(i))},async getProductBySku(o,s){return(await this.getProducts(o)).find(i=>i.sku===s)||null},async getCategories(o){const s=`categories_${o}`,l=localStorage.getItem(s);return l?JSON.parse(l):[]},async createCategory(o,s){const l={...s,id:`cat_${Date.now()}`,createdAt:new Date},u=[...await this.getCategories(o),l];return localStorage.setItem(`categories_${o}`,JSON.stringify(u)),l},async updateCategory(o,s,l){const i=await this.getCategories(o),u=i.findIndex(h=>h.id===s);if(u===-1)throw new Error("Category not found");return i[u]={...i[u],...l},localStorage.setItem(`categories_${o}`,JSON.stringify(i)),i[u]},async deleteCategory(o,s){const i=(await this.getCategories(o)).filter(u=>u.id!==s);localStorage.setItem(`categories_${o}`,JSON.stringify(i))}},hs=({label:o="Back to Dashboard",href:s="#/"})=>{const l=()=>{if(s){window.location.hash=s.startsWith("#")?s:`#${s}`;return}window.history.length>1?window.history.back():window.location.hash="#/"};return r.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:[r.jsx(yx,{className:"w-4 h-4"}),o]})},Lw=[{value:"haircut",label:"Haircut & Styling"},{value:"spa",label:"Relaxing Spa"},{value:"massage",label:"Therapeutic Massage"}],Bw=[{value:"staff_1",label:"Mara  Stylist"},{value:"staff_2",label:"Jonah  Technician"},{value:"staff_3",label:"Aleli  Therapist"}];function qw(){const[o,s]=N.useState([]),[l,i]=N.useState({client_name:"",client_phone:"",staff_id:"",service_id:"",date:"",time:"",notes:""}),[u,h]=N.useState(!1),[f,g]=N.useState(null),[b,p]=N.useState(null),[v,y]=N.useState(null),[w,_]=N.useState(!1),A=N.useMemo(()=>l.client_name.trim()&&l.client_phone.trim()&&l.service_id&&l.date&&l.time,[l]);async function C(){try{const{data:D,error:O}=await Mt.from("appointments").select("id,client_name,client_phone,staff_id,service_id,starts_at,status").order("starts_at",{ascending:!0});if(O)throw O;s(D??[]),g(null)}catch(D){console.error(D),g((D==null?void 0:D.message)??"Unable to load appointments")}}async function M(){if(_(!0),!A){p("Please complete all required fields before saving."),y(null);return}const D=new Date(`${l.date}T${l.time}`);if(Number.isNaN(D.getTime())){p("The selected date/time is invalid."),y(null);return}h(!0),p(null),y(null);try{const{error:O}=await Mt.from("appointments").insert({client_name:l.client_name||null,client_phone:l.client_phone||null,staff_id:l.staff_id||null,service_id:l.service_id||null,starts_at:D.toISOString(),status:"pending"});if(O)throw O;await C(),y("Appointment created."),i({client_name:"",client_phone:"",staff_id:"",service_id:"",date:"",time:"",notes:""}),_(!1)}catch(O){console.error(O),p("Something went wrong while saving. Please try again.")}finally{h(!1)}}const V=()=>{i({client_name:"",client_phone:"",staff_id:"",service_id:"",date:"",time:"",notes:""}),_(!1),p(null),y(null)};return N.useEffect(()=>{C()},[]),r.jsxs("div",{className:"p-4 lg:p-6 w-full max-w-6xl mx-auto space-y-6",children:[r.jsx(hs,{}),r.jsx("h1",{className:"text-xl font-semibold",children:"Appointments"}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-5 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Create New Appointment"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Book a client with a staff member and service."})]}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Client name"}),r.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Juan Dela Cruz",value:l.client_name,onChange:D=>i({...l,client_name:D.target.value})}),w&&!l.client_name.trim()&&r.jsx("p",{className:"text-xs text-red-600",children:"Client name is required."})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Mobile number"}),r.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"09XXXXXXXXX",value:l.client_phone,onChange:D=>i({...l,client_phone:D.target.value})}),w&&!l.client_phone.trim()&&r.jsx("p",{className:"text-xs text-red-600",children:"Mobile number is required."})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Service"}),r.jsxs("select",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:l.service_id,onChange:D=>i({...l,service_id:D.target.value}),children:[r.jsx("option",{value:"",children:"Select a service"}),Lw.map(D=>r.jsx("option",{value:D.value,children:D.label},D.value))]}),w&&!l.service_id&&r.jsx("p",{className:"text-xs text-red-600",children:"Please pick a service."})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Staff (optional)"}),r.jsxs("select",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:l.staff_id,onChange:D=>i({...l,staff_id:D.target.value}),children:[r.jsx("option",{value:"",children:"Not assigned"}),Bw.map(D=>r.jsx("option",{value:D.value,children:D.label},D.value))]})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Date"}),r.jsx("input",{type:"date",className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:l.date,onChange:D=>i({...l,date:D.target.value})}),w&&!l.date&&r.jsx("p",{className:"text-xs text-red-600",children:"Please pick a date."})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Time"}),r.jsx("input",{type:"time",className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:l.time,onChange:D=>i({...l,time:D.target.value})}),w&&!l.time&&r.jsx("p",{className:"text-xs text-red-600",children:"Please pick a time."})]})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Notes (optional)"}),r.jsx("textarea",{rows:3,className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Add internal notes (not stored yet)",value:l.notes,onChange:D=>i({...l,notes:D.target.value})})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[b&&r.jsx("p",{className:"text-sm text-red-600",children:b}),v&&r.jsx("p",{className:"text-sm text-emerald-600",children:v})]}),r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[r.jsx("button",{type:"button",className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100",onClick:V,children:"Clear form"}),r.jsx("button",{type:"button",disabled:u||!A,onClick:M,className:"px-4 py-2 bg-black text-white rounded text-sm disabled:opacity-40",children:u?"Saving":"Save appointment"})]})]})]}),f&&r.jsxs("div",{className:"text-red-600 text-sm",children:["Unable to load appointments: ",f]}),o.length===0?r.jsx("div",{className:"text-center text-sm text-slate-500",children:"No appointments yet. New bookings will appear here."}):r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left",children:[r.jsx("th",{children:"When"}),r.jsx("th",{children:"Client"}),r.jsx("th",{children:"Staff"}),r.jsx("th",{children:"Service"}),r.jsx("th",{children:"Status"})]})}),r.jsx("tbody",{children:o.map(D=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{children:new Date(D.starts_at).toLocaleString()}),r.jsxs("td",{children:[D.client_name," (",D.client_phone,")"]}),r.jsx("td",{children:D.staff_id||""}),r.jsx("td",{children:D.service_id||""}),r.jsx("td",{children:D.status})]},D.id))})]})]})}function Hw(){return r.jsxs("div",{className:"p-4 lg:p-6 w-full max-w-6xl mx-auto space-y-3",children:[r.jsx(hs,{}),r.jsx("h1",{className:"text-xl font-semibold",children:"Tickets"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Basic tickets page stub. Integrate with your ticket workflow here."})]})}function $w(){return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(hs,{}),r.jsx("p",{children:"Tips management coming soon."})]})}const Vw=[{key:"pos",label:"POS Terminal"},{key:"inventory",label:"Inventory"},{key:"reports",label:"Reports"},{key:"staff",label:"Staff"},{key:"appointments",label:"Appointments"},{key:"commissions",label:"Commissions"},{key:"clients",label:"CRM"},{key:"tips",label:"Tips"},{key:"multi_branch",label:"Multi-Branch"},{key:"export",label:"Export"},{key:"reminders",label:"Reminders"},{key:"loyalty",label:"Loyalty"}],Iw=[{label:"Client name",key:"name",placeholder:"Juan Dela Cruz",required:!0},{label:"Mobile number",key:"phone",placeholder:"09171234567",required:!0},{label:"Email",key:"email",placeholder:"juan@sample.com",required:!0},{label:"Tags (comma separated)",key:"tags",placeholder:"VIP,referral",required:!1}],ru={name:"",phone:"",email:"",tags:"",notes:""};function Gw(){const[o,s]=N.useState([]),[l,i]=N.useState([]),[u,h]=N.useState({}),[f,g]=N.useState(null),[b,p]=N.useState(!1),[v,y]=N.useState(ru),[w,_]=N.useState(!1),[A,C]=N.useState(null),[M,V]=N.useState(null),[D,O]=N.useState(!1),[T,q]=N.useState(""),I=N.useMemo(()=>{const X=o.length,ee=o.filter(de=>{const W=new Date(de.created_at),U=new Date;return U.setDate(U.getDate()-30),W>=U}).length,ye=l.filter(de=>new Date(de.starts_at)>=new Date&&de.status==="pending").length;return{total:X,last30:ee,upcoming:ye}},[o,l]),$=N.useMemo(()=>{if(!T.trim())return o;const X=T.toLowerCase();return o.filter(ee=>ee.name.toLowerCase().includes(X)||(ee.phone??"").toLowerCase().includes(X)||(ee.email??"").toLowerCase().includes(X))},[o,T]),ae=async()=>{var X;p(!0);try{const ye=((X=(await Mt.from("stores").select("id").eq("code","DEMO_STORE").maybeSingle()).data)==null?void 0:X.id)??null;g(ye);const de=Mt.from("clients").select("id,name,phone,email,tags,notes,created_at").order("created_at",{ascending:!1}),W=Mt.from("appointments").select("client_name,starts_at,status"),U=ye?Mt.from("store_modules").select("module_name,is_enabled").eq("store_id",ye):Promise.resolve({data:[]}),[{data:J,error:te},{data:G,error:le},S]=await Promise.all([de,W,U]);if(te)throw te;if(le)throw le;if(s(J??[]),i(G??[]),S!=null&&S.data){const E={};S.data.forEach(({module_name:Q,is_enabled:F})=>{E[Q]=F}),h(E)}}catch(ee){console.error("CRM load error",ee),C("Unable to load CRM data. Please refresh.")}finally{p(!1)}};N.useEffect(()=>{ae()},[]);const pe=async()=>{if(O(!0),!v.name.trim()||!v.phone.trim()||!v.email.trim()){C("Name, phone, and email are required."),V(null);return}_(!0),C(null),V(null);const X={name:v.name.trim(),phone:v.phone.trim(),email:v.email.trim(),tags:v.tags.split(",").map(ee=>ee.trim()).filter(Boolean),notes:v.notes.trim()||null,store_id:f};try{const{error:ee}=await Mt.from("clients").insert(X);if(ee)throw ee;V("Client saved."),y(ru),O(!1),await ae()}catch(ee){console.error("CRM save error",ee),C("Something went wrong while saving. Please try again.")}finally{_(!1)}},Ne=()=>{y(ru),O(!1),C(null),V(null)};return r.jsxs("div",{className:"p-4 lg:p-6 w-full max-w-6xl mx-auto space-y-5",children:[r.jsx(hs,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-lg font-semibold",children:"Clients & CRM"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Track your clients, appointments, and loyalty data in one place."})]}),r.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-4 space-y-1",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Total clients"}),r.jsx("p",{className:"text-2xl font-bold",children:I.total}),r.jsxs("p",{className:"text-xs text-slate-400",children:["New in 30 days: ",I.last30]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-4 space-y-1",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Upcoming appointments"}),r.jsx("p",{className:"text-2xl font-bold",children:I.upcoming}),r.jsx("p",{className:"text-xs text-slate-400",children:"Pending bookings to confirm"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-4 space-y-1",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"CRM modules"}),r.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Vw.map(X=>r.jsx("span",{className:`px-2 py-1 rounded-full border text-[10px] uppercase tracking-wide ${u[X.key]?"border-emerald-500 text-emerald-600 bg-emerald-50 dark:bg-emerald-800/40 dark:border-emerald-700":"border-slate-300 text-slate-500 bg-slate-50 dark:bg-slate-900 dark:border-slate-600"}`,children:X.label},X.key))})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-5 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Add a client"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Every client you save here can be linked to appointments, purchases, and loyalty."})]}),r.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:Iw.map(X=>{var ee;return r.jsxs("label",{className:"space-y-1",children:[r.jsxs("span",{className:"text-xs font-medium text-slate-500",children:[X.label," ",X.required&&r.jsx("span",{className:"text-pink-600",children:"*"})]}),r.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:X.placeholder,value:v[X.key],onChange:ye=>y(de=>({...de,[X.key]:ye.target.value}))}),D&&X.required&&!((ee=v[X.key])!=null&&ee.trim())&&r.jsxs("p",{className:"text-xs text-red-600",children:[X.label," is required."]})]},X.key)})}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Notes"}),r.jsx("textarea",{rows:3,className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Add any notes about this client...",value:v.notes,onChange:X=>y(ee=>({...ee,notes:X.target.value}))})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[A&&r.jsx("p",{className:"text-sm text-red-600",children:A}),M&&r.jsx("p",{className:"text-sm text-emerald-600",children:M})]}),r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[r.jsx("button",{type:"button",onClick:Ne,className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100",children:"Clear form"}),r.jsx("button",{type:"button",onClick:pe,disabled:w,className:"px-4 py-2 bg-black text-white rounded text-sm disabled:opacity-40",children:w?"Saving":"Save client"})]})]})]}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Client list"}),r.jsxs("p",{className:"text-xs text-slate-500",children:[o.length," clients stored"]})]}),r.jsx("input",{className:"border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Search clients",value:T,onChange:X=>q(X.target.value)})]}),b?r.jsx("div",{className:"text-sm text-slate-500",children:"Loading clients"}):$.length===0?r.jsx("div",{className:"text-center text-sm text-slate-500",children:"No clients yet. Customers synced here from POS, bookings, and loyalty will appear as soon as you add them."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500",children:[r.jsx("th",{className:"px-2 py-2",children:"Client"}),r.jsx("th",{className:"px-2 py-2",children:"Phone"}),r.jsx("th",{className:"px-2 py-2",children:"Email"}),r.jsx("th",{className:"px-2 py-2",children:"Tags"}),r.jsx("th",{className:"px-2 py-2",children:"Last activity"}),r.jsx("th",{className:"px-2 py-2 text-right",children:"Actions"})]})}),r.jsx("tbody",{children:$.map(X=>{const ee=l.find(ye=>{var de;return(de=ye.client_name)==null?void 0:de.toLowerCase().includes(X.name.toLowerCase())});return r.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[r.jsxs("td",{className:"px-2 py-3",children:[r.jsx("div",{className:"font-semibold",children:X.name}),r.jsxs("div",{className:"text-xs text-slate-500",children:["Added ",new Date(X.created_at).toLocaleDateString()]})]}),r.jsx("td",{className:"px-2 py-3",children:X.phone||""}),r.jsx("td",{className:"px-2 py-3",children:X.email||""}),r.jsxs("td",{className:"px-2 py-3 space-x-1",children:[(X.tags??[]).map(ye=>r.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-300",children:ye},ye)),(X.tags??[]).length===0&&r.jsx("span",{className:"text-xs text-slate-400",children:"none"})]}),r.jsx("td",{className:"px-2 py-3",children:ee?r.jsxs("span",{className:"text-xs text-slate-500",children:[new Date(ee.starts_at).toLocaleString(),"  ",ee.status]}):r.jsx("span",{className:"text-xs text-slate-500",children:"No appointments yet"})}),r.jsx("td",{className:"px-2 py-3 text-right",children:r.jsx("a",{className:"text-slate-600 text-xs underline hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",href:"#/appointments",children:"Schedule appointment"})})]},X.id)})})]})})]})]})}function Yw({stores:o,transactions:s,expenses:l,currentStoreId:i}){const u=o.map(h=>{var f;return{id:h.id,name:((f=h.settings)==null?void 0:f.storeName)||h.name}});return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(hs,{}),r.jsx(Dm,{stores:u,transactions:s,expenses:l,currentStoreId:i})]})}function Pw(){return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(hs,{}),r.jsx("p",{children:"Export tools coming soon."})]})}function Kw(){return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(hs,{}),r.jsx("p",{children:"Reminders coming soon."})]})}function Qw(){return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(hs,{}),r.jsx("p",{children:"Multi-Branch admin coming soon."})]})}const Jw=({storeId:o,onClose:s})=>{const l=`ledger_${o}`,[i,u]=N.useState([]),[h,f]=N.useState(""),[g,b]=N.useState(""),[p,v]=N.useState("");N.useEffect(()=>{try{const A=localStorage.getItem(l);u(A?JSON.parse(A):[])}catch{u([])}},[l]);const y=A=>{u(A),localStorage.setItem(l,JSON.stringify(A))},w=A=>{const C=Number(g);if(!h.trim()||isNaN(C)||C<=0)return;const M={id:`l_${Date.now()}`,customer:h.trim(),amount:A*C,note:p.trim()||void 0,date:new Date().toISOString()};y([M,...i]),b(""),v("")},_=i.reduce((A,C)=>A+C.amount,0);return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:s}),r.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-3xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Utang Ledger"}),r.jsx("button",{className:"px-3 py-1 rounded-md bg-slate-200 dark:bg-slate-700",onClick:s,children:"Close"})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("input",{value:h,onChange:A=>f(A.target.value),placeholder:"Customer",className:"px-2 py-2 border rounded-md dark:bg-slate-900 dark:border-slate-700"}),r.jsx("input",{value:g,onChange:A=>b(A.target.value),placeholder:"Amount",className:"px-2 py-2 border rounded-md dark:bg-slate-900 dark:border-slate-700"}),r.jsx("input",{value:p,onChange:A=>v(A.target.value),placeholder:"Note",className:"px-2 py-2 border rounded-md dark:bg-slate-900 dark:border-slate-700"}),r.jsx("button",{onClick:()=>w(1),className:"px-3 py-2 bg-emerald-600 text-white rounded-md",children:"Add Loan"}),r.jsx("button",{onClick:()=>w(-1),className:"px-3 py-2 bg-sky-600 text-white rounded-md",children:"Add Payment"})]}),r.jsxs("div",{className:"mb-2 text-sm",children:["Balance: ",r.jsx("span",{className:_>=0?"text-amber-600":"text-emerald-600",children:_>=0?""+_.toFixed(2):""+(-_).toFixed(2)+" credit"})]}),r.jsxs("div",{className:"max-h-80 overflow-y-auto divide-y divide-slate-200 dark:divide-slate-700",children:[i.map(A=>r.jsxs("div",{className:"py-2 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:A.customer}),r.jsx("div",{className:"text-xs text-slate-500",children:new Date(A.date).toLocaleString()}),A.note&&r.jsx("div",{className:"text-xs text-slate-500",children:A.note})]}),r.jsx("div",{className:`text-sm font-semibold ${A.amount>0?"text-amber-700":"text-emerald-700"}`,children:A.amount>0?"+"+A.amount.toFixed(2):"-"+(-A.amount).toFixed(2)})]},A.id)),i.length===0&&r.jsx("div",{className:"text-sm text-slate-500",children:"No ledger entries yet."})]})]})]})};function Us(o,s){const[l,i]=N.useState(()=>{try{const h=window.localStorage.getItem(o);return h?JSON.parse(h,(g,b)=>g==="timestamp"||g==="date"?new Date(b):b)??s:s}catch(h){return console.error(`Error parsing localStorage key "${o}":`,h),s}});return[l,h=>{try{const f=h instanceof Function?h(l):h;i(f),window.localStorage.setItem(o,JSON.stringify(f))}catch(f){console.error(`Error setting localStorage key "${o}":`,f)}}]}const Xw=()=>{const[o,s]=Us("theme","light"),[l,i]=N.useState(window.location.hash||"#/"),[u,h]=Us("products",[]),[f,g]=Us("cart",[]),[b,p]=Us("transactions",[]),[v,y]=Us("expenses",[]),[w,_]=Us("settings",{storeName:"myPOS",storeAddress:"",contactInfo:"",taxRate:12,lowStockThreshold:10}),[A,C]=N.useState([]),[M,V]=N.useState(null),[D,O]=N.useState(null),[T,q]=N.useState([]),I=N.useMemo(()=>{var se;if((D==null?void 0:D.role)==="super_admin")return"myPOS Admin";if(M){const ie=A.find(me=>me.id===M);if(ie)return((se=ie.settings)==null?void 0:se.storeName)||ie.name}return"myPOS"},[D,M,A]),$=N.useMemo(()=>A.find(se=>se.id===M)||null,[A,M]),[ae,pe]=N.useState("All"),[Ne,X]=N.useState(!1),[ee,ye]=N.useState(!1),[de,W]=Us("discount",null),[U,J]=N.useState([]),[te,G]=N.useState(null),[le,S]=N.useState(!1),[E,Q]=N.useState(aa);N.useEffect(()=>{document.documentElement.classList.toggle("dark",o==="dark")},[o]),N.useEffect(()=>{const se=()=>{i(window.location.hash||"#/")};return window.addEventListener("hashchange",se),()=>window.removeEventListener("hashchange",se)},[]),N.useEffect(()=>{const se=Ul();O(se),se&&se.storeId&&V(se.storeId)},[]),N.useEffect(()=>{M&&Ar(M).then(Q).catch(()=>Q(aa))},[M]),N.useEffect(()=>{try{q(Dt.getAll())}catch{}},[]),N.useEffect(()=>{(async()=>{if(M)try{const ie=await zw.getProducts(M);Array.isArray(ie)&&ie.length>0&&h(ie)}catch{}})()},[M,h]),N.useEffect(()=>{(async()=>{try{const ie=await us.getAllStores();C(ie)}catch(ie){console.error("Failed to initialize stores:",ie)}})()},[]);const F=N.useMemo(()=>["All",...new Set(u.map(se=>{const ie=se.categoryId||se.category;return ie==="cat_appetizers"?"Appetizers":ie==="cat_main_courses"?"Main Courses":ie==="cat_desserts"?"Desserts":ie==="cat_drinks"?"Drinks":se.category||"Other"}))],[u]),ne=N.useMemo(()=>ae==="All"?u:u.filter(se=>{const ie=se.categoryId||se.category;let me="";return ie==="cat_appetizers"?me="Appetizers":ie==="cat_main_courses"?me="Main Courses":ie==="cat_desserts"?me="Desserts":ie==="cat_drinks"?me="Drinks":me=se.category||"Other",me===ae}),[u,ae]),{cartSubtotal:oe,discountAmount:we,taxAmount:Xe,finalTotal:Ge}=N.useMemo(()=>{const se=f.reduce((Be,ma)=>Be+ma.price*ma.quantity,0);let ie=0;de&&(de.type==="percent"?ie=se*(de.value/100):ie=de.value),ie=Math.min(se,ie);const me=se-ie,ke=me*(w.taxRate/100),De=me+ke;return{cartSubtotal:se,discountAmount:ie,taxAmount:ke,finalTotal:De}},[f,de,w.taxRate]),ot=(se,ie)=>{const me={id:Date.now(),message:se,type:ie};J(ke=>[...ke,me])},Ma=N.useCallback((se,ie)=>{ie<=0||(g(me=>{const ke=me.find(Be=>Be.id===se.id),De=((ke==null?void 0:ke.quantity)||0)+ie;return se.stock!==1/0&&De>se.stock?(ot(`Not enough stock for ${se.name}. Only ${se.stock} available.`,"error"),me):ke?(ot(`${ie} more ${se.name}(s) added to order`,"success"),me.map(Be=>Be.id===se.id?{...Be,quantity:De}:Be)):(ot(`${ie} ${se.name}(s) added to order`,"success"),[...me,{...se,quantity:ie}])}),G(null))},[g]),fs=N.useCallback((se,ie)=>{g(me=>ie<=0?me.filter(ke=>ke.id!==se):me.map(ke=>ke.id===se?{...ke,quantity:ie}:ke))},[g]),Ua=N.useCallback(()=>{g([]),W(null)},[g,W]),Yt=()=>{f.length>0&&X(!0)},Z=se=>{W(se);const ie=f.reduce((ke,De)=>ke+De.price*De.quantity,0);let me=0;se.type==="percent"?me=ie*(se.value/100):me=se.value,me=Math.min(ie,me),ot(`Discount of ${me.toFixed(2)} applied.`,"success"),ye(!1)},be=N.useCallback(se=>{if(!M||f.length===0)return;const ie=f.reduce((ke,De)=>{if(De.isCommissionable&&De.commissionRate){const Be=De.price*De.quantity;return ke+Be*De.commissionRate}return ke},0),me={id:`TX-${Date.now()}`,storeId:M,cashierId:"user_default",items:f,subtotal:oe,tax:Xe,discountAmount:we,discountDetails:de,total:Ge,timestamp:new Date,paymentMethod:se,status:"completed",commissionTotal:ie>0?ie:0};if(p(ke=>[...ke,me]),ie>0){const ke=new Date,De={id:`comm-${me.id}`,storeId:M,recordedBy:(D==null?void 0:D.id)||"system_auto",description:`Auto: Commissions for transaction ${me.id}`,amount:ie,category:"COMMISSIONS",date:ke,approved:!0,createdAt:ke};y(Be=>[...Be,De])}h(ke=>{const De=[...ke];return f.forEach(Be=>{const ma=Be.itemType||"product";if(ma==="menu"&&Array.isArray(Be.bundleItems)&&Be.bundleItems.forEach(Fe=>{const Nt=De.findIndex(St=>St.id===Fe.itemId);Nt>-1&&De[Nt].stock!==1/0&&(De[Nt].stock-=(Fe.qty||1)*Be.quantity)}),ma!=="service"){const Ut=De.findIndex(Fe=>Fe.id===Be.id);Ut>-1&&De[Ut].stock!==1/0&&(De[Ut].stock-=Be.quantity)}const Yl=Be.consumedItems;Array.isArray(Yl)&&Yl.forEach(Ut=>{const Fe=De.findIndex(Nt=>Nt.id===Ut.itemId);Fe>-1&&De[Fe].stock!==1/0&&(De[Fe].stock-=(Ut.qty||1)*Be.quantity)})}),De}),Ua(),X(!1),ot("Transaction completed successfully!","success")},[f,oe,Xe,we,Ge,de,M,D,p,Ua,h,y]),_e=se=>{_(se),ot("Settings saved!","success")},Le=()=>{qx(),O(null),V(null),window.location.hash="#/login-admin"},Ae=se=>{const ie={...se,id:`p${Date.now()}`};h(me=>[...me,ie]),ot("Menu item added!","success")},wt=se=>{h(ie=>ie.map(me=>me.id===se.id?se:me)),ot("Menu item updated!","success")},za=se=>{h(ie=>ie.filter(me=>me.id!==se)),ot("Menu item deleted!","success")},$s=se=>{h(ie=>ie.filter(me=>!se.includes(me.id))),ot(`${se.length} menu item(s) deleted!`,"success")},Vs=se=>{if(!M)return;const ie={...se,id:`ex-${Date.now()}`,storeId:M,recordedBy:"cashier_default",approved:!0,createdAt:new Date};y(me=>[...me,ie]),ot("Expense logged!","success")},dt=()=>{var se,ie,me,ke;if(!M&&l==="#/pos")return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Please login to a store to continue."}),r.jsx("div",{className:"mt-4",children:r.jsx("a",{href:"#/login-store",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Owner Login"})})]})});switch(l){case"#/login-admin":return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(iu,{onSuccess:()=>{O(Ul()),window.location.hash="#/admin"}})});case"#/login-store":return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(Nw,{stores:A,onSuccess:De=>{V(De),O(Ul()),window.location.hash="#/"}})});case"#/login":return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(kw,{})});case"#/pos":return r.jsxs("div",{className:"flex flex-col h-full w-full gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>{window.history.back()},className:"px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-200 dark:bg-slate-700 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600","aria-label":"Back to Main Menu",children:" Back"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Point of Sale"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[((se=$==null?void 0:$.features)==null?void 0:se.enableTables)&&r.jsx("div",{className:"px-2 py-1 text-xs rounded-md bg-indigo-100 text-indigo-700",children:"Tables"}),((ie=$==null?void 0:$.features)==null?void 0:ie.enableUtangLedger)&&r.jsx("button",{onClick:()=>S(!0),className:"px-2 py-1 text-xs rounded-md bg-emerald-100 text-emerald-700",children:"Utang Ledger"}),((me=$==null?void 0:$.features)==null?void 0:me.enableExpiryAlerts)&&r.jsx("div",{className:"px-2 py-1 text-xs rounded-md bg-red-100 text-red-700",children:"Expiry Alerts"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 flex-grow min-h-0",children:[r.jsxs("div",{className:"lg:col-span-2 flex flex-col min-h-0",children:[r.jsx(Ax,{categories:F,selectedCategory:ae,onSelectCategory:pe}),r.jsx("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2 min-h-0",children:r.jsx(Nx,{products:ne,onProductClick:G,lowStockThreshold:w.lowStockThreshold,showExpiryBadge:!!((ke=$==null?void 0:$.features)!=null&&ke.enableExpiryAlerts)})})]}),r.jsx("div",{className:"flex flex-col min-h-0",children:r.jsx(Tx,{items:f,settings:w,discount:we,onUpdateQuantity:fs,onClearCart:Ua,onCheckout:Yt,onOpenDiscountModal:()=>ye(!0)})})]})]});case"#/admin":return!D||D.role!=="super_admin"?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(iu,{onSuccess:()=>{O(Ul()),window.location.hash="#/admin"}})}):r.jsx(Sw,{});case"#/admin-modules":return!D||D.role!=="super_admin"?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(iu,{onSuccess:()=>{O(Ul()),window.location.hash="#/admin-modules"}})}):r.jsx(_w,{storeId:M||""});case"#/appointments":return r.jsx(qw,{});case"#/tickets":return r.jsx(Hw,{});case"#/tips":return r.jsx($w,{});case"#/clients":return r.jsx(Gw,{});case"#/commissions":return r.jsx(Yw,{stores:A,transactions:b,expenses:v,currentStoreId:M});case"#/export":return r.jsx(Pw,{});case"#/reminders":return r.jsx(Kw,{});case"#/multi-branch":return r.jsx(Qw,{});case"#/inventory":return M?r.jsx(Cx,{products:u,onAddProduct:Ae,onUpdateProduct:wt,onDeleteProduct:za,onDeleteMultipleProducts:$s,lowStockThreshold:w.lowStockThreshold,hideCategory:($==null?void 0:$.businessType)==="SALON"}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Please login to a store to manage inventory."}),r.jsx("div",{className:"mt-4",children:r.jsx("a",{href:"#/login-store",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Owner Login"})})]})});case"#/reports":return M?r.jsx(Ux,{transactions:b,expenses:v,onAddExpense:Vs,stores:A,currentStoreId:M}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Please login to a store to view reports."}),r.jsx("div",{className:"mt-4",children:r.jsx("a",{href:"#/login-store",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Owner Login"})})]})});case"#/settings":return $?r.jsx(Ix,{settings:w,store:$,modules:E,staff:T,onSave:_e,onStaffsChanged:q}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Please login to a store to adjust settings."}),r.jsx("div",{className:"mt-4",children:r.jsx("a",{href:"#/login-store",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Owner Login"})})]})});default:return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(Dw,{storeName:I,modules:E,features:$==null?void 0:$.features})})}};return r.jsx(jx,{children:r.jsxs("div",{className:"flex flex-col min-h-screen w-full bg-slate-100 dark:bg-slate-900 text-slate-900 dark:text-slate-200 font-sans overflow-x-hidden",children:[r.jsx(wx,{theme:o,setTheme:s,storeName:I,stores:A,currentStoreId:M,onStoreChange:V,currentUser:D,onLogout:Le}),r.jsx("main",{className:"flex-grow w-full p-4 lg:p-6 overflow-y-auto",children:dt()}),Ne&&r.jsx(Ew,{cartItems:f,subtotal:oe,tax:Xe,discount:we,total:Ge,settings:w,onClose:()=>X(!1),onConfirm:be}),ee&&r.jsx(Tw,{onClose:()=>ye(!1),onApply:Z,subtotal:oe,currentDiscount:de}),te&&r.jsx(Aw,{product:te,onClose:()=>G(null),onAddToCart:se=>Ma(te,se)}),le&&M&&r.jsx(Jw,{storeId:M,onClose:()=>S(!1)}),r.jsx(Uw,{children:U.map(se=>r.jsx(Mw,{message:se.message,type:se.type,onClose:()=>J(ie=>ie.filter(me=>me.id!==se.id))},se.id))})]})})},_m="DEMO_DATA_CLEARED_V1",Zw=["stores","TEST_SEED_DONE","DEMO_SEEDED_V2","test_users_v1","store_owners_v1","cart","products","transactions","expenses","settings","discount","staff","appointments","tickets"],Fw=["products_","categories_","transactions_","expenses_","staff_","appointments_","tickets_"];function Ww(){if(!(typeof window>"u"||!window.localStorage))try{const o=window.localStorage;if(o.getItem(_m)==="1")return;Zw.forEach(s=>o.removeItem(s));for(let s=o.length-1;s>=0;s-=1){const l=o.key(s);l&&Fw.some(i=>l.startsWith(i))&&o.removeItem(l)}o.setItem(_m,"1")}catch(o){console.warn("Demo data cleanup skipped:",o)}}const Rg=document.getElementById("root");if(!Rg)throw new Error("Could not find root element to mount to");Ww();const eS=ix.createRoot(Rg);eS.render(r.jsx(_u.StrictMode,{children:r.jsx(Xw,{})}));
