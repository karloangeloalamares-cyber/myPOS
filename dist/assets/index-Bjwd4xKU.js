function Xx(o,a){for(var l=0;l<a.length;l++){const i=a[l];if(typeof i!="string"&&!Array.isArray(i)){for(const u in i)if(u!=="default"&&!(u in o)){const d=Object.getOwnPropertyDescriptor(i,u);d&&Object.defineProperty(o,u,d.get?d:{enumerable:!0,get:()=>i[u]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function l(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(u){if(u.ep)return;u.ep=!0;const d=l(u);fetch(u.href,d)}})();function ju(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function k0(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var a=o.default;if(typeof a=="function"){var l=function i(){return this instanceof i?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};l.prototype=a.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var u=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(l,i,u.get?u:{enumerable:!0,get:function(){return o[i]}})}),l}var Vc={exports:{}},Rl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function Zx(){if(Mm)return Rl;Mm=1;var o=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function l(i,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var m in u)m!=="key"&&(d[m]=u[m])}else d=u;return u=d.ref,{$$typeof:o,type:i,key:f,ref:u!==void 0?u:null,props:d}}return Rl.Fragment=a,Rl.jsx=l,Rl.jsxs=l,Rl}var Um;function Fx(){return Um||(Um=1,Vc.exports=Zx()),Vc.exports}var r=Fx(),Gc={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function Wx(){if(zm)return we;zm=1;var o=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),j=Symbol.iterator;function k(_){return _===null||typeof _!="object"?null:(_=j&&_[j]||_["@@iterator"],typeof _=="function"?_:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,D={};function $(_,A,Z){this.props=_,this.context=A,this.refs=D,this.updater=Z||O}$.prototype.isReactComponent={},$.prototype.setState=function(_,A){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,A,"setState")},$.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function H(){}H.prototype=$.prototype;function C(_,A,Z){this.props=_,this.context=A,this.refs=D,this.updater=Z||O}var T=C.prototype=new H;T.constructor=C,U(T,$.prototype),T.isPureReactComponent=!0;var M=Array.isArray;function G(){}var z={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function me(_,A,Z){var ae=Z.ref;return{$$typeof:o,type:_,key:A,ref:ae!==void 0?ae:null,props:Z}}function Y(_,A){return me(_.type,A,_.props)}function I(_){return typeof _=="object"&&_!==null&&_.$$typeof===o}function te(_){var A={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(Z){return A[Z]})}var W=/\/+/g;function ie(_,A){return typeof _=="object"&&_!==null&&_.key!=null?te(""+_.key):A.toString(36)}function F(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(G,G):(_.status="pending",_.then(function(A){_.status==="pending"&&(_.status="fulfilled",_.value=A)},function(A){_.status==="pending"&&(_.status="rejected",_.reason=A)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function w(_,A,Z,ae,oe){var de=typeof _;(de==="undefined"||de==="boolean")&&(_=null);var je=!1;if(_===null)je=!0;else switch(de){case"bigint":case"string":case"number":je=!0;break;case"object":switch(_.$$typeof){case o:case a:je=!0;break;case y:return je=_._init,w(je(_._payload),A,Z,ae,oe)}}if(je)return oe=oe(_),je=ae===""?"."+ie(_,0):ae,M(oe)?(Z="",je!=null&&(Z=je.replace(W,"$&/")+"/"),w(oe,A,Z,"",function(ct){return ct})):oe!=null&&(I(oe)&&(oe=Y(oe,Z+(oe.key==null||_&&_.key===oe.key?"":(""+oe.key).replace(W,"$&/")+"/")+je)),A.push(oe)),1;je=0;var Ze=ae===""?".":ae+":";if(M(_))for(var Ge=0;Ge<_.length;Ge++)ae=_[Ge],de=Ze+ie(ae,Ge),je+=w(ae,A,Z,de,oe);else if(Ge=k(_),typeof Ge=="function")for(_=Ge.call(_),Ge=0;!(ae=_.next()).done;)ae=ae.value,de=Ze+ie(ae,Ge++),je+=w(ae,A,Z,de,oe);else if(de==="object"){if(typeof _.then=="function")return w(F(_),A,Z,ae,oe);throw A=String(_),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return je}function P(_,A,Z){if(_==null)return _;var ae=[],oe=0;return w(_,ae,"","",function(de){return A.call(Z,de,oe++)}),ae}function ne(_){if(_._status===-1){var A=_._result;A=A(),A.then(function(Z){(_._status===0||_._status===-1)&&(_._status=1,_._result=Z)},function(Z){(_._status===0||_._status===-1)&&(_._status=2,_._result=Z)}),_._status===-1&&(_._status=0,_._result=A)}if(_._status===1)return _._result.default;throw _._result}var K=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},re={map:P,forEach:function(_,A,Z){P(_,function(){A.apply(this,arguments)},Z)},count:function(_){var A=0;return P(_,function(){A++}),A},toArray:function(_){return P(_,function(A){return A})||[]},only:function(_){if(!I(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return we.Activity=v,we.Children=re,we.Component=$,we.Fragment=l,we.Profiler=u,we.PureComponent=C,we.StrictMode=i,we.Suspense=p,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,we.__COMPILER_RUNTIME={__proto__:null,c:function(_){return z.H.useMemoCache(_)}},we.cache=function(_){return function(){return _.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(_,A,Z){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var ae=U({},_.props),oe=_.key;if(A!=null)for(de in A.key!==void 0&&(oe=""+A.key),A)!ee.call(A,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&A.ref===void 0||(ae[de]=A[de]);var de=arguments.length-2;if(de===1)ae.children=Z;else if(1<de){for(var je=Array(de),Ze=0;Ze<de;Ze++)je[Ze]=arguments[Ze+2];ae.children=je}return me(_.type,oe,ae)},we.createContext=function(_){return _={$$typeof:f,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:d,_context:_},_},we.createElement=function(_,A,Z){var ae,oe={},de=null;if(A!=null)for(ae in A.key!==void 0&&(de=""+A.key),A)ee.call(A,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(oe[ae]=A[ae]);var je=arguments.length-2;if(je===1)oe.children=Z;else if(1<je){for(var Ze=Array(je),Ge=0;Ge<je;Ge++)Ze[Ge]=arguments[Ge+2];oe.children=Ze}if(_&&_.defaultProps)for(ae in je=_.defaultProps,je)oe[ae]===void 0&&(oe[ae]=je[ae]);return me(_,de,oe)},we.createRef=function(){return{current:null}},we.forwardRef=function(_){return{$$typeof:m,render:_}},we.isValidElement=I,we.lazy=function(_){return{$$typeof:y,_payload:{_status:-1,_result:_},_init:ne}},we.memo=function(_,A){return{$$typeof:x,type:_,compare:A===void 0?null:A}},we.startTransition=function(_){var A=z.T,Z={};z.T=Z;try{var ae=_(),oe=z.S;oe!==null&&oe(Z,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(G,K)}catch(de){K(de)}finally{A!==null&&Z.types!==null&&(A.types=Z.types),z.T=A}},we.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},we.use=function(_){return z.H.use(_)},we.useActionState=function(_,A,Z){return z.H.useActionState(_,A,Z)},we.useCallback=function(_,A){return z.H.useCallback(_,A)},we.useContext=function(_){return z.H.useContext(_)},we.useDebugValue=function(){},we.useDeferredValue=function(_,A){return z.H.useDeferredValue(_,A)},we.useEffect=function(_,A){return z.H.useEffect(_,A)},we.useEffectEvent=function(_){return z.H.useEffectEvent(_)},we.useId=function(){return z.H.useId()},we.useImperativeHandle=function(_,A,Z){return z.H.useImperativeHandle(_,A,Z)},we.useInsertionEffect=function(_,A){return z.H.useInsertionEffect(_,A)},we.useLayoutEffect=function(_,A){return z.H.useLayoutEffect(_,A)},we.useMemo=function(_,A){return z.H.useMemo(_,A)},we.useOptimistic=function(_,A){return z.H.useOptimistic(_,A)},we.useReducer=function(_,A,Z){return z.H.useReducer(_,A,Z)},we.useRef=function(_){return z.H.useRef(_)},we.useState=function(_){return z.H.useState(_)},we.useSyncExternalStore=function(_,A,Z){return z.H.useSyncExternalStore(_,A,Z)},we.useTransition=function(){return z.H.useTransition()},we.version="19.2.0",we}var Lm;function Su(){return Lm||(Lm=1,Gc.exports=Wx()),Gc.exports}var S=Su();const _u=ju(S);var Yc={exports:{}},Dl={},Pc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function eb(){return Bm||(Bm=1,(function(o){function a(w,P){var ne=w.length;w.push(P);e:for(;0<ne;){var K=ne-1>>>1,re=w[K];if(0<u(re,P))w[K]=P,w[ne]=re,ne=K;else break e}}function l(w){return w.length===0?null:w[0]}function i(w){if(w.length===0)return null;var P=w[0],ne=w.pop();if(ne!==P){w[0]=ne;e:for(var K=0,re=w.length,_=re>>>1;K<_;){var A=2*(K+1)-1,Z=w[A],ae=A+1,oe=w[ae];if(0>u(Z,ne))ae<re&&0>u(oe,Z)?(w[K]=oe,w[ae]=ne,K=ae):(w[K]=Z,w[A]=ne,K=A);else if(ae<re&&0>u(oe,ne))w[K]=oe,w[ae]=ne,K=ae;else break e}}return P}function u(w,P){var ne=w.sortIndex-P.sortIndex;return ne!==0?ne:w.id-P.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();o.unstable_now=function(){return f.now()-m}}var p=[],x=[],y=1,v=null,j=3,k=!1,O=!1,U=!1,D=!1,$=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function T(w){for(var P=l(x);P!==null;){if(P.callback===null)i(x);else if(P.startTime<=w)i(x),P.sortIndex=P.expirationTime,a(p,P);else break;P=l(x)}}function M(w){if(U=!1,T(w),!O)if(l(p)!==null)O=!0,G||(G=!0,te());else{var P=l(x);P!==null&&F(M,P.startTime-w)}}var G=!1,z=-1,ee=5,me=-1;function Y(){return D?!0:!(o.unstable_now()-me<ee)}function I(){if(D=!1,G){var w=o.unstable_now();me=w;var P=!0;try{e:{O=!1,U&&(U=!1,H(z),z=-1),k=!0;var ne=j;try{t:{for(T(w),v=l(p);v!==null&&!(v.expirationTime>w&&Y());){var K=v.callback;if(typeof K=="function"){v.callback=null,j=v.priorityLevel;var re=K(v.expirationTime<=w);if(w=o.unstable_now(),typeof re=="function"){v.callback=re,T(w),P=!0;break t}v===l(p)&&i(p),T(w)}else i(p);v=l(p)}if(v!==null)P=!0;else{var _=l(x);_!==null&&F(M,_.startTime-w),P=!1}}break e}finally{v=null,j=ne,k=!1}P=void 0}}finally{P?te():G=!1}}}var te;if(typeof C=="function")te=function(){C(I)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ie=W.port2;W.port1.onmessage=I,te=function(){ie.postMessage(null)}}else te=function(){$(I,0)};function F(w,P){z=$(function(){w(o.unstable_now())},P)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(w){w.callback=null},o.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<w?Math.floor(1e3/w):5},o.unstable_getCurrentPriorityLevel=function(){return j},o.unstable_next=function(w){switch(j){case 1:case 2:case 3:var P=3;break;default:P=j}var ne=j;j=P;try{return w()}finally{j=ne}},o.unstable_requestPaint=function(){D=!0},o.unstable_runWithPriority=function(w,P){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var ne=j;j=w;try{return P()}finally{j=ne}},o.unstable_scheduleCallback=function(w,P,ne){var K=o.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?K+ne:K):ne=K,w){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ne+re,w={id:y++,callback:P,priorityLevel:w,startTime:ne,expirationTime:re,sortIndex:-1},ne>K?(w.sortIndex=ne,a(x,w),l(p)===null&&w===l(x)&&(U?(H(z),z=-1):U=!0,F(M,ne-K))):(w.sortIndex=re,a(p,w),O||k||(O=!0,G||(G=!0,te()))),w},o.unstable_shouldYield=Y,o.unstable_wrapCallback=function(w){var P=j;return function(){var ne=j;j=P;try{return w.apply(this,arguments)}finally{j=ne}}}})(Kc)),Kc}var qm;function tb(){return qm||(qm=1,Pc.exports=eb()),Pc.exports}var Qc={exports:{}},vt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function sb(){if(Hm)return vt;Hm=1;var o=Su();function a(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var i={d:{f:l,r:function(){throw Error(a(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(p,x,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:v==null?null:""+v,children:p,containerInfo:x,implementation:y}}var f=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,vt.createPortal=function(p,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(a(299));return d(p,x,null,y)},vt.flushSync=function(p){var x=f.T,y=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=x,i.p=y,i.d.f()}},vt.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(p,x))},vt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},vt.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var y=x.as,v=m(y,x.crossOrigin),j=typeof x.integrity=="string"?x.integrity:void 0,k=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?i.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:j,fetchPriority:k}):y==="script"&&i.d.X(p,{crossOrigin:v,integrity:j,fetchPriority:k,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},vt.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=m(x.as,x.crossOrigin);i.d.M(p,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(p)},vt.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,v=m(y,x.crossOrigin);i.d.L(p,y,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},vt.preloadModule=function(p,x){if(typeof p=="string")if(x){var y=m(x.as,x.crossOrigin);i.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(p)},vt.requestFormReset=function(p){i.d.r(p)},vt.unstable_batchedUpdates=function(p,x){return p(x)},vt.useFormState=function(p,x,y){return f.H.useFormState(p,x,y)},vt.useFormStatus=function(){return f.H.useHostTransitionStatus()},vt.version="19.2.0",vt}var $m;function ab(){if($m)return Qc.exports;$m=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(a){console.error(a)}}return o(),Qc.exports=sb(),Qc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function nb(){if(Im)return Dl;Im=1;var o=tb(),a=Su(),l=ab();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(i(188))}function x(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(i(188));return t!==e?null:e}for(var s=e,n=t;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(n=c.return,n!==null){s=n;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return p(c),e;if(h===n)return p(c),t;h=h.sibling}throw Error(i(188))}if(s.return!==n.return)s=c,n=h;else{for(var g=!1,b=c.child;b;){if(b===s){g=!0,s=c,n=h;break}if(b===n){g=!0,n=c,s=h;break}b=b.sibling}if(!g){for(b=h.child;b;){if(b===s){g=!0,s=h,n=c;break}if(b===n){g=!0,n=h,s=c;break}b=b.sibling}if(!g)throw Error(i(189))}}if(s.alternate!==n)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,j=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),me=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var W=Symbol.for("react.client.reference");function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===W?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case $:return"Profiler";case D:return"StrictMode";case M:return"Suspense";case G:return"SuspenseList";case me:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case O:return"Portal";case C:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case T:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return t=e.displayName||null,t!==null?t:ie(e.type)||"Memo";case ee:t=e._payload,e=e._init;try{return ie(e(t))}catch{}}return null}var F=Array.isArray,w=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},K=[],re=-1;function _(e){return{current:e}}function A(e){0>re||(e.current=K[re],K[re]=null,re--)}function Z(e,t){re++,K[re]=e.current,e.current=t}var ae=_(null),oe=_(null),de=_(null),je=_(null);function Ze(e,t){switch(Z(de,t),Z(oe,e),Z(ae,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?am(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=am(t),e=nm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(ae),Z(ae,e)}function Ge(){A(ae),A(oe),A(de)}function ct(e){e.memoizedState!==null&&Z(je,e);var t=ae.current,s=nm(t,e.type);t!==s&&(Z(oe,e),Z(ae,s))}function Ms(e){oe.current===e&&(A(ae),A(oe)),je.current===e&&(A(je),Tl._currentValue=ne)}var fa,Us;function Yt(e){if(fa===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);fa=t&&t[1]||"",Us=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fa+e+Us}var se=!1;function ye(e,t){if(!e||se)return"";se=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(V){var q=V}Reflect.construct(e,[],X)}else{try{X.call()}catch(V){q=V}e.call(X.prototype)}}else{try{throw Error()}catch(V){q=V}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(V){if(V&&q&&typeof V.stack=="string")return[V.stack,q.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=n.DetermineComponentFrameRoot(),g=h[0],b=h[1];if(g&&b){var N=g.split(`
`),B=b.split(`
`);for(c=n=0;n<N.length&&!N[n].includes("DetermineComponentFrameRoot");)n++;for(;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;if(n===N.length||c===B.length)for(n=N.length-1,c=B.length-1;1<=n&&0<=c&&N[n]!==B[c];)c--;for(;1<=n&&0<=c;n--,c--)if(N[n]!==B[c]){if(n!==1||c!==1)do if(n--,c--,0>c||N[n]!==B[c]){var Q=`
`+N[n].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=n&&0<=c);break}}}finally{se=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Yt(s):""}function ke(e,t){switch(e.tag){case 26:case 27:case 5:return Yt(e.type);case 16:return Yt("Lazy");case 13:return e.child!==t&&t!==null?Yt("Suspense Fallback"):Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 15:return ye(e.type,!1);case 11:return ye(e.type.render,!1);case 1:return ye(e.type,!0);case 31:return Yt("Activity");default:return""}}function Le(e){try{var t="",s=null;do t+=ke(e,s),s=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Ae=Object.prototype.hasOwnProperty,St=o.unstable_scheduleCallback,zs=o.unstable_cancelCallback,$a=o.unstable_shouldYield,Ia=o.unstable_requestPaint,ht=o.unstable_now,le=o.unstable_getCurrentPriorityLevel,ce=o.unstable_ImmediatePriority,xe=o.unstable_UserBlockingPriority,Ne=o.unstable_NormalPriority,De=o.unstable_LowPriority,Be=o.unstable_IdlePriority,ms=o.log,Yl=o.unstable_setDisableYieldValue,Ut=null,We=null;function Et(e){if(typeof ms=="function"&&Yl(e),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Ut,e)}catch{}}var _t=Math.clz32?Math.clz32:zg,Mg=Math.log,Ug=Math.LN2;function zg(e){return e>>>=0,e===0?32:31-(Mg(e)/Ug|0)|0}var Pl=256,Kl=262144,Ql=4194304;function ma(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jl(e,t,s){var n=e.pendingLanes;if(n===0)return 0;var c=0,h=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var b=n&134217727;return b!==0?(n=b&~h,n!==0?c=ma(n):(g&=b,g!==0?c=ma(g):s||(s=b&~e,s!==0&&(c=ma(s))))):(b=n&~h,b!==0?c=ma(b):g!==0?c=ma(g):s||(s=n&~e,s!==0&&(c=ma(s)))),c===0?0:t!==0&&t!==c&&(t&h)===0&&(h=c&-c,s=t&-t,h>=s||h===32&&(s&4194048)!==0)?t:c}function $n(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Lg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lu(){var e=Ql;return Ql<<=1,(Ql&62914560)===0&&(Ql=4194304),e}function Ci(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function In(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Bg(e,t,s,n,c,h){var g=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var b=e.entanglements,N=e.expirationTimes,B=e.hiddenUpdates;for(s=g&~s;0<s;){var Q=31-_t(s),X=1<<Q;b[Q]=0,N[Q]=-1;var q=B[Q];if(q!==null)for(B[Q]=null,Q=0;Q<q.length;Q++){var V=q[Q];V!==null&&(V.lane&=-536870913)}s&=~X}n!==0&&Bu(e,n,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(g&~t))}function Bu(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-_t(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|s&261930}function qu(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-_t(s),c=1<<n;c&t|e[n]&t&&(e[n]|=t),s&=~c}}function Hu(e,t){var s=t&-t;return s=(s&42)!==0?1:Oi(s),(s&(e.suspendedLanes|t))!==0?0:s}function Oi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ri(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $u(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:Em(e.type))}function Iu(e,t){var s=P.p;try{return P.p=e,t()}finally{P.p=s}}var Ls=Math.random().toString(36).slice(2),gt="__reactFiber$"+Ls,Tt="__reactProps$"+Ls,Va="__reactContainer$"+Ls,Di="__reactEvents$"+Ls,qg="__reactListeners$"+Ls,Hg="__reactHandles$"+Ls,Vu="__reactResources$"+Ls,Vn="__reactMarker$"+Ls;function Mi(e){delete e[gt],delete e[Tt],delete e[Di],delete e[qg],delete e[Hg]}function Ga(e){var t=e[gt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Va]||s[gt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=dm(e);e!==null;){if(s=e[gt])return s;e=dm(e)}return t}e=s,s=e.parentNode}return null}function Ya(e){if(e=e[gt]||e[Va]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Gn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Pa(e){var t=e[Vu];return t||(t=e[Vu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ft(e){e[Vn]=!0}var Gu=new Set,Yu={};function ga(e,t){Ka(e,t),Ka(e+"Capture",t)}function Ka(e,t){for(Yu[e]=t,e=0;e<t.length;e++)Gu.add(t[e])}var $g=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pu={},Ku={};function Ig(e){return Ae.call(Ku,e)?!0:Ae.call(Pu,e)?!1:$g.test(e)?Ku[e]=!0:(Pu[e]=!0,!1)}function Xl(e,t,s){if(Ig(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Zl(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function gs(e,t,s,n){if(n===null)e.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+n)}}function Pt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vg(e,t,s){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){s=""+g,h.call(this,g)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(g){s=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ui(e){if(!e._valueTracker){var t=Qu(e)?"checked":"value";e._valueTracker=Vg(e,t,""+e[t])}}function Ju(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=Qu(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function Fl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gg=/[\n"\\]/g;function Kt(e){return e.replace(Gg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function zi(e,t,s,n,c,h,g,b){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Pt(t)):e.value!==""+Pt(t)&&(e.value=""+Pt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Li(e,g,Pt(t)):s!=null?Li(e,g,Pt(s)):n!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Pt(b):e.removeAttribute("name")}function Xu(e,t,s,n,c,h,g,b){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){Ui(e);return}s=s!=null?""+Pt(s):"",t=t!=null?""+Pt(t):s,b||t===e.value||(e.value=t),e.defaultValue=t}n=n??c,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=b?e.checked:!!n,e.defaultChecked=!!n,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Ui(e)}function Li(e,t,s){t==="number"&&Fl(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Qa(e,t,s,n){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&n&&(e[s].defaultSelected=!0)}else{for(s=""+Pt(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,n&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Zu(e,t,s){if(t!=null&&(t=""+Pt(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Pt(s):""}function Fu(e,t,s,n){if(t==null){if(n!=null){if(s!=null)throw Error(i(92));if(F(n)){if(1<n.length)throw Error(i(93));n=n[0]}s=n}s==null&&(s=""),t=s}s=Pt(t),e.defaultValue=s,n=e.textContent,n===s&&n!==""&&n!==null&&(e.value=n),Ui(e)}function Ja(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Yg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wu(e,t,s){var n=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,s):typeof s!="number"||s===0||Yg.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function ed(e,t,s){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,s!=null){for(var n in s)!s.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var c in t)n=t[c],t.hasOwnProperty(c)&&s[c]!==n&&Wu(e,c,n)}else for(var h in t)t.hasOwnProperty(h)&&Wu(e,h,t[h])}function Bi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wl(e){return Kg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ps(){}var qi=null;function Hi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xa=null,Za=null;function td(e){var t=Ya(e);if(t&&(e=t.stateNode)){var s=e[Tt]||null;e:switch(e=t.stateNode,t.type){case"input":if(zi(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var c=n[Tt]||null;if(!c)throw Error(i(90));zi(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<s.length;t++)n=s[t],n.form===e.form&&Ju(n)}break e;case"textarea":Zu(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Qa(e,!!s.multiple,t,!1)}}}var $i=!1;function sd(e,t,s){if($i)return e(t,s);$i=!0;try{var n=e(t);return n}finally{if($i=!1,(Xa!==null||Za!==null)&&(Hr(),Xa&&(t=Xa,e=Za,Za=Xa=null,td(t),e)))for(t=0;t<e.length;t++)td(e[t])}}function Yn(e,t){var s=e.stateNode;if(s===null)return null;var n=s[Tt]||null;if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,t,typeof s));return s}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ii=!1;if(xs)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){Ii=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{Ii=!1}var Bs=null,Vi=null,er=null;function ad(){if(er)return er;var e,t=Vi,s=t.length,n,c="value"in Bs?Bs.value:Bs.textContent,h=c.length;for(e=0;e<s&&t[e]===c[e];e++);var g=s-e;for(n=1;n<=g&&t[s-n]===c[h-n];n++);return er=c.slice(e,1<n?1-n:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sr(){return!0}function nd(){return!1}function At(e){function t(s,n,c,h,g){this._reactName=s,this._targetInst=c,this.type=n,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(h):h[b]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?sr:nd,this.isPropagationStopped=nd,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),t}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ar=At(pa),Kn=v({},pa,{view:0,detail:0}),Qg=At(Kn),Gi,Yi,Qn,nr=v({},Kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ki,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qn&&(Qn&&e.type==="mousemove"?(Gi=e.screenX-Qn.screenX,Yi=e.screenY-Qn.screenY):Yi=Gi=0,Qn=e),Gi)},movementY:function(e){return"movementY"in e?e.movementY:Yi}}),ld=At(nr),Jg=v({},nr,{dataTransfer:0}),Xg=At(Jg),Zg=v({},Kn,{relatedTarget:0}),Pi=At(Zg),Fg=v({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),Wg=At(Fg),ep=v({},pa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tp=At(ep),sp=v({},pa,{data:0}),rd=At(sp),ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},np={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lp[e])?!!t[e]:!1}function Ki(){return rp}var ip=v({},Kn,{key:function(e){if(e.key){var t=ap[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?np[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ki,charCode:function(e){return e.type==="keypress"?tr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),op=At(ip),cp=v({},nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),id=At(cp),up=v({},Kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ki}),dp=At(up),hp=v({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),fp=At(hp),mp=v({},nr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gp=At(mp),pp=v({},pa,{newState:0,oldState:0}),xp=At(pp),bp=[9,13,27,32],Qi=xs&&"CompositionEvent"in window,Jn=null;xs&&"documentMode"in document&&(Jn=document.documentMode);var yp=xs&&"TextEvent"in window&&!Jn,od=xs&&(!Qi||Jn&&8<Jn&&11>=Jn),cd=" ",ud=!1;function dd(e,t){switch(e){case"keyup":return bp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fa=!1;function vp(e,t){switch(e){case"compositionend":return hd(t);case"keypress":return t.which!==32?null:(ud=!0,cd);case"textInput":return e=t.data,e===cd&&ud?null:e;default:return null}}function wp(e,t){if(Fa)return e==="compositionend"||!Qi&&dd(e,t)?(e=ad(),er=Vi=Bs=null,Fa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return od&&t.locale!=="ko"?null:t.data;default:return null}}var jp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jp[e.type]:t==="textarea"}function md(e,t,s,n){Xa?Za?Za.push(n):Za=[n]:Xa=n,t=Kr(t,"onChange"),0<t.length&&(s=new ar("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Xn=null,Zn=null;function Sp(e){Zf(e,0)}function lr(e){var t=Gn(e);if(Ju(t))return e}function gd(e,t){if(e==="change")return t}var pd=!1;if(xs){var Ji;if(xs){var Xi="oninput"in document;if(!Xi){var xd=document.createElement("div");xd.setAttribute("oninput","return;"),Xi=typeof xd.oninput=="function"}Ji=Xi}else Ji=!1;pd=Ji&&(!document.documentMode||9<document.documentMode)}function bd(){Xn&&(Xn.detachEvent("onpropertychange",yd),Zn=Xn=null)}function yd(e){if(e.propertyName==="value"&&lr(Zn)){var t=[];md(t,Zn,e,Hi(e)),sd(Sp,t)}}function _p(e,t,s){e==="focusin"?(bd(),Xn=t,Zn=s,Xn.attachEvent("onpropertychange",yd)):e==="focusout"&&bd()}function Np(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lr(Zn)}function kp(e,t){if(e==="click")return lr(t)}function Ep(e,t){if(e==="input"||e==="change")return lr(t)}function Tp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:Tp;function Fn(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var c=s[n];if(!Ae.call(t,c)||!zt(e[c],t[c]))return!1}return!0}function vd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wd(e,t){var s=vd(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=vd(s)}}function jd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Fl(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Fl(e.document)}return t}function Zi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ap=xs&&"documentMode"in document&&11>=document.documentMode,Wa=null,Fi=null,Wn=null,Wi=!1;function _d(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Wi||Wa==null||Wa!==Fl(n)||(n=Wa,"selectionStart"in n&&Zi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Wn&&Fn(Wn,n)||(Wn=n,n=Kr(Fi,"onSelect"),0<n.length&&(t=new ar("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Wa)))}function xa(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var en={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionrun:xa("Transition","TransitionRun"),transitionstart:xa("Transition","TransitionStart"),transitioncancel:xa("Transition","TransitionCancel"),transitionend:xa("Transition","TransitionEnd")},eo={},Nd={};xs&&(Nd=document.createElement("div").style,"AnimationEvent"in window||(delete en.animationend.animation,delete en.animationiteration.animation,delete en.animationstart.animation),"TransitionEvent"in window||delete en.transitionend.transition);function ba(e){if(eo[e])return eo[e];if(!en[e])return e;var t=en[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Nd)return eo[e]=t[s];return e}var kd=ba("animationend"),Ed=ba("animationiteration"),Td=ba("animationstart"),Cp=ba("transitionrun"),Op=ba("transitionstart"),Rp=ba("transitioncancel"),Ad=ba("transitionend"),Cd=new Map,to="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");to.push("scrollEnd");function as(e,t){Cd.set(e,t),ga(t,[e])}var rr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Qt=[],tn=0,so=0;function ir(){for(var e=tn,t=so=tn=0;t<e;){var s=Qt[t];Qt[t++]=null;var n=Qt[t];Qt[t++]=null;var c=Qt[t];Qt[t++]=null;var h=Qt[t];if(Qt[t++]=null,n!==null&&c!==null){var g=n.pending;g===null?c.next=c:(c.next=g.next,g.next=c),n.pending=c}h!==0&&Od(s,c,h)}}function or(e,t,s,n){Qt[tn++]=e,Qt[tn++]=t,Qt[tn++]=s,Qt[tn++]=n,so|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function ao(e,t,s,n){return or(e,t,s,n),cr(e)}function ya(e,t){return or(e,null,null,t),cr(e)}function Od(e,t,s){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s);for(var c=!1,h=e.return;h!==null;)h.childLanes|=s,n=h.alternate,n!==null&&(n.childLanes|=s),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,c&&t!==null&&(c=31-_t(s),e=h.hiddenUpdates,n=e[c],n===null?e[c]=[t]:n.push(t),t.lane=s|536870912),h):null}function cr(e){if(50<wl)throw wl=0,fc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var sn={};function Dp(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,s,n){return new Dp(e,t,s,n)}function no(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bs(e,t){var s=e.alternate;return s===null?(s=Lt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Rd(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ur(e,t,s,n,c,h){var g=0;if(n=e,typeof e=="function")no(e)&&(g=1);else if(typeof e=="string")g=Bx(e,s,ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case me:return e=Lt(31,s,t,c),e.elementType=me,e.lanes=h,e;case U:return va(s.children,c,h,t);case D:g=8,c|=24;break;case $:return e=Lt(12,s,t,c|2),e.elementType=$,e.lanes=h,e;case M:return e=Lt(13,s,t,c),e.elementType=M,e.lanes=h,e;case G:return e=Lt(19,s,t,c),e.elementType=G,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:g=10;break e;case H:g=9;break e;case T:g=11;break e;case z:g=14;break e;case ee:g=16,n=null;break e}g=29,s=Error(i(130,e===null?"null":typeof e,"")),n=null}return t=Lt(g,s,t,c),t.elementType=e,t.type=n,t.lanes=h,t}function va(e,t,s,n){return e=Lt(7,e,n,t),e.lanes=s,e}function lo(e,t,s){return e=Lt(6,e,null,t),e.lanes=s,e}function Dd(e){var t=Lt(18,null,null,0);return t.stateNode=e,t}function ro(e,t,s){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Md=new WeakMap;function Jt(e,t){if(typeof e=="object"&&e!==null){var s=Md.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Le(t)},Md.set(e,t),t)}return{value:e,source:t,stack:Le(t)}}var an=[],nn=0,dr=null,el=0,Xt=[],Zt=0,qs=null,us=1,ds="";function ys(e,t){an[nn++]=el,an[nn++]=dr,dr=e,el=t}function Ud(e,t,s){Xt[Zt++]=us,Xt[Zt++]=ds,Xt[Zt++]=qs,qs=e;var n=us;e=ds;var c=32-_t(n)-1;n&=~(1<<c),s+=1;var h=32-_t(t)+c;if(30<h){var g=c-c%5;h=(n&(1<<g)-1).toString(32),n>>=g,c-=g,us=1<<32-_t(t)+c|s<<c|n,ds=h+e}else us=1<<h|s<<c|n,ds=e}function io(e){e.return!==null&&(ys(e,1),Ud(e,1,0))}function oo(e){for(;e===dr;)dr=an[--nn],an[nn]=null,el=an[--nn],an[nn]=null;for(;e===qs;)qs=Xt[--Zt],Xt[Zt]=null,ds=Xt[--Zt],Xt[Zt]=null,us=Xt[--Zt],Xt[Zt]=null}function zd(e,t){Xt[Zt++]=us,Xt[Zt++]=ds,Xt[Zt++]=qs,us=t.id,ds=t.overflow,qs=e}var pt=null,Ke=null,Re=!1,Hs=null,Ft=!1,co=Error(i(519));function $s(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(Jt(t,e)),co}function Ld(e){var t=e.stateNode,s=e.type,n=e.memoizedProps;switch(t[gt]=e,t[Tt]=n,s){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(s=0;s<Sl.length;s++)Te(Sl[s],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),Xu(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),Fu(t,n.value,n.defaultValue,n.children)}s=n.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||n.suppressHydrationWarning===!0||tm(t.textContent,s)?(n.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),n.onScroll!=null&&Te("scroll",t),n.onScrollEnd!=null&&Te("scrollend",t),n.onClick!=null&&(t.onclick=ps),t=!0):t=!1,t||$s(e,!0)}function Bd(e){for(pt=e.return;pt;)switch(pt.tag){case 5:case 31:case 13:Ft=!1;return;case 27:case 3:Ft=!0;return;default:pt=pt.return}}function ln(e){if(e!==pt)return!1;if(!Re)return Bd(e),Re=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Tc(e.type,e.memoizedProps)),s=!s),s&&Ke&&$s(e),Bd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ke=um(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ke=um(e)}else t===27?(t=Ke,ta(e.type)?(e=Dc,Dc=null,Ke=e):Ke=t):Ke=pt?es(e.stateNode.nextSibling):null;return!0}function wa(){Ke=pt=null,Re=!1}function uo(){var e=Hs;return e!==null&&(Dt===null?Dt=e:Dt.push.apply(Dt,e),Hs=null),e}function tl(e){Hs===null?Hs=[e]:Hs.push(e)}var ho=_(null),ja=null,vs=null;function Is(e,t,s){Z(ho,t._currentValue),t._currentValue=s}function ws(e){e._currentValue=ho.current,A(ho)}function fo(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function mo(e,t,s,n){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var g=c.child;h=h.firstContext;e:for(;h!==null;){var b=h;h=c;for(var N=0;N<t.length;N++)if(b.context===t[N]){h.lanes|=s,b=h.alternate,b!==null&&(b.lanes|=s),fo(h.return,s,e),n||(g=null);break e}h=b.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(i(341));g.lanes|=s,h=g.alternate,h!==null&&(h.lanes|=s),fo(g,s,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function rn(e,t,s,n){e=null;for(var c=t,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(i(387));if(g=g.memoizedProps,g!==null){var b=c.type;zt(c.pendingProps.value,g.value)||(e!==null?e.push(b):e=[b])}}else if(c===je.current){if(g=c.alternate,g===null)throw Error(i(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Tl):e=[Tl])}c=c.return}e!==null&&mo(t,e,s,n),t.flags|=262144}function hr(e){for(e=e.firstContext;e!==null;){if(!zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Sa(e){ja=e,vs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xt(e){return qd(ja,e)}function fr(e,t){return ja===null&&Sa(e),qd(e,t)}function qd(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},vs===null){if(e===null)throw Error(i(308));vs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vs=vs.next=t;return s}var Mp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Up=o.unstable_scheduleCallback,zp=o.unstable_NormalPriority,nt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function go(){return{controller:new Mp,data:new Map,refCount:0}}function sl(e){e.refCount--,e.refCount===0&&Up(zp,function(){e.controller.abort()})}var al=null,po=0,on=0,cn=null;function Lp(e,t){if(al===null){var s=al=[];po=0,on=yc(),cn={status:"pending",value:void 0,then:function(n){s.push(n)}}}return po++,t.then(Hd,Hd),t}function Hd(){if(--po===0&&al!==null){cn!==null&&(cn.status="fulfilled");var e=al;al=null,on=0,cn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Bp(e,t){var s=[],n={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var c=0;c<s.length;c++)(0,s[c])(t)},function(c){for(n.status="rejected",n.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),n}var $d=w.S;w.S=function(e,t){Nf=ht(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Lp(e,t),$d!==null&&$d(e,t)};var _a=_(null);function xo(){var e=_a.current;return e!==null?e:Ye.pooledCache}function mr(e,t){t===null?Z(_a,_a.current):Z(_a,t.pool)}function Id(){var e=xo();return e===null?null:{parent:nt._currentValue,pool:e}}var un=Error(i(460)),bo=Error(i(474)),gr=Error(i(542)),pr={then:function(){}};function Vd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Gd(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(ps,ps),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pd(e),e;default:if(typeof t.status=="string")t.then(ps,ps);else{if(e=Ye,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=n}},function(n){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pd(e),e}throw ka=t,un}}function Na(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ka=s,un):s}}var ka=null;function Yd(){if(ka===null)throw Error(i(459));var e=ka;return ka=null,e}function Pd(e){if(e===un||e===gr)throw Error(i(483))}var dn=null,nl=0;function xr(e){var t=nl;return nl+=1,dn===null&&(dn=[]),Gd(dn,e,t)}function ll(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function br(e,t){throw t.$$typeof===j?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Kd(e){function t(R,E){if(e){var L=R.deletions;L===null?(R.deletions=[E],R.flags|=16):L.push(E)}}function s(R,E){if(!e)return null;for(;E!==null;)t(R,E),E=E.sibling;return null}function n(R){for(var E=new Map;R!==null;)R.key!==null?E.set(R.key,R):E.set(R.index,R),R=R.sibling;return E}function c(R,E){return R=bs(R,E),R.index=0,R.sibling=null,R}function h(R,E,L){return R.index=L,e?(L=R.alternate,L!==null?(L=L.index,L<E?(R.flags|=67108866,E):L):(R.flags|=67108866,E)):(R.flags|=1048576,E)}function g(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function b(R,E,L,J){return E===null||E.tag!==6?(E=lo(L,R.mode,J),E.return=R,E):(E=c(E,L),E.return=R,E)}function N(R,E,L,J){var pe=L.type;return pe===U?Q(R,E,L.props.children,J,L.key):E!==null&&(E.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===ee&&Na(pe)===E.type)?(E=c(E,L.props),ll(E,L),E.return=R,E):(E=ur(L.type,L.key,L.props,null,R.mode,J),ll(E,L),E.return=R,E)}function B(R,E,L,J){return E===null||E.tag!==4||E.stateNode.containerInfo!==L.containerInfo||E.stateNode.implementation!==L.implementation?(E=ro(L,R.mode,J),E.return=R,E):(E=c(E,L.children||[]),E.return=R,E)}function Q(R,E,L,J,pe){return E===null||E.tag!==7?(E=va(L,R.mode,J,pe),E.return=R,E):(E=c(E,L),E.return=R,E)}function X(R,E,L){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=lo(""+E,R.mode,L),E.return=R,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case k:return L=ur(E.type,E.key,E.props,null,R.mode,L),ll(L,E),L.return=R,L;case O:return E=ro(E,R.mode,L),E.return=R,E;case ee:return E=Na(E),X(R,E,L)}if(F(E)||te(E))return E=va(E,R.mode,L,null),E.return=R,E;if(typeof E.then=="function")return X(R,xr(E),L);if(E.$$typeof===C)return X(R,fr(R,E),L);br(R,E)}return null}function q(R,E,L,J){var pe=E!==null?E.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return pe!==null?null:b(R,E,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case k:return L.key===pe?N(R,E,L,J):null;case O:return L.key===pe?B(R,E,L,J):null;case ee:return L=Na(L),q(R,E,L,J)}if(F(L)||te(L))return pe!==null?null:Q(R,E,L,J,null);if(typeof L.then=="function")return q(R,E,xr(L),J);if(L.$$typeof===C)return q(R,E,fr(R,L),J);br(R,L)}return null}function V(R,E,L,J,pe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return R=R.get(L)||null,b(E,R,""+J,pe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return R=R.get(J.key===null?L:J.key)||null,N(E,R,J,pe);case O:return R=R.get(J.key===null?L:J.key)||null,B(E,R,J,pe);case ee:return J=Na(J),V(R,E,L,J,pe)}if(F(J)||te(J))return R=R.get(L)||null,Q(E,R,J,pe,null);if(typeof J.then=="function")return V(R,E,L,xr(J),pe);if(J.$$typeof===C)return V(R,E,L,fr(E,J),pe);br(E,J)}return null}function ue(R,E,L,J){for(var pe=null,Me=null,he=E,_e=E=0,Oe=null;he!==null&&_e<L.length;_e++){he.index>_e?(Oe=he,he=null):Oe=he.sibling;var Ue=q(R,he,L[_e],J);if(Ue===null){he===null&&(he=Oe);break}e&&he&&Ue.alternate===null&&t(R,he),E=h(Ue,E,_e),Me===null?pe=Ue:Me.sibling=Ue,Me=Ue,he=Oe}if(_e===L.length)return s(R,he),Re&&ys(R,_e),pe;if(he===null){for(;_e<L.length;_e++)he=X(R,L[_e],J),he!==null&&(E=h(he,E,_e),Me===null?pe=he:Me.sibling=he,Me=he);return Re&&ys(R,_e),pe}for(he=n(he);_e<L.length;_e++)Oe=V(he,R,_e,L[_e],J),Oe!==null&&(e&&Oe.alternate!==null&&he.delete(Oe.key===null?_e:Oe.key),E=h(Oe,E,_e),Me===null?pe=Oe:Me.sibling=Oe,Me=Oe);return e&&he.forEach(function(ra){return t(R,ra)}),Re&&ys(R,_e),pe}function be(R,E,L,J){if(L==null)throw Error(i(151));for(var pe=null,Me=null,he=E,_e=E=0,Oe=null,Ue=L.next();he!==null&&!Ue.done;_e++,Ue=L.next()){he.index>_e?(Oe=he,he=null):Oe=he.sibling;var ra=q(R,he,Ue.value,J);if(ra===null){he===null&&(he=Oe);break}e&&he&&ra.alternate===null&&t(R,he),E=h(ra,E,_e),Me===null?pe=ra:Me.sibling=ra,Me=ra,he=Oe}if(Ue.done)return s(R,he),Re&&ys(R,_e),pe;if(he===null){for(;!Ue.done;_e++,Ue=L.next())Ue=X(R,Ue.value,J),Ue!==null&&(E=h(Ue,E,_e),Me===null?pe=Ue:Me.sibling=Ue,Me=Ue);return Re&&ys(R,_e),pe}for(he=n(he);!Ue.done;_e++,Ue=L.next())Ue=V(he,R,_e,Ue.value,J),Ue!==null&&(e&&Ue.alternate!==null&&he.delete(Ue.key===null?_e:Ue.key),E=h(Ue,E,_e),Me===null?pe=Ue:Me.sibling=Ue,Me=Ue);return e&&he.forEach(function(Jx){return t(R,Jx)}),Re&&ys(R,_e),pe}function Ve(R,E,L,J){if(typeof L=="object"&&L!==null&&L.type===U&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case k:e:{for(var pe=L.key;E!==null;){if(E.key===pe){if(pe=L.type,pe===U){if(E.tag===7){s(R,E.sibling),J=c(E,L.props.children),J.return=R,R=J;break e}}else if(E.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===ee&&Na(pe)===E.type){s(R,E.sibling),J=c(E,L.props),ll(J,L),J.return=R,R=J;break e}s(R,E);break}else t(R,E);E=E.sibling}L.type===U?(J=va(L.props.children,R.mode,J,L.key),J.return=R,R=J):(J=ur(L.type,L.key,L.props,null,R.mode,J),ll(J,L),J.return=R,R=J)}return g(R);case O:e:{for(pe=L.key;E!==null;){if(E.key===pe)if(E.tag===4&&E.stateNode.containerInfo===L.containerInfo&&E.stateNode.implementation===L.implementation){s(R,E.sibling),J=c(E,L.children||[]),J.return=R,R=J;break e}else{s(R,E);break}else t(R,E);E=E.sibling}J=ro(L,R.mode,J),J.return=R,R=J}return g(R);case ee:return L=Na(L),Ve(R,E,L,J)}if(F(L))return ue(R,E,L,J);if(te(L)){if(pe=te(L),typeof pe!="function")throw Error(i(150));return L=pe.call(L),be(R,E,L,J)}if(typeof L.then=="function")return Ve(R,E,xr(L),J);if(L.$$typeof===C)return Ve(R,E,fr(R,L),J);br(R,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,E!==null&&E.tag===6?(s(R,E.sibling),J=c(E,L),J.return=R,R=J):(s(R,E),J=lo(L,R.mode,J),J.return=R,R=J),g(R)):s(R,E)}return function(R,E,L,J){try{nl=0;var pe=Ve(R,E,L,J);return dn=null,pe}catch(he){if(he===un||he===gr)throw he;var Me=Lt(29,he,null,R.mode);return Me.lanes=J,Me.return=R,Me}finally{}}}var Ea=Kd(!0),Qd=Kd(!1),Vs=!1;function yo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Gs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ys(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(ze&2)!==0){var c=n.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),n.pending=t,t=cr(e),Od(e,null,s),t}return or(e,n,t,s),cr(e)}function rl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,qu(e,s)}}function wo(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var g={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?c=h=g:h=h.next=g,s=s.next}while(s!==null);h===null?c=h=t:h=h.next=t}else c=h=t;s={baseState:n.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:n.shared,callbacks:n.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var jo=!1;function il(){if(jo){var e=cn;if(e!==null)throw e}}function ol(e,t,s,n){jo=!1;var c=e.updateQueue;Vs=!1;var h=c.firstBaseUpdate,g=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var N=b,B=N.next;N.next=null,g===null?h=B:g.next=B,g=N;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,b=Q.lastBaseUpdate,b!==g&&(b===null?Q.firstBaseUpdate=B:b.next=B,Q.lastBaseUpdate=N))}if(h!==null){var X=c.baseState;g=0,Q=B=N=null,b=h;do{var q=b.lane&-536870913,V=q!==b.lane;if(V?(Ce&q)===q:(n&q)===q){q!==0&&q===on&&(jo=!0),Q!==null&&(Q=Q.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ue=e,be=b;q=t;var Ve=s;switch(be.tag){case 1:if(ue=be.payload,typeof ue=="function"){X=ue.call(Ve,X,q);break e}X=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=be.payload,q=typeof ue=="function"?ue.call(Ve,X,q):ue,q==null)break e;X=v({},X,q);break e;case 2:Vs=!0}}q=b.callback,q!==null&&(e.flags|=64,V&&(e.flags|=8192),V=c.callbacks,V===null?c.callbacks=[q]:V.push(q))}else V={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Q===null?(B=Q=V,N=X):Q=Q.next=V,g|=q;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;V=b,b=V.next,V.next=null,c.lastBaseUpdate=V,c.shared.pending=null}}while(!0);Q===null&&(N=X),c.baseState=N,c.firstBaseUpdate=B,c.lastBaseUpdate=Q,h===null&&(c.shared.lanes=0),Xs|=g,e.lanes=g,e.memoizedState=X}}function Jd(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Xd(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Jd(s[e],t)}var hn=_(null),yr=_(0);function Zd(e,t){e=Cs,Z(yr,e),Z(hn,t),Cs=e|t.baseLanes}function So(){Z(yr,Cs),Z(hn,hn.current)}function _o(){Cs=yr.current,A(hn),A(yr)}var Bt=_(null),Wt=null;function Ps(e){var t=e.alternate;Z(st,st.current&1),Z(Bt,e),Wt===null&&(t===null||hn.current!==null||t.memoizedState!==null)&&(Wt=e)}function No(e){Z(st,st.current),Z(Bt,e),Wt===null&&(Wt=e)}function Fd(e){e.tag===22?(Z(st,st.current),Z(Bt,e),Wt===null&&(Wt=e)):Ks()}function Ks(){Z(st,st.current),Z(Bt,Bt.current)}function qt(e){A(Bt),Wt===e&&(Wt=null),A(st)}var st=_(0);function vr(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Oc(s)||Rc(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var js=0,Se=null,$e=null,lt=null,wr=!1,fn=!1,Ta=!1,jr=0,cl=0,mn=null,qp=0;function et(){throw Error(i(321))}function ko(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!zt(e[s],t[s]))return!1;return!0}function Eo(e,t,s,n,c,h){return js=h,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,w.H=e===null||e.memoizedState===null?Uh:Io,Ta=!1,h=s(n,c),Ta=!1,fn&&(h=eh(t,s,n,c)),Wd(e),h}function Wd(e){w.H=hl;var t=$e!==null&&$e.next!==null;if(js=0,lt=$e=Se=null,wr=!1,cl=0,mn=null,t)throw Error(i(300));e===null||rt||(e=e.dependencies,e!==null&&hr(e)&&(rt=!0))}function eh(e,t,s,n){Se=e;var c=0;do{if(fn&&(mn=null),cl=0,fn=!1,25<=c)throw Error(i(301));if(c+=1,lt=$e=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}w.H=zh,h=t(s,n)}while(fn);return h}function Hp(){var e=w.H,t=e.useState()[0];return t=typeof t.then=="function"?ul(t):t,e=e.useState()[0],($e!==null?$e.memoizedState:null)!==e&&(Se.flags|=1024),t}function To(){var e=jr!==0;return jr=0,e}function Ao(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Co(e){if(wr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wr=!1}js=0,lt=$e=Se=null,fn=!1,cl=jr=0,mn=null}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Se.memoizedState=lt=e:lt=lt.next=e,lt}function at(){if($e===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=lt===null?Se.memoizedState:lt.next;if(t!==null)lt=t,$e=e;else{if(e===null)throw Se.alternate===null?Error(i(467)):Error(i(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},lt===null?Se.memoizedState=lt=e:lt=lt.next=e}return lt}function Sr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(e){var t=cl;return cl+=1,mn===null&&(mn=[]),e=Gd(mn,e,t),t=Se,(lt===null?t.memoizedState:lt.next)===null&&(t=t.alternate,w.H=t===null||t.memoizedState===null?Uh:Io),e}function _r(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ul(e);if(e.$$typeof===C)return xt(e)}throw Error(i(438,String(e)))}function Oo(e){var t=null,s=Se.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var n=Se.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Sr(),Se.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),n=0;n<e;n++)s[n]=Y;return t.index++,s}function Ss(e,t){return typeof t=="function"?t(e):t}function Nr(e){var t=at();return Ro(t,$e,e)}function Ro(e,t,s){var n=e.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=s;var c=e.baseQueue,h=n.pending;if(h!==null){if(c!==null){var g=c.next;c.next=h.next,h.next=g}t.baseQueue=c=h,n.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{t=c.next;var b=g=null,N=null,B=t,Q=!1;do{var X=B.lane&-536870913;if(X!==B.lane?(Ce&X)===X:(js&X)===X){var q=B.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),X===on&&(Q=!0);else if((js&q)===q){B=B.next,q===on&&(Q=!0);continue}else X={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=X,g=h):N=N.next=X,Se.lanes|=q,Xs|=q;X=B.action,Ta&&s(h,X),h=B.hasEagerState?B.eagerState:s(h,X)}else q={lane:X,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=q,g=h):N=N.next=q,Se.lanes|=X,Xs|=X;B=B.next}while(B!==null&&B!==t);if(N===null?g=h:N.next=b,!zt(h,e.memoizedState)&&(rt=!0,Q&&(s=cn,s!==null)))throw s;e.memoizedState=h,e.baseState=g,e.baseQueue=N,n.lastRenderedState=h}return c===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Do(e){var t=at(),s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var n=s.dispatch,c=s.pending,h=t.memoizedState;if(c!==null){s.pending=null;var g=c=c.next;do h=e(h,g.action),g=g.next;while(g!==c);zt(h,t.memoizedState)||(rt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,n]}function th(e,t,s){var n=Se,c=at(),h=Re;if(h){if(s===void 0)throw Error(i(407));s=s()}else s=t();var g=!zt(($e||c).memoizedState,s);if(g&&(c.memoizedState=s,rt=!0),c=c.queue,zo(nh.bind(null,n,c,e),[e]),c.getSnapshot!==t||g||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,gn(9,{destroy:void 0},ah.bind(null,n,c,s,t),null),Ye===null)throw Error(i(349));h||(js&127)!==0||sh(n,t,s)}return s}function sh(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Se.updateQueue,t===null?(t=Sr(),Se.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function ah(e,t,s,n){t.value=s,t.getSnapshot=n,lh(t)&&rh(e)}function nh(e,t,s){return s(function(){lh(t)&&rh(e)})}function lh(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!zt(e,s)}catch{return!0}}function rh(e){var t=ya(e,2);t!==null&&Mt(t,e,2)}function Mo(e){var t=Nt();if(typeof e=="function"){var s=e;if(e=s(),Ta){Et(!0);try{s()}finally{Et(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:e},t}function ih(e,t,s,n){return e.baseState=s,Ro(e,$e,typeof n=="function"?n:Ss)}function $p(e,t,s,n,c){if(Tr(e))throw Error(i(485));if(e=t.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){h.listeners.push(g)}};w.T!==null?s(!0):h.isTransition=!1,n(h),s=t.pending,s===null?(h.next=t.pending=h,oh(t,h)):(h.next=s.next,t.pending=s.next=h)}}function oh(e,t){var s=t.action,n=t.payload,c=e.state;if(t.isTransition){var h=w.T,g={};w.T=g;try{var b=s(c,n),N=w.S;N!==null&&N(g,b),ch(e,t,b)}catch(B){Uo(e,t,B)}finally{h!==null&&g.types!==null&&(h.types=g.types),w.T=h}}else try{h=s(c,n),ch(e,t,h)}catch(B){Uo(e,t,B)}}function ch(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(n){uh(e,t,n)},function(n){return Uo(e,t,n)}):uh(e,t,s)}function uh(e,t,s){t.status="fulfilled",t.value=s,dh(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,oh(e,s)))}function Uo(e,t,s){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=s,dh(t),t=t.next;while(t!==n)}e.action=null}function dh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hh(e,t){return t}function fh(e,t){if(Re){var s=Ye.formState;if(s!==null){e:{var n=Se;if(Re){if(Ke){t:{for(var c=Ke,h=Ft;c.nodeType!==8;){if(!h){c=null;break t}if(c=es(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){Ke=es(c.nextSibling),n=c.data==="F!";break e}}$s(n)}n=!1}n&&(t=s[0])}}return s=Nt(),s.memoizedState=s.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hh,lastRenderedState:t},s.queue=n,s=Rh.bind(null,Se,n),n.dispatch=s,n=Mo(!1),h=$o.bind(null,Se,!1,n.queue),n=Nt(),c={state:t,dispatch:null,action:e,pending:null},n.queue=c,s=$p.bind(null,Se,c,h,s),c.dispatch=s,n.memoizedState=e,[t,s,!1]}function mh(e){var t=at();return gh(t,$e,e)}function gh(e,t,s){if(t=Ro(e,t,hh)[0],e=Nr(Ss)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=ul(t)}catch(g){throw g===un?gr:g}else n=t;t=at();var c=t.queue,h=c.dispatch;return s!==t.memoizedState&&(Se.flags|=2048,gn(9,{destroy:void 0},Ip.bind(null,c,s),null)),[n,h,e]}function Ip(e,t){e.action=t}function ph(e){var t=at(),s=$e;if(s!==null)return gh(t,s,e);at(),t=t.memoizedState,s=at();var n=s.queue.dispatch;return s.memoizedState=e,[t,n,!1]}function gn(e,t,s,n){return e={tag:e,create:s,deps:n,inst:t,next:null},t=Se.updateQueue,t===null&&(t=Sr(),Se.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e),e}function xh(){return at().memoizedState}function kr(e,t,s,n){var c=Nt();Se.flags|=e,c.memoizedState=gn(1|t,{destroy:void 0},s,n===void 0?null:n)}function Er(e,t,s,n){var c=at();n=n===void 0?null:n;var h=c.memoizedState.inst;$e!==null&&n!==null&&ko(n,$e.memoizedState.deps)?c.memoizedState=gn(t,h,s,n):(Se.flags|=e,c.memoizedState=gn(1|t,h,s,n))}function bh(e,t){kr(8390656,8,e,t)}function zo(e,t){Er(2048,8,e,t)}function Vp(e){Se.flags|=4;var t=Se.updateQueue;if(t===null)t=Sr(),Se.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function yh(e){var t=at().memoizedState;return Vp({ref:t,nextImpl:e}),function(){if((ze&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function vh(e,t){return Er(4,2,e,t)}function wh(e,t){return Er(4,4,e,t)}function jh(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sh(e,t,s){s=s!=null?s.concat([e]):null,Er(4,4,jh.bind(null,t,e),s)}function Lo(){}function _h(e,t){var s=at();t=t===void 0?null:t;var n=s.memoizedState;return t!==null&&ko(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Nh(e,t){var s=at();t=t===void 0?null:t;var n=s.memoizedState;if(t!==null&&ko(t,n[1]))return n[0];if(n=e(),Ta){Et(!0);try{e()}finally{Et(!1)}}return s.memoizedState=[n,t],n}function Bo(e,t,s){return s===void 0||(js&1073741824)!==0&&(Ce&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=Ef(),Se.lanes|=e,Xs|=e,s)}function kh(e,t,s,n){return zt(s,t)?s:hn.current!==null?(e=Bo(e,s,n),zt(e,t)||(rt=!0),e):(js&42)===0||(js&1073741824)!==0&&(Ce&261930)===0?(rt=!0,e.memoizedState=s):(e=Ef(),Se.lanes|=e,Xs|=e,t)}function Eh(e,t,s,n,c){var h=P.p;P.p=h!==0&&8>h?h:8;var g=w.T,b={};w.T=b,$o(e,!1,t,s);try{var N=c(),B=w.S;if(B!==null&&B(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=Bp(N,n);dl(e,t,Q,It(e))}else dl(e,t,n,It(e))}catch(X){dl(e,t,{then:function(){},status:"rejected",reason:X},It())}finally{P.p=h,g!==null&&b.types!==null&&(g.types=b.types),w.T=g}}function Gp(){}function qo(e,t,s,n){if(e.tag!==5)throw Error(i(476));var c=Th(e).queue;Eh(e,c,t,ne,s===null?Gp:function(){return Ah(e),s(n)})}function Th(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:ne},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ah(e){var t=Th(e);t.next===null&&(t=e.alternate.memoizedState),dl(e,t.next.queue,{},It())}function Ho(){return xt(Tl)}function Ch(){return at().memoizedState}function Oh(){return at().memoizedState}function Yp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=It();e=Gs(s);var n=Ys(t,e,s);n!==null&&(Mt(n,t,s),rl(n,t,s)),t={cache:go()},e.payload=t;return}t=t.return}}function Pp(e,t,s){var n=It();s={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Tr(e)?Dh(t,s):(s=ao(e,t,s,n),s!==null&&(Mt(s,e,n),Mh(s,t,n)))}function Rh(e,t,s){var n=It();dl(e,t,s,n)}function dl(e,t,s,n){var c={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Tr(e))Dh(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var g=t.lastRenderedState,b=h(g,s);if(c.hasEagerState=!0,c.eagerState=b,zt(b,g))return or(e,t,c,0),Ye===null&&ir(),!1}catch{}finally{}if(s=ao(e,t,c,n),s!==null)return Mt(s,e,n),Mh(s,t,n),!0}return!1}function $o(e,t,s,n){if(n={lane:2,revertLane:yc(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Tr(e)){if(t)throw Error(i(479))}else t=ao(e,s,n,2),t!==null&&Mt(t,e,2)}function Tr(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function Dh(e,t){fn=wr=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Mh(e,t,s){if((s&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,qu(e,s)}}var hl={readContext:xt,use:_r,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};hl.useEffectEvent=et;var Uh={readContext:xt,use:_r,useCallback:function(e,t){return Nt().memoizedState=[e,t===void 0?null:t],e},useContext:xt,useEffect:bh,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,kr(4194308,4,jh.bind(null,t,e),s)},useLayoutEffect:function(e,t){return kr(4194308,4,e,t)},useInsertionEffect:function(e,t){kr(4,2,e,t)},useMemo:function(e,t){var s=Nt();t=t===void 0?null:t;var n=e();if(Ta){Et(!0);try{e()}finally{Et(!1)}}return s.memoizedState=[n,t],n},useReducer:function(e,t,s){var n=Nt();if(s!==void 0){var c=s(t);if(Ta){Et(!0);try{s(t)}finally{Et(!1)}}}else c=t;return n.memoizedState=n.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},n.queue=e,e=e.dispatch=Pp.bind(null,Se,e),[n.memoizedState,e]},useRef:function(e){var t=Nt();return e={current:e},t.memoizedState=e},useState:function(e){e=Mo(e);var t=e.queue,s=Rh.bind(null,Se,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Lo,useDeferredValue:function(e,t){var s=Nt();return Bo(s,e,t)},useTransition:function(){var e=Mo(!1);return e=Eh.bind(null,Se,e.queue,!0,!1),Nt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var n=Se,c=Nt();if(Re){if(s===void 0)throw Error(i(407));s=s()}else{if(s=t(),Ye===null)throw Error(i(349));(Ce&127)!==0||sh(n,t,s)}c.memoizedState=s;var h={value:s,getSnapshot:t};return c.queue=h,bh(nh.bind(null,n,h,e),[e]),n.flags|=2048,gn(9,{destroy:void 0},ah.bind(null,n,h,s,t),null),s},useId:function(){var e=Nt(),t=Ye.identifierPrefix;if(Re){var s=ds,n=us;s=(n&~(1<<32-_t(n)-1)).toString(32)+s,t="_"+t+"R_"+s,s=jr++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=qp++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ho,useFormState:fh,useActionState:fh,useOptimistic:function(e){var t=Nt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=$o.bind(null,Se,!0,s),s.dispatch=t,[e,t]},useMemoCache:Oo,useCacheRefresh:function(){return Nt().memoizedState=Yp.bind(null,Se)},useEffectEvent:function(e){var t=Nt(),s={impl:e};return t.memoizedState=s,function(){if((ze&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},Io={readContext:xt,use:_r,useCallback:_h,useContext:xt,useEffect:zo,useImperativeHandle:Sh,useInsertionEffect:vh,useLayoutEffect:wh,useMemo:Nh,useReducer:Nr,useRef:xh,useState:function(){return Nr(Ss)},useDebugValue:Lo,useDeferredValue:function(e,t){var s=at();return kh(s,$e.memoizedState,e,t)},useTransition:function(){var e=Nr(Ss)[0],t=at().memoizedState;return[typeof e=="boolean"?e:ul(e),t]},useSyncExternalStore:th,useId:Ch,useHostTransitionStatus:Ho,useFormState:mh,useActionState:mh,useOptimistic:function(e,t){var s=at();return ih(s,$e,e,t)},useMemoCache:Oo,useCacheRefresh:Oh};Io.useEffectEvent=yh;var zh={readContext:xt,use:_r,useCallback:_h,useContext:xt,useEffect:zo,useImperativeHandle:Sh,useInsertionEffect:vh,useLayoutEffect:wh,useMemo:Nh,useReducer:Do,useRef:xh,useState:function(){return Do(Ss)},useDebugValue:Lo,useDeferredValue:function(e,t){var s=at();return $e===null?Bo(s,e,t):kh(s,$e.memoizedState,e,t)},useTransition:function(){var e=Do(Ss)[0],t=at().memoizedState;return[typeof e=="boolean"?e:ul(e),t]},useSyncExternalStore:th,useId:Ch,useHostTransitionStatus:Ho,useFormState:ph,useActionState:ph,useOptimistic:function(e,t){var s=at();return $e!==null?ih(s,$e,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Oo,useCacheRefresh:Oh};zh.useEffectEvent=yh;function Vo(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:v({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Go={enqueueSetState:function(e,t,s){e=e._reactInternals;var n=It(),c=Gs(n);c.payload=t,s!=null&&(c.callback=s),t=Ys(e,c,n),t!==null&&(Mt(t,e,n),rl(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=It(),c=Gs(n);c.tag=1,c.payload=t,s!=null&&(c.callback=s),t=Ys(e,c,n),t!==null&&(Mt(t,e,n),rl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=It(),n=Gs(s);n.tag=2,t!=null&&(n.callback=t),t=Ys(e,n,s),t!==null&&(Mt(t,e,s),rl(t,e,s))}};function Lh(e,t,s,n,c,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,h,g):t.prototype&&t.prototype.isPureReactComponent?!Fn(s,n)||!Fn(c,h):!0}function Bh(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function Aa(e,t){var s=t;if("ref"in t){s={};for(var n in t)n!=="ref"&&(s[n]=t[n])}if(e=e.defaultProps){s===t&&(s=v({},s));for(var c in e)s[c]===void 0&&(s[c]=e[c])}return s}function qh(e){rr(e)}function Hh(e){console.error(e)}function $h(e){rr(e)}function Ar(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ih(e,t,s){try{var n=e.onCaughtError;n(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Yo(e,t,s){return s=Gs(s),s.tag=3,s.payload={element:null},s.callback=function(){Ar(e,t)},s}function Vh(e){return e=Gs(e),e.tag=3,e}function Gh(e,t,s,n){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var h=n.value;e.payload=function(){return c(h)},e.callback=function(){Ih(t,s,n)}}var g=s.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Ih(t,s,n),typeof c!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var b=n.stack;this.componentDidCatch(n.value,{componentStack:b!==null?b:""})})}function Kp(e,t,s,n,c){if(s.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=s.alternate,t!==null&&rn(t,s,c,!0),s=Bt.current,s!==null){switch(s.tag){case 31:case 13:return Wt===null?$r():s.alternate===null&&tt===0&&(tt=3),s.flags&=-257,s.flags|=65536,s.lanes=c,n===pr?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([n]):t.add(n),pc(e,n,c)),!1;case 22:return s.flags|=65536,n===pr?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([n]):s.add(n)),pc(e,n,c)),!1}throw Error(i(435,s.tag))}return pc(e,n,c),$r(),!1}if(Re)return t=Bt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,n!==co&&(e=Error(i(422),{cause:n}),tl(Jt(e,s)))):(n!==co&&(t=Error(i(423),{cause:n}),tl(Jt(t,s))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,n=Jt(n,s),c=Yo(e.stateNode,n,c),wo(e,c),tt!==4&&(tt=2)),!1;var h=Error(i(520),{cause:n});if(h=Jt(h,s),vl===null?vl=[h]:vl.push(h),tt!==4&&(tt=2),t===null)return!0;n=Jt(n,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=c&-c,s.lanes|=e,e=Yo(s.stateNode,n,e),wo(s,e),!1;case 1:if(t=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Zs===null||!Zs.has(h))))return s.flags|=65536,c&=-c,s.lanes|=c,c=Vh(c),Gh(c,e,s,n),wo(s,c),!1}s=s.return}while(s!==null);return!1}var Po=Error(i(461)),rt=!1;function bt(e,t,s,n){t.child=e===null?Qd(t,null,s,n):Ea(t,e.child,s,n)}function Yh(e,t,s,n,c){s=s.render;var h=t.ref;if("ref"in n){var g={};for(var b in n)b!=="ref"&&(g[b]=n[b])}else g=n;return Sa(t),n=Eo(e,t,s,g,h,c),b=To(),e!==null&&!rt?(Ao(e,t,c),_s(e,t,c)):(Re&&b&&io(t),t.flags|=1,bt(e,t,n,c),t.child)}function Ph(e,t,s,n,c){if(e===null){var h=s.type;return typeof h=="function"&&!no(h)&&h.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=h,Kh(e,t,h,n,c)):(e=ur(s.type,null,n,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!ec(e,c)){var g=h.memoizedProps;if(s=s.compare,s=s!==null?s:Fn,s(g,n)&&e.ref===t.ref)return _s(e,t,c)}return t.flags|=1,e=bs(h,n),e.ref=t.ref,e.return=t,t.child=e}function Kh(e,t,s,n,c){if(e!==null){var h=e.memoizedProps;if(Fn(h,n)&&e.ref===t.ref)if(rt=!1,t.pendingProps=n=h,ec(e,c))(e.flags&131072)!==0&&(rt=!0);else return t.lanes=e.lanes,_s(e,t,c)}return Ko(e,t,s,n,c)}function Qh(e,t,s,n){var c=n.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,e!==null){for(n=t.child=e.child,c=0;n!==null;)c=c|n.lanes|n.childLanes,n=n.sibling;n=c&~h}else n=0,t.child=null;return Jh(e,t,h,s,n)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&mr(t,h!==null?h.cachePool:null),h!==null?Zd(t,h):So(),Fd(t);else return n=t.lanes=536870912,Jh(e,t,h!==null?h.baseLanes|s:s,s,n)}else h!==null?(mr(t,h.cachePool),Zd(t,h),Ks(),t.memoizedState=null):(e!==null&&mr(t,null),So(),Ks());return bt(e,t,c,s),t.child}function fl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Jh(e,t,s,n,c){var h=xo();return h=h===null?null:{parent:nt._currentValue,pool:h},t.memoizedState={baseLanes:s,cachePool:h},e!==null&&mr(t,null),So(),Fd(t),e!==null&&rn(e,t,n,!0),t.childLanes=c,null}function Cr(e,t){return t=Rr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Xh(e,t,s){return Ea(t,e.child,null,s),e=Cr(t,t.pendingProps),e.flags|=2,qt(t),t.memoizedState=null,e}function Qp(e,t,s){var n=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Re){if(n.mode==="hidden")return e=Cr(t,n),t.lanes=536870912,fl(null,e);if(No(t),(e=Ke)?(e=cm(e,Ft),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:qs!==null?{id:us,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},s=Dd(e),s.return=t,t.child=s,pt=t,Ke=null)):e=null,e===null)throw $s(t);return t.lanes=536870912,null}return Cr(t,n)}var h=e.memoizedState;if(h!==null){var g=h.dehydrated;if(No(t),c)if(t.flags&256)t.flags&=-257,t=Xh(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(rt||rn(e,t,s,!1),c=(s&e.childLanes)!==0,rt||c){if(n=Ye,n!==null&&(g=Hu(n,s),g!==0&&g!==h.retryLane))throw h.retryLane=g,ya(e,g),Mt(n,e,g),Po;$r(),t=Xh(e,t,s)}else e=h.treeContext,Ke=es(g.nextSibling),pt=t,Re=!0,Hs=null,Ft=!1,e!==null&&zd(t,e),t=Cr(t,n),t.flags|=4096;return t}return e=bs(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Or(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Ko(e,t,s,n,c){return Sa(t),s=Eo(e,t,s,n,void 0,c),n=To(),e!==null&&!rt?(Ao(e,t,c),_s(e,t,c)):(Re&&n&&io(t),t.flags|=1,bt(e,t,s,c),t.child)}function Zh(e,t,s,n,c,h){return Sa(t),t.updateQueue=null,s=eh(t,n,s,c),Wd(e),n=To(),e!==null&&!rt?(Ao(e,t,h),_s(e,t,h)):(Re&&n&&io(t),t.flags|=1,bt(e,t,s,h),t.child)}function Fh(e,t,s,n,c){if(Sa(t),t.stateNode===null){var h=sn,g=s.contextType;typeof g=="object"&&g!==null&&(h=xt(g)),h=new s(n,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Go,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=n,h.state=t.memoizedState,h.refs={},yo(t),g=s.contextType,h.context=typeof g=="object"&&g!==null?xt(g):sn,h.state=t.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Vo(t,s,g,n),h.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(g=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),g!==h.state&&Go.enqueueReplaceState(h,h.state,null),ol(t,n,h,c),il(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){h=t.stateNode;var b=t.memoizedProps,N=Aa(s,b);h.props=N;var B=h.context,Q=s.contextType;g=sn,typeof Q=="object"&&Q!==null&&(g=xt(Q));var X=s.getDerivedStateFromProps;Q=typeof X=="function"||typeof h.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,Q||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b||B!==g)&&Bh(t,h,n,g),Vs=!1;var q=t.memoizedState;h.state=q,ol(t,n,h,c),il(),B=t.memoizedState,b||q!==B||Vs?(typeof X=="function"&&(Vo(t,s,X,n),B=t.memoizedState),(N=Vs||Lh(t,s,N,n,q,B,g))?(Q||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=B),h.props=n,h.state=B,h.context=g,n=N):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{h=t.stateNode,vo(e,t),g=t.memoizedProps,Q=Aa(s,g),h.props=Q,X=t.pendingProps,q=h.context,B=s.contextType,N=sn,typeof B=="object"&&B!==null&&(N=xt(B)),b=s.getDerivedStateFromProps,(B=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==X||q!==N)&&Bh(t,h,n,N),Vs=!1,q=t.memoizedState,h.state=q,ol(t,n,h,c),il();var V=t.memoizedState;g!==X||q!==V||Vs||e!==null&&e.dependencies!==null&&hr(e.dependencies)?(typeof b=="function"&&(Vo(t,s,b,n),V=t.memoizedState),(Q=Vs||Lh(t,s,Q,n,q,V,N)||e!==null&&e.dependencies!==null&&hr(e.dependencies))?(B||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(n,V,N),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(n,V,N)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=V),h.props=n,h.state=V,h.context=N,n=Q):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),n=!1)}return h=n,Or(e,t),n=(t.flags&128)!==0,h||n?(h=t.stateNode,s=n&&typeof s.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&n?(t.child=Ea(t,e.child,null,c),t.child=Ea(t,null,s,c)):bt(e,t,s,c),t.memoizedState=h.state,e=t.child):e=_s(e,t,c),e}function Wh(e,t,s,n){return wa(),t.flags|=256,bt(e,t,s,n),t.child}var Qo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jo(e){return{baseLanes:e,cachePool:Id()}}function Xo(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=$t),e}function ef(e,t,s){var n=t.pendingProps,c=!1,h=(t.flags&128)!==0,g;if((g=h)||(g=e!==null&&e.memoizedState===null?!1:(st.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Re){if(c?Ps(t):Ks(),(e=Ke)?(e=cm(e,Ft),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:qs!==null?{id:us,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},s=Dd(e),s.return=t,t.child=s,pt=t,Ke=null)):e=null,e===null)throw $s(t);return Rc(e)?t.lanes=32:t.lanes=536870912,null}var b=n.children;return n=n.fallback,c?(Ks(),c=t.mode,b=Rr({mode:"hidden",children:b},c),n=va(n,c,s,null),b.return=t,n.return=t,b.sibling=n,t.child=b,n=t.child,n.memoizedState=Jo(s),n.childLanes=Xo(e,g,s),t.memoizedState=Qo,fl(null,n)):(Ps(t),Zo(t,b))}var N=e.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(h)t.flags&256?(Ps(t),t.flags&=-257,t=Fo(e,t,s)):t.memoizedState!==null?(Ks(),t.child=e.child,t.flags|=128,t=null):(Ks(),b=n.fallback,c=t.mode,n=Rr({mode:"visible",children:n.children},c),b=va(b,c,s,null),b.flags|=2,n.return=t,b.return=t,n.sibling=b,t.child=n,Ea(t,e.child,null,s),n=t.child,n.memoizedState=Jo(s),n.childLanes=Xo(e,g,s),t.memoizedState=Qo,t=fl(null,n));else if(Ps(t),Rc(b)){if(g=b.nextSibling&&b.nextSibling.dataset,g)var B=g.dgst;g=B,n=Error(i(419)),n.stack="",n.digest=g,tl({value:n,source:null,stack:null}),t=Fo(e,t,s)}else if(rt||rn(e,t,s,!1),g=(s&e.childLanes)!==0,rt||g){if(g=Ye,g!==null&&(n=Hu(g,s),n!==0&&n!==N.retryLane))throw N.retryLane=n,ya(e,n),Mt(g,e,n),Po;Oc(b)||$r(),t=Fo(e,t,s)}else Oc(b)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Ke=es(b.nextSibling),pt=t,Re=!0,Hs=null,Ft=!1,e!==null&&zd(t,e),t=Zo(t,n.children),t.flags|=4096);return t}return c?(Ks(),b=n.fallback,c=t.mode,N=e.child,B=N.sibling,n=bs(N,{mode:"hidden",children:n.children}),n.subtreeFlags=N.subtreeFlags&65011712,B!==null?b=bs(B,b):(b=va(b,c,s,null),b.flags|=2),b.return=t,n.return=t,n.sibling=b,t.child=n,fl(null,n),n=t.child,b=e.child.memoizedState,b===null?b=Jo(s):(c=b.cachePool,c!==null?(N=nt._currentValue,c=c.parent!==N?{parent:N,pool:N}:c):c=Id(),b={baseLanes:b.baseLanes|s,cachePool:c}),n.memoizedState=b,n.childLanes=Xo(e,g,s),t.memoizedState=Qo,fl(e.child,n)):(Ps(t),s=e.child,e=s.sibling,s=bs(s,{mode:"visible",children:n.children}),s.return=t,s.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=s,t.memoizedState=null,s)}function Zo(e,t){return t=Rr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Rr(e,t){return e=Lt(22,e,null,t),e.lanes=0,e}function Fo(e,t,s){return Ea(t,e.child,null,s),e=Zo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tf(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),fo(e.return,t,s)}function Wo(e,t,s,n,c,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:c,treeForkCount:h}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=n,g.tail=s,g.tailMode=c,g.treeForkCount=h)}function sf(e,t,s){var n=t.pendingProps,c=n.revealOrder,h=n.tail;n=n.children;var g=st.current,b=(g&2)!==0;if(b?(g=g&1|2,t.flags|=128):g&=1,Z(st,g),bt(e,t,n,s),n=Re?el:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tf(e,s,t);else if(e.tag===19)tf(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&vr(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),Wo(t,!1,c,s,h,n);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&vr(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}Wo(t,!0,s,null,h,n);break;case"together":Wo(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function _s(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Xs|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(rn(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,s=bs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=bs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function ec(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&hr(e)))}function Jp(e,t,s){switch(t.tag){case 3:Ze(t,t.stateNode.containerInfo),Is(t,nt,e.memoizedState.cache),wa();break;case 27:case 5:ct(t);break;case 4:Ze(t,t.stateNode.containerInfo);break;case 10:Is(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,No(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ps(t),t.flags|=128,null):(s&t.child.childLanes)!==0?ef(e,t,s):(Ps(t),e=_s(e,t,s),e!==null?e.sibling:null);Ps(t);break;case 19:var c=(e.flags&128)!==0;if(n=(s&t.childLanes)!==0,n||(rn(e,t,s,!1),n=(s&t.childLanes)!==0),c){if(n)return sf(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Z(st,st.current),n)break;return null;case 22:return t.lanes=0,Qh(e,t,s,t.pendingProps);case 24:Is(t,nt,e.memoizedState.cache)}return _s(e,t,s)}function af(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)rt=!0;else{if(!ec(e,s)&&(t.flags&128)===0)return rt=!1,Jp(e,t,s);rt=(e.flags&131072)!==0}else rt=!1,Re&&(t.flags&1048576)!==0&&Ud(t,el,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=Na(t.elementType),t.type=e,typeof e=="function")no(e)?(n=Aa(e,n),t.tag=1,t=Fh(null,t,e,n,s)):(t.tag=0,t=Ko(null,t,e,n,s));else{if(e!=null){var c=e.$$typeof;if(c===T){t.tag=11,t=Yh(null,t,e,n,s);break e}else if(c===z){t.tag=14,t=Ph(null,t,e,n,s);break e}}throw t=ie(e)||e,Error(i(306,t,""))}}return t;case 0:return Ko(e,t,t.type,t.pendingProps,s);case 1:return n=t.type,c=Aa(n,t.pendingProps),Fh(e,t,n,c,s);case 3:e:{if(Ze(t,t.stateNode.containerInfo),e===null)throw Error(i(387));n=t.pendingProps;var h=t.memoizedState;c=h.element,vo(e,t),ol(t,n,null,s);var g=t.memoizedState;if(n=g.cache,Is(t,nt,n),n!==h.cache&&mo(t,[nt],s,!0),il(),n=g.element,h.isDehydrated)if(h={element:n,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Wh(e,t,n,s);break e}else if(n!==c){c=Jt(Error(i(424)),t),tl(c),t=Wh(e,t,n,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ke=es(e.firstChild),pt=t,Re=!0,Hs=null,Ft=!0,s=Qd(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(wa(),n===c){t=_s(e,t,s);break e}bt(e,t,n,s)}t=t.child}return t;case 26:return Or(e,t),e===null?(s=gm(t.type,null,t.pendingProps,null))?t.memoizedState=s:Re||(s=t.type,e=t.pendingProps,n=Qr(de.current).createElement(s),n[gt]=t,n[Tt]=e,yt(n,s,e),ft(n),t.stateNode=n):t.memoizedState=gm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ct(t),e===null&&Re&&(n=t.stateNode=hm(t.type,t.pendingProps,de.current),pt=t,Ft=!0,c=Ke,ta(t.type)?(Dc=c,Ke=es(n.firstChild)):Ke=c),bt(e,t,t.pendingProps.children,s),Or(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Re&&((c=n=Ke)&&(n=Nx(n,t.type,t.pendingProps,Ft),n!==null?(t.stateNode=n,pt=t,Ke=es(n.firstChild),Ft=!1,c=!0):c=!1),c||$s(t)),ct(t),c=t.type,h=t.pendingProps,g=e!==null?e.memoizedProps:null,n=h.children,Tc(c,h)?n=null:g!==null&&Tc(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=Eo(e,t,Hp,null,null,s),Tl._currentValue=c),Or(e,t),bt(e,t,n,s),t.child;case 6:return e===null&&Re&&((e=s=Ke)&&(s=kx(s,t.pendingProps,Ft),s!==null?(t.stateNode=s,pt=t,Ke=null,e=!0):e=!1),e||$s(t)),null;case 13:return ef(e,t,s);case 4:return Ze(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ea(t,null,n,s):bt(e,t,n,s),t.child;case 11:return Yh(e,t,t.type,t.pendingProps,s);case 7:return bt(e,t,t.pendingProps,s),t.child;case 8:return bt(e,t,t.pendingProps.children,s),t.child;case 12:return bt(e,t,t.pendingProps.children,s),t.child;case 10:return n=t.pendingProps,Is(t,t.type,n.value),bt(e,t,n.children,s),t.child;case 9:return c=t.type._context,n=t.pendingProps.children,Sa(t),c=xt(c),n=n(c),t.flags|=1,bt(e,t,n,s),t.child;case 14:return Ph(e,t,t.type,t.pendingProps,s);case 15:return Kh(e,t,t.type,t.pendingProps,s);case 19:return sf(e,t,s);case 31:return Qp(e,t,s);case 22:return Qh(e,t,s,t.pendingProps);case 24:return Sa(t),n=xt(nt),e===null?(c=xo(),c===null&&(c=Ye,h=go(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=s),c=h),t.memoizedState={parent:n,cache:c},yo(t),Is(t,nt,c)):((e.lanes&s)!==0&&(vo(e,t),ol(t,null,null,s),il()),c=e.memoizedState,h=t.memoizedState,c.parent!==n?(c={parent:n,cache:n},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Is(t,nt,n)):(n=h.cache,Is(t,nt,n),n!==c.cache&&mo(t,[nt],s,!0))),bt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ns(e){e.flags|=4}function tc(e,t,s,n,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Of())e.flags|=8192;else throw ka=pr,bo}else e.flags&=-16777217}function nf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!vm(t))if(Of())e.flags|=8192;else throw ka=pr,bo}function Dr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Lu():536870912,e.lanes|=t,yn|=t)}function ml(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,n|=c.subtreeFlags&65011712,n|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,n|=c.subtreeFlags,n|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function Xp(e,t,s){var n=t.pendingProps;switch(oo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return s=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ws(nt),Ge(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ln(t)?Ns(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,uo())),Qe(t),null;case 26:var c=t.type,h=t.memoizedState;return e===null?(Ns(t),h!==null?(Qe(t),nf(t,h)):(Qe(t),tc(t,c,null,n,s))):h?h!==e.memoizedState?(Ns(t),Qe(t),nf(t,h)):(Qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&Ns(t),Qe(t),tc(t,c,e,n,s)),null;case 27:if(Ms(t),s=de.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Ns(t);else{if(!n){if(t.stateNode===null)throw Error(i(166));return Qe(t),null}e=ae.current,ln(t)?Ld(t):(e=hm(c,n,s),t.stateNode=e,Ns(t))}return Qe(t),null;case 5:if(Ms(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Ns(t);else{if(!n){if(t.stateNode===null)throw Error(i(166));return Qe(t),null}if(h=ae.current,ln(t))Ld(t);else{var g=Qr(de.current);switch(h){case 1:h=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:h=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":h=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":h=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":h=g.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof n.is=="string"?g.createElement("select",{is:n.is}):g.createElement("select"),n.multiple?h.multiple=!0:n.size&&(h.size=n.size);break;default:h=typeof n.is=="string"?g.createElement(c,{is:n.is}):g.createElement(c)}}h[gt]=t,h[Tt]=n;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)h.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=h;e:switch(yt(h,c,n),c){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ns(t)}}return Qe(t),tc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&Ns(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(i(166));if(e=de.current,ln(t)){if(e=t.stateNode,s=t.memoizedProps,n=null,c=pt,c!==null)switch(c.tag){case 27:case 5:n=c.memoizedProps}e[gt]=t,e=!!(e.nodeValue===s||n!==null&&n.suppressHydrationWarning===!0||tm(e.nodeValue,s)),e||$s(t,!0)}else e=Qr(e).createTextNode(n),e[gt]=t,t.stateNode=e}return Qe(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(n=ln(t),s!==null){if(e===null){if(!n)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[gt]=t}else wa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),e=!1}else s=uo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(qt(t),t):(qt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Qe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ln(t),n!==null&&n.dehydrated!==null){if(e===null){if(!c)throw Error(i(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));c[gt]=t}else wa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),c=!1}else c=uo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(qt(t),t):(qt(t),null)}return qt(t),(t.flags&128)!==0?(t.lanes=s,t):(s=n!==null,e=e!==null&&e.memoizedState!==null,s&&(n=t.child,c=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(c=n.alternate.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==c&&(n.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Dr(t,t.updateQueue),Qe(t),null);case 4:return Ge(),e===null&&Sc(t.stateNode.containerInfo),Qe(t),null;case 10:return ws(t.type),Qe(t),null;case 19:if(A(st),n=t.memoizedState,n===null)return Qe(t),null;if(c=(t.flags&128)!==0,h=n.rendering,h===null)if(c)ml(n,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=vr(e),h!==null){for(t.flags|=128,ml(n,!1),e=h.updateQueue,t.updateQueue=e,Dr(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Rd(s,e),s=s.sibling;return Z(st,st.current&1|2),Re&&ys(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&ht()>Br&&(t.flags|=128,c=!0,ml(n,!1),t.lanes=4194304)}else{if(!c)if(e=vr(h),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Dr(t,e),ml(n,!0),n.tail===null&&n.tailMode==="hidden"&&!h.alternate&&!Re)return Qe(t),null}else 2*ht()-n.renderingStartTime>Br&&s!==536870912&&(t.flags|=128,c=!0,ml(n,!1),t.lanes=4194304);n.isBackwards?(h.sibling=t.child,t.child=h):(e=n.last,e!==null?e.sibling=h:t.child=h,n.last=h)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=ht(),e.sibling=null,s=st.current,Z(st,c?s&1|2:s&1),Re&&ys(t,n.treeForkCount),e):(Qe(t),null);case 22:case 23:return qt(t),_o(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(s&536870912)!==0&&(t.flags&128)===0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),s=t.updateQueue,s!==null&&Dr(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==s&&(t.flags|=2048),e!==null&&A(_a),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ws(nt),Qe(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Zp(e,t){switch(oo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ws(nt),Ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ms(t),null;case 31:if(t.memoizedState!==null){if(qt(t),t.alternate===null)throw Error(i(340));wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(st),null;case 4:return Ge(),null;case 10:return ws(t.type),null;case 22:case 23:return qt(t),_o(),e!==null&&A(_a),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ws(nt),null;case 25:return null;default:return null}}function lf(e,t){switch(oo(t),t.tag){case 3:ws(nt),Ge();break;case 26:case 27:case 5:Ms(t);break;case 4:Ge();break;case 31:t.memoizedState!==null&&qt(t);break;case 13:qt(t);break;case 19:A(st);break;case 10:ws(t.type);break;case 22:case 23:qt(t),_o(),e!==null&&A(_a);break;case 24:ws(nt)}}function gl(e,t){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var c=n.next;s=c;do{if((s.tag&e)===e){n=void 0;var h=s.create,g=s.inst;n=h(),g.destroy=n}s=s.next}while(s!==c)}}catch(b){He(t,t.return,b)}}function Qs(e,t,s){try{var n=t.updateQueue,c=n!==null?n.lastEffect:null;if(c!==null){var h=c.next;n=h;do{if((n.tag&e)===e){var g=n.inst,b=g.destroy;if(b!==void 0){g.destroy=void 0,c=t;var N=s,B=b;try{B()}catch(Q){He(c,N,Q)}}}n=n.next}while(n!==h)}}catch(Q){He(t,t.return,Q)}}function rf(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Xd(t,s)}catch(n){He(e,e.return,n)}}}function of(e,t,s){s.props=Aa(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(n){He(e,t,n)}}function pl(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof s=="function"?e.refCleanup=s(n):s.current=n}}catch(c){He(e,t,c)}}function hs(e,t){var s=e.ref,n=e.refCleanup;if(s!==null)if(typeof n=="function")try{n()}catch(c){He(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){He(e,t,c)}else s.current=null}function cf(e){var t=e.type,s=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break e;case"img":s.src?n.src=s.src:s.srcSet&&(n.srcset=s.srcSet)}}catch(c){He(e,e.return,c)}}function sc(e,t,s){try{var n=e.stateNode;yx(n,e.type,s,t),n[Tt]=t}catch(c){He(e,e.return,c)}}function uf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ta(e.type)||e.tag===4}function ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ta(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nc(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ps));else if(n!==4&&(n===27&&ta(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(nc(e,t,s),e=e.sibling;e!==null;)nc(e,t,s),e=e.sibling}function Mr(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(n===27&&ta(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Mr(e,t,s),e=e.sibling;e!==null;)Mr(e,t,s),e=e.sibling}function df(e){var t=e.stateNode,s=e.memoizedProps;try{for(var n=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);yt(t,n,s),t[gt]=e,t[Tt]=s}catch(h){He(e,e.return,h)}}var ks=!1,it=!1,lc=!1,hf=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Fp(e,t){if(e=e.containerInfo,kc=ti,e=Sd(e),Zi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var c=n.anchorOffset,h=n.focusNode;n=n.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var g=0,b=-1,N=-1,B=0,Q=0,X=e,q=null;t:for(;;){for(var V;X!==s||c!==0&&X.nodeType!==3||(b=g+c),X!==h||n!==0&&X.nodeType!==3||(N=g+n),X.nodeType===3&&(g+=X.nodeValue.length),(V=X.firstChild)!==null;)q=X,X=V;for(;;){if(X===e)break t;if(q===s&&++B===c&&(b=g),q===h&&++Q===n&&(N=g),(V=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=V}s=b===-1||N===-1?null:{start:b,end:N}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ec={focusedElem:e,selectionRange:s},ti=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){switch(t=mt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)c=e[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,s=t,c=h.memoizedProps,h=h.memoizedState,n=s.stateNode;try{var ue=Aa(s.type,c);e=n.getSnapshotBeforeUpdate(ue,h),n.__reactInternalSnapshotBeforeUpdate=e}catch(be){He(s,s.return,be)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Cc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Cc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}}function ff(e,t,s){var n=s.flags;switch(s.tag){case 0:case 11:case 15:Ts(e,s),n&4&&gl(5,s);break;case 1:if(Ts(e,s),n&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(g){He(s,s.return,g)}else{var c=Aa(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){He(s,s.return,g)}}n&64&&rf(s),n&512&&pl(s,s.return);break;case 3:if(Ts(e,s),n&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Xd(e,t)}catch(g){He(s,s.return,g)}}break;case 27:t===null&&n&4&&df(s);case 26:case 5:Ts(e,s),t===null&&n&4&&cf(s),n&512&&pl(s,s.return);break;case 12:Ts(e,s);break;case 31:Ts(e,s),n&4&&pf(e,s);break;case 13:Ts(e,s),n&4&&xf(e,s),n&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=ix.bind(null,s),Ex(e,s))));break;case 22:if(n=s.memoizedState!==null||ks,!n){t=t!==null&&t.memoizedState!==null||it,c=ks;var h=it;ks=n,(it=t)&&!h?As(e,s,(s.subtreeFlags&8772)!==0):Ts(e,s),ks=c,it=h}break;case 30:break;default:Ts(e,s)}}function mf(e){var t=e.alternate;t!==null&&(e.alternate=null,mf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Mi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xe=null,Ct=!1;function Es(e,t,s){for(s=s.child;s!==null;)gf(e,t,s),s=s.sibling}function gf(e,t,s){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Ut,s)}catch{}switch(s.tag){case 26:it||hs(s,t),Es(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:it||hs(s,t);var n=Xe,c=Ct;ta(s.type)&&(Xe=s.stateNode,Ct=!1),Es(e,t,s),Nl(s.stateNode),Xe=n,Ct=c;break;case 5:it||hs(s,t);case 6:if(n=Xe,c=Ct,Xe=null,Es(e,t,s),Xe=n,Ct=c,Xe!==null)if(Ct)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(s.stateNode)}catch(h){He(s,t,h)}else try{Xe.removeChild(s.stateNode)}catch(h){He(s,t,h)}break;case 18:Xe!==null&&(Ct?(e=Xe,im(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),En(e)):im(Xe,s.stateNode));break;case 4:n=Xe,c=Ct,Xe=s.stateNode.containerInfo,Ct=!0,Es(e,t,s),Xe=n,Ct=c;break;case 0:case 11:case 14:case 15:Qs(2,s,t),it||Qs(4,s,t),Es(e,t,s);break;case 1:it||(hs(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"&&of(s,t,n)),Es(e,t,s);break;case 21:Es(e,t,s);break;case 22:it=(n=it)||s.memoizedState!==null,Es(e,t,s),it=n;break;default:Es(e,t,s)}}function pf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{En(e)}catch(s){He(t,t.return,s)}}}function xf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{En(e)}catch(s){He(t,t.return,s)}}function Wp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new hf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new hf),t;default:throw Error(i(435,e.tag))}}function Ur(e,t){var s=Wp(e);t.forEach(function(n){if(!s.has(n)){s.add(n);var c=ox.bind(null,e,n);n.then(c,c)}})}function Ot(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var c=s[n],h=e,g=t,b=g;e:for(;b!==null;){switch(b.tag){case 27:if(ta(b.type)){Xe=b.stateNode,Ct=!1;break e}break;case 5:Xe=b.stateNode,Ct=!1;break e;case 3:case 4:Xe=b.stateNode.containerInfo,Ct=!0;break e}b=b.return}if(Xe===null)throw Error(i(160));gf(h,g,c),Xe=null,Ct=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)bf(t,e),t=t.sibling}var ns=null;function bf(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ot(t,e),Rt(e),n&4&&(Qs(3,e,e.return),gl(3,e),Qs(5,e,e.return));break;case 1:Ot(t,e),Rt(e),n&512&&(it||s===null||hs(s,s.return)),n&64&&ks&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?n:s.concat(n))));break;case 26:var c=ns;if(Ot(t,e),Rt(e),n&512&&(it||s===null||hs(s,s.return)),n&4){var h=s!==null?s.memoizedState:null;if(n=e.memoizedState,s===null)if(n===null)if(e.stateNode===null){e:{n=e.type,s=e.memoizedProps,c=c.ownerDocument||c;t:switch(n){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Vn]||h[gt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(n),c.head.insertBefore(h,c.querySelector("head > title"))),yt(h,n,s),h[gt]=e,ft(h),n=h;break e;case"link":var g=bm("link","href",c).get(n+(s.href||""));if(g){for(var b=0;b<g.length;b++)if(h=g[b],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){g.splice(b,1);break t}}h=c.createElement(n),yt(h,n,s),c.head.appendChild(h);break;case"meta":if(g=bm("meta","content",c).get(n+(s.content||""))){for(b=0;b<g.length;b++)if(h=g[b],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){g.splice(b,1);break t}}h=c.createElement(n),yt(h,n,s),c.head.appendChild(h);break;default:throw Error(i(468,n))}h[gt]=e,ft(h),n=h}e.stateNode=n}else ym(c,e.type,e.stateNode);else e.stateNode=xm(c,n,e.memoizedProps);else h!==n?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,n===null?ym(c,e.type,e.stateNode):xm(c,n,e.memoizedProps)):n===null&&e.stateNode!==null&&sc(e,e.memoizedProps,s.memoizedProps)}break;case 27:Ot(t,e),Rt(e),n&512&&(it||s===null||hs(s,s.return)),s!==null&&n&4&&sc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Ot(t,e),Rt(e),n&512&&(it||s===null||hs(s,s.return)),e.flags&32){c=e.stateNode;try{Ja(c,"")}catch(ue){He(e,e.return,ue)}}n&4&&e.stateNode!=null&&(c=e.memoizedProps,sc(e,c,s!==null?s.memoizedProps:c)),n&1024&&(lc=!0);break;case 6:if(Ot(t,e),Rt(e),n&4){if(e.stateNode===null)throw Error(i(162));n=e.memoizedProps,s=e.stateNode;try{s.nodeValue=n}catch(ue){He(e,e.return,ue)}}break;case 3:if(Zr=null,c=ns,ns=Jr(t.containerInfo),Ot(t,e),ns=c,Rt(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{En(t.containerInfo)}catch(ue){He(e,e.return,ue)}lc&&(lc=!1,yf(e));break;case 4:n=ns,ns=Jr(e.stateNode.containerInfo),Ot(t,e),Rt(e),ns=n;break;case 12:Ot(t,e),Rt(e);break;case 31:Ot(t,e),Rt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ur(e,n)));break;case 13:Ot(t,e),Rt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Lr=ht()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ur(e,n)));break;case 22:c=e.memoizedState!==null;var N=s!==null&&s.memoizedState!==null,B=ks,Q=it;if(ks=B||c,it=Q||N,Ot(t,e),it=Q,ks=B,Rt(e),n&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(s===null||N||ks||it||Ca(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){N=s=t;try{if(h=N.stateNode,c)g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{b=N.stateNode;var X=N.memoizedProps.style,q=X!=null&&X.hasOwnProperty("display")?X.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ue){He(N,N.return,ue)}}}else if(t.tag===6){if(s===null){N=t;try{N.stateNode.nodeValue=c?"":N.memoizedProps}catch(ue){He(N,N.return,ue)}}}else if(t.tag===18){if(s===null){N=t;try{var V=N.stateNode;c?om(V,!0):om(N.stateNode,!1)}catch(ue){He(N,N.return,ue)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(s=n.retryQueue,s!==null&&(n.retryQueue=null,Ur(e,s))));break;case 19:Ot(t,e),Rt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ur(e,n)));break;case 30:break;case 21:break;default:Ot(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{for(var s,n=e.return;n!==null;){if(uf(n)){s=n;break}n=n.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var c=s.stateNode,h=ac(e);Mr(e,h,c);break;case 5:var g=s.stateNode;s.flags&32&&(Ja(g,""),s.flags&=-33);var b=ac(e);Mr(e,b,g);break;case 3:case 4:var N=s.stateNode.containerInfo,B=ac(e);nc(e,B,N);break;default:throw Error(i(161))}}catch(Q){He(e,e.return,Q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;yf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ts(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ff(e,t.alternate,t),t=t.sibling}function Ca(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Qs(4,t,t.return),Ca(t);break;case 1:hs(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&of(t,t.return,s),Ca(t);break;case 27:Nl(t.stateNode);case 26:case 5:hs(t,t.return),Ca(t);break;case 22:t.memoizedState===null&&Ca(t);break;case 30:Ca(t);break;default:Ca(t)}e=e.sibling}}function As(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,c=e,h=t,g=h.flags;switch(h.tag){case 0:case 11:case 15:As(c,h,s),gl(4,h);break;case 1:if(As(c,h,s),n=h,c=n.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(B){He(n,n.return,B)}if(n=h,c=n.updateQueue,c!==null){var b=n.stateNode;try{var N=c.shared.hiddenCallbacks;if(N!==null)for(c.shared.hiddenCallbacks=null,c=0;c<N.length;c++)Jd(N[c],b)}catch(B){He(n,n.return,B)}}s&&g&64&&rf(h),pl(h,h.return);break;case 27:df(h);case 26:case 5:As(c,h,s),s&&n===null&&g&4&&cf(h),pl(h,h.return);break;case 12:As(c,h,s);break;case 31:As(c,h,s),s&&g&4&&pf(c,h);break;case 13:As(c,h,s),s&&g&4&&xf(c,h);break;case 22:h.memoizedState===null&&As(c,h,s),pl(h,h.return);break;case 30:break;default:As(c,h,s)}t=t.sibling}}function rc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&sl(s))}function ic(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sl(e))}function ls(e,t,s,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vf(e,t,s,n),t=t.sibling}function vf(e,t,s,n){var c=t.flags;switch(t.tag){case 0:case 11:case 15:ls(e,t,s,n),c&2048&&gl(9,t);break;case 1:ls(e,t,s,n);break;case 3:ls(e,t,s,n),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sl(e)));break;case 12:if(c&2048){ls(e,t,s,n),e=t.stateNode;try{var h=t.memoizedProps,g=h.id,b=h.onPostCommit;typeof b=="function"&&b(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){He(t,t.return,N)}}else ls(e,t,s,n);break;case 31:ls(e,t,s,n);break;case 13:ls(e,t,s,n);break;case 23:break;case 22:h=t.stateNode,g=t.alternate,t.memoizedState!==null?h._visibility&2?ls(e,t,s,n):xl(e,t):h._visibility&2?ls(e,t,s,n):(h._visibility|=2,pn(e,t,s,n,(t.subtreeFlags&10256)!==0||!1)),c&2048&&rc(g,t);break;case 24:ls(e,t,s,n),c&2048&&ic(t.alternate,t);break;default:ls(e,t,s,n)}}function pn(e,t,s,n,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,g=t,b=s,N=n,B=g.flags;switch(g.tag){case 0:case 11:case 15:pn(h,g,b,N,c),gl(8,g);break;case 23:break;case 22:var Q=g.stateNode;g.memoizedState!==null?Q._visibility&2?pn(h,g,b,N,c):xl(h,g):(Q._visibility|=2,pn(h,g,b,N,c)),c&&B&2048&&rc(g.alternate,g);break;case 24:pn(h,g,b,N,c),c&&B&2048&&ic(g.alternate,g);break;default:pn(h,g,b,N,c)}t=t.sibling}}function xl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,n=t,c=n.flags;switch(n.tag){case 22:xl(s,n),c&2048&&rc(n.alternate,n);break;case 24:xl(s,n),c&2048&&ic(n.alternate,n);break;default:xl(s,n)}t=t.sibling}}var bl=8192;function xn(e,t,s){if(e.subtreeFlags&bl)for(e=e.child;e!==null;)wf(e,t,s),e=e.sibling}function wf(e,t,s){switch(e.tag){case 26:xn(e,t,s),e.flags&bl&&e.memoizedState!==null&&qx(s,ns,e.memoizedState,e.memoizedProps);break;case 5:xn(e,t,s);break;case 3:case 4:var n=ns;ns=Jr(e.stateNode.containerInfo),xn(e,t,s),ns=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=bl,bl=16777216,xn(e,t,s),bl=n):xn(e,t,s));break;default:xn(e,t,s)}}function jf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function yl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var n=t[s];mt=n,_f(n,e)}jf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Sf(e),e=e.sibling}function Sf(e){switch(e.tag){case 0:case 11:case 15:yl(e),e.flags&2048&&Qs(9,e,e.return);break;case 3:yl(e);break;case 12:yl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,zr(e)):yl(e);break;default:yl(e)}}function zr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var n=t[s];mt=n,_f(n,e)}jf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Qs(8,t,t.return),zr(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,zr(t));break;default:zr(t)}e=e.sibling}}function _f(e,t){for(;mt!==null;){var s=mt;switch(s.tag){case 0:case 11:case 15:Qs(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var n=s.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:sl(s.memoizedState.cache)}if(n=s.child,n!==null)n.return=s,mt=n;else e:for(s=e;mt!==null;){n=mt;var c=n.sibling,h=n.return;if(mf(n),n===s){mt=null;break e}if(c!==null){c.return=h,mt=c;break e}mt=h}}}var ex={getCacheForType:function(e){var t=xt(nt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return xt(nt).controller.signal}},tx=typeof WeakMap=="function"?WeakMap:Map,ze=0,Ye=null,Ee=null,Ce=0,qe=0,Ht=null,Js=!1,bn=!1,oc=!1,Cs=0,tt=0,Xs=0,Oa=0,cc=0,$t=0,yn=0,vl=null,Dt=null,uc=!1,Lr=0,Nf=0,Br=1/0,qr=null,Zs=null,ut=0,Fs=null,vn=null,Os=0,dc=0,hc=null,kf=null,wl=0,fc=null;function It(){return(ze&2)!==0&&Ce!==0?Ce&-Ce:w.T!==null?yc():$u()}function Ef(){if($t===0)if((Ce&536870912)===0||Re){var e=Kl;Kl<<=1,(Kl&3932160)===0&&(Kl=262144),$t=e}else $t=536870912;return e=Bt.current,e!==null&&(e.flags|=32),$t}function Mt(e,t,s){(e===Ye&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(wn(e,0),Ws(e,Ce,$t,!1)),In(e,s),((ze&2)===0||e!==Ye)&&(e===Ye&&((ze&2)===0&&(Oa|=s),tt===4&&Ws(e,Ce,$t,!1)),fs(e))}function Tf(e,t,s){if((ze&6)!==0)throw Error(i(327));var n=!s&&(t&127)===0&&(t&e.expiredLanes)===0||$n(e,t),c=n?nx(e,t):gc(e,t,!0),h=n;do{if(c===0){bn&&!n&&Ws(e,t,0,!1);break}else{if(s=e.current.alternate,h&&!sx(s)){c=gc(e,t,!1),h=!1;continue}if(c===2){if(h=t,e.errorRecoveryDisabledLanes&h)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var b=e;c=vl;var N=b.current.memoizedState.isDehydrated;if(N&&(wn(b,g).flags|=256),g=gc(b,g,!1),g!==2){if(oc&&!N){b.errorRecoveryDisabledLanes|=h,Oa|=h,c=4;break e}h=Dt,Dt=c,h!==null&&(Dt===null?Dt=h:Dt.push.apply(Dt,h))}c=g}if(h=!1,c!==2)continue}}if(c===1){wn(e,0),Ws(e,t,0,!0);break}e:{switch(n=e,h=c,h){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Ws(n,t,$t,!Js);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(c=Lr+300-ht(),10<c)){if(Ws(n,t,$t,!Js),Jl(n,0,!0)!==0)break e;Os=t,n.timeoutHandle=lm(Af.bind(null,n,s,Dt,qr,uc,t,$t,Oa,yn,Js,h,"Throttled",-0,0),c);break e}Af(n,s,Dt,qr,uc,t,$t,Oa,yn,Js,h,null,-0,0)}}break}while(!0);fs(e)}function Af(e,t,s,n,c,h,g,b,N,B,Q,X,q,V){if(e.timeoutHandle=-1,X=t.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ps},wf(t,h,X);var ue=(h&62914560)===h?Lr-ht():(h&4194048)===h?Nf-ht():0;if(ue=Hx(X,ue),ue!==null){Os=h,e.cancelPendingCommit=ue(Lf.bind(null,e,t,h,s,n,c,g,b,N,Q,X,null,q,V)),Ws(e,h,g,!B);return}}Lf(e,t,h,s,n,c,g,b,N)}function sx(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var n=0;n<s.length;n++){var c=s[n],h=c.getSnapshot;c=c.value;try{if(!zt(h(),c))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ws(e,t,s,n){t&=~cc,t&=~Oa,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var c=t;0<c;){var h=31-_t(c),g=1<<h;n[h]=-1,c&=~g}s!==0&&Bu(e,s,t)}function Hr(){return(ze&6)===0?(jl(0),!1):!0}function mc(){if(Ee!==null){if(qe===0)var e=Ee.return;else e=Ee,vs=ja=null,Co(e),dn=null,nl=0,e=Ee;for(;e!==null;)lf(e.alternate,e),e=e.return;Ee=null}}function wn(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,jx(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Os=0,mc(),Ye=e,Ee=s=bs(e.current,null),Ce=t,qe=0,Ht=null,Js=!1,bn=$n(e,t),oc=!1,yn=$t=cc=Oa=Xs=tt=0,Dt=vl=null,uc=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var c=31-_t(n),h=1<<c;t|=e[c],n&=~h}return Cs=t,ir(),s}function Cf(e,t){Se=null,w.H=hl,t===un||t===gr?(t=Yd(),qe=3):t===bo?(t=Yd(),qe=4):qe=t===Po?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ht=t,Ee===null&&(tt=1,Ar(e,Jt(t,e.current)))}function Of(){var e=Bt.current;return e===null?!0:(Ce&4194048)===Ce?Wt===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?e===Wt:!1}function Rf(){var e=w.H;return w.H=hl,e===null?hl:e}function Df(){var e=w.A;return w.A=ex,e}function $r(){tt=4,Js||(Ce&4194048)!==Ce&&Bt.current!==null||(bn=!0),(Xs&134217727)===0&&(Oa&134217727)===0||Ye===null||Ws(Ye,Ce,$t,!1)}function gc(e,t,s){var n=ze;ze|=2;var c=Rf(),h=Df();(Ye!==e||Ce!==t)&&(qr=null,wn(e,t)),t=!1;var g=tt;e:do try{if(qe!==0&&Ee!==null){var b=Ee,N=Ht;switch(qe){case 8:mc(),g=6;break e;case 3:case 2:case 9:case 6:Bt.current===null&&(t=!0);var B=qe;if(qe=0,Ht=null,jn(e,b,N,B),s&&bn){g=0;break e}break;default:B=qe,qe=0,Ht=null,jn(e,b,N,B)}}ax(),g=tt;break}catch(Q){Cf(e,Q)}while(!0);return t&&e.shellSuspendCounter++,vs=ja=null,ze=n,w.H=c,w.A=h,Ee===null&&(Ye=null,Ce=0,ir()),g}function ax(){for(;Ee!==null;)Mf(Ee)}function nx(e,t){var s=ze;ze|=2;var n=Rf(),c=Df();Ye!==e||Ce!==t?(qr=null,Br=ht()+500,wn(e,t)):bn=$n(e,t);e:do try{if(qe!==0&&Ee!==null){t=Ee;var h=Ht;t:switch(qe){case 1:qe=0,Ht=null,jn(e,t,h,1);break;case 2:case 9:if(Vd(h)){qe=0,Ht=null,Uf(t);break}t=function(){qe!==2&&qe!==9||Ye!==e||(qe=7),fs(e)},h.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Vd(h)?(qe=0,Ht=null,Uf(t)):(qe=0,Ht=null,jn(e,t,h,7));break;case 5:var g=null;switch(Ee.tag){case 26:g=Ee.memoizedState;case 5:case 27:var b=Ee;if(g?vm(g):b.stateNode.complete){qe=0,Ht=null;var N=b.sibling;if(N!==null)Ee=N;else{var B=b.return;B!==null?(Ee=B,Ir(B)):Ee=null}break t}}qe=0,Ht=null,jn(e,t,h,5);break;case 6:qe=0,Ht=null,jn(e,t,h,6);break;case 8:mc(),tt=6;break e;default:throw Error(i(462))}}lx();break}catch(Q){Cf(e,Q)}while(!0);return vs=ja=null,w.H=n,w.A=c,ze=s,Ee!==null?0:(Ye=null,Ce=0,ir(),tt)}function lx(){for(;Ee!==null&&!$a();)Mf(Ee)}function Mf(e){var t=af(e.alternate,e,Cs);e.memoizedProps=e.pendingProps,t===null?Ir(e):Ee=t}function Uf(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Zh(s,t,t.pendingProps,t.type,void 0,Ce);break;case 11:t=Zh(s,t,t.pendingProps,t.type.render,t.ref,Ce);break;case 5:Co(t);default:lf(s,t),t=Ee=Rd(t,Cs),t=af(s,t,Cs)}e.memoizedProps=e.pendingProps,t===null?Ir(e):Ee=t}function jn(e,t,s,n){vs=ja=null,Co(t),dn=null,nl=0;var c=t.return;try{if(Kp(e,c,t,s,Ce)){tt=1,Ar(e,Jt(s,e.current)),Ee=null;return}}catch(h){if(c!==null)throw Ee=c,h;tt=1,Ar(e,Jt(s,e.current)),Ee=null;return}t.flags&32768?(Re||n===1?e=!0:bn||(Ce&536870912)!==0?e=!1:(Js=e=!0,(n===2||n===9||n===3||n===6)&&(n=Bt.current,n!==null&&n.tag===13&&(n.flags|=16384))),zf(t,e)):Ir(t)}function Ir(e){var t=e;do{if((t.flags&32768)!==0){zf(t,Js);return}e=t.return;var s=Xp(t.alternate,t,Cs);if(s!==null){Ee=s;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);tt===0&&(tt=5)}function zf(e,t){do{var s=Zp(e.alternate,e);if(s!==null){s.flags&=32767,Ee=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=s}while(e!==null);tt=6,Ee=null}function Lf(e,t,s,n,c,h,g,b,N){e.cancelPendingCommit=null;do Vr();while(ut!==0);if((ze&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(h=t.lanes|t.childLanes,h|=so,Bg(e,s,h,g,b,N),e===Ye&&(Ee=Ye=null,Ce=0),vn=t,Fs=e,Os=s,dc=h,hc=c,kf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,cx(Ne,function(){return If(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=w.T,w.T=null,c=P.p,P.p=2,g=ze,ze|=4;try{Fp(e,t,s)}finally{ze=g,P.p=c,w.T=n}}ut=1,Bf(),qf(),Hf()}}function Bf(){if(ut===1){ut=0;var e=Fs,t=vn,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=w.T,w.T=null;var n=P.p;P.p=2;var c=ze;ze|=4;try{bf(t,e);var h=Ec,g=Sd(e.containerInfo),b=h.focusedElem,N=h.selectionRange;if(g!==b&&b&&b.ownerDocument&&jd(b.ownerDocument.documentElement,b)){if(N!==null&&Zi(b)){var B=N.start,Q=N.end;if(Q===void 0&&(Q=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(Q,b.value.length);else{var X=b.ownerDocument||document,q=X&&X.defaultView||window;if(q.getSelection){var V=q.getSelection(),ue=b.textContent.length,be=Math.min(N.start,ue),Ve=N.end===void 0?be:Math.min(N.end,ue);!V.extend&&be>Ve&&(g=Ve,Ve=be,be=g);var R=wd(b,be),E=wd(b,Ve);if(R&&E&&(V.rangeCount!==1||V.anchorNode!==R.node||V.anchorOffset!==R.offset||V.focusNode!==E.node||V.focusOffset!==E.offset)){var L=X.createRange();L.setStart(R.node,R.offset),V.removeAllRanges(),be>Ve?(V.addRange(L),V.extend(E.node,E.offset)):(L.setEnd(E.node,E.offset),V.addRange(L))}}}}for(X=[],V=b;V=V.parentNode;)V.nodeType===1&&X.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<X.length;b++){var J=X[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}ti=!!kc,Ec=kc=null}finally{ze=c,P.p=n,w.T=s}}e.current=t,ut=2}}function qf(){if(ut===2){ut=0;var e=Fs,t=vn,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=w.T,w.T=null;var n=P.p;P.p=2;var c=ze;ze|=4;try{ff(e,t.alternate,t)}finally{ze=c,P.p=n,w.T=s}}ut=3}}function Hf(){if(ut===4||ut===3){ut=0,Ia();var e=Fs,t=vn,s=Os,n=kf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ut=5:(ut=0,vn=Fs=null,$f(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Zs=null),Ri(s),t=t.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Ut,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=w.T,c=P.p,P.p=2,w.T=null;try{for(var h=e.onRecoverableError,g=0;g<n.length;g++){var b=n[g];h(b.value,{componentStack:b.stack})}}finally{w.T=t,P.p=c}}(Os&3)!==0&&Vr(),fs(e),c=e.pendingLanes,(s&261930)!==0&&(c&42)!==0?e===fc?wl++:(wl=0,fc=e):wl=0,jl(0)}}function $f(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,sl(t)))}function Vr(){return Bf(),qf(),Hf(),If()}function If(){if(ut!==5)return!1;var e=Fs,t=dc;dc=0;var s=Ri(Os),n=w.T,c=P.p;try{P.p=32>s?32:s,w.T=null,s=hc,hc=null;var h=Fs,g=Os;if(ut=0,vn=Fs=null,Os=0,(ze&6)!==0)throw Error(i(331));var b=ze;if(ze|=4,Sf(h.current),vf(h,h.current,g,s),ze=b,jl(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Ut,h)}catch{}return!0}finally{P.p=c,w.T=n,$f(e,t)}}function Vf(e,t,s){t=Jt(s,t),t=Yo(e.stateNode,t,2),e=Ys(e,t,2),e!==null&&(In(e,2),fs(e))}function He(e,t,s){if(e.tag===3)Vf(e,e,s);else for(;t!==null;){if(t.tag===3){Vf(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zs===null||!Zs.has(n))){e=Jt(s,e),s=Vh(2),n=Ys(t,s,2),n!==null&&(Gh(s,n,t,e),In(n,2),fs(n));break}}t=t.return}}function pc(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new tx;var c=new Set;n.set(t,c)}else c=n.get(t),c===void 0&&(c=new Set,n.set(t,c));c.has(s)||(oc=!0,c.add(s),e=rx.bind(null,e,t,s),t.then(e,e))}function rx(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ye===e&&(Ce&s)===s&&(tt===4||tt===3&&(Ce&62914560)===Ce&&300>ht()-Lr?(ze&2)===0&&wn(e,0):cc|=s,yn===Ce&&(yn=0)),fs(e)}function Gf(e,t){t===0&&(t=Lu()),e=ya(e,t),e!==null&&(In(e,t),fs(e))}function ix(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Gf(e,s)}function ox(e,t){var s=0;switch(e.tag){case 31:case 13:var n=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(i(314))}n!==null&&n.delete(t),Gf(e,s)}function cx(e,t){return St(e,t)}var Gr=null,Sn=null,xc=!1,Yr=!1,bc=!1,ea=0;function fs(e){e!==Sn&&e.next===null&&(Sn===null?Gr=Sn=e:Sn=Sn.next=e),Yr=!0,xc||(xc=!0,dx())}function jl(e,t){if(!bc&&Yr){bc=!0;do for(var s=!1,n=Gr;n!==null;){if(e!==0){var c=n.pendingLanes;if(c===0)var h=0;else{var g=n.suspendedLanes,b=n.pingedLanes;h=(1<<31-_t(42|e)+1)-1,h&=c&~(g&~b),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,Qf(n,h))}else h=Ce,h=Jl(n,n===Ye?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(h&3)===0||$n(n,h)||(s=!0,Qf(n,h));n=n.next}while(s);bc=!1}}function ux(){Yf()}function Yf(){Yr=xc=!1;var e=0;ea!==0&&wx()&&(e=ea);for(var t=ht(),s=null,n=Gr;n!==null;){var c=n.next,h=Pf(n,t);h===0?(n.next=null,s===null?Gr=c:s.next=c,c===null&&(Sn=s)):(s=n,(e!==0||(h&3)!==0)&&(Yr=!0)),n=c}ut!==0&&ut!==5||jl(e),ea!==0&&(ea=0)}function Pf(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var g=31-_t(h),b=1<<g,N=c[g];N===-1?((b&s)===0||(b&n)!==0)&&(c[g]=Lg(b,t)):N<=t&&(e.expiredLanes|=b),h&=~b}if(t=Ye,s=Ce,s=Jl(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,s===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&zs(n),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||$n(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(n!==null&&zs(n),Ri(s)){case 2:case 8:s=xe;break;case 32:s=Ne;break;case 268435456:s=Be;break;default:s=Ne}return n=Kf.bind(null,e),s=St(s,n),e.callbackPriority=t,e.callbackNode=s,t}return n!==null&&n!==null&&zs(n),e.callbackPriority=2,e.callbackNode=null,2}function Kf(e,t){if(ut!==0&&ut!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Vr()&&e.callbackNode!==s)return null;var n=Ce;return n=Jl(e,e===Ye?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Tf(e,n,t),Pf(e,ht()),e.callbackNode!=null&&e.callbackNode===s?Kf.bind(null,e):null)}function Qf(e,t){if(Vr())return null;Tf(e,t,!0)}function dx(){Sx(function(){(ze&6)!==0?St(ce,ux):Yf()})}function yc(){if(ea===0){var e=on;e===0&&(e=Pl,Pl<<=1,(Pl&261888)===0&&(Pl=256)),ea=e}return ea}function Jf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wl(""+e)}function Xf(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function hx(e,t,s,n,c){if(t==="submit"&&s&&s.stateNode===c){var h=Jf((c[Tt]||null).action),g=n.submitter;g&&(t=(t=g[Tt]||null)?Jf(t.formAction):g.getAttribute("formAction"),t!==null&&(h=t,g=null));var b=new ar("action","action",null,n,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(ea!==0){var N=g?Xf(c,g):new FormData(c);qo(s,{pending:!0,data:N,method:c.method,action:h},null,N)}}else typeof h=="function"&&(b.preventDefault(),N=g?Xf(c,g):new FormData(c),qo(s,{pending:!0,data:N,method:c.method,action:h},h,N))},currentTarget:c}]})}}for(var vc=0;vc<to.length;vc++){var wc=to[vc],fx=wc.toLowerCase(),mx=wc[0].toUpperCase()+wc.slice(1);as(fx,"on"+mx)}as(kd,"onAnimationEnd"),as(Ed,"onAnimationIteration"),as(Td,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(Cp,"onTransitionRun"),as(Op,"onTransitionStart"),as(Rp,"onTransitionCancel"),as(Ad,"onTransitionEnd"),Ka("onMouseEnter",["mouseout","mouseover"]),Ka("onMouseLeave",["mouseout","mouseover"]),Ka("onPointerEnter",["pointerout","pointerover"]),Ka("onPointerLeave",["pointerout","pointerover"]),ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function Zf(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],c=n.event;n=n.listeners;e:{var h=void 0;if(t)for(var g=n.length-1;0<=g;g--){var b=n[g],N=b.instance,B=b.currentTarget;if(b=b.listener,N!==h&&c.isPropagationStopped())break e;h=b,c.currentTarget=B;try{h(c)}catch(Q){rr(Q)}c.currentTarget=null,h=N}else for(g=0;g<n.length;g++){if(b=n[g],N=b.instance,B=b.currentTarget,b=b.listener,N!==h&&c.isPropagationStopped())break e;h=b,c.currentTarget=B;try{h(c)}catch(Q){rr(Q)}c.currentTarget=null,h=N}}}}function Te(e,t){var s=t[Di];s===void 0&&(s=t[Di]=new Set);var n=e+"__bubble";s.has(n)||(Ff(t,e,2,!1),s.add(n))}function jc(e,t,s){var n=0;t&&(n|=4),Ff(s,e,n,t)}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Sc(e){if(!e[Pr]){e[Pr]=!0,Gu.forEach(function(s){s!=="selectionchange"&&(gx.has(s)||jc(s,!1,e),jc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pr]||(t[Pr]=!0,jc("selectionchange",!1,t))}}function Ff(e,t,s,n){switch(Em(t)){case 2:var c=Vx;break;case 8:c=Gx;break;default:c=Bc}s=c.bind(null,t,s,e),c=void 0,!Ii||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),n?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function _c(e,t,s,n,c){var h=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var g=n.tag;if(g===3||g===4){var b=n.stateNode.containerInfo;if(b===c)break;if(g===4)for(g=n.return;g!==null;){var N=g.tag;if((N===3||N===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;b!==null;){if(g=Ga(b),g===null)return;if(N=g.tag,N===5||N===6||N===26||N===27){n=h=g;continue e}b=b.parentNode}}n=n.return}sd(function(){var B=h,Q=Hi(s),X=[];e:{var q=Cd.get(e);if(q!==void 0){var V=ar,ue=e;switch(e){case"keypress":if(tr(s)===0)break e;case"keydown":case"keyup":V=op;break;case"focusin":ue="focus",V=Pi;break;case"focusout":ue="blur",V=Pi;break;case"beforeblur":case"afterblur":V=Pi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Xg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=dp;break;case kd:case Ed:case Td:V=Wg;break;case Ad:V=fp;break;case"scroll":case"scrollend":V=Qg;break;case"wheel":V=gp;break;case"copy":case"cut":case"paste":V=tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=id;break;case"toggle":case"beforetoggle":V=xp}var be=(t&4)!==0,Ve=!be&&(e==="scroll"||e==="scrollend"),R=be?q!==null?q+"Capture":null:q;be=[];for(var E=B,L;E!==null;){var J=E;if(L=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||L===null||R===null||(J=Yn(E,R),J!=null&&be.push(_l(E,J,L))),Ve)break;E=E.return}0<be.length&&(q=new V(q,ue,null,s,Q),X.push({event:q,listeners:be}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",q&&s!==qi&&(ue=s.relatedTarget||s.fromElement)&&(Ga(ue)||ue[Va]))break e;if((V||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,V?(ue=s.relatedTarget||s.toElement,V=B,ue=ue?Ga(ue):null,ue!==null&&(Ve=d(ue),be=ue.tag,ue!==Ve||be!==5&&be!==27&&be!==6)&&(ue=null)):(V=null,ue=B),V!==ue)){if(be=ld,J="onMouseLeave",R="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(be=id,J="onPointerLeave",R="onPointerEnter",E="pointer"),Ve=V==null?q:Gn(V),L=ue==null?q:Gn(ue),q=new be(J,E+"leave",V,s,Q),q.target=Ve,q.relatedTarget=L,J=null,Ga(Q)===B&&(be=new be(R,E+"enter",ue,s,Q),be.target=L,be.relatedTarget=Ve,J=be),Ve=J,V&&ue)t:{for(be=px,R=V,E=ue,L=0,J=R;J;J=be(J))L++;J=0;for(var pe=E;pe;pe=be(pe))J++;for(;0<L-J;)R=be(R),L--;for(;0<J-L;)E=be(E),J--;for(;L--;){if(R===E||E!==null&&R===E.alternate){be=R;break t}R=be(R),E=be(E)}be=null}else be=null;V!==null&&Wf(X,q,V,be,!1),ue!==null&&Ve!==null&&Wf(X,Ve,ue,be,!0)}}e:{if(q=B?Gn(B):window,V=q.nodeName&&q.nodeName.toLowerCase(),V==="select"||V==="input"&&q.type==="file")var Me=gd;else if(fd(q))if(pd)Me=Ep;else{Me=Np;var he=_p}else V=q.nodeName,!V||V.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Bi(B.elementType)&&(Me=gd):Me=kp;if(Me&&(Me=Me(e,B))){md(X,Me,s,Q);break e}he&&he(e,q,B),e==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Li(q,"number",q.value)}switch(he=B?Gn(B):window,e){case"focusin":(fd(he)||he.contentEditable==="true")&&(Wa=he,Fi=B,Wn=null);break;case"focusout":Wn=Fi=Wa=null;break;case"mousedown":Wi=!0;break;case"contextmenu":case"mouseup":case"dragend":Wi=!1,_d(X,s,Q);break;case"selectionchange":if(Ap)break;case"keydown":case"keyup":_d(X,s,Q)}var _e;if(Qi)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Fa?dd(e,s)&&(Oe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Oe="onCompositionStart");Oe&&(od&&s.locale!=="ko"&&(Fa||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Fa&&(_e=ad()):(Bs=Q,Vi="value"in Bs?Bs.value:Bs.textContent,Fa=!0)),he=Kr(B,Oe),0<he.length&&(Oe=new rd(Oe,e,null,s,Q),X.push({event:Oe,listeners:he}),_e?Oe.data=_e:(_e=hd(s),_e!==null&&(Oe.data=_e)))),(_e=yp?vp(e,s):wp(e,s))&&(Oe=Kr(B,"onBeforeInput"),0<Oe.length&&(he=new rd("onBeforeInput","beforeinput",null,s,Q),X.push({event:he,listeners:Oe}),he.data=_e)),hx(X,e,B,s,Q)}Zf(X,t)})}function _l(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Kr(e,t){for(var s=t+"Capture",n=[];e!==null;){var c=e,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=Yn(e,s),c!=null&&n.unshift(_l(e,c,h)),c=Yn(e,t),c!=null&&n.push(_l(e,c,h))),e.tag===3)return n;e=e.return}return[]}function px(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wf(e,t,s,n,c){for(var h=t._reactName,g=[];s!==null&&s!==n;){var b=s,N=b.alternate,B=b.stateNode;if(b=b.tag,N!==null&&N===n)break;b!==5&&b!==26&&b!==27||B===null||(N=B,c?(B=Yn(s,h),B!=null&&g.unshift(_l(s,B,N))):c||(B=Yn(s,h),B!=null&&g.push(_l(s,B,N)))),s=s.return}g.length!==0&&e.push({event:t,listeners:g})}var xx=/\r\n?/g,bx=/\u0000|\uFFFD/g;function em(e){return(typeof e=="string"?e:""+e).replace(xx,`
`).replace(bx,"")}function tm(e,t){return t=em(t),em(e)===t}function Ie(e,t,s,n,c,h){switch(s){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Ja(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Ja(e,""+n);break;case"className":Zl(e,"class",n);break;case"tabIndex":Zl(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Zl(e,s,n);break;case"style":ed(e,n,h);break;case"data":if(t!=="object"){Zl(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=Wl(""+n),e.setAttribute(s,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(t!=="input"&&Ie(e,t,"name",c.name,c,null),Ie(e,t,"formEncType",c.formEncType,c,null),Ie(e,t,"formMethod",c.formMethod,c,null),Ie(e,t,"formTarget",c.formTarget,c,null)):(Ie(e,t,"encType",c.encType,c,null),Ie(e,t,"method",c.method,c,null),Ie(e,t,"target",c.target,c,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=Wl(""+n),e.setAttribute(s,n);break;case"onClick":n!=null&&(e.onclick=ps);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(i(61));if(s=n.__html,s!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}s=Wl(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""+n):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":n===!0?e.setAttribute(s,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,n):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(s,n):e.removeAttribute(s);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(s):e.setAttribute(s,n);break;case"popover":Te("beforetoggle",e),Te("toggle",e),Xl(e,"popover",n);break;case"xlinkActuate":gs(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":gs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":gs(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":gs(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":gs(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":gs(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":gs(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":gs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":gs(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Xl(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Pg.get(s)||s,Xl(e,s,n))}}function Nc(e,t,s,n,c,h){switch(s){case"style":ed(e,n,h);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(i(61));if(s=n.__html,s!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"children":typeof n=="string"?Ja(e,n):(typeof n=="number"||typeof n=="bigint")&&Ja(e,""+n);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"onClick":n!=null&&(e.onclick=ps);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yu.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),t=s.slice(2,c?s.length-7:void 0),h=e[Tt]||null,h=h!=null?h[s]:null,typeof h=="function"&&e.removeEventListener(t,h,c),typeof n=="function")){typeof h!="function"&&h!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,n,c);break e}s in e?e[s]=n:n===!0?e.setAttribute(s,""):Xl(e,s,n)}}}function yt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var n=!1,c=!1,h;for(h in s)if(s.hasOwnProperty(h)){var g=s[h];if(g!=null)switch(h){case"src":n=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ie(e,t,h,g,s,null)}}c&&Ie(e,t,"srcSet",s.srcSet,s,null),n&&Ie(e,t,"src",s.src,s,null);return;case"input":Te("invalid",e);var b=h=g=c=null,N=null,B=null;for(n in s)if(s.hasOwnProperty(n)){var Q=s[n];if(Q!=null)switch(n){case"name":c=Q;break;case"type":g=Q;break;case"checked":N=Q;break;case"defaultChecked":B=Q;break;case"value":h=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,t));break;default:Ie(e,t,n,Q,s,null)}}Xu(e,h,b,N,B,g,c,!1);return;case"select":Te("invalid",e),n=g=h=null;for(c in s)if(s.hasOwnProperty(c)&&(b=s[c],b!=null))switch(c){case"value":h=b;break;case"defaultValue":g=b;break;case"multiple":n=b;default:Ie(e,t,c,b,s,null)}t=h,s=g,e.multiple=!!n,t!=null?Qa(e,!!n,t,!1):s!=null&&Qa(e,!!n,s,!0);return;case"textarea":Te("invalid",e),h=c=n=null;for(g in s)if(s.hasOwnProperty(g)&&(b=s[g],b!=null))switch(g){case"value":n=b;break;case"defaultValue":c=b;break;case"children":h=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:Ie(e,t,g,b,s,null)}Fu(e,n,c,h);return;case"option":for(N in s)if(s.hasOwnProperty(N)&&(n=s[N],n!=null))switch(N){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Ie(e,t,N,n,s,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(n=0;n<Sl.length;n++)Te(Sl[n],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in s)if(s.hasOwnProperty(B)&&(n=s[B],n!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ie(e,t,B,n,s,null)}return;default:if(Bi(t)){for(Q in s)s.hasOwnProperty(Q)&&(n=s[Q],n!==void 0&&Nc(e,t,Q,n,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(n=s[b],n!=null&&Ie(e,t,b,n,s,null))}function yx(e,t,s,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,g=null,b=null,N=null,B=null,Q=null;for(V in s){var X=s[V];if(s.hasOwnProperty(V)&&X!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":N=X;default:n.hasOwnProperty(V)||Ie(e,t,V,null,n,X)}}for(var q in n){var V=n[q];if(X=s[q],n.hasOwnProperty(q)&&(V!=null||X!=null))switch(q){case"type":h=V;break;case"name":c=V;break;case"checked":B=V;break;case"defaultChecked":Q=V;break;case"value":g=V;break;case"defaultValue":b=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,t));break;default:V!==X&&Ie(e,t,q,V,n,X)}}zi(e,g,b,N,B,Q,h,c);return;case"select":V=g=b=q=null;for(h in s)if(N=s[h],s.hasOwnProperty(h)&&N!=null)switch(h){case"value":break;case"multiple":V=N;default:n.hasOwnProperty(h)||Ie(e,t,h,null,n,N)}for(c in n)if(h=n[c],N=s[c],n.hasOwnProperty(c)&&(h!=null||N!=null))switch(c){case"value":q=h;break;case"defaultValue":b=h;break;case"multiple":g=h;default:h!==N&&Ie(e,t,c,h,n,N)}t=b,s=g,n=V,q!=null?Qa(e,!!s,q,!1):!!n!=!!s&&(t!=null?Qa(e,!!s,t,!0):Qa(e,!!s,s?[]:"",!1));return;case"textarea":V=q=null;for(b in s)if(c=s[b],s.hasOwnProperty(b)&&c!=null&&!n.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ie(e,t,b,null,n,c)}for(g in n)if(c=n[g],h=s[g],n.hasOwnProperty(g)&&(c!=null||h!=null))switch(g){case"value":q=c;break;case"defaultValue":V=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(i(91));break;default:c!==h&&Ie(e,t,g,c,n,h)}Zu(e,q,V);return;case"option":for(var ue in s)if(q=s[ue],s.hasOwnProperty(ue)&&q!=null&&!n.hasOwnProperty(ue))switch(ue){case"selected":e.selected=!1;break;default:Ie(e,t,ue,null,n,q)}for(N in n)if(q=n[N],V=s[N],n.hasOwnProperty(N)&&q!==V&&(q!=null||V!=null))switch(N){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Ie(e,t,N,q,n,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in s)q=s[be],s.hasOwnProperty(be)&&q!=null&&!n.hasOwnProperty(be)&&Ie(e,t,be,null,n,q);for(B in n)if(q=n[B],V=s[B],n.hasOwnProperty(B)&&q!==V&&(q!=null||V!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,t));break;default:Ie(e,t,B,q,n,V)}return;default:if(Bi(t)){for(var Ve in s)q=s[Ve],s.hasOwnProperty(Ve)&&q!==void 0&&!n.hasOwnProperty(Ve)&&Nc(e,t,Ve,void 0,n,q);for(Q in n)q=n[Q],V=s[Q],!n.hasOwnProperty(Q)||q===V||q===void 0&&V===void 0||Nc(e,t,Q,q,n,V);return}}for(var R in s)q=s[R],s.hasOwnProperty(R)&&q!=null&&!n.hasOwnProperty(R)&&Ie(e,t,R,null,n,q);for(X in n)q=n[X],V=s[X],!n.hasOwnProperty(X)||q===V||q==null&&V==null||Ie(e,t,X,q,n,V)}function sm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),n=0;n<s.length;n++){var c=s[n],h=c.transferSize,g=c.initiatorType,b=c.duration;if(h&&b&&sm(g)){for(g=0,b=c.responseEnd,n+=1;n<s.length;n++){var N=s[n],B=N.startTime;if(B>b)break;var Q=N.transferSize,X=N.initiatorType;Q&&sm(X)&&(N=N.responseEnd,g+=Q*(N<b?1:(b-B)/(N-B)))}if(--n,t+=8*(h+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var kc=null,Ec=null;function Qr(e){return e.nodeType===9?e:e.ownerDocument}function am(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Tc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ac=null;function wx(){var e=window.event;return e&&e.type==="popstate"?e===Ac?!1:(Ac=e,!0):(Ac=null,!1)}var lm=typeof setTimeout=="function"?setTimeout:void 0,jx=typeof clearTimeout=="function"?clearTimeout:void 0,rm=typeof Promise=="function"?Promise:void 0,Sx=typeof queueMicrotask=="function"?queueMicrotask:typeof rm<"u"?function(e){return rm.resolve(null).then(e).catch(_x)}:lm;function _x(e){setTimeout(function(){throw e})}function ta(e){return e==="head"}function im(e,t){var s=t,n=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(n===0){e.removeChild(c),En(t);return}n--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")n++;else if(s==="html")Nl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Nl(s);for(var h=s.firstChild;h;){var g=h.nextSibling,b=h.nodeName;h[Vn]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=g}}else s==="body"&&Nl(e.ownerDocument.body);s=c}while(s);En(t)}function om(e,t){var s=e;e=0;do{var n=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=n}while(s)}function Cc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Cc(s),Mi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Nx(e,t,s,n){for(;e.nodeType===1;){var c=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Vn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=es(e.nextSibling),e===null)break}return null}function kx(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=es(e.nextSibling),e===null))return null;return e}function cm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=es(e.nextSibling),e===null))return null;return e}function Oc(e){return e.data==="$?"||e.data==="$~"}function Rc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ex(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var n=function(){t(),s.removeEventListener("DOMContentLoaded",n)};s.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function es(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Dc=null;function um(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return es(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function dm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function hm(e,t,s){switch(t=Qr(s),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Nl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Mi(e)}var ts=new Map,fm=new Set;function Jr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Rs=P.d;P.d={f:Tx,r:Ax,D:Cx,C:Ox,L:Rx,m:Dx,X:Ux,S:Mx,M:zx};function Tx(){var e=Rs.f(),t=Hr();return e||t}function Ax(e){var t=Ya(e);t!==null&&t.tag===5&&t.type==="form"?Ah(t):Rs.r(e)}var _n=typeof document>"u"?null:document;function mm(e,t,s){var n=_n;if(n&&typeof t=="string"&&t){var c=Kt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),fm.has(c)||(fm.add(c),e={rel:e,crossOrigin:s,href:t},n.querySelector(c)===null&&(t=n.createElement("link"),yt(t,"link",e),ft(t),n.head.appendChild(t)))}}function Cx(e){Rs.D(e),mm("dns-prefetch",e,null)}function Ox(e,t){Rs.C(e,t),mm("preconnect",e,t)}function Rx(e,t,s){Rs.L(e,t,s);var n=_n;if(n&&e&&t){var c='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+Kt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+Kt(s.imageSizes)+'"]')):c+='[href="'+Kt(e)+'"]';var h=c;switch(t){case"style":h=Nn(e);break;case"script":h=kn(e)}ts.has(h)||(e=v({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),ts.set(h,e),n.querySelector(c)!==null||t==="style"&&n.querySelector(kl(h))||t==="script"&&n.querySelector(El(h))||(t=n.createElement("link"),yt(t,"link",e),ft(t),n.head.appendChild(t)))}}function Dx(e,t){Rs.m(e,t);var s=_n;if(s&&e){var n=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Kt(n)+'"][href="'+Kt(e)+'"]',h=c;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=kn(e)}if(!ts.has(h)&&(e=v({rel:"modulepreload",href:e},t),ts.set(h,e),s.querySelector(c)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(El(h)))return}n=s.createElement("link"),yt(n,"link",e),ft(n),s.head.appendChild(n)}}}function Mx(e,t,s){Rs.S(e,t,s);var n=_n;if(n&&e){var c=Pa(n).hoistableStyles,h=Nn(e);t=t||"default";var g=c.get(h);if(!g){var b={loading:0,preload:null};if(g=n.querySelector(kl(h)))b.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},s),(s=ts.get(h))&&Mc(e,s);var N=g=n.createElement("link");ft(N),yt(N,"link",e),N._p=new Promise(function(B,Q){N.onload=B,N.onerror=Q}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Xr(g,t,n)}g={type:"stylesheet",instance:g,count:1,state:b},c.set(h,g)}}}function Ux(e,t){Rs.X(e,t);var s=_n;if(s&&e){var n=Pa(s).hoistableScripts,c=kn(e),h=n.get(c);h||(h=s.querySelector(El(c)),h||(e=v({src:e,async:!0},t),(t=ts.get(c))&&Uc(e,t),h=s.createElement("script"),ft(h),yt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},n.set(c,h))}}function zx(e,t){Rs.M(e,t);var s=_n;if(s&&e){var n=Pa(s).hoistableScripts,c=kn(e),h=n.get(c);h||(h=s.querySelector(El(c)),h||(e=v({src:e,async:!0,type:"module"},t),(t=ts.get(c))&&Uc(e,t),h=s.createElement("script"),ft(h),yt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},n.set(c,h))}}function gm(e,t,s,n){var c=(c=de.current)?Jr(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=Nn(s.href),s=Pa(c).hoistableStyles,n=s.get(t),n||(n={type:"style",instance:null,count:0,state:null},s.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Nn(s.href);var h=Pa(c).hoistableStyles,g=h.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,g),(h=c.querySelector(kl(e)))&&!h._p&&(g.instance=h,g.state.loading=5),ts.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ts.set(e,s),h||Lx(c,e,s,g.state))),t&&n===null)throw Error(i(528,""));return g}if(t&&n!==null)throw Error(i(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=kn(s),s=Pa(c).hoistableScripts,n=s.get(t),n||(n={type:"script",instance:null,count:0,state:null},s.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Nn(e){return'href="'+Kt(e)+'"'}function kl(e){return'link[rel="stylesheet"]['+e+"]"}function pm(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Lx(e,t,s,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),yt(t,"link",s),ft(t),e.head.appendChild(t))}function kn(e){return'[src="'+Kt(e)+'"]'}function El(e){return"script[async]"+e}function xm(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Kt(s.href)+'"]');if(n)return t.instance=n,ft(n),n;var c=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ft(n),yt(n,"style",c),Xr(n,s.precedence,e),t.instance=n;case"stylesheet":c=Nn(s.href);var h=e.querySelector(kl(c));if(h)return t.state.loading|=4,t.instance=h,ft(h),h;n=pm(s),(c=ts.get(c))&&Mc(n,c),h=(e.ownerDocument||e).createElement("link"),ft(h);var g=h;return g._p=new Promise(function(b,N){g.onload=b,g.onerror=N}),yt(h,"link",n),t.state.loading|=4,Xr(h,s.precedence,e),t.instance=h;case"script":return h=kn(s.src),(c=e.querySelector(El(h)))?(t.instance=c,ft(c),c):(n=s,(c=ts.get(h))&&(n=v({},s),Uc(n,c)),e=e.ownerDocument||e,c=e.createElement("script"),ft(c),yt(c,"link",n),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Xr(n,s.precedence,e));return t.instance}function Xr(e,t,s){for(var n=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=n.length?n[n.length-1]:null,h=c,g=0;g<n.length;g++){var b=n[g];if(b.dataset.precedence===t)h=b;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Mc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Uc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Zr=null;function bm(e,t,s){if(Zr===null){var n=new Map,c=Zr=new Map;c.set(s,n)}else c=Zr,n=c.get(s),n||(n=new Map,c.set(s,n));if(n.has(e))return n;for(n.set(e,null),s=s.getElementsByTagName(e),c=0;c<s.length;c++){var h=s[c];if(!(h[Vn]||h[gt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var g=h.getAttribute(t)||"";g=e+g;var b=n.get(g);b?b.push(h):n.set(g,[h])}}return n}function ym(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function Bx(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function vm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function qx(e,t,s,n){if(s.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=Nn(n.href),h=t.querySelector(kl(c));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Fr.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=h,ft(h);return}h=t.ownerDocument||t,n=pm(n),(c=ts.get(c))&&Mc(n,c),h=h.createElement("link"),ft(h);var g=h;g._p=new Promise(function(b,N){g.onload=b,g.onerror=N}),yt(h,"link",n),s.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Fr.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var zc=0;function Hx(e,t){return e.stylesheets&&e.count===0&&ei(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var n=setTimeout(function(){if(e.stylesheets&&ei(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&zc===0&&(zc=62500*vx());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ei(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>zc?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(c)}}:null}function Fr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ei(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wr=null;function ei(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wr=new Map,t.forEach($x,e),Wr=null,Fr.call(e))}function $x(e,t){if(!(t.state.loading&4)){var s=Wr.get(e);if(s)var n=s.get(null);else{s=new Map,Wr.set(e,s);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var g=c[h];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(s.set(g.dataset.precedence,g),n=g)}n&&s.set(null,n)}c=t.instance,g=c.getAttribute("data-precedence"),h=s.get(g)||n,h===n&&s.set(null,c),s.set(g,c),this.count++,n=Fr.bind(this),c.addEventListener("load",n),c.addEventListener("error",n),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Tl={$$typeof:C,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function Ix(e,t,s,n,c,h,g,b,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=n,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function wm(e,t,s,n,c,h,g,b,N,B,Q,X){return e=new Ix(e,t,s,g,N,B,Q,X,b),t=1,h===!0&&(t|=24),h=Lt(3,null,null,t),e.current=h,h.stateNode=e,t=go(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:n,isDehydrated:s,cache:t},yo(h),e}function jm(e){return e?(e=sn,e):sn}function Sm(e,t,s,n,c,h){c=jm(c),n.context===null?n.context=c:n.pendingContext=c,n=Gs(t),n.payload={element:s},h=h===void 0?null:h,h!==null&&(n.callback=h),s=Ys(e,n,t),s!==null&&(Mt(s,e,t),rl(s,e,t))}function _m(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Lc(e,t){_m(e,t),(e=e.alternate)&&_m(e,t)}function Nm(e){if(e.tag===13||e.tag===31){var t=ya(e,67108864);t!==null&&Mt(t,e,67108864),Lc(e,67108864)}}function km(e){if(e.tag===13||e.tag===31){var t=It();t=Oi(t);var s=ya(e,t);s!==null&&Mt(s,e,t),Lc(e,t)}}var ti=!0;function Vx(e,t,s,n){var c=w.T;w.T=null;var h=P.p;try{P.p=2,Bc(e,t,s,n)}finally{P.p=h,w.T=c}}function Gx(e,t,s,n){var c=w.T;w.T=null;var h=P.p;try{P.p=8,Bc(e,t,s,n)}finally{P.p=h,w.T=c}}function Bc(e,t,s,n){if(ti){var c=qc(n);if(c===null)_c(e,t,n,si,s),Tm(e,n);else if(Px(c,e,t,s,n))n.stopPropagation();else if(Tm(e,n),t&4&&-1<Yx.indexOf(e)){for(;c!==null;){var h=Ya(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var g=ma(h.pendingLanes);if(g!==0){var b=h;for(b.pendingLanes|=2,b.entangledLanes|=2;g;){var N=1<<31-_t(g);b.entanglements[1]|=N,g&=~N}fs(h),(ze&6)===0&&(Br=ht()+500,jl(0))}}break;case 31:case 13:b=ya(h,2),b!==null&&Mt(b,h,2),Hr(),Lc(h,2)}if(h=qc(n),h===null&&_c(e,t,n,si,s),h===c)break;c=h}c!==null&&n.stopPropagation()}else _c(e,t,n,null,s)}}function qc(e){return e=Hi(e),Hc(e)}var si=null;function Hc(e){if(si=null,e=Ga(e),e!==null){var t=d(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return si=e,null}function Em(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case ce:return 2;case xe:return 8;case Ne:case De:return 32;case Be:return 268435456;default:return 32}default:return 32}}var $c=!1,sa=null,aa=null,na=null,Al=new Map,Cl=new Map,la=[],Yx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tm(e,t){switch(e){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":aa=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":Al.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(t.pointerId)}}function Ol(e,t,s,n,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Ya(t),t!==null&&Nm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Px(e,t,s,n,c){switch(t){case"focusin":return sa=Ol(sa,e,t,s,n,c),!0;case"dragenter":return aa=Ol(aa,e,t,s,n,c),!0;case"mouseover":return na=Ol(na,e,t,s,n,c),!0;case"pointerover":var h=c.pointerId;return Al.set(h,Ol(Al.get(h)||null,e,t,s,n,c)),!0;case"gotpointercapture":return h=c.pointerId,Cl.set(h,Ol(Cl.get(h)||null,e,t,s,n,c)),!0}return!1}function Am(e){var t=Ga(e.target);if(t!==null){var s=d(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,Iu(e.priority,function(){km(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,Iu(e.priority,function(){km(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ai(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=qc(e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);qi=n,s.target.dispatchEvent(n),qi=null}else return t=Ya(s),t!==null&&Nm(t),e.blockedOn=s,!1;t.shift()}return!0}function Cm(e,t,s){ai(e)&&s.delete(t)}function Kx(){$c=!1,sa!==null&&ai(sa)&&(sa=null),aa!==null&&ai(aa)&&(aa=null),na!==null&&ai(na)&&(na=null),Al.forEach(Cm),Cl.forEach(Cm)}function ni(e,t){e.blockedOn===t&&(e.blockedOn=null,$c||($c=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Kx)))}var li=null;function Om(e){li!==e&&(li=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){li===e&&(li=null);for(var t=0;t<e.length;t+=3){var s=e[t],n=e[t+1],c=e[t+2];if(typeof n!="function"){if(Hc(n||s)===null)continue;break}var h=Ya(s);h!==null&&(e.splice(t,3),t-=3,qo(h,{pending:!0,data:c,method:s.method,action:n},n,c))}}))}function En(e){function t(N){return ni(N,e)}sa!==null&&ni(sa,e),aa!==null&&ni(aa,e),na!==null&&ni(na,e),Al.forEach(t),Cl.forEach(t);for(var s=0;s<la.length;s++){var n=la[s];n.blockedOn===e&&(n.blockedOn=null)}for(;0<la.length&&(s=la[0],s.blockedOn===null);)Am(s),s.blockedOn===null&&la.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(n=0;n<s.length;n+=3){var c=s[n],h=s[n+1],g=c[Tt]||null;if(typeof h=="function")g||Om(s);else if(g){var b=null;if(h&&h.hasAttribute("formAction")){if(c=h,g=h[Tt]||null)b=g.formAction;else if(Hc(c)!==null)continue}else b=g.action;typeof b=="function"?s[n+1]=b:(s.splice(n,3),n-=3),Om(s)}}}function Rm(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),n||setTimeout(s,20)}function s(){if(!n&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Ic(e){this._internalRoot=e}ri.prototype.render=Ic.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var s=t.current,n=It();Sm(s,n,e,t,null,null)},ri.prototype.unmount=Ic.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sm(e.current,2,null,e,null,null),Hr(),t[Va]=null}};function ri(e){this._internalRoot=e}ri.prototype.unstable_scheduleHydration=function(e){if(e){var t=$u();e={blockedOn:null,target:e,priority:t};for(var s=0;s<la.length&&t!==0&&t<la[s].priority;s++);la.splice(s,0,e),s===0&&Am(e)}};var Dm=a.version;if(Dm!=="19.2.0")throw Error(i(527,Dm,"19.2.0"));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=x(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Qx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ii.isDisabled&&ii.supportsFiber)try{Ut=ii.inject(Qx),We=ii}catch{}}return Dl.createRoot=function(e,t){if(!u(e))throw Error(i(299));var s=!1,n="",c=qh,h=Hh,g=$h;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=wm(e,1,!1,null,null,s,n,null,c,h,g,Rm),e[Va]=t.current,Sc(e),new Ic(t)},Dl.hydrateRoot=function(e,t,s){if(!u(e))throw Error(i(299));var n=!1,c="",h=qh,g=Hh,b=$h,N=null;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.formState!==void 0&&(N=s.formState)),t=wm(e,1,!0,t,s??null,n,c,N,h,g,b,Rm),t.context=jm(null),s=t.current,n=It(),n=Oi(n),c=Gs(n),c.callback=null,Ys(s,c,n),s=n,t.current.lanes=s,In(t,s),fs(t),e[Va]=t.current,Sc(e),new ri(t)},Dl.version="19.2.0",Dl}var Vm;function lb(){if(Vm)return Yc.exports;Vm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(a){console.error(a)}}return o(),Yc.exports=nb(),Yc.exports}var rb=lb();const ib=ju(rb),ob=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6m-6 4.5h6M3.75 6.75h-.75v-.75m.75 0v.75m-.75 0h.75m16.5 0h.75v-.75m-.75 0v.75m.75 0h-.75M3.75 17.25h-.75v.75m.75 0v-.75m-.75 0h.75m16.5 0h.75v.75m-.75 0v-.75m.75 0h-.75"})}),cb=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),ub=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),bi=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),db=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10.5 11.25h3M12 15h.008"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 7.5h16.5M12 3.75l-3 3.75h6l-3-3.75z"})]}),E0=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-1.5h5.25m-5.25 0h5.25m-5.25 0h5.25m-5.25 0h5.25M5.25 6.75h13.5"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 21H5.25a2.25 2.25 0 01-2.25-2.25V5.25A2.25 2.25 0 015.25 3h13.5A2.25 2.25 0 0121 5.25v13.5a2.25 2.25 0 01-2.25 2.25z"})]}),hb=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h13.5A2.25 2.25 0 0121 5.25"})}),fb=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-2.25 13.5H5.952L3.75 7.5h16.5zm-1.5 0l-2.625-3.75h-7.25L6.75 7.5m12 0H5.25"})}),T0=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),mb=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.008 1.11-.962l.548.046c.55.046 1.02.522 1.11.962l.196.983c.25.041.5.09.742.145l.933-.373c.51-.204 1.094.027 1.32.518l.495.858c.227.393.123.895-.242 1.19l-.793.642c.04.24.072.484.094.73l1.043.11c.553.06.95.533.894 1.085l-.096.963c-.056.552-.533.95-.1.085l-1.043.11c-.022.246-.054.49-.094.73l.793.642c.365.295.469.797.242 1.19l-.495.858c-.226.391-.81.722-1.32.518l-.933-.373c-.242.055-.492.104-.742.145l-.196.983c-.09.44-.56.916-1.11.962l-.548.046c-.55.046-1.02-.422-1.11-.962l-.196-.983a6.746 6.746 0 01-.742-.145l-.933.373c-.51.204-1.094-.027-1.32-.518l-.495-.858c-.227-.393-.123-.895.242-1.19l.793-.642a6.746 6.746 0 01-.094-.73l-1.043-.11c-.553-.06-.95-.533-.894-1.085l.096-.963c.056-.552.533-.95.1.085l1.043.11c.022-.246.054.49.094-.73l-.793-.642c-.365-.295-.469-.797-.242-1.19l.495-.858c.226-.391.81-.722-1.32-.518l.933.373c.242-.055.492-.104.742-.145l.196-.983z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),A0=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),gb=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ni=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),C0=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.067-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),O0=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),pb=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 2.25v3M18 2.25v3M3.75 8.25h16.5"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.25h13.5A2.25 2.25 0 0121 7.5v11.25A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75V7.5A2.25 2.25 0 015.25 5.25z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12.75h.008v.008H8v-.008zM12 12.75h.008v.008H12v-.008zM16 12.75h.008v.008H16v-.008zM8 16h.008v.008H8V16zM12 16h.008v.008H12V16z"})]}),xb=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 7.5h16.5v2.25a2.25 2.25 0 010 4.5v2.25H3.75v-2.25a2.25 2.25 0 010-4.5V7.5z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 8.25v7.5"})]}),bb=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 20.25a7.5 7.5 0 0115 0"})]}),yb=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 18.75a2.25 2.25 0 11-4.5 0"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 9a7.5 7.5 0 0115 0v3.375c0 .621.249 1.218.69 1.659l.06.06A1.5 1.5 0 0119.5 16.5h-15a1.5 1.5 0 01-1.06-2.566l.06-.06c.441-.441.69-1.038.69-1.659V9z"})]}),vb=o=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 100-18 9 9 0 000 18z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12h19.5M12 2.25c2.485 2.91 2.485 15.09 0 17.5M7.5 4.8a15.6 15.6 0 000 14.4M16.5 4.8a15.6 15.6 0 010 14.4"})]}),wb=o=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12l7.5-7.5M3 12h18"})}),jb=({theme:o,setTheme:a,storeName:l,stores:i,currentStoreId:u,onStoreChange:d,currentUser:f,onLogout:m})=>{const p=()=>{a(o==="light"?"dark":"light")};return r.jsx("header",{className:"bg-white dark:bg-slate-800 shadow-md sticky top-0 z-40",children:r.jsxs("div",{className:"container mx-auto px-4 lg:px-6 py-4 flex items-center justify-between",children:[r.jsxs("a",{href:(f==null?void 0:f.role)==="super_admin"?"#/admin":"#/",className:"flex items-center space-x-3",title:(f==null?void 0:f.role)==="super_admin"?"Go to Super Admin Dashboard":"Go to Home",children:[r.jsx(ob,{className:"h-8 w-8 text-indigo-600"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"hidden sm:inline text-sm font-medium text-slate-500 dark:text-slate-400",children:"myPOS"}),i&&d&&i.length>1&&r.jsx("select",{className:"ml-3 bg-transparent border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200 text-sm rounded-md px-2 py-1",value:u||"",onChange:x=>d(x.target.value),children:i.map(x=>r.jsx("option",{value:x.id,children:x.name},x.id))}),f?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200",children:f.role==="super_admin"?"Super Admin":"Store User"}),r.jsx("button",{onClick:m,className:"px-3 py-1.5 text-sm font-medium rounded-md bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-300 dark:hover:bg-slate-600",children:"Logout"})]}):r.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm",children:[r.jsx("a",{href:"#/login-store",className:"px-3 py-1.5 rounded-md bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-300 dark:hover:bg-slate-600",children:"Owner Login"}),r.jsx("a",{href:"#/login-admin",className:"px-3 py-1.5 rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"Super Admin"})]}),r.jsx("button",{onClick:p,className:"p-2 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"Toggle theme",children:o==="light"?r.jsx(ub,{className:"h-6 w-6"}):r.jsx(cb,{className:"h-6 w-6"})})]})]})})};function Sb({title:o="Confirm Deletion",message:a,confirmWord:l="DELETE",confirmButtonLabel:i="Delete",onConfirm:u,onClose:d}){const[f,m]=S.useState(""),[p,x]=S.useState(""),[y,v]=S.useState(!1),j=async()=>{if(x(""),f.trim()!==l){x(`Type ${l} to confirm.`);return}v(!0);try{await u(),d()}catch(k){x((k==null?void 0:k.message)||"Action failed")}finally{v(!1)}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:r.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-lg shadow-xl",children:[r.jsx("div",{className:"px-5 py-4 border-b border-slate-200 dark:border-slate-700",children:r.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:o})}),r.jsxs("div",{className:"p-5 space-y-3",children:[r.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:a}),r.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Type ",l," to confirm"]}),r.jsx("input",{type:"text",value:f,onChange:k=>m(k.target.value),className:"w-full px-3 py-2 border rounded-md border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",placeholder:l,disabled:y}),p&&r.jsx("div",{className:"text-sm text-red-600",children:p})]}),r.jsxs("div",{className:"px-5 py-4 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-2",children:[r.jsx("button",{onClick:d,disabled:y,className:"px-4 py-2 rounded-md bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-600 disabled:opacity-60",children:"Cancel"}),r.jsx("button",{onClick:j,disabled:y,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 disabled:opacity-60",children:y?"Deleting...":i})]})]})})}const R0=S.createContext(null);function ki(){const o=S.useContext(R0);if(!o)throw new Error("useConfirm must be used within ConfirmProvider");return o}function _b({children:o}){const[a,l]=S.useState(!1),[i,u]=S.useState(null),[d,f]=S.useState(null),[m,p]=S.useState(null),x=S.useCallback(k=>(u(k),l(!0),new Promise((O,U)=>{f(()=>O),p(()=>U)})),[]),y=S.useCallback(()=>{l(!1),u(null),m&&m(),f(null),p(null)},[m]),v=S.useCallback(()=>{l(!1),d&&d(),f(null),p(null),u(null)},[d]),j=S.useMemo(()=>x,[x]);return r.jsxs(R0.Provider,{value:j,children:[o,a&&i&&r.jsx(Sb,{title:i.title||"Please Confirm",message:i.message,confirmWord:i.confirmWord||"DELETE",confirmButtonLabel:i.confirmButtonLabel||"Confirm",onClose:y,onConfirm:v})]})}const Nb=({product:o,onCardClick:a,lowStockThreshold:l,showExpiryBadge:i})=>{var p;const u=o.stock<=0,d=o.stock>0&&o.stock<=l&&o.stock!==1/0,f=(p=o==null?void 0:o.metadata)==null?void 0:p.expiryDate;let m=!1;if(i&&f){const x=new Date;m=(new Date(f).getTime()-x.getTime())/(1e3*60*60*24)<=30}return r.jsxs("div",{onClick:()=>a(o),"aria-label":o.name,className:`relative group bg-white dark:bg-slate-800 rounded-lg shadow-md flex flex-col transition-all duration-300 ease-in-out cursor-pointer hover:shadow-lg hover:scale-105
        ${u?"opacity-60 grayscale":""}
        ${d?"ring-2 ring-yellow-400":""}`,children:[r.jsxs("div",{className:"relative rounded-t-lg overflow-hidden",children:[r.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-full h-24 object-cover"}),u&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-1",children:r.jsx("span",{className:"text-white font-bold text-xs text-center bg-red-600 px-2 py-1 rounded",children:"UNAVAILABLE"})}),d&&r.jsx("div",{className:"absolute top-1 left-1 bg-yellow-400 text-yellow-800 text-[10px] font-bold px-1.5 py-0.5 rounded-full z-10",children:"LOW"}),m&&r.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full z-10",children:"EXPIRING"})]}),r.jsxs("div",{className:"p-2 text-left flex-grow flex flex-col",children:[r.jsxs("div",{className:"relative flex-grow",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 truncate cursor-help",title:o.name,children:o.name}),o.description&&r.jsxs("div",{role:"tooltip",className:"absolute bottom-full left-1/2 z-30 -translate-x-1/2 mb-2 w-56 p-3 text-sm font-normal text-white bg-slate-900 dark:bg-black rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300 pointer-events-none",children:[o.description,r.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-4 border-x-transparent border-t-4 border-t-slate-900 dark:border-t-black"})]})]}),r.jsxs("div",{className:"mt-1",children:[r.jsxs("p",{className:"text-base font-bold text-slate-900 dark:text-white",children:["",o.price.toFixed(2)]}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Cost: ",o.cost.toFixed(2)]})]})]})]})},kb=({products:o,onProductClick:a,lowStockThreshold:l,showExpiryBadge:i})=>r.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 xl:grid-cols-8 gap-2",children:o.map(u=>r.jsx(Nb,{product:u,onCardClick:a,lowStockThreshold:l,showExpiryBadge:i},u.id))}),Eb=({value:o,stock:a,onChange:l})=>{const i=d=>{const f=parseInt(d.target.value,10);isNaN(f)?d.target.value===""&&l(0):l(f)},u=d=>{(d.target.value===""||o<=0)&&l(1)};return r.jsxs("div",{className:"flex items-center w-full",children:[r.jsx("button",{onClick:()=>l(o-1),disabled:o<=1,className:"w-7 h-7 flex items-center justify-center rounded-l-md bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 font-bold disabled:opacity-50 flex-shrink-0","aria-label":"Decrease quantity",children:"-"}),r.jsx("input",{type:"number",value:o===0?"":o,onChange:i,onBlur:u,className:"flex-1 min-w-0 h-7 text-center border-y border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-sm font-semibold [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",min:"1",max:a===1/0?void 0:a,"aria-label":"Item quantity"}),r.jsx("button",{onClick:()=>l(o+1),disabled:o>=a,className:"w-7 h-7 flex items-center justify-center rounded-r-md bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 font-bold disabled:opacity-50 flex-shrink-0","aria-label":"Increase quantity",children:"+"})]})},Tb=({item:o,onUpdateQuantity:a})=>{const l=o.price??0,i=o.quantity??1,u=l*i;return r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-16 h-16 object-cover rounded-md"}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:o.name}),r.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["",l.toFixed(2)]})]}),r.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[r.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:["",u.toFixed(2)]}),r.jsx(Eb,{value:i,stock:o.stock,onChange:d=>a(o.id,d)})]})]})},Ab=({items:o,settings:a,discount:l,onUpdateQuantity:i,onClearCart:u,onCheckout:d,onOpenDiscountModal:f})=>{const m=o.reduce((v,j)=>v+j.price*j.quantity,0),p=m-l,x=p*(a.taxRate/100),y=p+x;return r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md flex flex-col h-full",children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Current Order"}),r.jsx("button",{onClick:u,disabled:o.length===0,className:"p-2 text-slate-500 hover:text-red-600 disabled:opacity-50 disabled:hover:text-slate-500 dark:text-slate-400 dark:hover:text-red-500","aria-label":"Clear order",children:r.jsx(C0,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-4",children:o.length===0?r.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-10",children:"Your order is empty."}):o.map(v=>r.jsx(Tb,{item:v,onUpdateQuantity:i},v.id))}),r.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Subtotal"}),r.jsxs("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:["",m.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm items-center",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Discount"}),r.jsxs("button",{onClick:f,className:"text-indigo-600 dark:text-indigo-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",disabled:o.length===0,children:[r.jsx(O0,{className:"w-4 h-4"}),r.jsx("span",{children:l>0?"Edit":"Add"})]})]}),r.jsxs("span",{className:"font-medium text-green-600",children:["- ",l.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Tax (",a.taxRate,"%)"]}),r.jsxs("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:["",x.toFixed(2)]})]}),r.jsx("div",{className:"border-t border-dashed border-slate-300 dark:border-slate-600 my-2"}),r.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[r.jsx("span",{className:"text-slate-800 dark:text-slate-200",children:"Total"}),r.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:["",y.toFixed(2)]})]}),r.jsx("button",{onClick:d,disabled:o.length===0||y<0,className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-md hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed dark:disabled:bg-indigo-800 transition-colors",children:"Place Order & Pay"})]})]})},Cb=({categories:o,selectedCategory:a,onSelectCategory:l})=>r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"flex space-x-2 border-b border-slate-200 dark:border-slate-700 overflow-x-auto pb-2",children:o.map(i=>r.jsx("button",{onClick:()=>l(i),className:`px-4 py-2 text-sm font-semibold rounded-md whitespace-nowrap transition-colors duration-200 ${a===i?"bg-indigo-600 text-white shadow":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800"}`,children:i},i))})}),Ob=({productToEdit:o,onClose:a,onSave:l,hideCategory:i=!1,allProducts:u=[]})=>{const[d,f]=S.useState({name:"",price:0,cost:0,stock:1/0,imageUrl:"",description:"",category:"Main Courses",isCommissionable:!1,commissionRate:null,itemType:"product"});S.useEffect(()=>{f(o?{...o,isCommissionable:!!o.isCommissionable,commissionRate:typeof o.commissionRate=="number"?o.commissionRate:null,itemType:o.itemType||"product"}:{name:"",price:0,cost:0,stock:1/0,imageUrl:"https://picsum.photos/400/300",description:"",category:"Main Courses",isCommissionable:!1,commissionRate:null,itemType:"product"})},[o]);const m=T=>{const{name:M,value:G}=T.target;f(z=>({...z,[M]:T.target.type==="number"?parseFloat(G)||0:G}))},p=T=>{const M=Number(T);f(G=>({...G,commissionRate:!isNaN(M)&&M>0?M/100:null}))},x=T=>{T.preventDefault();const M={...d};if(!String(M.name||"").trim()){alert("Please enter an item name.");return}if(M.isCommissionable){if(!M.commissionRate||M.commissionRate<=0){alert("Please set a valid commission rate (e.g. 5, 10, 35).");return}}else M.commissionRate=null;l(o?{...M,id:o.id}:M)},y=_u.useRef(null),[v,j]=S.useState(!1),k=()=>{var T;return(T=y.current)==null?void 0:T.click()},O=T=>{var z;const M=(z=T.target.files)==null?void 0:z[0];if(!M)return;const G=new FileReader;G.onload=()=>f(ee=>({...ee,imageUrl:String(G.result||"")})),G.readAsDataURL(M)},U=T=>{var z;T.preventDefault(),j(!1);const M=(z=T.dataTransfer.files)==null?void 0:z[0];if(!M)return;const G=new FileReader;G.onload=()=>f(ee=>({...ee,imageUrl:String(G.result||"")})),G.readAsDataURL(M)},D=d.itemType||"product",$=D==="service",H=$||d.stock===1/0,C=Array.isArray(u)?u.filter(T=>T.itemType==="ingredient"||T.itemType==="consumable"):[];return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-3xl overflow-hidden relative",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-slate-700",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:o?"Edit Item":"Add New Item"}),r.jsx("button",{onClick:a,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",children:r.jsx(Ni,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:x,children:[r.jsxs("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Photo"}),r.jsxs("div",{className:`rounded-lg border-2 ${v?"border-indigo-500":"border-dashed border-slate-300 dark:border-slate-600"} p-2 bg-slate-50 dark:bg-slate-700/30 min-h-[96px] max-w-[240px] flex items-center justify-center cursor-pointer`,onClick:k,onDragOver:T=>{T.preventDefault(),j(!0)},onDragLeave:()=>j(!1),onDrop:U,title:"Click or drop an image",children:[d.imageUrl?r.jsx("img",{src:d.imageUrl,alt:"Preview",className:"max-h-24 object-contain rounded-md"}):r.jsx("div",{className:"text-center text-slate-500 dark:text-slate-400",children:r.jsx("div",{className:"text-xs",children:"Upload"})}),r.jsx("input",{ref:y,type:"file",accept:"image/*",className:"hidden",onChange:O})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(Jc,{label:"Item Name",name:"name",value:d.name,onChange:m,required:!0}),!i&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category"}),r.jsxs("select",{id:"category",name:"category",value:d.category,onChange:m,className:"mt-1 block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",children:[r.jsx("option",{children:"Appetizers"}),r.jsx("option",{children:"Main Courses"}),r.jsx("option",{children:"Desserts"}),r.jsx("option",{children:"Drinks"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Type"}),r.jsx("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[{key:"product",label:"Product",icon:""},{key:"service",label:"Service",icon:""},{key:"menu",label:"Menu",icon:""},{key:"ingredient",label:"Ingredient",icon:""},{key:"consumable",label:"Consumable",icon:""}].map(({key:T,label:M,icon:G})=>r.jsxs("button",{type:"button",onClick:()=>f(z=>({...z,itemType:T,stock:T==="service"?1/0:z.stock})),className:`px-2 py-2 rounded-lg text-sm font-medium border transition-colors ${(d.itemType||"product")===T?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,"aria-pressed":(d.itemType||"product")===T,children:[r.jsx("span",{className:"mr-1",children:G}),M]},T))}),r.jsxs("select",{value:d.itemType,onChange:T=>f(M=>({...M,itemType:T.target.value})),className:"hidden",children:[r.jsx("option",{value:"product",children:"Product"}),r.jsx("option",{value:"service",children:"Service"}),r.jsx("option",{value:"menu",children:"Menu"}),r.jsx("option",{value:"ingredient",children:"Ingredient"}),r.jsx("option",{value:"consumable",children:"Consumable"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(Jc,{label:"Price ()",name:"price",type:"number",value:d.price,onChange:m,required:!0,min:0,step:.01}),r.jsx(Jc,{label:"Cost ()",name:"cost",type:"number",value:d.cost,onChange:m,required:!0,min:0,step:.01}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Stock"}),r.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[!H&&r.jsx("input",{id:"stock",name:"stock",type:"number",min:0,value:Number.isFinite(d.stock)?d.stock:0,onChange:m,className:"block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 px-3"}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:H,onChange:T=>{const M=T.target.checked;f(G=>({...G,stock:M?1/0:Number.isFinite(G.stock)?G.stock:0}))},disabled:$,className:"h-4 w-4 text-indigo-600 border-slate-300 rounded"}),r.jsxs("span",{children:["Unlimited",$?" (Service)":""]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:4,value:d.description,onChange:m,className:"mt-1 block w-full rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 p-3"})]}),(D==="product"||D==="service"||D==="menu")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:D==="menu"?"Bundle Items":"Consumed Ingredients/Consumables"}),r.jsxs("div",{className:"space-y-2",children:[(d[D==="menu"?"bundleItems":"consumedItems"]||[]).map((T,M)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{value:T.itemId,onChange:G=>{const z=D==="menu"?"bundleItems":"consumedItems",ee=G.target.value;f(me=>{const Y=[...me[z]||[]];return Y[M]={...Y[M],itemId:ee},{...me,[z]:Y}})},className:"w-full md:w-2/3 h-11 rounded-lg border-2 border-slate-300 px-3 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",children:[r.jsx("option",{value:"",children:"Select item"}),C.map(G=>r.jsx("option",{value:G.id,children:G.name},G.id))]}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:T.qty||1,onChange:G=>{const z=D==="menu"?"bundleItems":"consumedItems",ee=parseFloat(G.target.value)||0;f(me=>{const Y=[...me[z]||[]];return Y[M]={...Y[M],qty:ee},{...me,[z]:Y}})},className:"w-28 h-11 rounded-lg border-2 border-slate-300 px-3 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"}),r.jsx("button",{type:"button",onClick:()=>{const G=D==="menu"?"bundleItems":"consumedItems";f(z=>{const ee=[...z[G]||[]];return ee.splice(M,1),{...z,[G]:ee}})},className:"px-2 py-2 text-sm rounded border border-slate-300 hover:bg-slate-50 dark:border-slate-600",children:"Remove"})]},M)),r.jsxs("button",{type:"button",onClick:()=>{const T=D==="menu"?"bundleItems":"consumedItems";f(M=>({...M,[T]:[...M[T]||[],{itemId:"",qty:1}]}))},className:"px-3 py-2 rounded bg-slate-100 hover:bg-slate-200 text-sm dark:bg-slate-700 dark:hover:bg-slate-600",children:["Add ",D==="menu"?"Bundle Item":"Consumed Item"]})]})]}),r.jsxs("div",{className:"space-y-2 border-t border-slate-200 pt-4",children:[r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:!!d.isCommissionable,onChange:T=>f(M=>({...M,isCommissionable:T.target.checked,commissionRate:T.target.checked?M.commissionRate:null})),className:"h-4 w-4 text-indigo-600 border-slate-300 rounded"}),"Enable commission for this item"]}),d.isCommissionable&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Commission Rate (%)"}),r.jsx("input",{type:"number",min:0,step:.01,value:d.commissionRate?(d.commissionRate*100).toString():"",onChange:T=>p(T.target.value),placeholder:"e.g., 5, 10, 35",className:"mt-1 block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 px-3"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Percentage of this item's sales paid as commission."})]})]})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white rounded-md border border-slate-300 hover:bg-slate-50 dark:text-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:bg-slate-600",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Save Item"})]})]})]})})},Jc=({label:o,name:a,...l})=>r.jsxs("div",{children:[r.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o}),r.jsx("input",{id:a,name:a,...l,className:"mt-1 block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 px-3"})]}),Rb=({products:o,onAddProduct:a,onUpdateProduct:l,onDeleteProduct:i,onDeleteMultipleProducts:u,lowStockThreshold:d,hideCategory:f})=>{const[m,p]=S.useState(!1),[x,y]=S.useState(null),[v,j]=S.useState([]),[k,O]=S.useState("All"),[U,D]=S.useState("all"),[$,H]=S.useState("all"),[C,T]=S.useState(()=>{const K=localStorage.getItem("product_enabled_status");return K?JSON.parse(K):{}}),M=ki(),G=S.useRef(null),z=S.useMemo(()=>["All",...new Set(o.map(re=>re.category))],[o]),ee=S.useMemo(()=>o.filter(K=>{const re=k==="All"||K.category===k,_=K.itemType||"product",A=$==="all"||_===$,Z=K.stock<=0,ae=K.stock>0&&K.stock<=d&&K.stock!==1/0;let oe=!0;switch(U){case"in-stock":oe=!Z&&!ae;break;case"low-stock":oe=ae;break;case"out-of-stock":oe=Z;break;default:oe=!0}return re&&oe&&A}),[o,k,U,$,d]),me=ee.length>0&&ee.every(K=>v.includes(K.id)),Y=ee.some(K=>v.includes(K.id))&&!me;S.useEffect(()=>{G.current&&(G.current.indeterminate=Y)},[Y]);const I=K=>{K.target.checked?j([...v,...ee.filter(re=>!v.includes(re.id)).map(re=>re.id)]):j(v.filter(re=>!ee.find(_=>_.id===re)))},te=K=>{j(re=>re.includes(K)?re.filter(_=>_!==K):[...re,K])},W=K=>{const re=!C[K],_={...C,[K]:re};T(_),localStorage.setItem("product_enabled_status",JSON.stringify(_))},ie=K=>{y(K||null),p(!0)},F=()=>{p(!1),y(null)},w=K=>{"id"in K?l(K):a(K),F()},P=async K=>{const re=o.find(_=>_.id===K);try{await M({message:`You are about to delete "${(re==null?void 0:re.name)||"this item"}". This action cannot be undone.`,confirmButtonLabel:"Delete Item"}),i(K),j(_=>_.filter(A=>A!==K))}catch{}},ne=async()=>{if(v.length!==0)try{await M({message:`You are about to delete ${v.length} selected item(s). This action cannot be undone.`,confirmButtonLabel:"Delete Selected"}),u(v),j([])}catch{}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>{window.history.back()},className:"px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-200 dark:bg-slate-700 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600","aria-label":"Back to Main Menu",children:" Back"}),r.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Item Management"})]}),r.jsx("button",{onClick:()=>ie(),className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Add New Item"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4 space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Filters"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Category"}),r.jsx("select",{value:k,onChange:K=>O(K.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-indigo-500 focus:border-indigo-500",children:z.map(K=>r.jsx("option",{value:K,children:K},K))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Status"}),r.jsxs("select",{value:U,onChange:K=>D(K.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Items"}),r.jsx("option",{value:"in-stock",children:"In Stock"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Type"}),r.jsxs("select",{value:$,onChange:K=>H(K.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"product",children:"Product"}),r.jsx("option",{value:"service",children:"Service"}),r.jsx("option",{value:"menu",children:"Menu"}),r.jsx("option",{value:"ingredient",children:"Ingredient"}),r.jsx("option",{value:"consumable",children:"Consumable"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:[v.length>0&&r.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/50 p-3 flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-semibold text-indigo-800 dark:text-indigo-200",children:[v.length," item(s) selected"]}),r.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:[r.jsx(C0,{className:"h-4 w-4"}),"Delete Selected"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left text-slate-500 dark:text-slate-400",children:[r.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-50 dark:bg-slate-700 dark:text-slate-300",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-4 py-3 w-4",children:r.jsx("input",{type:"checkbox",ref:G,checked:me,onChange:I,className:"rounded border-slate-300 dark:border-slate-500 text-indigo-600 focus:ring-indigo-500","aria-label":"Select all products"})}),r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Menu Item"}),r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Category"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Price"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Cost"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Stock"}),r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),r.jsx("tbody",{children:ee.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-slate-500 dark:text-slate-400",children:"No menu items found matching the selected filters."})}):ee.map(K=>{const re=v.includes(K.id),_=K.stock<=0,A=K.stock>0&&K.stock<=d&&K.stock!==1/0,Z=C[K.id]!==!1;let ae="",oe="";return _?(ae="Out of Stock",oe="bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200"):A?(ae="Low Stock",oe="bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200"):(ae="In Stock",oe="bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200"),r.jsxs("tr",{className:`border-b dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 ${re?"bg-indigo-50 dark:bg-indigo-900/50":"bg-white dark:bg-slate-800"} ${Z?"":"opacity-50"}`,children:[r.jsx("td",{className:"px-4 py-4",children:r.jsx("input",{type:"checkbox",checked:re,onChange:()=>te(K.id),className:"rounded border-slate-300 dark:border-slate-500 text-indigo-600 focus:ring-indigo-500","aria-label":`Select ${K.name}`})}),r.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap dark:text-white",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("img",{src:K.imageUrl,alt:K.name,className:"w-10 h-10 object-cover rounded-md"}),r.jsx("span",{children:K.name}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-slate-700 ml-2",children:(K.itemType||"product")==="product"?" Product":K.itemType==="service"?" Service":K.itemType==="menu"?" Menu":K.itemType==="consumable"?" Consumable":" Ingredient"})]})}),r.jsx("td",{className:"px-6 py-4",children:K.category}),r.jsxs("td",{className:"px-6 py-4 text-right font-medium text-slate-800 dark:text-slate-200",children:["",K.price.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-right",children:["",K.cost.toFixed(2)]}),r.jsx("td",{className:`px-6 py-4 text-right font-bold ${_?"text-red-500":A?"text-yellow-500":""}`,children:K.stock===1/0?"":K.stock}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${oe}`,children:ae})}),r.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[r.jsx("button",{onClick:()=>W(K.id),className:`font-medium px-2 py-1 rounded text-xs ${Z?"text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-900/30"}`,title:Z?"Click to disable":"Click to enable",children:Z?" Enabled":" Disabled"}),r.jsx("button",{onClick:()=>ie(K),className:"font-medium text-indigo-600 dark:text-indigo-500 hover:underline",children:"Edit"}),r.jsx("button",{onClick:()=>P(K.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})]},K.id)})})]})})]}),m&&r.jsx(Ob,{productToEdit:x,onClose:F,onSave:w,hideCategory:!!f,allProducts:o})]})},Ml=({title:o,value:a,icon:l,color:i})=>r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow flex items-center",children:[r.jsx("div",{className:`p-3 rounded-full mr-4 ${i}`,children:l}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:o}),r.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:a})]})]}),Db=({title:o,metrics:a})=>{const l={totalRevenue:isNaN(a.totalRevenue)?0:a.totalRevenue,totalCogs:isNaN(a.totalCogs)?0:a.totalCogs,itemsSold:isNaN(a.itemsSold)?0:a.itemsSold,transactions:isNaN(a.transactions)?0:a.transactions},i=l.totalRevenue-l.totalCogs;return r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-3",children:o}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(Ml,{title:"Total Revenue",value:`${l.totalRevenue.toFixed(2)}`,icon:r.jsx(bi,{className:"h-6 w-6 text-green-800"}),color:"bg-green-100 dark:bg-green-900/50"}),r.jsx(Ml,{title:"Total COGS",value:`${l.totalCogs.toFixed(2)}`,icon:r.jsx(bi,{className:"h-6 w-6 text-red-800"}),color:"bg-red-100 dark:bg-red-900/50"}),r.jsx(Ml,{title:"Gross Profit",value:`${i.toFixed(2)}`,icon:r.jsx(bi,{className:"h-6 w-6 text-emerald-800"}),color:"bg-emerald-100 dark:bg-emerald-900/50"}),r.jsx(Ml,{title:"Items Sold",value:l.itemsSold,icon:r.jsx(db,{className:"h-6 w-6 text-blue-800"}),color:"bg-blue-100 dark:bg-blue-900/50"}),r.jsx(Ml,{title:"Transactions",value:l.transactions,icon:r.jsx(E0,{className:"h-6 w-6 text-indigo-800"}),color:"bg-indigo-100 dark:bg-indigo-900/50"})]})]})},Mb=({onClose:o,onSave:a})=>{const[l,i]=S.useState(""),[u,d]=S.useState(""),[f,m]=S.useState("Other"),p=x=>{if(x.preventDefault(),!l||Number(u)<=0){alert("Please fill out all fields correctly.");return}a({description:l,amount:Number(u),category:f,date:new Date})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md overflow-hidden relative",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-slate-700",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Log New Expense"}),r.jsx("button",{onClick:o,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",children:r.jsx(Ni,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:p,children:[r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),r.jsx("input",{type:"text",id:"description",value:l,onChange:x=>i(x.target.value),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",required:!0,autoFocus:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Amount ()"}),r.jsx("input",{type:"number",id:"amount",value:u,onChange:x=>d(parseFloat(x.target.value)||""),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",required:!0,min:"0.01",step:"0.01"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category"}),r.jsxs("select",{id:"category",value:f,onChange:x=>m(x.target.value),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",children:[r.jsx("option",{children:"Payroll"}),r.jsx("option",{children:"Rent"}),r.jsx("option",{children:"Utilities"}),r.jsx("option",{children:"Marketing"}),r.jsx("option",{children:"Supplies"}),r.jsx("option",{children:"Other"})]})]})]})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white rounded-md border border-slate-300 hover:bg-slate-50 dark:text-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:bg-slate-600",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Save Expense"})]})]})]})})},Gm=(o,a)=>!(a.from&&o<a.from||a.to&&o>a.to);function Ub(o,a,l,i){const d=a.filter(p=>{if(p.category!=="COMMISSIONS"||i.storeId&&p.storeId!==i.storeId)return!1;const x=new Date(p.createdAt||p.date);return Gm(x,i)}).reduce((p,x)=>p+(x.amount||0),0),f=new Map;o.forEach(p=>{if(!p.commissionTotal||p.commissionTotal<=0||i.storeId&&p.storeId!==i.storeId)return;const x=new Date(p.timestamp);if(!Gm(x,i))return;const y=p.staffId||p.staffName||"UNASSIGNED";let v=p.staffName||"Unassigned / Not Tagged";if(p.staffId&&l&&l.length){const k=l.find(O=>O.id===p.staffId);k&&(v=k.name)}const j=f.get(y)||{name:v,amount:0};j.amount+=p.commissionTotal,f.set(y,j)});const m=Array.from(f.entries()).map(([p,x])=>({key:p,name:x.name,amount:x.amount}));return{totalCommission:d,byStaff:m}}const D0="micropos_staff_v1";function oi(){try{const o=localStorage.getItem(D0);return o?JSON.parse(o).map(l=>({...l,createdAt:l.createdAt?new Date(l.createdAt):new Date})):[]}catch{return[]}}function Xc(o){localStorage.setItem(D0,JSON.stringify(o))}const jt={getAll(){return oi()},create(o){var i,u;const a=oi(),l={...o,modules:o.modules||[],id:((u=(i=globalThis.crypto)==null?void 0:i.randomUUID)==null?void 0:u.call(i))||`staff_${Date.now()}`,createdAt:new Date};return a.push(l),Xc(a),l},update(o,a){const l=oi(),i=l.findIndex(u=>u.id===o);return i===-1?null:(l[i]={...l[i],...a},Xc(l),l[i])},delete(o){const a=oi().filter(l=>l.id!==o);Xc(a)}},M0=({stores:o,transactions:a,expenses:l,currentStoreId:i})=>{const[u,d]=S.useState(()=>jt.getAll()),[f,m]=S.useState(i||"all"),[p,x]=S.useState("today"),[y,v]=S.useState(new Date().toISOString().split("T")[0]),[j,k]=S.useState(new Date().toISOString().split("T")[0]),{from:O,to:U,label:D}=S.useMemo(()=>{const C=new Date;let T=new Date,M=new Date;switch(p){case"today":T.setHours(0,0,0,0),M.setHours(23,59,59,999);break;case"7d":T=new Date(C),T.setDate(T.getDate()-6),T.setHours(0,0,0,0),M.setHours(23,59,59,999);break;case"30d":T=new Date(C),T.setDate(T.getDate()-29),T.setHours(0,0,0,0),M.setHours(23,59,59,999);break;case"custom":T=new Date(y),T.setHours(0,0,0,0),M=new Date(j),M.setHours(23,59,59,999);break}const G=p==="today"?"Today's Commissions":`Commissions for ${T.toLocaleDateString()} - ${M.toLocaleDateString()}`;return{from:T,to:M,label:G}},[p,y,j]),$=S.useMemo(()=>({storeId:f==="all"?void 0:f,from:O,to:U}),[f,O,U]),H=S.useMemo(()=>Ub(a,l,u,$),[a,l,u,$]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 flex flex-wrap gap-4 items-center",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Store"}),r.jsxs("select",{className:"border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-md px-3 py-2 text-sm",value:f,onChange:C=>m(C.target.value),children:[r.jsx("option",{value:"all",children:"All Stores"}),o.map(C=>r.jsx("option",{value:C.id,children:C.name},C.id))]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["today","7d","30d","custom"].map(C=>r.jsx("button",{onClick:()=>x(C),className:`px-3 py-2 rounded-md text-sm font-medium border ${p===C?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border-slate-300 dark:border-slate-600"}`,children:C==="today"?"Today":C==="7d"?"Last 7 Days":C==="30d"?"Last 30 Days":"Custom"},C))}),p==="custom"&&r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-600 dark:text-slate-300",children:["Start Date",r.jsx("input",{type:"date",value:y,onChange:C=>v(C.target.value),className:"mt-1 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 px-3 py-2"})]}),r.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-600 dark:text-slate-300",children:["End Date",r.jsx("input",{type:"date",value:j,onChange:C=>k(C.target.value),className:"mt-1 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 px-3 py-2"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Commission Summary"}),r.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:D})]}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Note: Commissions are treated as Operating Expenses. Total sales are reported in full under Revenue, and commissions are shown separately for transparency."}),r.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Commissions"}),r.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:["PHP ",H.totalCommission.toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Auto-posted commission expenses"})]})})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:r.jsx("h4",{className:"text-md font-semibold text-slate-700 dark:text-slate-200",children:"Commissions by Staff"})}),r.jsx("div",{className:"overflow-x-auto",children:H.byStaff.length>0?r.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Staff"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Total Commission"})]})}),r.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:H.byStaff.map(C=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-200",children:C.name}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-slate-900 dark:text-slate-100",children:["PHP ",C.amount.toFixed(2)]})]},C.key))})]}):r.jsx("div",{className:"px-6 py-8 text-center text-sm text-slate-500 dark:text-slate-400",children:"No commission records found for the selected filters."})})]})]})},zb=({transactions:o,expenses:a,onAddExpense:l,stores:i,currentStoreId:u,onStoreFilterChange:d})=>{const[f,m]=S.useState(!1),[p,x]=S.useState("SUMMARY"),[y,v]=S.useState("today"),[j,k]=S.useState(new Date().toISOString().split("T")[0]),[O,U]=S.useState(new Date().toISOString().split("T")[0]),[D,$]=S.useState(u||"all"),H=i||[],C=S.useMemo(()=>D==="all"?o:o.filter(F=>F.storeId===D),[o,D]),T=S.useMemo(()=>D==="all"?a:a.filter(F=>F.storeId===D),[a,D]),{filteredTransactions:M,filteredExpenses:G,dateRangeTitle:z}=S.useMemo(()=>{const F=new Date;let w=new Date,P=new Date;switch(y){case"today":w.setHours(0,0,0,0),P.setHours(23,59,59,999);break;case"7d":w.setDate(F.getDate()-6),w.setHours(0,0,0,0),P.setHours(23,59,59,999);break;case"30d":w.setDate(F.getDate()-29),w.setHours(0,0,0,0),P.setHours(23,59,59,999);break;case"custom":w=new Date(j),w.setHours(0,0,0,0),P=new Date(O),P.setHours(23,59,59,999);break}const ne=C.filter(_=>new Date(_.timestamp)>=w&&new Date(_.timestamp)<=P),K=T.filter(_=>new Date(_.date)>=w&&new Date(_.date)<=P),re=y==="today"?"Today's Summary":`Summary for ${w.toLocaleDateString()} - ${P.toLocaleDateString()}`;return{filteredTransactions:ne,filteredExpenses:K,dateRangeTitle:re}},[C,T,y,j,O]),ee=S.useMemo(()=>{const F=M.reduce((w,P)=>(w.totalRevenue+=P.total||0,w.transactions+=1,P.items.forEach(ne=>{w.itemsSold+=ne.quantity||0,w.totalCogs+=(ne.cost||0)*(ne.quantity||0)}),w),{totalRevenue:0,itemsSold:0,transactions:0,totalCogs:0});return{totalRevenue:isNaN(F.totalRevenue)?0:F.totalRevenue,itemsSold:isNaN(F.itemsSold)?0:F.itemsSold,transactions:isNaN(F.transactions)?0:F.transactions,totalCogs:isNaN(F.totalCogs)?0:F.totalCogs}},[M]),{totalCommissions:me,totalOtherExpenses:Y,totalExpenses:I}=S.useMemo(()=>{const F=G.reduce((w,P)=>{const ne=P.amount||0;return P.category==="COMMISSIONS"?w.totalCommissions+=ne:w.totalOtherExpenses+=ne,w},{totalCommissions:0,totalOtherExpenses:0});return{totalCommissions:F.totalCommissions,totalOtherExpenses:F.totalOtherExpenses,totalExpenses:F.totalCommissions+F.totalOtherExpenses}},[G]),te=S.useMemo(()=>{const F=ee.totalRevenue-ee.totalCogs-I;return isNaN(F)?0:F},[ee,I]),W=F=>{l(F),m(!1)},ie=()=>{let F="data:text/csv;charset=utf-8,";F+=`Date,Type,Description,Category,Amount
`;const w=[...M.map(K=>[new Date(K.timestamp).toLocaleString(),"Sale",`Order #${K.id.slice(-6)} (${K.items.length} items)`,"",K.total.toFixed(2)]),...G.map(K=>[new Date(K.date).toLocaleString(),"Expense",K.description,K.category,(-K.amount).toFixed(2)])];w.sort((K,re)=>new Date(re[0]).getTime()-new Date(K[0]).getTime()),w.forEach(K=>{let re=K.join(",");F+=re+`\r
`});const P=encodeURI(F),ne=document.createElement("a");ne.setAttribute("href",P),ne.setAttribute("download",`report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)};return r.jsxs("div",{className:"max-w-7xl mx-auto w-full px-4 lg:px-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>{window.history.back()},className:"px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-200 dark:bg-slate-700 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600","aria-label":"Back to Main Menu",children:" Back"}),r.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Reports"})]}),p==="SUMMARY"&&r.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[["today","7d","30d","custom"].map(F=>r.jsx("button",{onClick:()=>v(F),className:`px-4 py-2 text-sm font-semibold rounded-md whitespace-nowrap transition-colors duration-200 ${y===F?"bg-indigo-600 text-white shadow":"bg-white dark:bg-slate-800 text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"}`,children:F==="today"?"Today":F==="7d"?"Last 7 Days":F==="30d"?"Last 30 Days":"Custom"},F)),r.jsxs("button",{onClick:ie,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[r.jsx(A0,{className:"h-4 w-4"})," Download Report"]}),r.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:[r.jsx(gb,{className:"h-4 w-4"})," Log Expense"]})]})]}),r.jsxs("div",{className:"flex gap-3 border-b border-slate-200 dark:border-slate-700 pb-2",children:[r.jsx("button",{onClick:()=>x("SUMMARY"),className:`px-4 py-2 rounded-md text-sm font-semibold ${p==="SUMMARY"?"bg-indigo-600 text-white":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700"}`,children:"Sales & Profit"}),r.jsx("button",{onClick:()=>x("COMMISSIONS"),className:`px-4 py-2 rounded-md text-sm font-semibold ${p==="COMMISSIONS"?"bg-indigo-600 text-white":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700"}`,children:"Commission Summary"})]}),p==="SUMMARY"?r.jsxs(r.Fragment,{children:[H.length>0&&r.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[r.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mr-2",children:"Store:"}),r.jsxs("select",{className:"border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-md px-2 py-1 text-sm",value:D,onChange:F=>{const w=F.target.value;$(w),d==null||d(w)},children:[r.jsx("option",{value:"all",children:"All Stores"}),H.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]}),y==="custom"&&r.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:["Start Date:",r.jsx("input",{type:"date",value:j,onChange:F=>k(F.target.value),className:"rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:["End Date:",r.jsx("input",{type:"date",value:O,onChange:F=>U(F.target.value),className:"rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"})]})]}),r.jsx(Db,{title:z,metrics:ee}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Profit & Loss Summary"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Gross Profit"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["PHP ",(ee.totalRevenue-ee.totalCogs).toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Total Revenue - COGS"})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Commissions"}),r.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["- PHP ",me.toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Auto-posted commission expenses"})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Expenses"}),r.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["- PHP ",I.toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Commissions + other operating expenses"})]}),r.jsxs("div",{className:`bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg border-t-4 ${te>=0?"border-green-500":"border-red-500"}`,children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Net Profit"}),r.jsxs("p",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["PHP ",te.toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Gross Profit - (Commissions + Other Expenses)"})]})]})]}),f&&r.jsx(Mb,{onClose:()=>m(!1),onSave:W})]}):r.jsx(M0,{stores:H,transactions:o,expenses:a,currentStoreId:u})]})},ou="current_user",Ym="userRole",U0="store_owners_v1";function z0(){try{const o=localStorage.getItem(U0);return o?JSON.parse(o):{}}catch{return{}}}function Lb(o){localStorage.setItem(U0,JSON.stringify(o))}function Ul(){const o=localStorage.getItem(ou);if(!o)return null;try{const a=JSON.parse(o);return a&&a.createdAt&&(a.createdAt=new Date(a.createdAt)),a&&a.lastLogin&&(a.lastLogin=new Date(a.lastLogin)),a}catch{return null}}function Nu(o){o?(localStorage.setItem(ou,JSON.stringify(o)),localStorage.setItem(Ym,o.role)):(localStorage.removeItem(ou),localStorage.removeItem(Ym))}async function Bb(o,a){if(!o||!a)throw new Error("Email and password are required");const l={id:`sa_${Date.now()}`,email:o,name:"Super Admin",password:"local",role:"super_admin",storeId:null,enabled:!0,createdAt:new Date,lastLogin:new Date};return Nu(l),l}async function qb(o){const{storeId:a,email:l,password:i}=o;if(!a)throw new Error("Please select a store");if(!l||!i)throw new Error("Email and password are required");try{const u=localStorage.getItem("store_owners_v1"),f=(u?JSON.parse(u):{})[a];if(!f)throw new Error("Owner not provisioned for this store");if(f.email!==l||f.password!==i)throw new Error("Invalid credentials");const m={id:f.id,email:f.email,name:f.name,password:"local",role:"store_manager",storeId:a,enabled:!0,createdAt:new Date,lastLogin:new Date};return Nu(m),m}catch(u){throw new Error((u==null?void 0:u.message)||"Login failed")}}function Hb(){Nu(null)}function Pm(o){return[]}function Km(o){return[]}async function $b(o){throw new Error("Store logins are disabled")}function Ib(o,a){const l=z0(),i=`owner_${Date.now()}`,u={id:i,name:a.name,email:a.email,phone:a.phone,password:a.password,storeId:o.id};return l[o.id]=u,Lb(l),{id:i,email:a.email,name:a.name,password:"local",role:"store_manager",storeId:o.id,enabled:!0,createdAt:new Date,lastLogin:void 0}}function Vb(o){const l=z0()[o];if(!l)return null;const{id:i,name:u,email:d,phone:f}=l;return{id:i,name:u,email:d,phone:f}}const Gb=({settings:o,store:a,modules:l,staff:i,onSave:u,onStaffsChanged:d})=>{const[f,m]=S.useState(o),p=Vb(a.id),[x,y]=S.useState(()=>i.filter(A=>A.storeIds.includes(a.id))),[v,j]=S.useState(""),[k,O]=S.useState(""),[U,D]=S.useState(""),[$,H]=S.useState(""),[C,T]=S.useState(""),[M,G]=S.useState("STAFF"),[z,ee]=S.useState(!0),[me,Y]=S.useState([]),[I,te]=S.useState(null),W=ki(),ie=S.useMemo(()=>Object.entries(l).filter(([,A])=>A).map(([A])=>A),[l]);S.useEffect(()=>{y(i.filter(A=>A.storeIds.includes(a.id)))},[i,a.id]),S.useEffect(()=>{Y(A=>A.filter(Z=>ie.includes(Z)))},[ie]);const F=()=>{j(""),O(""),D(""),H(""),T(""),G("STAFF"),ee(!0),Y([]),te(null)},w=A=>{A.preventDefault(),u({...f,taxRate:Number(f.taxRate)||0,lowStockThreshold:Number(f.lowStockThreshold)||0})},P=A=>{const Z=A.name.split(/\s+/),ae=Z[0]||"",oe=Z.length===1?"":Z[Z.length-1],de=Z.length>2?Z.slice(1,-1).join(" "):"";j(ae),O(de),D(oe),H(A.nickname||""),T(A.contactPhone||""),G(A.role),ee(A.isActive),Y(A.modules?A.modules.filter(je=>ie.includes(je)):[]),te(A.id)},ne=A=>{if(A.preventDefault(),!v.trim()||!U.trim())return;const ae={name:[v.trim(),k.trim(),U.trim()].filter(Boolean).join(" "),nickname:$.trim()||void 0,role:M,storeIds:[a.id],contactPhone:C.trim()||void 0,isActive:z,modules:me};if(I){const oe=jt.update(I,ae);oe&&y(de=>de.map(je=>je.id===oe.id?oe:je))}else{const oe=jt.create(ae);y(de=>[...de,oe])}d(jt.getAll()),F()},K=async A=>{try{await W({message:`You are about to delete ${A.name}. This action cannot be undone.`,confirmButtonLabel:"Delete Staff"}),jt.delete(A.id);const Z=jt.getAll();y(Z.filter(ae=>ae.storeIds.includes(a.id))),d(Z),I===A.id&&F()}catch{}},re=(A,Z)=>{if(jt.update(A,{isActive:Z})){const oe=jt.getAll();y(oe.filter(de=>de.storeIds.includes(a.id))),d(oe)}},_=A=>{const{name:Z,value:ae}=A.target;m(oe=>({...oe,[Z]:Z==="taxRate"||Z==="lowStockThreshold"?ae===""?"":Number(ae):ae}))};return r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("button",{onClick:()=>window.history.back(),className:"px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-200 dark:bg-slate-700 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600",children:" Back"}),r.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Store Settings"})]}),r.jsxs("form",{onSubmit:w,className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 sm:p-8 space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 text-sm text-slate-600 shadow-lg shadow-slate-200 dark:shadow-none",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Store Owner"}),r.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:a.ownerName||(p==null?void 0:p.name)||"Unassigned"}),r.jsx("p",{className:"text-sm text-slate-500",children:(p==null?void 0:p.email)||o.contactInfo||"Email not provided"}),r.jsx("p",{className:"text-sm text-slate-500",children:(p==null?void 0:p.phone)||a.phone||"Phone not provided"}),r.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"Owner details are read-only."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(Ra,{label:"Tax Rate (%)",name:"taxRate",type:"number",value:f.taxRate,onChange:_,required:!0,min:"0",step:"0.01"}),r.jsx(Ra,{label:"Low Stock Threshold",name:"lowStockThreshold",type:"number",value:f.lowStockThreshold,onChange:_,required:!0,min:"0",step:"1"})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save Settings"})})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 sm:p-8 space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[r.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Manage Staff"}),r.jsx("span",{className:"text-sm text-slate-500",children:"Only staff assigned to this store are listed."})]}),r.jsxs("form",{onSubmit:ne,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(Ra,{label:"First Name *",name:"staffFirstName",value:v,onChange:A=>j(A.target.value)}),r.jsx(Ra,{label:"Middle Name",name:"staffMiddleName",value:k,onChange:A=>O(A.target.value)}),r.jsx(Ra,{label:"Last Name *",name:"staffLastName",value:U,onChange:A=>D(A.target.value)}),r.jsx(Ra,{label:"Nickname",name:"staffNickname",value:$,onChange:A=>H(A.target.value)}),r.jsx(Ra,{label:"Contact Phone",name:"staffPhone",value:C,onChange:A=>T(A.target.value)}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Role"}),r.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-600 dark:text-slate-200",value:M,onChange:A=>G(A.target.value),children:[r.jsx("option",{value:"STAFF",children:"Staff"}),r.jsx("option",{value:"CASHIER",children:"Cashier"}),r.jsx("option",{value:"THERAPIST",children:"Therapist"}),r.jsx("option",{value:"BARBER",children:"Barber"}),r.jsx("option",{value:"WAITER",children:"Waiter"}),r.jsx("option",{value:"OTHER",children:"Other"})]})]}),r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Module Access (limited to enabled modules)"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map(A=>r.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1 border rounded-full text-xs bg-white dark:bg-slate-900",children:[r.jsx("input",{type:"checkbox",checked:me.includes(A),onChange:Z=>Y(ae=>Z.target.checked?Array.from(new Set([...ae,A])):ae.filter(oe=>oe!==A))}),r.jsx("span",{children:A.replace("_"," ")})]},A))})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:z,onChange:A=>ee(A.target.checked)}),r.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Active"})]}),r.jsxs("div",{className:"md:col-span-3 flex items-center justify-between",children:[I&&r.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 border rounded-md text-sm",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:I?"Save Changes":"Add Staff"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Name"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Role"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Modules"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-2"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-200",children:[x.map(A=>{var Z;return r.jsxs("tr",{children:[r.jsxs("td",{className:"px-4 py-2 text-sm",children:[A.name,A.nickname?` (${A.nickname})`:""]}),r.jsx("td",{className:"px-4 py-2 text-sm",children:A.role}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("div",{className:"flex flex-wrap gap-1 text-xs",children:(Z=A.modules)!=null&&Z.length?A.modules.map(ae=>r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100",children:ae.replace("_"," ")},ae)):r.jsx("span",{className:"text-slate-400",children:"No modules"})})}),r.jsx("td",{className:"px-4 py-2 text-sm",children:A.isActive?"Active":"Inactive"}),r.jsxs("td",{className:"px-4 py-2 text-right space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>P(A),className:"px-3 py-1.5 text-xs rounded-md border bg-white hover:bg-slate-50",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>K(A),className:"px-3 py-1.5 text-xs rounded-md border border-red-200 bg-red-50 text-red-700 hover:bg-red-100",children:"Delete"}),r.jsx("button",{type:"button",onClick:()=>re(A.id,!A.isActive),className:"px-3 py-1.5 text-xs rounded-md border bg-white hover:bg-slate-50",children:A.isActive?"Mark Inactive":"Mark Active"})]})]},A.id)}),x.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-4 py-6 text-sm text-slate-500 text-center",children:"No staff assigned to this store yet."})})]})]})})]})]})},Ra=({label:o,name:a,...l})=>r.jsxs("div",{children:[r.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o}),r.jsx("input",{id:a,name:a,...l,className:"mt-1 block w-full h-11 rounded-lg border-2 border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 px-3"})]}),yi={RESTAURANT:{enableTables:!0},SALON:{enableAppointments:!0},LAUNDRY:{},SARI_SARI:{enableUtangLedger:!0},PHARMACY:{enableExpiryAlerts:!0},RETAIL:{}},ua={async getAllStores(){const o=localStorage.getItem("stores");return(o?JSON.parse(o):[]).map(l=>{const i=l.businessType||"RESTAURANT";return{...l,businessType:i,features:yi[i]}})},async getStore(o){return(await this.getAllStores()).find(l=>l.id===o)||null},async createStore(o){const a=o.businessType||"RESTAURANT",l=o.features||yi[a]||{},i={...o,businessType:a,features:l,id:`store_${Date.now()}`,createdAt:new Date,updatedAt:new Date},d=[...await this.getAllStores(),i];return localStorage.setItem("stores",JSON.stringify(d)),i},async updateStore(o,a){const l=await this.getAllStores(),i=l.findIndex(d=>d.id===o);if(i===-1)throw new Error("Store not found");let u={...a};if(a&&"businessType"in a&&!a.features){const d=a.businessType||l[i].businessType;d&&(u.features=yi[d])}return l[i]={...l[i],...u,updatedAt:new Date},localStorage.setItem("stores",JSON.stringify(l)),l[i]},async deleteStore(o){const l=(await this.getAllStores()).filter(i=>i.id!==o);localStorage.setItem("stores",JSON.stringify(l))},async updateStoreSettings(o,a){const l=await this.getStore(o);if(!l)throw new Error("Store not found");const i={...l,settings:{...l.settings,...a}};return this.updateStore(o,i)},async getStoresByManager(o){return(await this.getAllStores()).filter(l=>l.managerId===o)}};function L0({value:o,onChange:a}){var M,G,z,ee,me,Y;const l=((G=(M=import.meta)==null?void 0:M.env)==null?void 0:G.BASE_URL)||"/",i=I=>`${String(l).replace(/\/$/,"")}/${I.replace(/^\//,"")}`,u=S.useMemo(()=>String(Date.now()),[]),[d,f]=S.useState(((z=o==null?void 0:o.region)==null?void 0:z.region_code)??""),[m,p]=S.useState(((ee=o==null?void 0:o.province)==null?void 0:ee.province_code)??""),[x,y]=S.useState(((me=o==null?void 0:o.city)==null?void 0:me.city_code)??""),[v,j]=S.useState(((Y=o==null?void 0:o.barangay)==null?void 0:Y.brgy_code)??""),[k,O]=S.useState([]),[U,D]=S.useState([]),[$,H]=S.useState([]),[C,T]=S.useState([]);return S.useEffect(()=>{(async()=>{try{const te=await fetch(`${i("ph-addresses/region.json")}?v=${u}`,{cache:"no-store"});if(!te.ok)throw new Error(`Failed to fetch regions: ${te.status}`);const W=await te.json();O(W)}catch(te){console.error(te)}})()},[]),S.useEffect(()=>{const I=async()=>{try{const te=await fetch(`${i("ph-addresses/province.json")}?v=${u}`,{cache:"no-store"});if(!te.ok)throw new Error(`Failed to fetch provinces: ${te.status}`);const ie=(await te.json()).filter(F=>F.region_code===d);D(ie)}catch(te){console.error(te)}};if(!d){D([]),H([]),T([]),p(""),y(""),j("");return}p(""),y(""),j(""),H([]),T([]),I()},[d]),S.useEffect(()=>{const I=async()=>{try{const te=await fetch(`${i("ph-addresses/city.json")}?v=${u}`,{cache:"no-store"});if(!te.ok)throw new Error(`Failed to fetch cities: ${te.status}`);const ie=(await te.json()).filter(F=>F.province_code===m);H(ie)}catch(te){console.error(te)}};if(!m){H([]),T([]),y(""),j("");return}y(""),j(""),T([]),I()},[m]),S.useEffect(()=>{const I=async()=>{try{const te=await fetch(`${i("ph-addresses/barangay.json")}?v=${u}`,{cache:"no-store"});if(!te.ok)throw new Error(`Failed to fetch barangays: ${te.status}`);const ie=(await te.json()).filter(F=>F.city_code===x);T(ie)}catch(te){console.error(te)}};if(!x){T([]),j("");return}j(""),I()},[x]),S.useEffect(()=>{if(!a)return;const I=k.find(F=>F.region_code===d),te=U.find(F=>F.province_code===m),W=$.find(F=>F.city_code===x),ie=C.find(F=>F.brgy_code===v);a({region:I,province:te,city:W,barangay:ie})},[d,m,x,v,k,U,$,C,a]),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Region"}),r.jsxs("select",{className:"w-full border rounded px-2 py-1",value:d,onChange:I=>f(I.target.value),children:[r.jsx("option",{value:"",children:"Select region"}),k.map(I=>r.jsx("option",{value:I.region_code,children:I.region_name},I.region_code))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Province"}),r.jsxs("select",{className:"w-full border rounded px-2 py-1",value:m,onChange:I=>p(I.target.value),disabled:!d,children:[r.jsx("option",{value:"",children:"Select province"}),U.map(I=>r.jsx("option",{value:I.province_code,children:I.province_name},I.province_code))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"City / Municipality"}),r.jsxs("select",{className:"w-full border rounded px-2 py-1",value:x,onChange:I=>y(I.target.value),disabled:!m,children:[r.jsx("option",{value:"",children:"Select city / municipality"}),$.map(I=>r.jsx("option",{value:I.city_code,children:I.city_name},I.city_code))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Barangay"}),r.jsxs("select",{className:"w-full border rounded px-2 py-1",value:v,onChange:I=>j(I.target.value),disabled:!x,children:[r.jsx("option",{value:"",children:"Select barangay"}),C.map(I=>r.jsx("option",{value:I.brgy_code,children:I.brgy_name},I.brgy_code))]})]})]})}var cu=function(o,a){return cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,i){l.__proto__=i}||function(l,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(l[u]=i[u])},cu(o,a)};function B0(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");cu(o,a);function l(){this.constructor=o}o.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var vi=function(){return vi=Object.assign||function(a){for(var l,i=1,u=arguments.length;i<u;i++){l=arguments[i];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(a[d]=l[d])}return a},vi.apply(this,arguments)};function Bn(o,a){var l={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&a.indexOf(i)<0&&(l[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)a.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(l[i[u]]=o[i[u]]);return l}function q0(o,a,l,i){var u=arguments.length,d=u<3?a:i===null?i=Object.getOwnPropertyDescriptor(a,l):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,a,l,i);else for(var m=o.length-1;m>=0;m--)(f=o[m])&&(d=(u<3?f(d):u>3?f(a,l,d):f(a,l))||d);return u>3&&d&&Object.defineProperty(a,l,d),d}function H0(o,a){return function(l,i){a(l,i,o)}}function $0(o,a,l,i,u,d){function f($){if($!==void 0&&typeof $!="function")throw new TypeError("Function expected");return $}for(var m=i.kind,p=m==="getter"?"get":m==="setter"?"set":"value",x=!a&&o?i.static?o:o.prototype:null,y=a||(x?Object.getOwnPropertyDescriptor(x,i.name):{}),v,j=!1,k=l.length-1;k>=0;k--){var O={};for(var U in i)O[U]=U==="access"?{}:i[U];for(var U in i.access)O.access[U]=i.access[U];O.addInitializer=function($){if(j)throw new TypeError("Cannot add initializers after decoration has completed");d.push(f($||null))};var D=(0,l[k])(m==="accessor"?{get:y.get,set:y.set}:y[p],O);if(m==="accessor"){if(D===void 0)continue;if(D===null||typeof D!="object")throw new TypeError("Object expected");(v=f(D.get))&&(y.get=v),(v=f(D.set))&&(y.set=v),(v=f(D.init))&&u.unshift(v)}else(v=f(D))&&(m==="field"?u.unshift(v):y[p]=v)}x&&Object.defineProperty(x,i.name,y),j=!0}function I0(o,a,l){for(var i=arguments.length>2,u=0;u<a.length;u++)l=i?a[u].call(o,l):a[u].call(o);return i?l:void 0}function V0(o){return typeof o=="symbol"?o:"".concat(o)}function G0(o,a,l){return typeof a=="symbol"&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:l?"".concat(l," ",a):a})}function Y0(o,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,a)}function fe(o,a,l,i){function u(d){return d instanceof l?d:new l(function(f){f(d)})}return new(l||(l=Promise))(function(d,f){function m(y){try{x(i.next(y))}catch(v){f(v)}}function p(y){try{x(i.throw(y))}catch(v){f(v)}}function x(y){y.done?d(y.value):u(y.value).then(m,p)}x((i=i.apply(o,a||[])).next())})}function P0(o,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,u,d,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=m(0),f.throw=m(1),f.return=m(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(y){return p([x,y])}}function p(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(l=0)),l;)try{if(i=1,u&&(d=x[0]&2?u.return:x[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,x[1])).done)return d;switch(u=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return l.label++,{value:x[1],done:!1};case 5:l.label++,u=x[1],x=[0];continue;case 7:x=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){l=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){l.label=x[1];break}if(x[0]===6&&l.label<d[1]){l.label=d[1],d=x;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(x);break}d[2]&&l.ops.pop(),l.trys.pop();continue}x=a.call(o,l)}catch(y){x=[6,y],u=0}finally{i=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}var Ei=Object.create?(function(o,a,l,i){i===void 0&&(i=l);var u=Object.getOwnPropertyDescriptor(a,l);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[l]}}),Object.defineProperty(o,i,u)}):(function(o,a,l,i){i===void 0&&(i=l),o[i]=a[l]});function K0(o,a){for(var l in o)l!=="default"&&!Object.prototype.hasOwnProperty.call(a,l)&&Ei(a,o,l)}function wi(o){var a=typeof Symbol=="function"&&Symbol.iterator,l=a&&o[a],i=0;if(l)return l.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function ku(o,a){var l=typeof Symbol=="function"&&o[Symbol.iterator];if(!l)return o;var i=l.call(o),u,d=[],f;try{for(;(a===void 0||a-- >0)&&!(u=i.next()).done;)d.push(u.value)}catch(m){f={error:m}}finally{try{u&&!u.done&&(l=i.return)&&l.call(i)}finally{if(f)throw f.error}}return d}function Q0(){for(var o=[],a=0;a<arguments.length;a++)o=o.concat(ku(arguments[a]));return o}function J0(){for(var o=0,a=0,l=arguments.length;a<l;a++)o+=arguments[a].length;for(var i=Array(o),u=0,a=0;a<l;a++)for(var d=arguments[a],f=0,m=d.length;f<m;f++,u++)i[u]=d[f];return i}function X0(o,a,l){if(l||arguments.length===2)for(var i=0,u=a.length,d;i<u;i++)(d||!(i in a))&&(d||(d=Array.prototype.slice.call(a,0,i)),d[i]=a[i]);return o.concat(d||Array.prototype.slice.call(a))}function zn(o){return this instanceof zn?(this.v=o,this):new zn(o)}function Z0(o,a,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=l.apply(o,a||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",f),u[Symbol.asyncIterator]=function(){return this},u;function f(k){return function(O){return Promise.resolve(O).then(k,v)}}function m(k,O){i[k]&&(u[k]=function(U){return new Promise(function(D,$){d.push([k,U,D,$])>1||p(k,U)})},O&&(u[k]=O(u[k])))}function p(k,O){try{x(i[k](O))}catch(U){j(d[0][3],U)}}function x(k){k.value instanceof zn?Promise.resolve(k.value.v).then(y,v):j(d[0][2],k)}function y(k){p("next",k)}function v(k){p("throw",k)}function j(k,O){k(O),d.shift(),d.length&&p(d[0][0],d[0][1])}}function F0(o){var a,l;return a={},i("next"),i("throw",function(u){throw u}),i("return"),a[Symbol.iterator]=function(){return this},a;function i(u,d){a[u]=o[u]?function(f){return(l=!l)?{value:zn(o[u](f)),done:!1}:d?d(f):f}:d}}function W0(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o[Symbol.asyncIterator],l;return a?a.call(o):(o=typeof wi=="function"?wi(o):o[Symbol.iterator](),l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l);function i(d){l[d]=o[d]&&function(f){return new Promise(function(m,p){f=o[d](f),u(m,p,f.done,f.value)})}}function u(d,f,m,p){Promise.resolve(p).then(function(x){d({value:x,done:m})},f)}}function eg(o,a){return Object.defineProperty?Object.defineProperty(o,"raw",{value:a}):o.raw=a,o}var Yb=Object.create?(function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}):function(o,a){o.default=a},uu=function(o){return uu=Object.getOwnPropertyNames||function(a){var l=[];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(l[l.length]=i);return l},uu(o)};function tg(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var l=uu(o),i=0;i<l.length;i++)l[i]!=="default"&&Ei(a,o,l[i]);return Yb(a,o),a}function sg(o){return o&&o.__esModule?o:{default:o}}function ag(o,a,l,i){if(l==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?o!==a||!i:!a.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l==="m"?i:l==="a"?i.call(o):i?i.value:a.get(o)}function ng(o,a,l,i,u){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?o!==a||!u:!a.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?u.call(o,l):u?u.value=l:a.set(o,l),l}function lg(o,a){if(a===null||typeof a!="object"&&typeof a!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?a===o:o.has(a)}function rg(o,a,l){if(a!=null){if(typeof a!="object"&&typeof a!="function")throw new TypeError("Object expected.");var i,u;if(l){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=a[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=a[Symbol.dispose],l&&(u=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");u&&(i=function(){try{u.call(this)}catch(d){return Promise.reject(d)}}),o.stack.push({value:a,dispose:i,async:l})}else l&&o.stack.push({async:!0});return a}var Pb=typeof SuppressedError=="function"?SuppressedError:function(o,a,l){var i=new Error(l);return i.name="SuppressedError",i.error=o,i.suppressed=a,i};function ig(o){function a(d){o.error=o.hasError?new Pb(d,o.error,"An error was suppressed during disposal."):d,o.hasError=!0}var l,i=0;function u(){for(;l=o.stack.pop();)try{if(!l.async&&i===1)return i=0,o.stack.push(l),Promise.resolve().then(u);if(l.dispose){var d=l.dispose.call(l.value);if(l.async)return i|=2,Promise.resolve(d).then(u,function(f){return a(f),u()})}else i|=1}catch(f){a(f)}if(i===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return u()}function og(o,a){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(l,i,u,d,f){return i?a?".jsx":".js":u&&(!d||!f)?l:u+d+"."+f.toLowerCase()+"js"}):o}const Kb={__extends:B0,__assign:vi,__rest:Bn,__decorate:q0,__param:H0,__esDecorate:$0,__runInitializers:I0,__propKey:V0,__setFunctionName:G0,__metadata:Y0,__awaiter:fe,__generator:P0,__createBinding:Ei,__exportStar:K0,__values:wi,__read:ku,__spread:Q0,__spreadArrays:J0,__spreadArray:X0,__await:zn,__asyncGenerator:Z0,__asyncDelegator:F0,__asyncValues:W0,__makeTemplateObject:eg,__importStar:tg,__importDefault:sg,__classPrivateFieldGet:ag,__classPrivateFieldSet:ng,__classPrivateFieldIn:lg,__addDisposableResource:rg,__disposeResources:ig,__rewriteRelativeImportExtension:og},Qb=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:rg,get __assign(){return vi},__asyncDelegator:F0,__asyncGenerator:Z0,__asyncValues:W0,__await:zn,__awaiter:fe,__classPrivateFieldGet:ag,__classPrivateFieldIn:lg,__classPrivateFieldSet:ng,__createBinding:Ei,__decorate:q0,__disposeResources:ig,__esDecorate:$0,__exportStar:K0,__extends:B0,__generator:P0,__importDefault:sg,__importStar:tg,__makeTemplateObject:eg,__metadata:Y0,__param:H0,__propKey:V0,__read:ku,__rest:Bn,__rewriteRelativeImportExtension:og,__runInitializers:I0,__setFunctionName:G0,__spread:Q0,__spreadArray:X0,__spreadArrays:J0,__values:wi,default:Kb},Symbol.toStringTag,{value:"Module"})),Jb="modulepreload",Xb=function(o){return"/"+o},Qm={},qn=function(a,l,i){let u=Promise.resolve();if(l&&l.length>0){let f=function(x){return Promise.all(x.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));u=f(l.map(x=>{if(x=Xb(x),x in Qm)return;Qm[x]=!0;const y=x.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${v}`))return;const j=document.createElement("link");if(j.rel=y?"stylesheet":Jb,y||(j.as="script"),j.crossOrigin="",j.href=x,p&&j.setAttribute("nonce",p),document.head.appendChild(j),y)return new Promise((k,O)=>{j.addEventListener("load",k),j.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return u.then(f=>{for(const m of f||[])m.status==="rejected"&&d(m.reason);return a().catch(d)})},Zb=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...l)=>qn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ha);return{default:i}},void 0).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)};class Eu extends Error{constructor(a,l="FunctionsError",i){super(a),this.name=l,this.context=i}}class Jm extends Eu{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class Xm extends Eu{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class Zm extends Eu{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var du;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(du||(du={}));class Fb{constructor(a,{headers:l={},customFetch:i,region:u=du.Any}={}){this.url=a,this.headers=l,this.region=u,this.fetch=Zb(i)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return fe(this,arguments,void 0,function*(l,i={}){var u;try{const{headers:d,method:f,body:m,signal:p}=i;let x={},{region:y}=i;y||(y=this.region);const v=new URL(`${this.url}/${l}`);y&&y!=="any"&&(x["x-region"]=y,v.searchParams.set("forceFunctionRegion",y));let j;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",j=m):typeof m=="string"?(x["Content-Type"]="text/plain",j=m):typeof FormData<"u"&&m instanceof FormData?j=m:(x["Content-Type"]="application/json",j=JSON.stringify(m)):j=m;const k=yield this.fetch(v.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:j,signal:p}).catch($=>{throw $.name==="AbortError"?$:new Jm($)}),O=k.headers.get("x-relay-error");if(O&&O==="true")throw new Xm(k);if(!k.ok)throw new Zm(k);let U=((u=k.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),D;return U==="application/json"?D=yield k.json():U==="application/octet-stream"||U==="application/pdf"?D=yield k.blob():U==="text/event-stream"?D=k:U==="multipart/form-data"?D=yield k.formData():D=yield k.text(),{data:D,error:null,response:k}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new Jm(d)}:{data:null,error:d,response:d instanceof Zm||d instanceof Xm?d.context:void 0}}})}}var wt={};const Hn=k0(Qb);var ci={},ui={},di={},hi={},fi={},Wb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ln=Wb();const ey=Ln.fetch,cg=Ln.fetch.bind(Ln),ug=Ln.Headers,ty=Ln.Request,sy=Ln.Response,Ha=Object.freeze(Object.defineProperty({__proto__:null,Headers:ug,Request:ty,Response:sy,default:cg,fetch:ey},Symbol.toStringTag,{value:"Module"})),ay=k0(Ha);var mi={},Fm;function dg(){if(Fm)return mi;Fm=1,Object.defineProperty(mi,"__esModule",{value:!0});class o extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}}return mi.default=o,mi}var Wm;function hg(){if(Wm)return fi;Wm=1,Object.defineProperty(fi,"__esModule",{value:!0});const o=Hn,a=o.__importDefault(ay),l=o.__importDefault(dg());class i{constructor(d){var f,m;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(m=d.isMaybeSingle)!==null&&m!==void 0?m:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var y,v,j,k;let O=null,U=null,D=null,$=x.status,H=x.statusText;if(x.ok){if(this.method!=="HEAD"){const G=await x.text();G===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?U=G:U=JSON.parse(G))}const T=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),M=(j=x.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");T&&M&&M.length>1&&(D=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(U)&&(U.length>1?(O={code:"PGRST116",details:`Results contain ${U.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},U=null,D=null,$=406,H="Not Acceptable"):U.length===1?U=U[0]:U=null)}else{const T=await x.text();try{O=JSON.parse(T),Array.isArray(O)&&x.status===404&&(U=[],O=null,$=200,H="OK")}catch{x.status===404&&T===""?($=204,H="No Content"):O={message:T}}if(O&&this.isMaybeSingle&&(!((k=O==null?void 0:O.details)===null||k===void 0)&&k.includes("0 rows"))&&(O=null,$=200,H="OK"),O&&this.shouldThrowOnError)throw new l.default(O)}return{error:O,data:U,count:D,status:$,statusText:H}});return this.shouldThrowOnError||(p=p.catch(x=>{var y,v,j;return{error:{message:`${(y=x==null?void 0:x.name)!==null&&y!==void 0?y:"FetchError"}: ${x==null?void 0:x.message}`,details:`${(v=x==null?void 0:x.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(j=x==null?void 0:x.code)!==null&&j!==void 0?j:""}`},data:null,count:null,status:0,statusText:""}})),p.then(d,f)}returns(){return this}overrideTypes(){return this}}return fi.default=i,fi}var e0;function fg(){if(e0)return hi;e0=1,Object.defineProperty(hi,"__esModule",{value:!0});const a=Hn.__importDefault(hg());class l extends a.default{select(u){let d=!1;const f=(u??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:d=!0,nullsFirst:f,foreignTable:m,referencedTable:p=m}={}){const x=p?`${p}.order`:"order",y=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${y?`${y},`:""}${u}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:d,referencedTable:f=d}={}){const m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${u}`),this}range(u,d,{foreignTable:f,referencedTable:m=f}={}){const p=typeof m>"u"?"offset":`${m}.offset`,x=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${u}`),this.url.searchParams.set(x,`${d-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:d=!1,settings:f=!1,buffers:m=!1,wal:p=!1,format:x="text"}={}){var y;const v=[u?"analyze":null,d?"verbose":null,f?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),j=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${x}; for="${j}"; options=${v};`),x==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return hi.default=l,hi}var t0;function Tu(){if(t0)return di;t0=1,Object.defineProperty(di,"__esModule",{value:!0});const a=Hn.__importDefault(fg()),l=new RegExp("[,()]");class i extends a.default{eq(d,f){return this.url.searchParams.append(d,`eq.${f}`),this}neq(d,f){return this.url.searchParams.append(d,`neq.${f}`),this}gt(d,f){return this.url.searchParams.append(d,`gt.${f}`),this}gte(d,f){return this.url.searchParams.append(d,`gte.${f}`),this}lt(d,f){return this.url.searchParams.append(d,`lt.${f}`),this}lte(d,f){return this.url.searchParams.append(d,`lte.${f}`),this}like(d,f){return this.url.searchParams.append(d,`like.${f}`),this}likeAllOf(d,f){return this.url.searchParams.append(d,`like(all).{${f.join(",")}}`),this}likeAnyOf(d,f){return this.url.searchParams.append(d,`like(any).{${f.join(",")}}`),this}ilike(d,f){return this.url.searchParams.append(d,`ilike.${f}`),this}ilikeAllOf(d,f){return this.url.searchParams.append(d,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(d,f){return this.url.searchParams.append(d,`ilike(any).{${f.join(",")}}`),this}is(d,f){return this.url.searchParams.append(d,`is.${f}`),this}in(d,f){const m=Array.from(new Set(f)).map(p=>typeof p=="string"&&l.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(d,`in.(${m})`),this}contains(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cs.{${f.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(f)}`),this}containedBy(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cd.{${f.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(f)}`),this}rangeGt(d,f){return this.url.searchParams.append(d,`sr.${f}`),this}rangeGte(d,f){return this.url.searchParams.append(d,`nxl.${f}`),this}rangeLt(d,f){return this.url.searchParams.append(d,`sl.${f}`),this}rangeLte(d,f){return this.url.searchParams.append(d,`nxr.${f}`),this}rangeAdjacent(d,f){return this.url.searchParams.append(d,`adj.${f}`),this}overlaps(d,f){return typeof f=="string"?this.url.searchParams.append(d,`ov.${f}`):this.url.searchParams.append(d,`ov.{${f.join(",")}}`),this}textSearch(d,f,{config:m,type:p}={}){let x="";p==="plain"?x="pl":p==="phrase"?x="ph":p==="websearch"&&(x="w");const y=m===void 0?"":`(${m})`;return this.url.searchParams.append(d,`${x}fts${y}.${f}`),this}match(d){return Object.entries(d).forEach(([f,m])=>{this.url.searchParams.append(f,`eq.${m}`)}),this}not(d,f,m){return this.url.searchParams.append(d,`not.${f}.${m}`),this}or(d,{foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.or`:"or";return this.url.searchParams.append(p,`(${d})`),this}filter(d,f,m){return this.url.searchParams.append(d,`${f}.${m}`),this}}return di.default=i,di}var s0;function mg(){if(s0)return ui;s0=1,Object.defineProperty(ui,"__esModule",{value:!0});const a=Hn.__importDefault(Tu());class l{constructor(u,{headers:d={},schema:f,fetch:m}){this.url=u,this.headers=new Headers(d),this.schema=f,this.fetch=m}select(u,d){const{head:f=!1,count:m}=d??{},p=f?"HEAD":"GET";let x=!1;const y=(u??"*").split("").map(v=>/\s/.test(v)&&!x?"":(v==='"'&&(x=!x),v)).join("");return this.url.searchParams.set("select",y),m&&this.headers.append("Prefer",`count=${m}`),new a.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:d,defaultToNull:f=!0}={}){var m;const p="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const x=u.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(x.length>0){const y=[...new Set(x)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new a.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(u,{onConflict:d,ignoreDuplicates:f=!1,count:m,defaultToNull:p=!0}={}){var x;const y="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const v=u.reduce((j,k)=>j.concat(Object.keys(k)),[]);if(v.length>0){const j=[...new Set(v)].map(k=>`"${k}"`);this.url.searchParams.set("columns",j.join(","))}}return new a.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}update(u,{count:d}={}){var f;const m="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:u}={}){var d;const f="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new a.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return ui.default=l,ui}var a0;function ny(){if(a0)return ci;a0=1,Object.defineProperty(ci,"__esModule",{value:!0});const o=Hn,a=o.__importDefault(mg()),l=o.__importDefault(Tu());class i{constructor(d,{headers:f={},schema:m,fetch:p}={}){this.url=d,this.headers=new Headers(f),this.schemaName=m,this.fetch=p}from(d){const f=new URL(`${this.url}/${d}`);return new a.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new i(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:m=!1,get:p=!1,count:x}={}){var y;let v;const j=new URL(`${this.url}/rpc/${d}`);let k;m||p?(v=m?"HEAD":"GET",Object.entries(f).filter(([U,D])=>D!==void 0).map(([U,D])=>[U,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([U,D])=>{j.searchParams.append(U,D)})):(v="POST",k=f);const O=new Headers(this.headers);return x&&O.set("Prefer",`count=${x}`),new l.default({method:v,url:j,headers:O,schema:this.schemaName,body:k,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return ci.default=i,ci}var n0;function ly(){if(n0)return wt;n0=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.PostgrestError=wt.PostgrestBuilder=wt.PostgrestTransformBuilder=wt.PostgrestFilterBuilder=wt.PostgrestQueryBuilder=wt.PostgrestClient=void 0;const o=Hn,a=o.__importDefault(ny());wt.PostgrestClient=a.default;const l=o.__importDefault(mg());wt.PostgrestQueryBuilder=l.default;const i=o.__importDefault(Tu());wt.PostgrestFilterBuilder=i.default;const u=o.__importDefault(fg());wt.PostgrestTransformBuilder=u.default;const d=o.__importDefault(hg());wt.PostgrestBuilder=d.default;const f=o.__importDefault(dg());return wt.PostgrestError=f.default,wt.default={PostgrestClient:a.default,PostgrestQueryBuilder:l.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:d.default,PostgrestError:f.default},wt}var gg=ly();const pg=ju(gg),ry=Xx({__proto__:null,default:pg},[gg]),{PostgrestClient:iy,PostgrestQueryBuilder:mj,PostgrestFilterBuilder:gj,PostgrestTransformBuilder:pj,PostgrestBuilder:xj,PostgrestError:bj}=pg||ry;class oy{static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const l=process.versions;if(l&&l.node){const i=l.node,u=parseInt(i.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let l=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(l+=`

Suggested solution: ${a.workaround}`),new Error(l)}static createWebSocket(a,l){const i=this.getWebSocketConstructor();return new i(a,l)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const cy="2.78.0",uy=`realtime-js/${cy}`,dy="1.0.0",hu=1e4,hy=1e3,fy=100;var Ll;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Ll||(Ll={}));var dt;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(dt||(dt={}));var cs;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(cs||(cs={}));var fu;(function(o){o.websocket="websocket"})(fu||(fu={}));var La;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(La||(La={}));class my{constructor(){this.HEADER_LENGTH=1}decode(a,l){return a.constructor===ArrayBuffer?l(this._binaryDecode(a)):l(typeof a=="string"?JSON.parse(a):{})}_binaryDecode(a){const l=new DataView(a),i=new TextDecoder;return this._decodeBroadcast(a,l,i)}_decodeBroadcast(a,l,i){const u=l.getUint8(1),d=l.getUint8(2);let f=this.HEADER_LENGTH+2;const m=i.decode(a.slice(f,f+u));f=f+u;const p=i.decode(a.slice(f,f+d));f=f+d;const x=JSON.parse(i.decode(a.slice(f,a.byteLength)));return{ref:null,topic:m,event:p,payload:x}}}class xg{constructor(a,l){this.callback=a,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Pe||(Pe={}));const l0=(o,a,l={})=>{var i;const u=(i=l.skipTypes)!==null&&i!==void 0?i:[];return a?Object.keys(a).reduce((d,f)=>(d[f]=gy(f,o,a,u),d),{}):{}},gy=(o,a,l,i)=>{const u=a.find(m=>m.name===o),d=u==null?void 0:u.type,f=l[o];return d&&!i.includes(d)?bg(d,f):mu(f)},bg=(o,a)=>{if(o.charAt(0)==="_"){const l=o.slice(1,o.length);return yy(a,l)}switch(o){case Pe.bool:return py(a);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return xy(a);case Pe.json:case Pe.jsonb:return by(a);case Pe.timestamp:return vy(a);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return mu(a);default:return mu(a)}},mu=o=>o,py=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},xy=o=>{if(typeof o=="string"){const a=parseFloat(o);if(!Number.isNaN(a))return a}return o},by=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(a){return console.log(`JSON parse error: ${a}`),o}return o},yy=(o,a)=>{if(typeof o!="string")return o;const l=o.length-1,i=o[l];if(o[0]==="{"&&i==="}"){let d;const f=o.slice(1,l);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>bg(a,m))}return o},vy=o=>typeof o=="string"?o.replace(" ","T"):o,yg=o=>{const a=new URL(o);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class Zc{constructor(a,l,i={},u=hu){this.channel=a,this.event=l,this.payload=i,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,l){var i;return this._hasReceived(a)&&l((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:a,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:l}){this.recHooks.filter(i=>i.status===a).forEach(i=>i.callback(l))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var r0;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(r0||(r0={}));class Bl{constructor(a,l){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(l==null?void 0:l.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bl.syncState(this.state,u,d,f),this.pendingDiffs.forEach(p=>{this.state=Bl.syncDiff(this.state,p,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Bl.syncDiff(this.state,u,d,f),m())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,l,i,u){const d=this.cloneDeep(a),f=this.transformState(l),m={},p={};return this.map(d,(x,y)=>{f[x]||(p[x]=y)}),this.map(f,(x,y)=>{const v=d[x];if(v){const j=y.map(D=>D.presence_ref),k=v.map(D=>D.presence_ref),O=y.filter(D=>k.indexOf(D.presence_ref)<0),U=v.filter(D=>j.indexOf(D.presence_ref)<0);O.length>0&&(m[x]=O),U.length>0&&(p[x]=U)}else m[x]=y}),this.syncDiff(d,{joins:m,leaves:p},i,u)}static syncDiff(a,l,i,u){const{joins:d,leaves:f}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return i||(i=()=>{}),u||(u=()=>{}),this.map(d,(m,p)=>{var x;const y=(x=a[m])!==null&&x!==void 0?x:[];if(a[m]=this.cloneDeep(p),y.length>0){const v=a[m].map(k=>k.presence_ref),j=y.filter(k=>v.indexOf(k.presence_ref)<0);a[m].unshift(...j)}i(m,y,p)}),this.map(f,(m,p)=>{let x=a[m];if(!x)return;const y=p.map(v=>v.presence_ref);x=x.filter(v=>y.indexOf(v.presence_ref)<0),a[m]=x,u(m,x,p),x.length===0&&delete a[m]}),a}static map(a,l){return Object.getOwnPropertyNames(a).map(i=>l(i,a[i]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((l,i)=>{const u=a[i];return"metas"in u?l[i]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):l[i]=u,l},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var i0;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(i0||(i0={}));var ql;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(ql||(ql={}));var Ds;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(Ds||(Ds={}));class Au{constructor(a,l={config:{}},i){var u,d;if(this.topic=a,this.params=l,this.socket=i,this.bindings={},this.state=dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Zc(this,cs.join,this.params,this.timeout),this.rejoinTimer=new xg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(cs.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new Bl(this),this.broadcastEndpointURL=yg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,l=this.timeout){var i,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==dt.closed){const{config:{broadcast:f,presence:m,private:p}}=this.params,x=(u=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(k=>k.filter))!==null&&u!==void 0?u:[],y=!!this.bindings[ql.PRESENCE]&&this.bindings[ql.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,v={},j={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:y}),postgres_changes:x,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(k=>a==null?void 0:a(Ds.CHANNEL_ERROR,k)),this._onClose(()=>a==null?void 0:a(Ds.CLOSED)),this.updateJoinPayload(Object.assign({config:j},v)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:k})=>{var O;if(this.socket.setAuth(),k===void 0){a==null||a(Ds.SUBSCRIBED);return}else{const U=this.bindings.postgres_changes,D=(O=U==null?void 0:U.length)!==null&&O!==void 0?O:0,$=[];for(let H=0;H<D;H++){const C=U[H],{filter:{event:T,schema:M,table:G,filter:z}}=C,ee=k&&k[H];if(ee&&ee.event===T&&ee.schema===M&&ee.table===G&&ee.filter===z)$.push(Object.assign(Object.assign({},C),{id:ee.id}));else{this.unsubscribe(),this.state=dt.errored,a==null||a(Ds.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,a&&a(Ds.SUBSCRIBED);return}}).receive("error",k=>{this.state=dt.errored,a==null||a(Ds.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{a==null||a(Ds.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,l={}){return await this.send({type:"presence",event:"track",payload:a},l.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,l,i){return this.state===dt.joined&&a===ql.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,l,i)}async httpSend(a,l,i={}){var u;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(l==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=i.timeout)!==null&&u!==void 0?u:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const x=await m.json();p=x.error||x.message||p}catch{}return Promise.reject(new Error(p))}async send(a,l={}){var i,u;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=a,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=l.timeout)!==null&&i!==void 0?i:this.timeout);return await((u=x.body)===null||u===void 0?void 0:u.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,p;const x=this._push(a.type,a,l.timeout||this.timeout);a.type==="broadcast"&&!(!((p=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&d("ok"),x.receive("ok",()=>d("ok")),x.receive("error",()=>d("error")),x.receive("timeout",()=>d("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=dt.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(cs.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(u=>{i=new Zc(this,cs.leave,{},a),i.receive("ok",()=>{l(),u("ok")}).receive("timeout",()=>{l(),u("timed out")}).receive("error",()=>{u("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dt.closed,this.bindings={}}async _fetchWithTimeout(a,l,i){const u=new AbortController,d=setTimeout(()=>u.abort(),i),f=await this.socket.fetch(a,Object.assign(Object.assign({},l),{signal:u.signal}));return clearTimeout(d),f}_push(a,l,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Zc(this,a,l,i);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>fy){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(a,l,i){return l}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,l,i){var u,d;const f=a.toLocaleLowerCase(),{close:m,error:p,leave:x,join:y}=cs;if(i&&[m,p,x,y].indexOf(f)>=0&&i!==this._joinRef())return;let j=this._onMessage(f,l,i);if(l&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(k=>{var O,U,D;return((O=k.filter)===null||O===void 0?void 0:O.event)==="*"||((D=(U=k.filter)===null||U===void 0?void 0:U.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===f}).map(k=>k.callback(j,i)):(d=this.bindings[f])===null||d===void 0||d.filter(k=>{var O,U,D,$,H,C;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in k){const T=k.id,M=(O=k.filter)===null||O===void 0?void 0:O.event;return T&&((U=l.ids)===null||U===void 0?void 0:U.includes(T))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((D=l.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const T=(H=($=k==null?void 0:k.filter)===null||$===void 0?void 0:$.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return T==="*"||T===((C=l==null?void 0:l.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===f}).map(k=>{if(typeof j=="object"&&"ids"in j){const O=j.data,{schema:U,table:D,commit_timestamp:$,type:H,errors:C}=O;j=Object.assign(Object.assign({},{schema:U,table:D,commit_timestamp:$,eventType:H,new:{},old:{},errors:C}),this._getPayloadRecords(O))}k.callback(j,i)})}_isClosed(){return this.state===dt.closed}_isJoined(){return this.state===dt.joined}_isJoining(){return this.state===dt.joining}_isLeaving(){return this.state===dt.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,l,i){const u=a.toLocaleLowerCase(),d={type:u,filter:l,callback:i};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(a,l){const i=a.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===i&&Au.isEqual(u.filter,l))})),this}static isEqual(a,l){if(Object.keys(a).length!==Object.keys(l).length)return!1;for(const i in a)if(a[i]!==l[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(cs.close,{},a)}_onError(a){this._on(cs.error,{},l=>a(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dt.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const l={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(l.new=l0(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(l.old=l0(a.columns,a.old_record)),l}}const Fc=()=>{},gi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wy=[1e3,2e3,5e3,1e4],jy=1e4,Sy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _y{constructor(a,l){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hu,this.transport=null,this.heartbeatIntervalMs=gi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fc,this.ref=0,this.reconnectTimer=null,this.logger=Fc,this.conn=null,this.sendBuffer=[],this.serializer=new my,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>{let d;return u?d=u:typeof fetch>"u"?d=(...f)=>qn(async()=>{const{default:m}=await Promise.resolve().then(()=>Ha);return{default:m}},void 0).then(({default:m})=>m(...f)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((i=l==null?void 0:l.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${a}/${fu.websocket}`,this.httpEndpoint=yg(a),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l==null?void 0:l.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=oy.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const l=a.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:dy}))}disconnect(a,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},a?this.conn.close(a,l??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const l=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const a=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,l,i){this.logger(a,l,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ll.connecting:return La.Connecting;case Ll.open:return La.Open;case Ll.closing:return La.Closing;default:return La.Closed}}isConnected(){return this.connectionState()===La.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,l={config:{}}){const i=`realtime:${a}`,u=this.getChannels().find(d=>d.topic===i);if(u)return u;{const d=new Au(`realtime:${a}`,l,this);return this.channels.push(d),d}}push(a){const{topic:l,event:i,payload:u,ref:d}=a,f=()=>{this.encode(a,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${l} ${i} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(hy,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},gi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let l=this.channels.find(i=>i.topic===a&&(i._isJoined()||i._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${a}"`),l.unsubscribe())}_remove(a){this.channels=this.channels.filter(l=>l.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply")try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error")}catch(x){this.log("error","error in heartbeat callback",x)}l.ref&&l.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:u,payload:d,ref:f}=l,m=f?`(${f})`:"",p=d.status||"";this.log("receive",`${p} ${i} ${u} ${m}`.trim(),d),this.channels.filter(x=>x._isMember(i)).forEach(x=>x._trigger(u,d,f)),this._triggerStateCallbacks("message",l)})}_clearTimer(a){var l;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this.workerRef.terminate()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var l;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(cs.error))}_appendParams(a,l){if(Object.keys(l).length===0)return a;const i=a.match(/\?/)?"&":"?",u=new URLSearchParams(l);return`${a}${i}${u}`}_workerObjectUrl(a){let l;if(a)l=a;else{const i=new Blob([Sy],{type:"application/javascript"});l=URL.createObjectURL(i)}return l}_setConnectionState(a,l=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(a=null){let l;a?l=a:this.accessToken?l=await this.accessToken():l=this.accessTokenValue,this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(i=>{const u={access_token:l,version:uy};l&&i.updateJoinPayload(u),i.joinedOnce&&i._isJoined()&&i._push(cs.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(l=>{this.log("error",`error setting auth in ${a}`,l)})}_triggerStateCallbacks(a,l){try{this.stateChangeCallbacks[a].forEach(i=>{try{i(l)}catch(u){this.log("error",`error in ${a} callback`,u)}})}catch(i){this.log("error",`error triggering ${a} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new xg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var l,i,u,d,f,m,p,x,y;if(this.transport=(l=a==null?void 0:a.transport)!==null&&l!==void 0?l:null,this.timeout=(i=a==null?void 0:a.timeout)!==null&&i!==void 0?i:hu,this.heartbeatIntervalMs=(u=a==null?void 0:a.heartbeatIntervalMs)!==null&&u!==void 0?u:gi.HEARTBEAT_INTERVAL,this.worker=(d=a==null?void 0:a.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=a==null?void 0:a.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=a==null?void 0:a.heartbeatCallback)!==null&&m!==void 0?m:Fc,a!=null&&a.params&&(this.params=a.params),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=a==null?void 0:a.reconnectAfterMs)!==null&&p!==void 0?p:(v=>wy[v-1]||jy),this.encode=(x=a==null?void 0:a.encode)!==null&&x!==void 0?x:((v,j)=>j(JSON.stringify(v))),this.decode=(y=a==null?void 0:a.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a==null?void 0:a.workerUrl}}}class Cu extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function Fe(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class Ny extends Cu{constructor(a,l,i){super(a),this.name="StorageApiError",this.status=l,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gu extends Cu{constructor(a,l){super(a),this.name="StorageUnknownError",this.originalError=l}}const Ou=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...l)=>qn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ha);return{default:i}},void 0).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)},ky=()=>fe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qn(()=>Promise.resolve().then(()=>Ha),void 0)).Response:Response}),pu=o=>{if(Array.isArray(o))return o.map(l=>pu(l));if(typeof o=="function"||o!==Object(o))return o;const a={};return Object.entries(o).forEach(([l,i])=>{const u=l.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));a[u]=pu(i)}),a},Ey=o=>{if(typeof o!="object"||o===null)return!1;const a=Object.getPrototypeOf(o);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},Wc=o=>{var a;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(a=o.error)===null||a===void 0?void 0:a.message)||JSON.stringify(o)},Ty=(o,a,l)=>fe(void 0,void 0,void 0,function*(){const i=yield ky();o instanceof i&&!(l!=null&&l.noResolveJson)?o.json().then(u=>{const d=o.status||500,f=(u==null?void 0:u.statusCode)||d+"";a(new Ny(Wc(u),d,f))}).catch(u=>{a(new gu(Wc(u),u))}):a(new gu(Wc(o),o))}),Ay=(o,a,l,i)=>{const u={method:o,headers:(a==null?void 0:a.headers)||{}};return o==="GET"||!i?u:(Ey(i)?(u.headers=Object.assign({"Content-Type":"application/json"},a==null?void 0:a.headers),u.body=JSON.stringify(i)):u.body=i,a!=null&&a.duplex&&(u.duplex=a.duplex),Object.assign(Object.assign({},u),l))};function Gl(o,a,l,i,u,d){return fe(this,void 0,void 0,function*(){return new Promise((f,m)=>{o(l,Ay(a,i,u,d)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>Ty(p,m,i))})})}function Hl(o,a,l,i){return fe(this,void 0,void 0,function*(){return Gl(o,"GET",a,l,i)})}function os(o,a,l,i,u){return fe(this,void 0,void 0,function*(){return Gl(o,"POST",a,i,u,l)})}function xu(o,a,l,i,u){return fe(this,void 0,void 0,function*(){return Gl(o,"PUT",a,i,u,l)})}function Cy(o,a,l,i){return fe(this,void 0,void 0,function*(){return Gl(o,"HEAD",a,Object.assign(Object.assign({},l),{noResolveJson:!0}),i)})}function Ru(o,a,l,i,u){return fe(this,void 0,void 0,function*(){return Gl(o,"DELETE",a,i,u,l)})}class Oy{constructor(a,l){this.downloadFn=a,this.shouldThrowOnError=l}then(a,l){return this.execute().then(a,l)}execute(){return fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}})}}var vg;class Ry{constructor(a,l){this.downloadFn=a,this.shouldThrowOnError=l,this[vg]="BlobDownloadBuilder",this.promise=null}asStream(){return new Oy(this.downloadFn,this.shouldThrowOnError)}then(a,l){return this.getPromise().then(a,l)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}})}}vg=Symbol.toStringTag;const Dy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},o0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class My{constructor(a,l={},i,u){this.shouldThrowOnError=!1,this.url=a,this.headers=l,this.bucketId=i,this.fetch=Ou(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,l,i,u){return fe(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},o0),u);let m=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p)),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p))):(d=i,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),u!=null&&u.headers&&(m=Object.assign(Object.assign({},m),u.headers));const x=this._removeEmptyFolders(l),y=this._getFinalPath(x),v=yield(a=="PUT"?xu:os)(this.fetch,`${this.url}/object/${y}`,d,Object.assign({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:x,id:v.Id,fullPath:v.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Fe(d))return{data:null,error:d};throw d}})}upload(a,l,i){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,l,i)})}uploadToSignedUrl(a,l,i,u){return fe(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(a),f=this._getFinalPath(d),m=new URL(this.url+`/object/upload/sign/${f}`);m.searchParams.set("token",l);try{let p;const x=Object.assign({upsert:o0.upsert},u),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",x.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",x.cacheControl)):(p=i,y["cache-control"]=`max-age=${x.cacheControl}`,y["content-type"]=x.contentType);const v=yield xu(this.fetch,m.toString(),p,{headers:y});return{data:{path:d,fullPath:v.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Fe(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(a,l){return fe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(a);const u=Object.assign({},this.headers);l!=null&&l.upsert&&(u["x-upsert"]="true");const d=yield os(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:u}),f=new URL(this.url+d.url),m=f.searchParams.get("token");if(!m)throw new Cu("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:m},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}})}update(a,l,i){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,l,i)})}move(a,l,i){return fe(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:l,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}copy(a,l,i){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield os(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:l,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}createSignedUrl(a,l,i){return fe(this,void 0,void 0,function*(){try{let u=this._getFinalPath(a),d=yield os(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:l},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}createSignedUrls(a,l,i){return fe(this,void 0,void 0,function*(){try{const u=yield os(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:l,paths:a},{headers:this.headers}),d=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:u.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}download(a,l){const u=typeof(l==null?void 0:l.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((l==null?void 0:l.transform)||{}),f=d?`?${d}`:"",m=this._getFinalPath(a),p=()=>Hl(this.fetch,`${this.url}/${u}/${m}${f}`,{headers:this.headers,noResolveJson:!0});return new Ry(p,this.shouldThrowOnError)}info(a){return fe(this,void 0,void 0,function*(){const l=this._getFinalPath(a);try{const i=yield Hl(this.fetch,`${this.url}/object/info/${l}`,{headers:this.headers});return{data:pu(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}})}exists(a){return fe(this,void 0,void 0,function*(){const l=this._getFinalPath(a);try{return yield Cy(this.fetch,`${this.url}/object/${l}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fe(i)&&i instanceof gu){const u=i.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:i}}throw i}})}getPublicUrl(a,l){const i=this._getFinalPath(a),u=[],d=l!=null&&l.download?`download=${l.download===!0?"":l.download}`:"";d!==""&&u.push(d);const m=typeof(l==null?void 0:l.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((l==null?void 0:l.transform)||{});p!==""&&u.push(p);let x=u.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${x}`)}}}remove(a){return fe(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Fe(l))return{data:null,error:l};throw l}})}list(a,l,i){return fe(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},Dy),l),{prefix:a||""});return{data:yield os(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},i),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}listV2(a,l){return fe(this,void 0,void 0,function*(){try{const i=Object.assign({},a);return{data:yield os(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},l),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const l=[];return a.width&&l.push(`width=${a.width}`),a.height&&l.push(`height=${a.height}`),a.resize&&l.push(`resize=${a.resize}`),a.format&&l.push(`format=${a.format}`),a.quality&&l.push(`quality=${a.quality}`),l.join("&")}}const wg="2.78.0",jg={"X-Client-Info":`storage-js/${wg}`};class Uy{constructor(a,l={},i,u){this.shouldThrowOnError=!1;const d=new URL(a);u!=null&&u.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jg),l),this.fetch=Ou(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(a){return fe(this,void 0,void 0,function*(){try{const l=this.listBucketOptionsToQueryString(a);return{data:yield Hl(this.fetch,`${this.url}/bucket${l}`,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Fe(l))return{data:null,error:l};throw l}})}getBucket(a){return fe(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Fe(l))return{data:null,error:l};throw l}})}createBucket(a){return fe(this,arguments,void 0,function*(l,i={public:!1}){try{return{data:yield os(this.fetch,`${this.url}/bucket`,{id:l,name:l,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}updateBucket(a,l){return fe(this,void 0,void 0,function*(){try{return{data:yield xu(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}})}emptyBucket(a){return fe(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Fe(l))return{data:null,error:l};throw l}})}deleteBucket(a){return fe(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Fe(l))return{data:null,error:l};throw l}})}listBucketOptionsToQueryString(a){const l={};return a&&("limit"in a&&(l.limit=String(a.limit)),"offset"in a&&(l.offset=String(a.offset)),a.search&&(l.search=a.search),a.sortColumn&&(l.sortColumn=a.sortColumn),a.sortOrder&&(l.sortOrder=a.sortOrder)),Object.keys(l).length>0?"?"+new URLSearchParams(l).toString():""}}class zy{constructor(a,l={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jg),l),this.fetch=Ou(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return fe(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Fe(l))return{data:null,error:l};throw l}})}listBuckets(a){return fe(this,void 0,void 0,function*(){try{const l=new URLSearchParams;(a==null?void 0:a.limit)!==void 0&&l.set("limit",a.limit.toString()),(a==null?void 0:a.offset)!==void 0&&l.set("offset",a.offset.toString()),a!=null&&a.sortColumn&&l.set("sortColumn",a.sortColumn),a!=null&&a.sortOrder&&l.set("sortOrder",a.sortOrder),a!=null&&a.search&&l.set("search",a.search);const i=l.toString(),u=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Hl(this.fetch,u,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Fe(l))return{data:null,error:l};throw l}})}deleteBucket(a){return fe(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Fe(l))return{data:null,error:l};throw l}})}}const Du={"X-Client-Info":`storage-js/${wg}`,"Content-Type":"application/json"};class Sg extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Vt(o){return typeof o=="object"&&o!==null&&"__isStorageVectorsError"in o}class eu extends Sg{constructor(a,l,i){super(a),this.name="StorageVectorsApiError",this.status=l,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ly extends Sg{constructor(a,l){super(a),this.name="StorageVectorsUnknownError",this.originalError=l}}var c0;(function(o){o.InternalError="InternalError",o.S3VectorConflictException="S3VectorConflictException",o.S3VectorNotFoundException="S3VectorNotFoundException",o.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",o.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",o.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(c0||(c0={}));const Mu=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...l)=>qn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ha);return{default:i}},void 0).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)},By=o=>{if(typeof o!="object"||o===null)return!1;const a=Object.getPrototypeOf(o);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},u0=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),qy=(o,a,l)=>fe(void 0,void 0,void 0,function*(){if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!(l!=null&&l.noResolveJson)){const u=o.status||500,d=o;if(typeof d.json=="function")d.json().then(f=>{const m=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||u+"";a(new eu(u0(f),u,m))}).catch(()=>{const f=u+"",m=d.statusText||`HTTP ${u} error`;a(new eu(m,u,f))});else{const f=u+"",m=d.statusText||`HTTP ${u} error`;a(new eu(m,u,f))}}else a(new Ly(u0(o),o))}),Hy=(o,a,l,i)=>{const u={method:o,headers:(a==null?void 0:a.headers)||{}};return i?(By(i)?(u.headers=Object.assign({"Content-Type":"application/json"},a==null?void 0:a.headers),u.body=JSON.stringify(i)):u.body=i,Object.assign(Object.assign({},u),l)):u};function $y(o,a,l,i,u,d){return fe(this,void 0,void 0,function*(){return new Promise((f,m)=>{o(l,Hy(a,i,u,d)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;const x=p.headers.get("content-type");return!x||!x.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>qy(p,m,i))})})}function Gt(o,a,l,i,u){return fe(this,void 0,void 0,function*(){return $y(o,"POST",a,i,u,l)})}class Iy{constructor(a,l={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Du),l),this.fetch=Mu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(a){return fe(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}getIndex(a,l){return fe(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:l},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}listIndexes(a){return fe(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}deleteIndex(a,l){return fe(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:l},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}}class Vy{constructor(a,l={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Du),l),this.fetch=Mu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(a){return fe(this,void 0,void 0,function*(){try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Gt(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}getVectors(a){return fe(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}listVectors(a){return fe(this,void 0,void 0,function*(){try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:yield Gt(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}queryVectors(a){return fe(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}deleteVectors(a){return fe(this,void 0,void 0,function*(){try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Gt(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}}class Gy{constructor(a,l={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Du),l),this.fetch=Mu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return fe(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}getBucket(a){return fe(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}listBuckets(){return fe(this,arguments,void 0,function*(a={}){try{return{data:yield Gt(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}deleteBucket(a){return fe(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}}class Yy extends Gy{constructor(a,l={}){super(a,l.headers||{},l.fetch)}from(a){return new Py(this.url,this.headers,a,this.fetch)}}class Py extends Iy{constructor(a,l,i,u){super(a,l,u),this.vectorBucketName=i}createIndex(a){const l=Object.create(null,{createIndex:{get:()=>super.createIndex}});return fe(this,void 0,void 0,function*(){return l.createIndex.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const a=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return fe(this,arguments,void 0,function*(l={}){return a.listIndexes.call(this,Object.assign(Object.assign({},l),{vectorBucketName:this.vectorBucketName}))})}getIndex(a){const l=Object.create(null,{getIndex:{get:()=>super.getIndex}});return fe(this,void 0,void 0,function*(){return l.getIndex.call(this,this.vectorBucketName,a)})}deleteIndex(a){const l=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return fe(this,void 0,void 0,function*(){return l.deleteIndex.call(this,this.vectorBucketName,a)})}index(a){return new Ky(this.url,this.headers,this.vectorBucketName,a,this.fetch)}}class Ky extends Vy{constructor(a,l,i,u,d){super(a,l,d),this.vectorBucketName=i,this.indexName=u}putVectors(a){const l=Object.create(null,{putVectors:{get:()=>super.putVectors}});return fe(this,void 0,void 0,function*(){return l.putVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(a){const l=Object.create(null,{getVectors:{get:()=>super.getVectors}});return fe(this,void 0,void 0,function*(){return l.getVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const a=Object.create(null,{listVectors:{get:()=>super.listVectors}});return fe(this,arguments,void 0,function*(l={}){return a.listVectors.call(this,Object.assign(Object.assign({},l),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(a){const l=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return fe(this,void 0,void 0,function*(){return l.queryVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(a){const l=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return fe(this,void 0,void 0,function*(){return l.deleteVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Qy extends Uy{constructor(a,l={},i,u){super(a,l,i,u)}from(a){return new My(this.url,this.headers,a,this.fetch)}get vectors(){return new Yy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zy(this.url+"/iceberg",this.headers,this.fetch)}}const Jy="2.78.0";let zl="";typeof Deno<"u"?zl="deno":typeof document<"u"?zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zl="react-native":zl="node";const Xy={"X-Client-Info":`supabase-js-${zl}/${Jy}`},Zy={headers:Xy},Fy={schema:"public"},Wy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ev={},tv=o=>{let a;return o?a=o:typeof fetch>"u"?a=cg:a=fetch,(...l)=>a(...l)},sv=()=>typeof Headers>"u"?ug:Headers,av=(o,a,l)=>{const i=tv(l),u=sv();return async(d,f)=>{var m;const p=(m=await a())!==null&&m!==void 0?m:o;let x=new u(f==null?void 0:f.headers);return x.has("apikey")||x.set("apikey",o),x.has("Authorization")||x.set("Authorization",`Bearer ${p}`),i(d,Object.assign(Object.assign({},f),{headers:x}))}};function nv(o){return o.endsWith("/")?o:o+"/"}function lv(o,a){var l,i;const{db:u,auth:d,realtime:f,global:m}=o,{db:p,auth:x,realtime:y,global:v}=a,j={db:Object.assign(Object.assign({},p),u),auth:Object.assign(Object.assign({},x),d),realtime:Object.assign(Object.assign({},y),f),storage:{},global:Object.assign(Object.assign(Object.assign({},v),m),{headers:Object.assign(Object.assign({},(l=v==null?void 0:v.headers)!==null&&l!==void 0?l:{}),(i=m==null?void 0:m.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return o.accessToken?j.accessToken=o.accessToken:delete j.accessToken,j}function rv(o){const a=o==null?void 0:o.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(nv(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const _g="2.78.0",Dn=30*1e3,bu=3,tu=bu*Dn,iv="http://localhost:9999",ov="supabase.auth.token",cv={"X-Client-Info":`gotrue-js/${_g}`},yu="X-Supabase-Api-Version",Ng={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dv=600*1e3;class $l extends Error{constructor(a,l,i){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=i}}function ge(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class hv extends $l{constructor(a,l,i){super(a,l,i),this.name="AuthApiError",this.status=l,this.code=i}}function fv(o){return ge(o)&&o.name==="AuthApiError"}class Ba extends $l{constructor(a,l){super(a),this.name="AuthUnknownError",this.originalError=l}}class da extends $l{constructor(a,l,i,u){super(a,i,u),this.name=l,this.status=i}}class rs extends da{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mv(o){return ge(o)&&o.name==="AuthSessionMissingError"}class Tn extends da{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pi extends da{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class xi extends da{constructor(a,l=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gv(o){return ge(o)&&o.name==="AuthImplicitGrantRedirectError"}class d0 extends da{constructor(a,l=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vu extends da{constructor(a,l){super(a,"AuthRetryableFetchError",l,void 0)}}function su(o){return ge(o)&&o.name==="AuthRetryableFetchError"}class h0 extends da{constructor(a,l,i){super(a,"AuthWeakPasswordError",l,"weak_password"),this.reasons=i}}class wu extends da{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const ji="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),f0=` 	
\r=`.split(""),pv=(()=>{const o=new Array(128);for(let a=0;a<o.length;a+=1)o[a]=-1;for(let a=0;a<f0.length;a+=1)o[f0[a].charCodeAt(0)]=-2;for(let a=0;a<ji.length;a+=1)o[ji[a].charCodeAt(0)]=a;return o})();function m0(o,a,l){if(o!==null)for(a.queue=a.queue<<8|o,a.queuedBits+=8;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;l(ji[i]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;l(ji[i]),a.queuedBits-=6}}function kg(o,a,l){const i=pv[o];if(i>-1)for(a.queue=a.queue<<6|i,a.queuedBits+=6;a.queuedBits>=8;)l(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function g0(o){const a=[],l=f=>{a.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{yv(f,i,l)};for(let f=0;f<o.length;f+=1)kg(o.charCodeAt(f),u,d);return a.join("")}function xv(o,a){if(o<=127){a(o);return}else if(o<=2047){a(192|o>>6),a(128|o&63);return}else if(o<=65535){a(224|o>>12),a(128|o>>6&63),a(128|o&63);return}else if(o<=1114111){a(240|o>>18),a(128|o>>12&63),a(128|o>>6&63),a(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function bv(o,a){for(let l=0;l<o.length;l+=1){let i=o.charCodeAt(l);if(i>55295&&i<=56319){const u=(i-55296)*1024&65535;i=(o.charCodeAt(l+1)-56320&65535|u)+65536,l+=1}xv(i,a)}}function yv(o,a,l){if(a.utf8seq===0){if(o<=127){l(o);return}for(let i=1;i<6;i+=1)if((o>>7-i&1)===0){a.utf8seq=i;break}if(a.utf8seq===2)a.codepoint=o&31;else if(a.utf8seq===3)a.codepoint=o&15;else if(a.utf8seq===4)a.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|o&63,a.utf8seq-=1,a.utf8seq===0&&l(a.codepoint)}}function Un(o){const a=[],l={queue:0,queuedBits:0},i=u=>{a.push(u)};for(let u=0;u<o.length;u+=1)kg(o.charCodeAt(u),l,i);return new Uint8Array(a)}function vv(o){const a=[];return bv(o,l=>a.push(l)),new Uint8Array(a)}function qa(o){const a=[],l={queue:0,queuedBits:0},i=u=>{a.push(u)};return o.forEach(u=>m0(u,l,i)),m0(null,l,i),a.join("")}function wv(o){return Math.round(Date.now()/1e3)+o}function jv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const a=Math.random()*16|0;return(o=="x"?a:a&3|8).toString(16)})}const kt=()=>typeof window<"u"&&typeof document<"u",Da={tested:!1,writable:!1},Eg=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Da.tested)return Da.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Da.tested=!0,Da.writable=!0}catch{Da.tested=!0,Da.writable=!1}return Da.writable};function Sv(o){const a={},l=new URL(o);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((u,d)=>{a[d]=u})}catch{}return l.searchParams.forEach((i,u)=>{a[u]=i}),a}const Tg=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...l)=>qn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ha);return{default:i}},void 0).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)},_v=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Mn=async(o,a,l)=>{await o.setItem(a,JSON.stringify(l))},Ma=async(o,a)=>{const l=await o.getItem(a);if(!l)return null;try{return JSON.parse(l)}catch{return l}},ia=async(o,a)=>{await o.removeItem(a)};class Ti{constructor(){this.promise=new Ti.promiseConstructor((a,l)=>{this.resolve=a,this.reject=l})}}Ti.promiseConstructor=Promise;function au(o){const a=o.split(".");if(a.length!==3)throw new wu("Invalid JWT structure");for(let i=0;i<a.length;i++)if(!uv.test(a[i]))throw new wu("JWT not in base64url format");return{header:JSON.parse(g0(a[0])),payload:JSON.parse(g0(a[1])),signature:Un(a[2]),raw:{header:a[0],payload:a[1]}}}async function Nv(o){return await new Promise(a=>{setTimeout(()=>a(null),o)})}function kv(o,a){return new Promise((i,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await o(d);if(!a(d,null,f)){i(f);return}}catch(f){if(!a(d,f)){u(f);return}}})()})}function Ev(o){return("0"+o.toString(16)).substr(-2)}function Tv(){const a=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=l.length;let u="";for(let d=0;d<56;d++)u+=l.charAt(Math.floor(Math.random()*i));return u}return crypto.getRandomValues(a),Array.from(a,Ev).join("")}async function Av(o){const l=new TextEncoder().encode(o),i=await crypto.subtle.digest("SHA-256",l),u=new Uint8Array(i);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function Cv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const l=await Av(o);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function An(o,a,l=!1){const i=Tv();let u=i;l&&(u+="/PASSWORD_RECOVERY"),await Mn(o,`${a}-code-verifier`,u);const d=await Cv(i);return[d,i===d?"plain":"s256"]}const Ov=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rv(o){const a=o.headers.get(yu);if(!a||!a.match(Ov))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function Dv(o){if(!o)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(o<=a)throw new Error("JWT has expired")}function Mv(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Uv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cn(o){if(!Uv.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nu(){const o={};return new Proxy(o,{get:(a,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const i=l.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zv(o,a){return new Proxy(o,{get:(l,i,u)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const d=i.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,i,u)}return!a.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(l,i,u)}})}function p0(o){return JSON.parse(JSON.stringify(o))}const za=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Lv=[502,503,504];async function x0(o){var a;if(!_v(o))throw new vu(za(o),0);if(Lv.includes(o.status))throw new vu(za(o),o.status);let l;try{l=await o.json()}catch(d){throw new Ba(za(d),d)}let i;const u=Rv(o);if(u&&u.getTime()>=Ng["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?i=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(i=l.error_code),i){if(i==="weak_password")throw new h0(za(l),o.status,((a=l.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(i==="session_not_found")throw new rs}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new h0(za(l),o.status,l.weak_password.reasons);throw new hv(za(l),o.status||500,i)}const Bv=(o,a,l,i)=>{const u={method:o,headers:(a==null?void 0:a.headers)||{}};return o==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a==null?void 0:a.headers),u.body=JSON.stringify(i),Object.assign(Object.assign({},u),l))};async function ve(o,a,l,i){var u;const d=Object.assign({},i==null?void 0:i.headers);d[yu]||(d[yu]=Ng["2024-01-01"].name),i!=null&&i.jwt&&(d.Authorization=`Bearer ${i.jwt}`);const f=(u=i==null?void 0:i.query)!==null&&u!==void 0?u:{};i!=null&&i.redirectTo&&(f.redirect_to=i.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await qv(o,a,l+m,{headers:d,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function qv(o,a,l,i,u,d){const f=Bv(a,i,u,d);let m;try{m=await o(l,Object.assign({},f))}catch(p){throw console.error(p),new vu(za(p),0)}if(m.ok||await x0(m),i!=null&&i.noResolveJson)return m;try{return await m.json()}catch(p){await x0(p)}}function is(o){var a;let l=null;Iv(o)&&(l=Object.assign({},o),o.expires_at||(l.expires_at=wv(o.expires_in)));const i=(a=o.user)!==null&&a!==void 0?a:o;return{data:{session:l,user:i},error:null}}function b0(o){const a=is(o);return!a.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((l,i)=>l&&typeof i=="string",!0)&&(a.data.weak_password=o.weak_password),a}function oa(o){var a;return{data:{user:(a=o.user)!==null&&a!==void 0?a:o},error:null}}function Hv(o){return{data:o,error:null}}function $v(o){const{action_link:a,email_otp:l,hashed_token:i,redirect_to:u,verification_type:d}=o,f=Bn(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:a,email_otp:l,hashed_token:i,redirect_to:u,verification_type:d},p=Object.assign({},f);return{data:{properties:m,user:p},error:null}}function y0(o){return o}function Iv(o){return o.access_token&&o.refresh_token&&o.expires_in}const lu=["global","local","others"];class Vv{constructor({url:a="",headers:l={},fetch:i}){this.url=a,this.headers=l,this.fetch=Tg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,l=lu[0]){if(lu.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lu.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}}async inviteUserByEmail(a,l={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:oa})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async generateLink(a){try{const{options:l}=a,i=Bn(a,["options"]),u=Object.assign(Object.assign({},i),l);return"newEmail"in i&&(u.new_email=i==null?void 0:i.newEmail,delete u.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:$v,redirectTo:l==null?void 0:l.redirectTo})}catch(l){if(ge(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(a){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:oa})}catch(l){if(ge(l))return{data:{user:null},error:l};throw l}}async listUsers(a){var l,i,u,d,f,m,p;try{const x={nextPage:null,lastPage:0,total:0},y=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(l=a==null?void 0:a.page)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:"",per_page:(d=(u=a==null?void 0:a.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:y0});if(y.error)throw y.error;const v=await y.json(),j=(f=y.headers.get("x-total-count"))!==null&&f!==void 0?f:0,k=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return k.length>0&&(k.forEach(O=>{const U=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(O.split(";")[1].split("=")[1]);x[`${D}Page`]=U}),x.total=parseInt(j)),{data:Object.assign(Object.assign({},v),x),error:null}}catch(x){if(ge(x))return{data:{users:[]},error:x};throw x}}async getUserById(a){Cn(a);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:oa})}catch(l){if(ge(l))return{data:{user:null},error:l};throw l}}async updateUserById(a,l){Cn(a);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:l,headers:this.headers,xform:oa})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async deleteUser(a,l=!1){Cn(a);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:l},xform:oa})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async _listFactors(a){Cn(a.userId);try{const{data:l,error:i}=await ve(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:l,error:i}}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _deleteFactor(a){Cn(a.userId),Cn(a.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _listOAuthClients(a){var l,i,u,d,f,m,p;try{const x={nextPage:null,lastPage:0,total:0},y=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(l=a==null?void 0:a.page)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:"",per_page:(d=(u=a==null?void 0:a.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:y0});if(y.error)throw y.error;const v=await y.json(),j=(f=y.headers.get("x-total-count"))!==null&&f!==void 0?f:0,k=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return k.length>0&&(k.forEach(O=>{const U=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(O.split(";")[1].split("=")[1]);x[`${D}Page`]=U}),x.total=parseInt(j)),{data:Object.assign(Object.assign({},v),x),error:null}}catch(x){if(ge(x))return{data:{clients:[]},error:x};throw x}}async _createOAuthClient(a){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _getOAuthClient(a){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _updateOAuthClient(a,l){try{return await ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:l,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(a){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(a){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(ge(l))return{data:null,error:l};throw l}}}function v0(o={}){return{getItem:a=>o[a]||null,setItem:(a,l)=>{o[a]=l},removeItem:a=>{delete o[a]}}}const On={debug:!!(globalThis&&Eg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ag extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Gv extends Ag{}async function Yv(o,a,l){On.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,a);const i=new globalThis.AbortController;return a>0&&setTimeout(()=>{i.abort(),On.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async u=>{if(u){On.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,u.name);try{return await l()}finally{On.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,u.name)}}else{if(a===0)throw On.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Gv(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(On.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}function Pv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Cg(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function Kv(o){return parseInt(o,16)}function Qv(o){const a=new TextEncoder().encode(o);return"0x"+Array.from(a,i=>i.toString(16).padStart(2,"0")).join("")}function Jv(o){var a;const{chainId:l,domain:i,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:p,resources:x,scheme:y,uri:v,version:j}=o;{if(!Number.isInteger(l))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${l}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((a=o.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const k=Cg(o.address),O=y?`${y}://${i}`:i,U=o.statement?`${o.statement}
`:"",D=`${O} wants you to sign in with your Ethereum account:
${k}

${U}`;let $=`URI: ${v}
Version: ${j}
Chain ID: ${l}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&($+=`
Expiration Time: ${u.toISOString()}`),m&&($+=`
Not Before: ${m.toISOString()}`),p&&($+=`
Request ID: ${p}`),x){let H=`
Resources:`;for(const C of x){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);H+=`
- ${C}`}$+=H}return`${D}
${$}`}class ot extends Error{constructor({message:a,code:l,cause:i,name:u}){var d;super(a,{cause:i}),this.__isWebAuthnError=!0,this.name=(d=u??(i instanceof Error?i.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=l}}class Si extends ot{constructor(a,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:a}),this.name="WebAuthnUnknownError",this.originalError=l}}function Xv({error:o,options:a}){var l,i,u;const{publicKey:d}=a;if(!d)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(a.signal instanceof AbortSignal)return new ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((l=d.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(a.mediation==="conditional"&&((i=d.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new ot({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const f=window.location.hostname;if(Og(f)){if(d.rp.id!==f)return new ot({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function Zv({error:o,options:a}){const{publicKey:l}=a;if(!l)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(a.signal instanceof AbortSignal)return new ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new ot({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const i=window.location.hostname;if(Og(i)){if(l.rpId!==i)return new ot({message:`The RP ID "${l.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class Fv{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const Wv=new Fv;function ew(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:a,user:l,excludeCredentials:i}=o,u=Bn(o,["challenge","user","excludeCredentials"]),d=Un(a).buffer,f=Object.assign(Object.assign({},l),{id:Un(l.id).buffer}),m=Object.assign(Object.assign({},u),{challenge:d,user:f});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const x=i[p];m.excludeCredentials[p]=Object.assign(Object.assign({},x),{id:Un(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return m}function tw(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:a,allowCredentials:l}=o,i=Bn(o,["challenge","allowCredentials"]),u=Un(a).buffer,d=Object.assign(Object.assign({},i),{challenge:u});if(l&&l.length>0){d.allowCredentials=new Array(l.length);for(let f=0;f<l.length;f++){const m=l[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:Un(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function sw(o){var a;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o;return{id:o.id,rawId:o.id,response:{attestationObject:qa(new Uint8Array(o.response.attestationObject)),clientDataJSON:qa(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(a=l.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function aw(o){var a;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o,i=o.getClientExtensionResults(),u=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:qa(new Uint8Array(u.authenticatorData)),clientDataJSON:qa(new Uint8Array(u.clientDataJSON)),signature:qa(new Uint8Array(u.signature)),userHandle:u.userHandle?qa(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(a=l.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Og(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function w0(){var o,a;return!!(kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator==null?void 0:navigator.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.get)=="function")}async function nw(o){try{const a=await navigator.credentials.create(o);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Si("Browser returned unexpected credential type",a)}:{data:null,error:new Si("Empty credential response",a)}}catch(a){return{data:null,error:Xv({error:a,options:o})}}}async function lw(o){try{const a=await navigator.credentials.get(o);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Si("Browser returned unexpected credential type",a)}:{data:null,error:new Si("Empty credential response",a)}}catch(a){return{data:null,error:Zv({error:a,options:o})}}}const rw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},iw={userVerification:"preferred",hints:["security-key"]};function _i(...o){const a=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),l=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),i={};for(const u of o)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))i[d]=f;else if(l(f))i[d]=f;else if(a(f)){const m=i[d];a(m)?i[d]=_i(m,f):i[d]=_i(f)}else i[d]=f}return i}function ow(o,a){return _i(rw,o,a||{})}function cw(o,a){return _i(iw,o,a||{})}class uw{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:l,friendlyName:i,signal:u},d){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:a,webauthn:l});if(!f)return{data:null,error:m};const p=u??Wv.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:x}=f.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${i}`),x.displayName||(x.displayName=x.name)}switch(f.webauthn.type){case"create":{const x=ow(f.webauthn.credential_options.publicKey,d==null?void 0:d.create),{data:y,error:v}=await nw({publicKey:x,signal:p});return y?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const x=cw(f.webauthn.credential_options.publicKey,d==null?void 0:d.request),{data:y,error:v}=await lw(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:x,signal:p}));return y?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(f){return ge(f)?{data:null,error:f}:{data:null,error:new Ba("Unexpected error in challenge",f)}}}async _verify({challengeId:a,factorId:l,webauthn:i}){return this.client.mfa.verify({factorId:l,challengeId:a,webauthn:i})}async _authenticate({factorId:a,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:u}},d){if(!l)return{data:null,error:new $l("rpId is required for WebAuthn authentication")};try{if(!w0())return{data:null,error:new Ba("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:a,webauthn:{rpId:l,rpOrigins:i},signal:u},{request:d});if(!f)return{data:null,error:m};const{webauthn:p}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:p.type,rpId:l,rpOrigins:i,credential_response:p.credential_response}})}catch(f){return ge(f)?{data:null,error:f}:{data:null,error:new Ba("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:u},d){if(!l)return{data:null,error:new $l("rpId is required for WebAuthn registration")};try{if(!w0())return{data:null,error:new Ba("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===a&&j.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:m};const{data:p,error:x}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:l,rpOrigins:i},signal:u},{create:d});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:l,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:x}}catch(f){return ge(f)?{data:null,error:f}:{data:null,error:new Ba("Unexpected error in register",f)}}}}Pv();const dw={url:iv,storageKey:ov,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function j0(o,a,l){return await l()}const Rn={};class Il{get jwks(){var a,l;return(l=(a=Rn[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(a){Rn[this.storageKey]=Object.assign(Object.assign({},Rn[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,l;return(l=(a=Rn[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){Rn[this.storageKey]=Object.assign(Object.assign({},Rn[this.storageKey]),{cachedAt:a})}constructor(a){var l,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Il.nextInstanceID,Il.nextInstanceID+=1,this.instanceID>0&&kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},dw),a);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Vv({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Tg(u.fetch),this.lock=u.lock||j0,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:kt()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=Yv:this.lock=j0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new uw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Eg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=v0(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=v0(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_g}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{const l=Sv(window.location.href);let i="none";if(this._isImplicitGrantCallback(l)?i="implicit":await this._isPKCECallback(l)&&(i="pkce"),kt()&&this.detectSessionInUrl&&i!=="none"){const{data:u,error:d}=await this._getSessionFromURL(l,i);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),gv(d)){const p=(a=d.details)===null||a===void 0?void 0:a.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:m}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return ge(l)?{error:l}:{error:new Ba("Unexpected error during initialization",l)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var l,i,u;try{const d=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(l=a==null?void 0:a.options)===null||l===void 0?void 0:l.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(u=a==null?void 0:a.options)===null||u===void 0?void 0:u.captchaToken}},xform:is}),{data:f,error:m}=d;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:x,session:p},error:null}}catch(d){if(ge(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(a){var l,i,u;try{let d;if("email"in a){const{email:y,password:v,options:j}=a;let k=null,O=null;this.flowType==="pkce"&&([k,O]=await An(this.storage,this.storageKey)),d=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j==null?void 0:j.emailRedirectTo,body:{email:y,password:v,data:(l=j==null?void 0:j.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken},code_challenge:k,code_challenge_method:O},xform:is})}else if("phone"in a){const{phone:y,password:v,options:j}=a;d=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(i=j==null?void 0:j.data)!==null&&i!==void 0?i:{},channel:(u=j==null?void 0:j.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:is})}else throw new pi("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:x,session:p},error:null}}catch(d){if(ge(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(a){try{let l;if("email"in a){const{email:d,password:f,options:m}=a;l=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:b0})}else if("phone"in a){const{phone:d,password:f,options:m}=a;l=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:b0})}else throw new pi("You must provide either an email or phone number and a password");const{data:i,error:u}=l;return u?{data:{user:null,session:null},error:u}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Tn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:u})}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOAuth(a){var l,i,u,d;return await this._handleProviderSignIn(a.provider,{redirectTo:(l=a.options)===null||l===void 0?void 0:l.redirectTo,scopes:(i=a.options)===null||i===void 0?void 0:i.scopes,queryParams:(u=a.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=a.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:l}=a;switch(l){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}}async signInWithEthereum(a){var l,i,u,d,f,m,p,x,y,v,j;let k,O;if("message"in a)k=a.message,O=a.signature;else{const{chain:U,wallet:D,statement:$,options:H}=a;let C;if(kt())if(typeof D=="object")C=D;else{const me=window;if("ethereum"in me&&typeof me.ethereum=="object"&&"request"in me.ethereum&&typeof me.ethereum.request=="function")C=me.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(H!=null&&H.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=D}const T=new URL((l=H==null?void 0:H.url)!==null&&l!==void 0?l:window.location.href),M=await C.request({method:"eth_requestAccounts"}).then(me=>me).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=Cg(M[0]);let z=(i=H==null?void 0:H.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!z){const me=await C.request({method:"eth_chainId"});z=Kv(me)}const ee={domain:T.host,address:G,statement:$,uri:T.href,version:"1",chainId:z,nonce:(u=H==null?void 0:H.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=H==null?void 0:H.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=H==null?void 0:H.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=H==null?void 0:H.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(x=H==null?void 0:H.signInWithEthereum)===null||x===void 0?void 0:x.requestId,resources:(y=H==null?void 0:H.signInWithEthereum)===null||y===void 0?void 0:y.resources};k=Jv(ee),O=await C.request({method:"personal_sign",params:[Qv(k),G]})}try{const{data:U,error:D}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:O},!((v=a.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(j=a.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:is});if(D)throw D;return!U||!U.session||!U.user?{data:{user:null,session:null},error:new Tn}:(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:D})}catch(U){if(ge(U))return{data:{user:null,session:null},error:U};throw U}}async signInWithSolana(a){var l,i,u,d,f,m,p,x,y,v,j,k;let O,U;if("message"in a)O=a.message,U=a.signature;else{const{chain:D,wallet:$,statement:H,options:C}=a;let T;if(kt())if(typeof $=="object")T=$;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))T=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=$}const M=new URL((l=C==null?void 0:C.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in T&&T.signIn){const G=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),H?{statement:H}:null));let z;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")z=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)z=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)O=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),U=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${M.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...H?["",H,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(u=(i=C==null?void 0:C.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((f=C==null?void 0:C.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((p=C==null?void 0:C.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((x=C==null?void 0:C.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((v=(y=C==null?void 0:C.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...C.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const G=await T.signMessage(new TextEncoder().encode(O),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");U=G}}try{const{data:D,error:$}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:qa(U)},!((j=a.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(k=a.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:is});if($)throw $;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new Tn}:(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:$})}catch(D){if(ge(D))return{data:{user:null,session:null},error:D};throw D}}async _exchangeCodeForSession(a){const l=await Ma(this.storage,`${this.storageKey}-code-verifier`),[i,u]=(l??"").split("/");try{const{data:d,error:f}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:i},xform:is});if(await ia(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new Tn}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(ge(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(a){try{const{options:l,provider:i,token:u,access_token:d,nonce:f}=a,m=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:is}),{data:p,error:x}=m;return x?{data:{user:null,session:null},error:x}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Tn}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:x})}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOtp(a){var l,i,u,d,f;try{if("email"in a){const{email:m,options:p}=a;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await An(this.storage,this.storageKey));const{error:v}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(l=p==null?void 0:p.data)!==null&&l!==void 0?l:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:x,code_challenge_method:y},redirectTo:p==null?void 0:p.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in a){const{phone:m,options:p}=a,{data:x,error:y}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(u=p==null?void 0:p.data)!==null&&u!==void 0?u:{},create_user:(d=p==null?void 0:p.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(f=p==null?void 0:p.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:y}}throw new pi("You must provide either an email or phone number.")}catch(m){if(ge(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(a){var l,i;try{let u,d;"options"in a&&(u=(l=a.options)===null||l===void 0?void 0:l.redirectTo,d=(i=a.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:m}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:is});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,x=f.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:x,session:p},error:null}}catch(u){if(ge(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(a){var l,i,u;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await An(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(i=(l=a.options)===null||l===void 0?void 0:l.redirectTo)!==null&&i!==void 0?i:void 0}),!((u=a==null?void 0:a.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:Hv})}catch(d){if(ge(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:l},error:i}=a;if(i)throw i;if(!l)throw new rs;const{error:u}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return{data:{user:null,session:null},error:u}})}catch(a){if(ge(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{const l=`${this.url}/resend`;if("email"in a){const{email:i,type:u,options:d}=a,{error:f}=await ve(this.fetch,"POST",l,{headers:this.headers,body:{email:i,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in a){const{phone:i,type:u,options:d}=a,{data:f,error:m}=await ve(this.fetch,"POST",l,{headers:this.headers,body:{phone:i,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new pi("You must provide either an email or phone number and a type")}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async l=>l))}async _acquireLock(a,l){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await i,await l()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=l();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await a(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const l=await Ma(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?a=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const i=a.expires_at?a.expires_at*1e3-Date.now()<tu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",a.expires_at),!i){if(this.userStorage){const f=await Ma(this.userStorage,this.storageKey+"-user");f!=null&&f.user?a.user=f.user:a.user=nu()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=zv(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:u,error:d}=await this._callRefreshToken(a.refresh_token);return d?{data:{session:null},error:d}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:oa}):await this._useSession(async l=>{var i,u,d;const{data:f,error:m}=l;if(m)throw m;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rs}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:oa})})}catch(l){if(ge(l))return mv(l)&&(await this._removeSession(),await ia(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:l};throw l}}async updateUser(a,l={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,l))}async _updateUser(a,l={}){try{return await this._useSession(async i=>{const{data:u,error:d}=i;if(d)throw d;if(!u.session)throw new rs;const f=u.session;let m=null,p=null;this.flowType==="pkce"&&a.email!=null&&([m,p]=await An(this.storage,this.storageKey));const{data:x,error:y}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l==null?void 0:l.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:m,code_challenge_method:p}),jwt:f.access_token,xform:oa});if(y)throw y;return f.user=x.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new rs;const l=Date.now()/1e3;let i=l,u=!0,d=null;const{payload:f}=au(a.access_token);if(f.exp&&(i=f.exp,u=i<=l),u){const{data:m,error:p}=await this._callRefreshToken(a.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:p}=await this._getUser(a.access_token);if(p)throw p;d={access_token:a.access_token,refresh_token:a.refresh_token,user:m.user,token_type:"bearer",expires_in:i-l,expires_at:i},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(l){if(ge(l))return{data:{session:null,user:null},error:l};throw l}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async l=>{var i;if(!a){const{data:f,error:m}=l;if(m)throw m;a=(i=f.session)!==null&&i!==void 0?i:void 0}if(!(a!=null&&a.refresh_token))throw new rs;const{data:u,error:d}=await this._callRefreshToken(a.refresh_token);return d?{data:{user:null,session:null},error:d}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async _getSessionFromURL(a,l){try{if(!kt())throw new xi("No browser detected.");if(a.error||a.error_description||a.error_code)throw new xi(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new d0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xi("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new d0("No code detected.");const{data:H,error:C}=await this._exchangeCodeForSession(a.code);if(C)throw C;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:m,expires_at:p,token_type:x}=a;if(!d||!m||!f||!x)throw new xi("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(m);let j=y+v;p&&(j=parseInt(p));const k=j-y;k*1e3<=Dn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${v}s`);const O=j-v;y-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,j,y):y-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,j,y);const{data:U,error:D}=await this._getUser(d);if(D)throw D;const $={provider_token:i,provider_refresh_token:u,access_token:d,expires_in:v,expires_at:j,refresh_token:f,token_type:x,user:U.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:a.type},error:null}}catch(i){if(ge(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const l=await Ma(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&l)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async l=>{var i;const{data:u,error:d}=l;if(d)return{error:d};const f=(i=u.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:m}=await this.admin.signOut(f,a);if(m&&!(fv(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return a!=="others"&&(await this._removeSession(),await ia(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){const l=jv(),i={id:l,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:i}}}async _emitInitialSession(a){return await this._useSession(async l=>{var i,u;try{const{data:{session:d},error:f}=l;if(f)throw f;await((i=this.stateChangeEmitters.get(a))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(a))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",d),console.error(d)}})}async resetPasswordForEmail(a,l={}){let i=null,u=null;this.flowType==="pkce"&&([i,u]=await An(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:i,code_challenge_method:u,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(d){if(ge(d))return{data:null,error:d};throw d}}async getUserIdentities(){var a;try{const{data:l,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(a=l.user.identities)!==null&&a!==void 0?a:[]},error:null}}catch(l){if(ge(l))return{data:null,error:l};throw l}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var l;try{const{data:i,error:u}=await this._useSession(async d=>{var f,m,p,x,y;const{data:v,error:j}=d;if(j)throw j;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=a.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=a.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",k,{headers:this.headers,jwt:(y=(x=v.session)===null||x===void 0?void 0:x.access_token)!==null&&y!==void 0?y:void 0})});if(u)throw u;return kt()&&!(!((l=a.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:a.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(ge(i))return{data:{provider:a.provider,url:null},error:i};throw i}}async linkIdentityIdToken(a){return await this._useSession(async l=>{var i;try{const{error:u,data:{session:d}}=l;if(u)throw u;const{options:f,provider:m,token:p,access_token:x,nonce:y}=a,v=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=d==null?void 0:d.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:p,access_token:x,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:is}),{data:j,error:k}=v;return k?{data:{user:null,session:null},error:k}:!j||!j.session||!j.user?{data:{user:null,session:null},error:new Tn}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),{data:j,error:k})}catch(u){if(ge(u))return{data:{user:null,session:null},error:u};throw u}})}async unlinkIdentity(a){try{return await this._useSession(async l=>{var i,u;const{data:d,error:f}=l;if(f)throw f;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(u=(i=d.session)===null||i===void 0?void 0:i.access_token)!==null&&u!==void 0?u:void 0})})}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _refreshAccessToken(a){const l=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(l,"begin");try{const i=Date.now();return await kv(async u=>(u>0&&await Nv(200*Math.pow(2,u-1)),this._debug(l,"refreshing attempt",u),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:is})),(u,d)=>{const f=200*Math.pow(2,u);return d&&su(d)&&Date.now()+f-i<Dn})}catch(i){if(this._debug(l,"error",i),ge(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(l,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,l){const i=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",l,"url",i),kt()&&!l.skipBrowserRedirect&&window.location.assign(i),{data:{provider:a,url:i},error:null}}async _recoverAndRefresh(){var a,l;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const u=await Ma(this.storage,this.storageKey);if(u&&this.userStorage){let f=await Ma(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await Mn(this.userStorage,this.storageKey+"-user",f)),u.user=(a=f==null?void 0:f.user)!==null&&a!==void 0?a:nu()}else if(u&&!u.user&&!u.user){const f=await Ma(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(u.user=f.user,await ia(this.storage,this.storageKey+"-user"),await Mn(this.storage,this.storageKey,u)):u.user=nu()}if(this._debug(i,"session from storage",u),!this._isValidSession(u)){this._debug(i,"session is not valid"),u!==null&&await this._removeSession();return}const d=((l=u.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<tu;if(this._debug(i,`session has${d?"":" not"} expired with margin of ${tu}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),su(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(u.access_token);!m&&(f!=null&&f.user)?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(i,"error",u),console.error(u);return}finally{this._debug(i,"end")}}async _callRefreshToken(a){var l,i;if(!a)throw new rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Ti;const{data:d,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!d.session)throw new rs;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(u,"error",d),ge(d)){const f={data:null,error:d};return su(d)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(a,l,i=!0){const u=`#_notifyAllSubscribers(${a})`;this._debug(u,"begin",l,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:a,session:l});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(a,l)}catch(p){d.push(p)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const l=Object.assign({},a),i=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&l.user&&await Mn(this.userStorage,this.storageKey+"-user",{user:l.user});const u=Object.assign({},l);delete u.user;const d=p0(u);await Mn(this.storage,this.storageKey,d)}else{const u=p0(l);await Mn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await ia(this.storage,this.storageKey),await ia(this.storage,this.storageKey+"-code-verifier"),await ia(this.storage,this.storageKey+"-user"),this.userStorage&&await ia(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",a)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),Dn);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async l=>{const{data:{session:i}}=l;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((i.expires_at*1e3-a)/Dn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Dn}ms, refresh threshold is ${bu} ticks`),u<=bu&&await this._callRefreshToken(i.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof Ag)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const l=`#_onVisibilityChanged(${a})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,l,i){const u=[`provider=${encodeURIComponent(l)}`];if(i!=null&&i.redirectTo&&u.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&u.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[d,f]=await An(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(m.toString())}if(i!=null&&i.queryParams){const d=new URLSearchParams(i.queryParams);u.push(d.toString())}return i!=null&&i.skipBrowserRedirect&&u.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${a}?${u.join("&")}`}async _unenroll(a){try{return await this._useSession(async l=>{var i;const{data:u,error:d}=l;return d?{data:null,error:d}:await ve(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(i=u==null?void 0:u.session)===null||i===void 0?void 0:i.access_token})})}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _enroll(a){try{return await this._useSession(async l=>{var i,u;const{data:d,error:f}=l;if(f)return{data:null,error:f};const m=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:p,error:x}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=d==null?void 0:d.session)===null||i===void 0?void 0:i.access_token});return x?{data:null,error:x}:(a.factorType==="totp"&&p.type==="totp"&&(!((u=p==null?void 0:p.totp)===null||u===void 0)&&u.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:u,error:d}=l;if(d)return{data:null,error:d};const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?sw(a.webauthn.credential_response):aw(a.webauthn.credential_response)})}:{code:a.code}),{data:m,error:p}=await ve(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=u==null?void 0:u.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:p})})}catch(l){if(ge(l))return{data:null,error:l};throw l}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:u,error:d}=l;if(d)return{data:null,error:d};const f=await ve(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(i=u==null?void 0:u.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:ew(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:tw(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(ge(l))return{data:null,error:l};throw l}})}async _challengeAndVerify(a){const{data:l,error:i}=await this._challenge({factorId:a.factorId});return i?{data:null,error:i}:await this._verify({factorId:a.factorId,challengeId:l.id,code:a.code})}async _listFactors(){var a;const{data:{user:l},error:i}=await this.getUser();if(i)return{data:null,error:i};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(a=l==null?void 0:l.factors)!==null&&a!==void 0?a:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var a,l;const{data:{session:i},error:u}=await this.getSession();if(u)return{data:null,error:u};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=au(i.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((l=(a=i.user.factors)===null||a===void 0?void 0:a.filter(y=>y.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(m="aal2");const x=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async l=>{const{data:{session:i},error:u}=l;return u?{data:null,error:u}:i?await ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:i.access_token,xform:d=>({data:d,error:null})}):{data:null,error:new rs}})}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _approveAuthorization(a,l){try{return await this._useSession(async i=>{const{data:{session:u},error:d}=i;if(d)return{data:null,error:d};if(!u)return{data:null,error:new rs};const f=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&kt()&&!(l!=null&&l.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async _denyAuthorization(a,l){try{return await this._useSession(async i=>{const{data:{session:u},error:d}=i;if(d)return{data:null,error:d};if(!u)return{data:null,error:new rs};const f=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&kt()&&!(l!=null&&l.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async fetchJwk(a,l={keys:[]}){let i=l.keys.find(m=>m.kid===a);if(i)return i;const u=Date.now();if(i=this.jwks.keys.find(m=>m.kid===a),i&&this.jwks_cached_at+dv>u)return i;const{data:d,error:f}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,i=d.keys.find(m=>m.kid===a),!i)?null:i}async getClaims(a,l={}){try{let i=a;if(!i){const{data:k,error:O}=await this.getSession();if(O||!k.session)return{data:null,error:O};i=k.session.access_token}const{header:u,payload:d,signature:f,raw:{header:m,payload:p}}=au(i);l!=null&&l.allowExpired||Dv(d.exp);const x=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,l!=null&&l.keys?{keys:l.keys}:l==null?void 0:l.jwks);if(!x){const{error:k}=await this.getUser(i);if(k)throw k;return{data:{claims:d,header:u,signature:f},error:null}}const y=Mv(u.alg),v=await crypto.subtle.importKey("jwk",x,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,f,vv(`${m}.${p}`)))throw new wu("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}}}Il.nextInstanceID=0;const hw=Il;class fw extends hw{constructor(a){super(a)}}class mw{constructor(a,l,i){var u,d,f;this.supabaseUrl=a,this.supabaseKey=l;const m=rv(a);if(!l)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,x={db:Fy,realtime:ev,auth:Object.assign(Object.assign({},Wy),{storageKey:p}),global:Zy},y=lv(i??{},x);this.storageKey=(u=y.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(d=y.global.headers)!==null&&d!==void 0?d:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=y.auth)!==null&&f!==void 0?f:{},this.headers,y.global.fetch),this.fetch=av(l,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new iy(new URL("rest/v1",m).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new Qy(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new Fb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,l={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,l,i)}channel(a,l={config:{}}){return this.realtime.channel(a,l)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,l;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(l=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:l,detectSessionInUrl:i,storage:u,userStorage:d,storageKey:f,flowType:m,lock:p,debug:x},y,v){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fw({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),y),storageKey:f,autoRefreshToken:a,persistSession:l,detectSessionInUrl:i,storage:u,userStorage:d,flowType:m,lock:p,debug:x,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new _y(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a==null?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,i)=>{this._handleTokenChanged(l,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(a,l,i){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),l=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gw=(o,a,l)=>new mw(o,a,l);function pw(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const a=o.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}pw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xw="https://emqbuwjorozkzlbfonah.supabase.co",bw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVtcWJ1d2pvcm96a3psYmZvbmFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5Mjk2NDUsImV4cCI6MjA3ODUwNTY0NX0.L4b_fVqc7St_c4ZNsdEWlSMQO2PDr96UpLQjtYDhOOQ",Je=gw(xw,bw),yw=["pos","inventory","reports","staff","appointments","commissions","clients","tips","multi_branch","export","reminders","loyalty","tickets"],ss={pos:!0,inventory:!0,staff:!0,reports:!0,appointments:!1,commissions:!1,clients:!1,tips:!1,multi_branch:!1,export:!1,reminders:!1,loyalty:!1,tickets:!1},Vl={...ss,appointments:!0,commissions:!0,clients:!0,tips:!0,multi_branch:!0,export:!0,reminders:!0,tickets:!0};function Uu(){return!0}function zu(o){return`store_modules_${o}`}async function Ai(o){try{if(Uu()){const{data:l,error:i}=await Je.from("store_modules").select("module_name,is_enabled").eq("store_id",o);if(i)throw i;const u={...ss};return(l||[]).forEach(d=>{u[d.module_name]=!!d.is_enabled}),u}}catch(l){console.warn("Falling back to local module map",l)}const a=localStorage.getItem(zu(o));return a?JSON.parse(a):{...ss}}async function Rg(o,a,l){try{if(Uu()){const{error:u}=await Je.from("store_modules").upsert({store_id:o,module_name:a,is_enabled:l},{onConflict:"store_id,module_name"});if(u)throw u;return}}catch(u){console.warn("Supabase module update failed; using localStorage",u)}const i=await Ai(o);i[a]=l,localStorage.setItem(zu(o),JSON.stringify(i))}async function vw(o,a){const l=a==="premium"?Vl:ss;try{if(Uu()){const i=yw.map(d=>({store_id:o,module_name:d,is_enabled:!!l[d]})),{error:u}=await Je.from("store_modules").upsert(i,{onConflict:"store_id,module_name"});if(u)throw u;return}}catch(i){console.warn("Supabase seed failed; using localStorage",i)}localStorage.setItem(zu(o),JSON.stringify(l))}const ca={salon:{starter:["pos","inventory","reports","staff"],pro:["pos","inventory","reports","staff","appointments","commissions","tickets","clients","loyalty","tips","export","reminders"],scale:["pos","inventory","reports","staff","appointments","commissions","tickets","clients","loyalty","tips","export","reminders","multi_branch"]},restaurant:{starter:["pos","inventory","reports","staff","tables"],pro:["pos","inventory","reports","staff","tables","tips","loyalty","clients","export","reminders"],scale:["pos","inventory","reports","staff","tables","tips","loyalty","clients","export","reminders","multi_branch"]},laundry:{starter:["pos","inventory","reports","staff","tickets"],pro:["pos","inventory","reports","staff","tickets","commissions","clients","loyalty","export","reminders"],scale:["pos","inventory","reports","staff","tickets","commissions","clients","loyalty","export","reminders","multi_branch"]},sari_sari:{starter:["pos","inventory","reports","expenses","utang_ledger"],pro:["pos","inventory","reports","expenses","utang_ledger","clients","loyalty","export","reminders"],scale:["pos","inventory","reports","expenses","utang_ledger","clients","loyalty","export","reminders","multi_branch"]},pharmacy:{starter:["pos","inventory","reports","expenses","expiry_alerts"],pro:["pos","inventory","reports","expenses","expiry_alerts","clients","export","reminders","loyalty"],scale:["pos","inventory","reports","expenses","expiry_alerts","clients","export","reminders","loyalty","multi_branch"]},retail:{starter:["pos","inventory","reports","staff"],pro:["pos","inventory","reports","staff","clients","loyalty","export","reminders","tips"],scale:["pos","inventory","reports","staff","clients","loyalty","export","reminders","tips","multi_branch"]}};function ww({onClose:o,onStoreCreated:a}){const[l,i]=S.useState(!1),[u,d]=S.useState(""),[f,m]=S.useState("Starter"),[p,x]=S.useState(()=>Object.entries(ss).filter(([,M])=>!!M).map(([M])=>M)),[y,v]=S.useState({name:"",ownerFirstName:"",ownerMiddleName:"",ownerLastName:"",contactPhone:"",contactEmail:"",timezone:"UTC",businessType:"RESTAURANT",ownerPassword:""}),[j,k]=S.useState({}),[O,U]=S.useState(""),D=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Anchorage","Pacific/Honolulu","Europe/London","Europe/Paris","Asia/Tokyo","Asia/Shanghai","Asia/Hong_Kong","Australia/Sydney"],$=()=>{const M=new Set([...Object.keys(ss),...Object.keys(Vl)]);return Object.values(ca).forEach(G=>{Object.values(G).forEach(z=>z.forEach(ee=>M.add(ee)))}),Array.from(M)};function H(M,G,z){const ee=(M||"retail").toLowerCase(),me=ca[ee]??ca.retail;z(me[G]||[])}const C=M=>{const{name:G,value:z}=M.target;v(ee=>({...ee,[G]:z}))},T=async M=>{var G,z,ee,me,Y,I;if(M.preventDefault(),!y.name.trim()){d("Store name is required");return}if(!y.ownerFirstName.trim()){d("Owner first name is required");return}if(!y.ownerLastName.trim()){d("Owner last name is required");return}if(!j.province){d("Province is required");return}if(!j.city){d("City / Municipality is required");return}if(!j.barangay){d("Barangay is required");return}if(!O.trim()){d("Street address is required");return}if(!y.contactPhone.trim()){d("Contact phone is required");return}if(!y.contactEmail.trim()){d("Contact email is required");return}if(!y.ownerPassword.trim()){d("Owner password is required");return}i(!0),d("");try{const te=[y.ownerFirstName.trim(),y.ownerMiddleName.trim(),y.ownerLastName.trim()].filter(Boolean).join(" "),W={id:`store_${Date.now()}`,name:y.name.trim(),code:`STORE${Date.now().toString().slice(-4)}`,address:O.trim(),phone:y.contactPhone.trim(),email:y.contactEmail.trim(),ownerName:te,contactPhone:y.contactPhone.trim(),contactEmail:y.contactEmail.trim(),addressStructured:{street:O.trim(),province:((G=j.province)==null?void 0:G.province_name)||"",city:((z=j.city)==null?void 0:z.city_name)||"",barangay:((ee=j.barangay)==null?void 0:ee.brgy_name)||""},businessType:y.businessType,enabled:!0,settings:{storeName:y.name.trim(),storeAddress:[(me=j.barangay)==null?void 0:me.brgy_name,(Y=j.city)==null?void 0:Y.city_name,(I=j.province)==null?void 0:I.province_name].filter(Boolean).join(", "),contactInfo:te,phone:y.contactPhone.trim(),email:y.contactEmail.trim(),taxRate:0,lowStockThreshold:10,currency:"USD",timezone:y.timezone},createdAt:new Date,updatedAt:new Date},ie=await ua.createStore(W),F=Ib(ie,{name:te,email:y.contactEmail.trim(),phone:y.contactPhone.trim(),password:y.ownerPassword});try{await ua.updateStore(ie.id,{managerId:F.id})}catch{}try{await vw(ie.id,f==="Starter"?"free":"premium");const w=Array.from(new Set([...Object.keys(ss),...Object.keys(Vl),...Object.values(ca).flatMap(ne=>Object.values(ne).flat())])),P={};w.forEach(ne=>{P[ne]=p.includes(ne)}),await Promise.all(Object.entries(P).map(([ne,K])=>Rg(ie.id,ne,!!K)))}catch{}a(ie)}catch(te){d(te instanceof Error?te.message:"Failed to create store")}finally{i(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[95vw] max-w-3xl sm:max-w-4xl lg:max-w-5xl max-h-[92vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Store"}),r.jsx("button",{onClick:o,disabled:l,className:"text-slate-400 hover:text-slate-600 transition disabled:opacity-50",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("form",{onSubmit:T,className:"p-6 space-y-6",children:[u&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-700 text-sm font-medium",children:u})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Store Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:y.name,onChange:C,placeholder:"e.g., Main Branch",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ownerFirstName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Owner First Name *"}),r.jsx("input",{type:"text",id:"ownerFirstName",name:"ownerFirstName",value:y.ownerFirstName,onChange:C,placeholder:"e.g., Juan",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ownerMiddleName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Middle Name"}),r.jsx("input",{type:"text",id:"ownerMiddleName",name:"ownerMiddleName",value:y.ownerMiddleName,onChange:C,placeholder:"e.g., Santos",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ownerLastName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Last Name *"}),r.jsx("input",{type:"text",id:"ownerLastName",name:"ownerLastName",value:y.ownerLastName,onChange:C,placeholder:"e.g., Dela Cruz",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"contactPhone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone *"}),r.jsx("input",{type:"tel",id:"contactPhone",name:"contactPhone",value:y.contactPhone,onChange:C,placeholder:"e.g., +63 912 345 6789",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Email *"}),r.jsx("input",{type:"email",id:"contactEmail",name:"contactEmail",value:y.contactEmail,onChange:C,placeholder:"e.g., owner@store.com",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(L0,{value:j,onChange:k}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Street Address *"}),r.jsx("input",{type:"text",value:O,onChange:M=>U(M.target.value),placeholder:"House / Building / Street",disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"businessType",className:"block text-sm font-medium text-slate-700 mb-1",children:"Business Type *"}),r.jsxs("select",{id:"businessType",name:"businessType",value:y.businessType,onChange:C,disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition",children:[r.jsx("option",{value:"RESTAURANT",children:"Restaurant"}),r.jsx("option",{value:"SALON",children:"Salon"}),r.jsx("option",{value:"SARI_SARI",children:"Sari-Sari"}),r.jsx("option",{value:"LAUNDRY",children:"Laundry"}),r.jsx("option",{value:"PHARMACY",children:"Pharmacy"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Timezone"}),r.jsx("select",{id:"timezone",name:"timezone",value:y.timezone,onChange:C,disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition",children:D.map(M=>r.jsx("option",{value:M,children:M},M))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ownerPassword",className:"block text-sm font-medium text-slate-700 mb-1",children:"Owner Password *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",id:"ownerPassword",name:"ownerPassword",value:y.ownerPassword,onChange:C,placeholder:"Set or generate a password",disabled:l,className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"}),r.jsx("button",{type:"button",onClick:()=>{const M=Math.random().toString(36).slice(-10)+Math.random().toString(36).slice(-2);v(G=>({...G,ownerPassword:M}))},className:"px-3 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition",disabled:l,children:"Generate"})]}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Share this with the owner for future access. Store logins are currently disabled."})]}),r.jsxs("div",{className:"p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Modules for customer"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${f==="Starter"?"bg-slate-800 text-white":"bg-slate-100"}`,onClick:()=>{m("Starter"),H(y.businessType,"starter",x)},children:"Seed Starter"}),r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${f==="Pro"?"bg-amber-500 text-white":"bg-amber-100"}`,onClick:()=>{m("Pro"),H(y.businessType,"pro",x)},children:"Seed Pro"}),r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${f==="Scale"?"bg-emerald-500 text-white":"bg-emerald-100"}`,onClick:()=>{m("Scale"),H(y.businessType,"scale",x)},children:"Seed Scale"})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:$().map(M=>r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:p.includes(M),onChange:G=>{x(z=>G.target.checked?Array.from(new Set([...z,M])):z.filter(ee=>ee!==M))}}),r.jsx("span",{className:"capitalize",children:M.replace("_"," ")})]},M))})]}),r.jsxs("div",{className:"flex gap-3 pt-6 border-t border-slate-200",children:[r.jsx("button",{type:"button",onClick:o,disabled:l,className:"flex-1 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[l&&r.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l?"Creating...":"Create Store"]})]})]})]})})}function jw({store:o,onClose:a,onStoreUpdated:l}){var Yt;const[i,u]=S.useState(!1),[d,f]=S.useState(""),[m,p]=S.useState({name:o.name,ownerFirstName:"",ownerMiddleName:"",ownerLastName:"",phone:o.phone,email:o.email,taxRate:o.settings.taxRate,lowStockThreshold:o.settings.lowStockThreshold,timezone:o.settings.timezone,currency:o.settings.currency,enabled:o.enabled});S.useEffect(()=>{const se=(o.ownerName||"").trim();if(!se)return;const ye=se.split(/\s+/);if(ye.length===1)p(ke=>({...ke,ownerFirstName:ye[0]}));else if(ye.length===2)p(ke=>({...ke,ownerFirstName:ye[0],ownerLastName:ye[1]}));else{const ke=ye[0],Le=ye[ye.length-1],Ae=ye.slice(1,-1).join(" ");p(St=>({...St,ownerFirstName:ke,ownerMiddleName:Ae,ownerLastName:Le}))}},[o.ownerName]);const[x,y]=S.useState("Starter"),[v,j]=S.useState([]),[k,O]=S.useState({}),[U,D]=S.useState(((Yt=o.addressStructured)==null?void 0:Yt.street)||o.address||""),[$,H]=S.useState([]),[C,T]=S.useState(""),[M,G]=S.useState(""),[z,ee]=S.useState(""),[me,Y]=S.useState(""),[I,te]=S.useState(""),[W,ie]=S.useState("STAFF"),[F,w]=S.useState(!0),[P,ne]=S.useState(null),[K,re]=S.useState([]),_=ki();S.useEffect(()=>{Ai(o.id).then(se=>{const ye=Object.entries(se).filter(([,ke])=>!!ke).map(([ke])=>ke);j(ye),ye.includes("multi_branch")?y("Scale"):ye.includes("clients")||ye.includes("appointments")||ye.includes("loyalty")?y("Pro"):y("Starter")}).catch(()=>j(Object.entries(ss).filter(([,se])=>!!se).map(([se])=>se)))},[o.id]),S.useEffect(()=>{H(se=>se.filter(ye=>v.includes(ye)))},[v]),S.useEffect(()=>{try{const se=jt.getAll();re(se.filter(ye=>ye.storeIds.includes(o.id)))}catch{re([])}},[o.id]);const A=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Anchorage","Pacific/Honolulu","Europe/London","Europe/Paris","Asia/Tokyo","Asia/Shanghai","Asia/Hong_Kong","Australia/Sydney"],Z=["USD","PHP","EUR","GBP","JPY","CNY","AUD","CAD","SGD","HKD"],ae=S.useMemo(()=>{const se=new Set([...Object.keys(ss),...Object.keys(Vl)]);return Object.values(ca).forEach(ye=>{Object.values(ye).forEach(ke=>ke.forEach(Le=>se.add(Le)))}),Array.from(se)},[]),oe=(se,ye,ke)=>{const Le=(se||"retail").toLowerCase(),Ae=ca[Le]??ca.retail;ke(Ae[ye]||[])},de=se=>{const{name:ye,value:ke,type:Le}=se.target;p(Ae=>({...Ae,[ye]:Le==="checkbox"?se.target.checked:Le==="number"?parseFloat(ke):ke}))},je=S.useMemo(()=>Array.from(new Set([...v,...$])),[v,$]),Ze=()=>{T(""),G(""),ee(""),Y(""),te(""),ie("STAFF"),w(!0),H(se=>se.filter(ye=>v.includes(ye))),ne(null)},Ge=se=>{const[ye,ke,Le]=(()=>{const Ae=se.name.split(/\s+/);return Ae.length===1?[Ae[0],"",""]:Ae.length===2?[Ae[0],"",Ae[1]]:[Ae[0],Ae.slice(1,-1).join(" "),Ae[Ae.length-1]]})();T(ye),G(ke),ee(Le),Y(se.nickname||""),te(se.contactPhone||""),ie(se.role),w(se.isActive),H(se.modules?se.modules.filter(Ae=>v.includes(Ae)):[]),ne(se.id)},ct=se=>{if(se.preventDefault(),!C.trim()||!z.trim())return;const ke={name:[C.trim(),M.trim(),z.trim()].filter(Boolean).join(" "),nickname:me.trim()||void 0,role:W,storeIds:[o.id],contactPhone:I.trim()||void 0,isActive:F,modules:$};if(P){const Le=jt.update(P,ke);Le&&re(Ae=>Ae.map(St=>St.id===Le.id?Le:St))}else{const Le=jt.create(ke);re(Ae=>[...Ae,Le])}Ze()},Ms=async se=>{try{await _({message:`You are about to delete ${se.name}. This action cannot be undone.`,confirmButtonLabel:"Delete Staff"}),jt.delete(se.id),re(ye=>ye.filter(ke=>ke.id!==se.id)),P===se.id&&Ze()}catch{}},fa=(se,ye)=>{const ke=jt.update(se,{isActive:ye});ke&&re(Le=>Le.map(Ae=>Ae.id===se?ke:Ae))},Us=async se=>{var ye,ke,Le,Ae,St,zs,$a,Ia,ht;if(se.preventDefault(),!m.name.trim()){f("Store name is required");return}if(!U.trim()){f("Street address is required");return}if(!m.phone.trim()){f("Contact phone is required");return}if(!m.email.trim()){f("Contact email is required");return}u(!0),f("");try{const le=[m.ownerFirstName.trim(),m.ownerMiddleName.trim(),m.ownerLastName.trim()].filter(Boolean).join(" "),ce={...o,name:m.name.trim(),address:U.trim(),phone:m.phone.trim(),email:m.email.trim(),ownerName:le,enabled:m.enabled,settings:{...o.settings,storeName:m.name.trim(),storeAddress:[(ye=k.barangay)==null?void 0:ye.brgy_name,(ke=k.city)==null?void 0:ke.city_name,(Le=k.province)==null?void 0:Le.province_name].filter(Boolean).join(", "),phone:m.phone.trim(),email:m.email.trim(),taxRate:m.taxRate,lowStockThreshold:m.lowStockThreshold,timezone:m.timezone,currency:m.currency},addressStructured:{street:U.trim(),province:((Ae=k.province)==null?void 0:Ae.province_name)||((St=o.addressStructured)==null?void 0:St.province)||"",city:((zs=k.city)==null?void 0:zs.city_name)||(($a=o.addressStructured)==null?void 0:$a.city)||"",barangay:((Ia=k.barangay)==null?void 0:Ia.brgy_name)||((ht=o.addressStructured)==null?void 0:ht.barangay)||""},updatedAt:new Date},xe=await ua.updateStore(o.id,ce);try{const Ne=Array.from(new Set([...Object.keys(ss),...Object.keys(Vl),...Object.values(ca).flatMap(Be=>Object.values(Be).flat())])),De={};Ne.forEach(Be=>{De[Be]=v.includes(Be)}),await Promise.all(Object.entries(De).map(([Be,ms])=>Rg(o.id,Be,!!ms)))}catch{}l(xe)}catch(le){f(le instanceof Error?le.message:"Failed to update store")}finally{u(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[95vw] max-w-3xl sm:max-w-4xl lg:max-w-5xl max-h-[92vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Edit Store"}),r.jsx("button",{onClick:a,disabled:i,className:"text-slate-400 hover:text-slate-600 transition disabled:opacity-50",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("form",{onSubmit:Us,className:"p-6 space-y-4",children:[d&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-700 text-sm font-medium",children:d})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-slate-700 mb-1",children:"Store Code"}),r.jsx("input",{type:"text",id:"code",value:o.code,disabled:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-600 cursor-not-allowed"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Store codes cannot be changed"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Store Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:de,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Owner First Name *"}),r.jsx("input",{name:"ownerFirstName",value:m.ownerFirstName,onChange:de,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Middle Name"}),r.jsx("input",{name:"ownerMiddleName",value:m.ownerMiddleName,onChange:de,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Last Name *"}),r.jsx("input",{name:"ownerLastName",value:m.ownerLastName,onChange:de,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(L0,{value:k,onChange:O}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Street Address *"}),r.jsx("input",{type:"text",value:U,onChange:se=>D(se.target.value),disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone *"}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:m.phone,onChange:de,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Email *"}),r.jsx("input",{type:"email",id:"email",name:"email",value:m.email,onChange:de,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Timezone"}),r.jsx("select",{id:"timezone",name:"timezone",value:m.timezone,onChange:de,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition",children:A.map(se=>r.jsx("option",{value:se,children:se},se))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-slate-700 mb-1",children:"Currency"}),r.jsx("select",{id:"currency",name:"currency",value:m.currency,onChange:de,disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition",children:Z.map(se=>r.jsx("option",{value:se,children:se},se))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"taxRate",className:"block text-sm font-medium text-slate-700 mb-1",children:"Tax Rate (%)"}),r.jsx("input",{type:"number",id:"taxRate",name:"taxRate",value:m.taxRate,onChange:de,min:"0",max:"100",step:"0.01",disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-slate-700 mb-1",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",id:"lowStockThreshold",name:"lowStockThreshold",value:m.lowStockThreshold,onChange:de,min:"0",step:"1",disabled:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-slate-50 disabled:cursor-not-allowed transition"})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[r.jsx("input",{type:"checkbox",id:"enabled",name:"enabled",checked:m.enabled,onChange:de,disabled:i,className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500 disabled:cursor-not-allowed"}),r.jsx("label",{htmlFor:"enabled",className:"text-sm font-medium text-slate-700 cursor-pointer",children:"Store is Active"})]}),r.jsxs("div",{className:"p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Modules"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${x==="Starter"?"bg-slate-800 text-white":"bg-slate-100"}`,onClick:()=>{y("Starter"),oe(o.businessType||"retail","starter",j)},children:"Seed Starter"}),r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${x==="Pro"?"bg-amber-500 text-white":"bg-amber-100"}`,onClick:()=>{y("Pro"),oe(o.businessType||"retail","pro",j)},children:"Seed Pro"}),r.jsx("button",{type:"button",className:`px-2 py-1 rounded ${x==="Scale"?"bg-emerald-500 text-white":"bg-emerald-100"}`,onClick:()=>{y("Scale"),oe(o.businessType||"retail","scale",j)},children:"Seed Scale"})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:ae.map(se=>r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:v.includes(se),onChange:ye=>j(ke=>ye.target.checked?Array.from(new Set([...ke,se])):ke.filter(Le=>Le!==se))}),r.jsx("span",{className:"capitalize",children:se.replace("_"," ")})]},se))})]}),r.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-4",children:[r.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Store Staff"}),r.jsxs("form",{onSubmit:ct,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"First Name *"}),r.jsx("input",{value:C,onChange:se=>T(se.target.value),className:"w-full px-3 py-2 border rounded-md",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Middle Name"}),r.jsx("input",{value:M,onChange:se=>G(se.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Last Name *"}),r.jsx("input",{value:z,onChange:se=>ee(se.target.value),className:"w-full px-3 py-2 border rounded-md",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nickname"}),r.jsx("input",{value:me,onChange:se=>Y(se.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone"}),r.jsx("input",{value:I,onChange:se=>te(se.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),r.jsxs("select",{value:W,onChange:se=>ie(se.target.value),className:"w-full px-3 py-2 border rounded-md",children:[r.jsx("option",{value:"STAFF",children:"Staff"}),r.jsx("option",{value:"CASHIER",children:"Cashier"}),r.jsx("option",{value:"THERAPIST",children:"Therapist"}),r.jsx("option",{value:"BARBER",children:"Barber"}),r.jsx("option",{value:"WAITER",children:"Waiter"}),r.jsx("option",{value:"OTHER",children:"Other"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:F,onChange:se=>w(se.target.checked)}),r.jsx("span",{className:"text-sm",children:"Active"})]}),r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Module Access"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:je.map(se=>{const ye=v.includes(se),ke=`inline-flex items-center gap-2 px-2 py-1 border rounded-full text-xs ${ye?"bg-white":"bg-slate-100 text-slate-400"}`;return r.jsxs("label",{className:ke,children:[r.jsx("input",{type:"checkbox",disabled:!ye,checked:$.includes(se),onChange:Le=>{H(Ae=>Le.target.checked?Array.from(new Set([...Ae,se])):Ae.filter(St=>St!==se))}}),r.jsx("span",{children:se.replace("_"," ")})]},se)})})]}),r.jsxs("div",{className:"md:col-span-3 flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:P&&r.jsx("button",{type:"button",onClick:Ze,disabled:i,className:"px-4 py-2 border rounded-md text-sm",children:"Cancel"})}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:P?"Save Changes":"Add Staff"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Name"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Role"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Contact"}),r.jsx("th",{className:"px-4 py-2"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-200",children:[K.map(se=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-4 py-2 text-sm",children:[se.name,se.nickname?` (${se.nickname})`:""]}),r.jsx("td",{className:"px-4 py-2 text-sm",children:se.role}),r.jsx("td",{className:"px-4 py-2 text-sm",children:se.contactPhone||""}),r.jsxs("td",{className:"px-4 py-2 text-right space-x-2",children:[r.jsx("button",{onClick:()=>Ge(se),className:"px-3 py-1.5 text-xs rounded-md border bg-white hover:bg-slate-50",children:"Edit"}),r.jsx("button",{onClick:()=>Ms(se),className:"px-3 py-1.5 text-xs rounded-md border border-red-200 bg-red-50 text-red-700 hover:bg-red-100",children:"Delete"}),r.jsx("button",{onClick:()=>fa(se.id,!se.isActive),className:"px-3 py-1.5 text-xs rounded-md border bg-white hover:bg-slate-50",children:se.isActive?"Mark Inactive":"Mark Active"})]})]},se.id)),K.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"px-4 py-6 text-sm text-slate-500",colSpan:4,children:"No staff yet for this store."})})]})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-6 border-t border-slate-200",children:[r.jsx("button",{type:"button",onClick:a,disabled:i,className:"flex-1 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[i&&r.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i?"Saving...":"Save Changes"]})]})]})]})})}function Sw(){const[o,a]=S.useState([]),[l,i]=S.useState(!1),[u,d]=S.useState(null),[f,m]=S.useState(!1),[p,x]=S.useState(!0),[y,v]=S.useState({}),j=ki();S.useEffect(()=>{k()},[]);const k=async()=>{x(!0);try{const T=await ua.getAllStores();a(T||[]);try{const M=await Promise.all((T||[]).map(async z=>[z.id,await Ai(z.id)])),G={};M.forEach(([z,ee])=>{G[z]=ee}),v(G)}catch{}}catch(T){console.error("Failed to load stores:",T)}finally{x(!1)}},O=async T=>{let M=T;if(!T.businessType)try{M=await ua.updateStore(T.id,{businessType:"RESTAURANT",features:yi.RESTAURANT})}catch{}a([...o,M]),i(!1)},U=T=>{a(o.map(M=>M.id===T.id?T:M)),d(null),m(!1)},D=async T=>{try{await ua.deleteStore(T),a(o.filter(M=>M.id!==T))}catch(M){console.error("Failed to delete store:",M),alert("Failed to delete store")}},$=T=>{d(T),m(!0)},H=async T=>{try{await j({message:`You are about to delete "${T.name}". This action cannot be undone.`,confirmButtonLabel:"Delete Store"}),await D(T.id)}catch{}},C=T=>{const M=y[T]||{},G=Object.keys(M).filter(z=>M[z]);return G.includes("multi_branch")?"Scale":G.includes("clients")||G.includes("appointments")||G.includes("loyalty")?"Pro":"Starter"};return p?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"Loading stores..."})]})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("div",{className:"bg-white shadow-sm border-b border-slate-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Super Admin Dashboard"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Manage all stores and locations"})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Store"]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-600",children:[r.jsx("p",{className:"text-slate-600 text-sm font-medium",children:"Total Stores"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:o.length})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-600",children:[r.jsx("p",{className:"text-slate-600 text-sm font-medium",children:"Active Stores"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:o.filter(T=>T.enabled).length})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-amber-600",children:[r.jsx("p",{className:"text-slate-600 text-sm font-medium",children:"Disabled Stores"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:o.filter(T=>!T.enabled).length})]})]}),o.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-12 text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m5 0h5M9 7h.01M7 7a2 2 0 104 0 2 2 0 00-4 0z"})}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mt-4",children:"No stores yet"}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Create your first store to get started"}),r.jsx("button",{onClick:()=>i(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:"Create Store"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(T=>r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 hover:shadow-md transition overflow-hidden",children:[r.jsx("div",{className:`h-2 ${T.enabled?"bg-green-500":"bg-slate-300"}`}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:T.name}),r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${T.enabled?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:T.enabled?"Active":"Inactive"})}),r.jsxs("div",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900",children:T.address}),r.jsx("p",{children:T.settings.storeAddress})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("span",{children:T.email})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 00.948-.684l1.498-4.493a1 1 0 011.502-.684l1.498 4.493a1 1 0 00.948.684H19a2 2 0 012 2v1M3 5h18v1a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm0 8h18v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8z"})}),r.jsx("span",{children:T.phone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"font-medium text-slate-900",children:T.settings.timezone})]})]}),T.settings&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 text-xs text-slate-500 space-y-1",children:[r.jsxs("p",{children:[" Store Code: ",T.code]}),r.jsxs("p",{children:[" Currency: ",T.settings.currency]}),r.jsxs("p",{children:[" Tax Rate: ",T.settings.taxRate,"%"]})]}),r.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:[r.jsx("span",{className:"text-slate-500",children:"Business:"})," ",r.jsx("span",{className:"font-medium text-slate-800",children:T.businessType||"RESTAURANT"}),r.jsx("span",{className:"mx-2 text-slate-400",children:""}),r.jsx("span",{className:"text-slate-500",children:"Plan:"})," ",r.jsx("span",{className:"font-medium text-slate-800",children:C(T.id)})]}),r.jsxs("div",{className:"mt-6 flex gap-2",children:[r.jsxs("button",{onClick:()=>$(T),className:"flex-1 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition font-medium text-sm flex items-center justify-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),r.jsxs("button",{onClick:()=>H(T),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition font-medium text-sm flex items-center justify-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]},T.id))})]}),l&&r.jsx(ww,{onClose:()=>i(!1),onStoreCreated:O}),f&&u&&r.jsx(jw,{store:u,onClose:()=>{m(!1),d(null)},onStoreUpdated:U})]})}const _w=[{key:"pos",label:"POS"},{key:"inventory",label:"Inventory"},{key:"reports",label:"Sales Reports"},{key:"staff",label:"Staff"},{key:"appointments",label:"Appointments"},{key:"commissions",label:"Commissions"},{key:"clients",label:"Client Profiles"},{key:"tips",label:"Tips"},{key:"multi_branch",label:"Multi-Branch"},{key:"export",label:"Export (CSV/PDF)"},{key:"reminders",label:"Reminders (SMS/Email)"},{key:"loyalty",label:"Loyalty (Punch Card)"}];function Nw({storeId:o}){const[a,l]=S.useState(o||""),[i,u]=S.useState("Free"),[d,f]=S.useState({}),[m,p]=S.useState(!1);S.useEffect(()=>{o&&l(o)},[o]);async function x(){if(!a)return;p(!0);const[{data:k},{data:O}]=await Promise.all([Je.from("stores").select("store_plan").eq("id",a).maybeSingle(),Je.from("store_modules").select("module_name,is_enabled").eq("store_id",a)]);k&&u(k.store_plan??"Free");const U={};(O??[]).forEach(D=>U[D.module_name]=D.is_enabled),f(U),p(!1)}S.useEffect(()=>{x()},[a]);async function y(k){u(k),await Je.from("stores").update({store_plan:k}).eq("id",a),await x()}async function v(k,O){f(U=>({...U,[k]:O})),await Je.from("store_modules").upsert({store_id:a,module_name:k,is_enabled:O},{onConflict:"store_id,module_name"})}const j=S.useMemo(()=>_w.map(k=>({...k,enabled:!!d[k.key]})),[d]);return a?m?r.jsx("div",{className:"p-4",children:"Loading"}):r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Store Modules"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm opacity-70",children:"Plan:"}),r.jsx("button",{className:`px-3 py-1 rounded ${i==="Free"?"bg-black text-white":"border"}`,onClick:()=>y("Free"),children:"Free"}),r.jsx("button",{className:`px-3 py-1 rounded ${i==="Premium"?"bg-black text-white":"border"}`,onClick:()=>y("Premium"),children:"Premium"})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-2",children:j.map(k=>r.jsxs("label",{className:"flex items-center gap-2 border rounded p-2",children:[r.jsx("input",{type:"checkbox",checked:k.enabled,onChange:O=>v(k.key,O.target.checked)}),r.jsx("span",{children:k.label}),r.jsx("span",{className:"ml-auto text-xs px-2 py-0.5 rounded border",children:k.key})]},k.key))})]}):r.jsx("div",{className:"p-4",children:"Set storeId in code or via a selector."})}const ru=({onSuccess:o})=>{const[a,l]=S.useState(""),[i,u]=S.useState(""),[d,f]=S.useState(!1),[m,p]=S.useState(null),x=async y=>{y.preventDefault(),p(null),f(!0);try{await Bb(a,i),o?o():window.location.hash="#/admin"}catch(v){p((v==null?void 0:v.message)||"Login failed")}finally{f(!1)}};return r.jsxs("div",{className:"max-w-md w-full mx-auto bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100",children:"Super Admin Login"}),r.jsx("p",{className:"text-sm mb-6 text-slate-500 dark:text-slate-400",children:"Manage customer stores and tenants."}),m&&r.jsx("div",{className:"mb-4 text-sm text-red-600 dark:text-red-400",children:m}),r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),r.jsx("input",{type:"email",className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:a,onChange:y=>l(y.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Password"}),r.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:i,onChange:y=>u(y.target.value),required:!0})]}),r.jsx("button",{type:"submit",disabled:d,className:"w-full py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white font-medium disabled:opacity-60",children:d?"Signing in...":"Sign In"})]})]})},kw=({stores:o,onSuccess:a})=>{const[l,i]=S.useState(o||[]),[u,d]=S.useState(""),[f,m]=S.useState(""),[p,x]=S.useState(""),[y,v]=S.useState(!1),[j,k]=S.useState(null),[O,U]=S.useState([]);S.useEffect(()=>{let $=!0;return(async()=>{if(o&&o.length){u||d(o[0].id);return}try{const C=await ua.getAllStores();$&&(i(C),!u&&C.length>0&&d(C[0].id))}catch{}})(),()=>{$=!1}},[o]),S.useEffect(()=>{var C;const $=u||((C=l[0])==null?void 0:C.id)||"";if(!$)return;let H=Km();if((!H||H.length===0)&&l.find(M=>M.id===$)&&(H=Pm()),U(H||[]),!f&&H&&H.length>0){const T=H.find(M=>M.role==="store_manager");m((T||H[0]).email)}},[u,l]);const D=async $=>{var H;$.preventDefault(),k(null),v(!0);try{const C=u||((H=l[0])==null?void 0:H.id)||"",T=await qb({storeId:C,email:f,password:p});a?a(T.storeId||C):window.location.hash="#/"}catch(C){k((C==null?void 0:C.message)||"Login failed")}finally{v(!1)}};return r.jsxs("div",{className:"max-w-md w-full mx-auto bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100",children:"Store Login"}),r.jsx("p",{className:"text-sm mb-6 text-slate-500 dark:text-slate-400",children:"Sign in to manage your store or branches."}),j&&r.jsx("div",{className:"mb-4 text-sm text-red-600 dark:text-red-400",children:j}),r.jsxs("form",{onSubmit:D,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Store"}),r.jsxs("select",{className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:u,onChange:$=>{const H=$.target.value;d(H);try{let C=Km(H);if(!C||C.length===0){const T=l.find(M=>M.id===H);T&&(C=Pm(T))}if(C&&C.length>0){const T=C.find(M=>M.role==="store_manager");m((T||C[0]).email)}}catch{}},children:[r.jsx("option",{value:"",disabled:l.length>0,children:"Select a store"}),l.map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),r.jsx("input",{type:"email",className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:f,onChange:$=>m($.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Password"}),r.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:p,onChange:$=>x($.target.value),required:!0})]}),r.jsx("button",{type:"submit",disabled:y||l.length===0,className:"w-full py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white font-medium disabled:opacity-60",children:y?"Signing in...":"Sign In"})]}),l.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 mb-2",children:"Test Logins"}),r.jsx("div",{className:"flex flex-col gap-2",children:O&&O.map($=>r.jsxs("button",{onClick:async H=>{H.preventDefault(),k(null),v(!0);try{await $b($),a?a($.storeId):window.location.hash="#/"}catch(C){k((C==null?void 0:C.message)||"Login failed")}finally{v(!1)}},className:"w-full py-2 rounded-md border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 hover:bg-slate-100",children:["Login as ",$.role.replace("_"," ")," (",$.email,")"]},$.email))}),r.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Passwords: manager123, cashier123"})]}),r.jsxs("div",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:["Super admin? ",r.jsx("a",{className:"text-indigo-600",href:"#/login-admin",children:"Go to Super Admin Login"})]})]})},Ew=()=>r.jsxs("div",{className:"max-w-xl w-full mx-auto bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100",children:"Welcome to myPOS"}),r.jsx("p",{className:"text-sm mb-6 text-slate-500 dark:text-slate-400",children:"Choose how you want to sign in."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("a",{href:"#/login-store",className:"block p-4 rounded-md border border-slate-200 dark:border-slate-700 hover:border-indigo-400 hover:shadow transition",children:[r.jsx("div",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Owner Login"}),r.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Access POS, inventory and reports."})]}),r.jsxs("a",{href:"#/login-admin",className:"block p-4 rounded-md border border-slate-200 dark:border-slate-700 hover:border-indigo-400 hover:shadow transition",children:[r.jsx("div",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Super Admin"}),r.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Manage customer stores and tenants."})]})]})]}),Tw=["cash","card","gcash","other"],Aw=({cartItems:o,subtotal:a,tax:l,discount:i,total:u,settings:d,staff:f,onClose:m,onConfirm:p})=>{const[x,y]=S.useState("Cash"),[v,j]=S.useState(""),[k,O]=S.useState(""),[U,D]=S.useState("cash"),[$,H]=S.useState(!1),[C,T]=S.useState({}),M=parseFloat(k||"0"),G=$?Object.values(C).reduce((Y,I)=>Y+parseFloat(I||"0"),0):0,z=S.useMemo(()=>{const Y=parseFloat(v);return x==="Cash"&&!isNaN(Y)&&Y>=u?Y-u:0},[x,v,u]),ee=S.useMemo(()=>{if(x==="Card")return M>=0;const Y=parseFloat(v);return!isNaN(Y)&&Y>=u},[x,v,u,M]),me=()=>{const Y={paymentMethod:x,tipAmount:M>0?M:void 0,tipMethod:M>0?U:void 0,allocations:M>0&&$?f.map(I=>({staffId:I.id,amount:parseFloat(C[I.id]||"0")})).filter(I=>I.amount>0):void 0};p(Y)};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[92vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-slate-700",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Confirm Order"}),r.jsx("button",{onClick:m,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",children:r.jsx(Ni,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"flex-1 overflow-hidden p-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[r.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2",children:[r.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Order Summary"}),o.length===0&&r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cart is empty."}),o.map(Y=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[Y.quantity," x ",Y.name]}),r.jsxs("span",{className:"text-slate-800 dark:text-slate-200",children:["",(Y.price*Y.quantity).toFixed(2)]})]},Y.id)),r.jsx("div",{className:"border-t border-dashed border-slate-300 dark:border-slate-600 my-2"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Subtotal"}),r.jsxs("span",{children:["",a.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Discount"}),r.jsxs("span",{className:"text-green-600",children:["- ",i.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Tax (",d.taxRate,"%)"]}),r.jsxs("span",{children:["",l.toFixed(2)]})]})]}),r.jsx("div",{className:"border-t border-slate-300 dark:border-slate-600 my-2"}),r.jsxs("div",{className:"flex justify-between text-2xl font-bold text-slate-800 dark:text-slate-200",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",u.toFixed(2)]})]})]}),r.jsxs("div",{className:"space-y-4 overflow-y-auto pl-2 bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Payment Method"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>y("Cash"),className:`py-3 rounded-md text-sm font-bold transition-colors ${x==="Cash"?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-white dark:bg-slate-700"}`,children:"CASH"}),r.jsx("button",{onClick:()=>y("Card"),className:`py-3 rounded-md text-sm font-bold transition-colors ${x==="Card"?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-white dark:bg-slate-700"}`,children:"CARD"})]}),x==="Cash"?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount Tendered ()"}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[[1e3,500,100].map(Y=>r.jsxs("button",{type:"button",className:`px-3 py-2 text-sm font-semibold rounded-md border ${v===Y.toString()?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200"}`,onClick:()=>j(Y.toString()),children:["",Y.toLocaleString()]},Y)),r.jsx("button",{type:"button",className:"px-3 py-2 text-sm font-semibold rounded-md border bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200",onClick:()=>j(""),children:"Clear"})]}),r.jsx("input",{id:"amountTendered",type:"number",value:v,onChange:Y=>j(Y.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",placeholder:"Enter amount from customer",autoFocus:!0})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/50 p-3 rounded-md",children:[r.jsx("span",{children:"Change Due"}),r.jsxs("span",{children:["",z.toFixed(2)]})]})]}):r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Process the card payment externally, then confirm below."}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-xs font-medium text-slate-500",children:"Tip amount"}),r.jsx("input",{type:"number",step:"0.01",value:k,onChange:Y=>O(Y.target.value),placeholder:"0.00",className:"w-full rounded-md border border-slate-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500/40 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Tw.map(Y=>r.jsx("button",{type:"button",className:`px-3 py-1 rounded-md text-xs font-semibold ${U===Y?"bg-indigo-600 text-white":"border border-slate-300 text-slate-600 dark:text-slate-200"}`,onClick:()=>D(Y),children:Y.toUpperCase()},Y))}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-600",children:[r.jsx("input",{type:"checkbox",checked:$,onChange:Y=>H(Y.target.checked),className:"h-4 w-4 rounded border border-slate-300 text-indigo-600 focus:ring-indigo-500"}),"Assign tip to staff"]}),$&&r.jsxs("div",{className:"space-y-2",children:[f.map(Y=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-600 flex-1",children:Y.name}),r.jsx("input",{type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"w-24 rounded-md border border-slate-300 px-2 py-1 text-sm text-right",value:C[Y.id]??"",onChange:I=>T(te=>({...te,[Y.id]:I.target.value}))})]},Y.id)),r.jsxs("p",{className:"text-[11px] text-slate-500",children:["Allocated ",G.toFixed(2)," / ",M.toFixed(2)]})]})]}),$&&Math.abs(G-M)>.01&&r.jsx("p",{className:"text-[11px] text-red-600",children:"Allocated amounts must total the tip before confirming."})]})]})}),r.jsx("div",{className:"p-4 border-t dark:border-slate-700 bg-white dark:bg-slate-800",children:r.jsx("button",{onClick:me,disabled:!ee||$&&M>0&&Math.abs(G-M)>.01,className:"w-full bg-green-600 text-white font-bold py-3 rounded-md hover:bg-green-700 transition-colors disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:cursor-not-allowed",children:"Confirm Payment"})})]})})},Cw=({onClose:o,onApply:a,subtotal:l,currentDiscount:i})=>{const[u,d]=S.useState("pwd"),[f,m]=S.useState("percent"),[p,x]=S.useState("");S.useEffect(()=>{i&&(i.type==="percent"&&i.value===20?d("pwd"):(d("manager"),m(i.type),x(i.value)))},[i]);const y=S.useMemo(()=>{if(u==="pwd")return l*.2;if(p===""||p<0)return 0;if(f==="percent"){const j=l*(p/100);return Math.min(l,j)}return Math.min(l,p)},[u,f,p,l]),v=()=>{u==="pwd"?a({type:"percent",value:20}):p!==""&&p>0&&a({type:f,value:p})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-sm",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-slate-700",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Apply Discount"}),r.jsx("button",{onClick:o,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",children:r.jsx(Ni,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Discount Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>d("pwd"),className:`py-3 rounded-md text-sm font-bold transition-colors ${u==="pwd"?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-white dark:bg-slate-700"}`,children:"PWD Discount (20%)"}),r.jsx("button",{onClick:()=>d("manager"),className:`py-3 rounded-md text-sm font-bold transition-colors ${u==="manager"?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-white dark:bg-slate-700"}`,children:"Manager's Discount"})]})]}),u==="manager"&&r.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-lg space-y-4",children:[r.jsxs("div",{className:"flex rounded-md shadow-sm",children:[r.jsx("button",{onClick:()=>m("percent"),className:`px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-l-md text-sm font-medium transition-colors ${f==="percent"?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:"Percent (%)"}),r.jsx("button",{onClick:()=>m("fixed"),className:`px-4 py-2 border-y border-r border-slate-300 dark:border-slate-600 rounded-r-md text-sm font-medium transition-colors ${f==="fixed"?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:"Fixed ()"})]}),r.jsx("input",{type:"number",value:p,onChange:j=>x(parseFloat(j.target.value)||""),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",placeholder:f==="percent"?"e.g., 10 for 10%":"e.g., 50 for 50",min:"0",autoFocus:!0})]}),r.jsxs("div",{className:"text-center bg-indigo-50 dark:bg-indigo-900/50 p-3 rounded-md",children:[r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Discount to be applied:"}),r.jsxs("p",{className:"font-bold text-xl text-indigo-600 dark:text-indigo-300",children:["",y.toFixed(2)]})]})]}),r.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 px-6 py-4 flex justify-end",children:r.jsx("button",{onClick:v,className:"w-full px-4 py-3 text-sm font-bold text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Apply Discount"})})]})})},Ow=({product:o,onClose:a,onAddToCart:l})=>{const[i,u]=S.useState(1),d=o.stock<=0,f=o.stock===1/0?999:o.stock,m=v=>{const j=Math.max(1,Math.min(f,parseInt(v.target.value)||1));u(j)},p=()=>{l(i),a()},x=()=>{u(v=>Math.min(v+1,f))},y=()=>{u(v=>Math.max(v-1,1))};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-6 max-w-sm w-full mx-4 space-y-6",children:[r.jsxs("div",{children:[r.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-full h-40 object-cover rounded-lg mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:o.name}),o.description&&r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:o.description}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-3xl font-bold text-indigo-600",children:["",o.price.toFixed(2)]}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Cost: ",o.cost.toFixed(2)]})]}),o.stock!==1/0&&r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Stock"}),r.jsx("p",{className:`text-lg font-bold ${o.stock<=0?"text-red-600":"text-green-600"}`,children:o.stock})]})]})]}),!d&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Quantity"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:y,className:"w-10 h-10 rounded-lg bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white font-bold hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",disabled:i<=1,children:""}),r.jsx("input",{type:"number",value:i,onChange:m,className:"flex-grow text-center text-lg font-bold border-2 border-indigo-600 rounded-lg dark:bg-slate-700 dark:text-white dark:border-indigo-500 px-3 py-2",min:"1",max:f}),r.jsx("button",{onClick:x,className:"w-10 h-10 rounded-lg bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white font-bold hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",disabled:i>=f,children:"+"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:a,className:"flex-1 px-4 py-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white font-semibold rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:p,className:"flex-1 px-4 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition-colors",children:["Add to Order (",i,")"]})]})]}),d&&r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("p",{className:"text-lg font-semibold text-red-600",children:"Out of Stock"}),r.jsx("button",{onClick:a,className:"w-full px-4 py-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white font-semibold rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Close"})]})]})})},S0=({label:o,icon:a,href:l,description:i})=>r.jsx("a",{href:l,className:"group block bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg hover:-translate-y-1 transition-all duration-300 text-left",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-500/20 p-3 rounded-full",children:_u.cloneElement(a,{className:"h-8 w-8 text-indigo-600 dark:text-indigo-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:o}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:i})]})]})}),Rw=[{key:"pos",label:"POS Terminal",description:"Process sales and manage orders.",href:"#/pos",icon:r.jsx(hb,{})},{key:"inventory",label:"Menu & Inventory",description:"Manage your products and stock levels.",href:"#/inventory",icon:r.jsx(fb,{})},{key:"reports",label:"Sales Reports",description:"View sales data and analytics.",href:"#/reports",icon:r.jsx(T0,{})},{key:"settings",label:"Store Settings",description:"Configure your store and tax settings.",href:"#/settings",icon:r.jsx(mb,{})}],Dw=[{key:"appointments",label:"Appointments",description:"Manage bookings and staff schedules.",href:"#/appointments",icon:r.jsx(pb,{})},{key:"tickets",label:"Tickets & Queue",description:"Track service tickets or laundry loads.",href:"#/tickets",icon:r.jsx(xb,{})},{key:"clients",label:"Clients & CRM",description:"Maintain client profiles and history.",href:"#/clients",icon:r.jsx(bb,{})},{key:"tips",label:"Tips & Gratuity",description:"Record and settle shared tips.",href:"#/tips",icon:r.jsx(bi,{})},{key:"commissions",label:"Commissions",description:"Track payouts per staff member.",href:"#/commissions",icon:r.jsx(E0,{})},{key:"export",label:"Data Export",description:"Download sales and inventory data.",href:"#/export",icon:r.jsx(A0,{})},{key:"reminders",label:"Reminders",description:"Automate follow-ups and alerts.",href:"#/reminders",icon:r.jsx(yb,{})},{key:"multi_branch",label:"Multi-Branch",description:"Monitor and manage other branches.",href:"#/multi-branch",icon:r.jsx(vb,{})},{key:"loyalty",label:"Loyalty",description:"Reward and retain loyal customers.",href:"#/clients",icon:r.jsx(O0,{})}],Mw={appointments:"enableAppointments",tickets:"enableTickets"},Uw=({storeName:o,modules:a,features:l})=>{const i=typeof window<"u"?window.location.hostname:"",u=i==="localhost"||i==="127.0.0.1"||i==="::1",d=typeof window<"u"?localStorage.getItem("userRole"):null,f=u&&d==="super_admin",m=y=>{if(a?!!a[y]:!1)return!0;const j=Mw[y];return j?!!(l!=null&&l[j]):!1},p=Dw.filter(y=>m(y.key)),x=[...Rw,...p];return r.jsxs("div",{className:"text-center",children:[r.jsxs("h2",{className:"text-4xl font-extrabold text-slate-800 dark:text-slate-200",children:["Welcome to ",o]}),r.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-400",children:"Select an option to get started."}),r.jsxs("div",{className:"mt-10 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[x.map(y=>r.jsx(S0,{...y},y.key)),f&&r.jsx(S0,{label:"Super Admin",icon:r.jsx(T0,{}),href:"#/admin",description:"(dev) Create and manage stores - visible on localhost only."},"admin")]})]})},zw=({message:o,type:a,onClose:l})=>{const[i,u]=S.useState(!1);S.useEffect(()=>{u(!0);const m=setTimeout(()=>{u(!1),setTimeout(l,300)},2700);return()=>clearTimeout(m)},[l]);const d=a==="success"?"bg-green-500":"bg-red-500",f=a==="success"?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});return r.jsxs("div",{className:`flex items-center p-4 rounded-lg shadow-lg text-white ${d} transition-all duration-300 ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,children:[f,r.jsx("span",{className:"ml-3 font-medium",children:o})]})},Lw=({children:o})=>r.jsx("div",{className:"fixed bottom-5 right-5 z-50",children:o}),Bw={async getProducts(o){const a=`products_${o}`,l=localStorage.getItem(a);return l?JSON.parse(l):[]},async getProduct(o,a){return(await this.getProducts(o)).find(i=>i.id===a)||null},async createProduct(o,a){const l={...a,id:`prod_${Date.now()}`,createdAt:new Date,updatedAt:new Date},u=[...await this.getProducts(o),l];return localStorage.setItem(`products_${o}`,JSON.stringify(u)),l},async updateProduct(o,a,l){const i=await this.getProducts(o),u=i.findIndex(d=>d.id===a);if(u===-1)throw new Error("Product not found");return i[u]={...i[u],...l,updatedAt:new Date},localStorage.setItem(`products_${o}`,JSON.stringify(i)),i[u]},async deleteProduct(o,a){const i=(await this.getProducts(o)).filter(u=>u.id!==a);localStorage.setItem(`products_${o}`,JSON.stringify(i))},async searchProducts(o,a){const l=await this.getProducts(o),i=a.toLowerCase();return l.filter(u=>u.name.toLowerCase().includes(i)||u.sku.toLowerCase().includes(i)||u.description.toLowerCase().includes(i))},async getProductBySku(o,a){return(await this.getProducts(o)).find(i=>i.sku===a)||null},async getCategories(o){const a=`categories_${o}`,l=localStorage.getItem(a);return l?JSON.parse(l):[]},async createCategory(o,a){const l={...a,id:`cat_${Date.now()}`,createdAt:new Date},u=[...await this.getCategories(o),l];return localStorage.setItem(`categories_${o}`,JSON.stringify(u)),l},async updateCategory(o,a,l){const i=await this.getCategories(o),u=i.findIndex(d=>d.id===a);if(u===-1)throw new Error("Category not found");return i[u]={...i[u],...l},localStorage.setItem(`categories_${o}`,JSON.stringify(i)),i[u]},async deleteCategory(o,a){const i=(await this.getCategories(o)).filter(u=>u.id!==a);localStorage.setItem(`categories_${o}`,JSON.stringify(i))}};async function qw(o){var f;if((f=o.allocations)!=null&&f.length&&o.allocations.reduce((m,p)=>m+p.amount,0)!==o.totalTip)throw new Error("Allocations must sum to total tip.");const{data:a,error:l}=await Je.from("tips").insert({store_id:o.storeId,sale_id:o.saleId,total_tip:o.totalTip,method:o.method,status:"unsettled"}).select("id").single();if(l||!a)throw l??new Error("Failed to insert tip");const i=a.id,u=(o.allocations??[]).map(m=>({tip_id:i,staff_id:m.staffId,amount:m.amount})),{error:d}=await Je.from("tip_shares").insert(u);if(d)throw d;return i}async function Hw(o){let a=Je.from("tips").select(`
      id,
      store_id,
      sale_id,
      total_tip,
      method,
      status,
      settled_at,
      created_at,
      shares:tip_shares(
        staff_id,
        amount,
        staff:staff_id(id,name)
      )
    `).eq("store_id",o.storeId).order("created_at",{ascending:!1});o.status&&(a=a.eq("status",o.status)),o.from&&(a=a.gte("created_at",o.from)),o.to&&(a=a.lte("created_at",o.to)),o.staffId&&(a=a.eq("tip_shares.staff_id",o.staffId));const{data:l,error:i}=await a;if(i)throw i;return l??[]}async function $w(o,a){const{error:l}=await Je.from("tips").update({status:"settled",settled_at:new Date().toISOString()}).in("id",a).eq("store_id",o);if(l)throw l;return!0}const ha=({label:o="Back to Dashboard",href:a="#/"})=>{const l=()=>{if(a){window.location.hash=a.startsWith("#")?a:`#${a}`;return}window.history.length>1?window.history.back():window.location.hash="#/"};return r.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:[r.jsx(wb,{className:"w-4 h-4"}),o]})},Iw=[{value:"haircut",label:"Haircut & Styling"},{value:"spa",label:"Relaxing Spa"},{value:"massage",label:"Therapeutic Massage"}],Vw=[{value:"staff_1",label:"Mara  Stylist"},{value:"staff_2",label:"Jonah  Technician"},{value:"staff_3",label:"Aleli  Therapist"}];function Gw(){const[o,a]=S.useState([]),[l,i]=S.useState([]),[u,d]=S.useState(!1),[f,m]=S.useState(null),[p,x]=S.useState({client_name:"",client_phone:"",staff_id:"",service_id:"",date:"",time:"",notes:"",customer_id:""}),[y,v]=S.useState(!1),[j,k]=S.useState(null),[O,U]=S.useState(null),[D,$]=S.useState(null),[H,C]=S.useState(!1),T=!!p.customer_id;((l==null?void 0:l.length)??0)>0;const M=S.useMemo(()=>p.client_name.trim()&&p.client_phone.trim()&&p.service_id&&p.date&&p.time,[p]);async function G(){try{const{data:Y,error:I}=await Je.from("appointments").select("id,client_name,client_phone,staff_id,service_id,starts_at,status,customer_id,customer:customer_id(id,name,phone,email)").order("starts_at",{ascending:!0});if(I)throw I;a(Y??[]),k(null)}catch(Y){console.error(Y),k((Y==null?void 0:Y.message)??"Unable to load appointments")}}async function z(){d(!0);try{const{data:Y,error:I}=await Je.from("clients").select("id,name,phone,email").order("name",{ascending:!0});if(I)throw I;i(Y??[]),m(null)}catch(Y){console.error(Y),m((Y==null?void 0:Y.message)??"Unable to load CRM customers")}finally{d(!1)}}async function ee(){if(C(!0),!M){U("Please complete all required fields before saving."),$(null);return}const Y=new Date(`${p.date}T${p.time}`);if(Number.isNaN(Y.getTime())){U("The selected date/time is invalid."),$(null);return}v(!0),U(null),$(null);try{const{error:I}=await Je.from("appointments").insert({client_name:p.client_name||null,client_phone:p.client_phone||null,staff_id:p.staff_id||null,customer_id:p.customer_id||null,service_id:p.service_id||null,starts_at:Y.toISOString(),status:"pending"});if(I)throw I;await G(),$("Appointment created."),x({client_name:"",client_phone:"",staff_id:"",service_id:"",date:"",time:"",notes:"",customer_id:""}),C(!1)}catch(I){console.error(I),U("Something went wrong while saving. Please try again.")}finally{v(!1)}}const me=()=>{x({client_name:"",client_phone:"",staff_id:"",service_id:"",date:"",time:"",notes:"",customer_id:""}),C(!1),U(null),$(null)};return S.useEffect(()=>{G(),z()},[]),r.jsxs("div",{className:"p-4 lg:p-6 w-full max-w-6xl mx-auto space-y-6",children:[r.jsx(ha,{}),r.jsx("h1",{className:"text-xl font-semibold",children:"Appointments"}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-5 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Create New Appointment"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Book a client with a staff member and service."})]}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[r.jsxs("label",{className:"space-y-1 md:col-span-2",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Existing customer (optional)"}),r.jsxs("select",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:p.customer_id,onChange:Y=>{const I=l.find(te=>te.id===Y.target.value);x(te=>({...te,customer_id:Y.target.value,client_name:(I==null?void 0:I.name)??te.client_name,client_phone:(I==null?void 0:I.phone)??te.client_phone}))},children:[r.jsx("option",{value:"",children:"Select a CRM customer"}),l.map(Y=>r.jsxs("option",{value:Y.id,children:[Y.name," ",Y.phone?`(${Y.phone})`:""]},Y.id))]}),f&&r.jsx("p",{className:"text-xs text-red-600",children:f}),!u&&l.length===0?r.jsx("p",{className:"text-xs text-slate-500",children:"No customers found. Please add a customer in CRM first."}):null,!u&&r.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2 rounded border border-dashed border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 p-2",children:[r.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Need to register someone new? Create a CRM customer first."}),r.jsx("button",{type:"button",className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300 focus:outline-none focus-visible:ring focus-visible:ring-indigo-500/40 rounded px-2 py-1",onClick:()=>{window.location.hash="#/clients"},children:"Create customer"})]})]}),!T&&r.jsxs(r.Fragment,{children:[r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Client name"}),r.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Juan Dela Cruz",value:p.client_name,onChange:Y=>x({...p,client_name:Y.target.value})}),H&&!p.client_name.trim()&&r.jsx("p",{className:"text-xs text-red-600",children:"Client name is required."})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Mobile number"}),r.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"09XXXXXXXXX",value:p.client_phone,onChange:Y=>x({...p,client_phone:Y.target.value})}),H&&!p.client_phone.trim()&&r.jsx("p",{className:"text-xs text-red-600",children:"Mobile number is required."})]})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Service"}),r.jsxs("select",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:p.service_id,onChange:Y=>x({...p,service_id:Y.target.value}),children:[r.jsx("option",{value:"",children:"Select a service"}),Iw.map(Y=>r.jsx("option",{value:Y.value,children:Y.label},Y.value))]}),H&&!p.service_id&&r.jsx("p",{className:"text-xs text-red-600",children:"Please pick a service."})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Staff (optional)"}),r.jsxs("select",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:p.staff_id,onChange:Y=>x({...p,staff_id:Y.target.value}),children:[r.jsx("option",{value:"",children:"Not assigned"}),Vw.map(Y=>r.jsx("option",{value:Y.value,children:Y.label},Y.value))]})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Date"}),r.jsx("input",{type:"date",className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:p.date,onChange:Y=>x({...p,date:Y.target.value})}),H&&!p.date&&r.jsx("p",{className:"text-xs text-red-600",children:"Please pick a date."})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Time"}),r.jsx("input",{type:"time",className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:p.time,onChange:Y=>x({...p,time:Y.target.value})}),H&&!p.time&&r.jsx("p",{className:"text-xs text-red-600",children:"Please pick a time."})]})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Notes (optional)"}),r.jsx("textarea",{rows:3,className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Add internal notes (not stored yet)",value:p.notes,onChange:Y=>x({...p,notes:Y.target.value})})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[O&&r.jsx("p",{className:"text-sm text-red-600",children:O}),D&&r.jsx("p",{className:"text-sm text-emerald-600",children:D})]}),r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[r.jsx("button",{type:"button",className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100",onClick:me,children:"Clear form"}),r.jsx("button",{type:"button",disabled:y||!M,onClick:ee,className:"px-4 py-2 bg-black text-white rounded text-sm disabled:opacity-40",children:y?"Saving":"Save appointment"})]})]})]}),j&&r.jsxs("div",{className:"text-red-600 text-sm",children:["Unable to load appointments: ",j]}),o.length===0?r.jsx("div",{className:"text-center text-sm text-slate-500",children:"No appointments yet. New bookings will appear here."}):r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left",children:[r.jsx("th",{children:"When"}),r.jsx("th",{children:"Client"}),r.jsx("th",{children:"Staff"}),r.jsx("th",{children:"Service"}),r.jsx("th",{children:"Status"})]})}),r.jsx("tbody",{children:o.map(Y=>{var I;return r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{children:new Date(Y.starts_at).toLocaleString()}),r.jsx("td",{children:(I=Y.customer)!=null&&I.name?r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{children:Y.customer.name}),Y.customer.phone&&r.jsx("div",{className:"text-[11px] text-slate-500",children:Y.customer.phone})]}):r.jsx("span",{className:"text-sm text-slate-500",children:Y.client_name||"No customer selected"})}),r.jsx("td",{children:Y.staff_id||""}),r.jsx("td",{children:Y.service_id||""}),r.jsx("td",{children:Y.status})]},Y.id)})})]})]})}const Yw="TCK";function Pw(){const o=new Date().toISOString().replace(/\D/g,"");return`${Yw}-${o}`}async function Kw({storeId:o,status:a,ticketType:l}){const i=Je.from("tickets").select(`
      id,
      store_id,
      customer_id,
      ticket_number,
      ticket_type,
      status,
      priority,
      checkin_at,
      promised_at,
      completed_at,
      staff_id,
      total_amount,
      notes,
      created_at,
      customer:customer_id(id,name,phone,email)
    `).eq("store_id",o).order("checkin_at",{ascending:!0});a&&i.eq("status",a),l&&i.eq("ticket_type",l);const{data:u,error:d}=await i;if(d)throw d;return u}async function Qw(o){const a={store_id:o.storeId,customer_id:o.customerId??null,ticket_type:o.ticketType,status:"waiting",ticket_number:Pw(),staff_id:o.staffId??null,promised_at:o.promisedAt??null,total_amount:o.totalAmount??null,notes:o.notes??null,priority:o.priority??0},{data:l,error:i}=await Je.from("tickets").insert(a).select().single();if(i)throw i;return l}async function Jw(o,a){const l={};a.status&&(l.status=a.status),a.priority!==void 0&&(l.priority=a.priority),a.staffId!==void 0&&(l.staff_id=a.staffId),a.notes!==void 0&&(l.notes=a.notes),a.promisedAt!==void 0&&(l.promised_at=a.promisedAt),a.totalAmount!==void 0&&(l.total_amount=a.totalAmount);const{data:i,error:u}=await Je.from("tickets").update(l).eq("id",o).select().single();if(u)throw u;return i}const Xw=["all","waiting","in_progress","ready","completed","cancelled"],_0=["all","laundry","repair","spa","carwash","other"];function Zw(){const[o,a]=S.useState(null),[l,i]=S.useState("myPOS"),[u,d]=S.useState([]),[f,m]=S.useState(!1),[p,x]=S.useState("all"),[y,v]=S.useState("all"),[j,k]=S.useState([]),[O,U]=S.useState(!1),[D,$]=S.useState(!1),[H,C]=S.useState(null),[T,M]=S.useState(!1),G=S.useMemo(()=>jt.getAll(),[]),[z,ee]=S.useState({customer_id:"",client_name:"",client_phone:"",ticket_type:"laundry",staff_id:"",promised_at:"",total_amount:"",notes:""}),me=!!z.customer_id;j.length>0;const Y=async()=>{try{const{data:w}=await Je.from("stores").select("id,name").eq("code","DEMO_STORE").maybeSingle();w&&(a(w.id),i(w.name))}catch(w){console.error("failed to load store",w)}},I=async()=>{if(o){m(!0);try{const w=await Kw({storeId:o,status:p==="all"?void 0:p,ticketType:y==="all"?void 0:y});d(w)}catch(w){console.error("ticket load error",w)}finally{m(!1)}}},te=async()=>{U(!0);try{const{data:w,error:P}=await Je.from("clients").select("id,name,phone").order("name",{ascending:!0});if(P)throw P;k(w??[])}catch(w){console.error("customers load error",w)}finally{U(!1)}};S.useEffect(()=>{Y(),te()},[]),S.useEffect(()=>{I()},[o,p,y]);const W=async(w,P)=>{try{await Jw(w.id,{status:P}),I()}catch(ne){console.error("status update failed",ne)}},ie=async()=>{if(o){M(!0),C(null);try{const w={storeId:o,customerId:z.customer_id||void 0,ticketType:z.ticket_type,staffId:z.staff_id||void 0,promisedAt:z.promised_at||void 0,totalAmount:z.total_amount?Number(z.total_amount):void 0,notes:z.notes||void 0};!z.customer_id&&(z.client_name||z.client_phone)&&(w.notes=`${w.notes??""} Client: ${z.client_name}, Mobile: ${z.client_phone}`.trim()),await Qw(w),$(!1),ee({customer_id:"",client_name:"",client_phone:"",ticket_type:"laundry",staff_id:"",promised_at:"",total_amount:"",notes:""}),I()}catch(w){console.error("create ticket failed",w),C("Unable to create ticket. Try again.")}finally{M(!1)}}},F=w=>({waiting:"text-amber-600 bg-amber-100",in_progress:"text-sky-600 bg-sky-100",ready:"text-lime-700 bg-lime-100",completed:"text-green-700 bg-green-100",cancelled:"text-red-600 bg-red-100"})[w];return r.jsxs("div",{className:"p-4 lg:p-6 w-full max-w-6xl mx-auto space-y-5",children:[r.jsx(ha,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold",children:"Tickets & Queue"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Track service tickets or laundry loads."})]}),r.jsx("button",{type:"button",className:"px-4 py-2 bg-indigo-600 text-white rounded text-sm shadow-sm hover:bg-indigo-500",onClick:()=>$(!0),children:"Create Ticket"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-4 space-y-4",children:[r.jsx("div",{className:"flex flex-wrap gap-3",children:Xw.map(w=>r.jsx("button",{className:`px-3 py-1 rounded text-xs font-semibold ${p===w?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600"}`,onClick:()=>x(w),children:w==="all"?"All":w.replace("_"," ")},w))}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[r.jsx("label",{className:"text-xs text-slate-500",children:"Service type"}),r.jsx("select",{className:"border border-slate-200 bg-white text-sm px-3 py-1 rounded dark:bg-slate-900 dark:border-slate-700",value:y,onChange:w=>v(w.target.value),children:_0.map(w=>r.jsx("option",{value:w,children:w==="all"?"All types":w},w))}),r.jsx("span",{className:"text-xs text-slate-400 ml-auto",children:l})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"text-left text-xs uppercase text-slate-500 tracking-wide",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-2",children:"Ticket #"}),r.jsx("th",{className:"px-2 py-2",children:"Customer"}),r.jsx("th",{className:"px-2 py-2",children:"Type"}),r.jsx("th",{className:"px-2 py-2",children:"Status"}),r.jsx("th",{className:"px-2 py-2",children:"Check-in"}),r.jsx("th",{className:"px-2 py-2",children:"Promised"}),r.jsx("th",{className:"px-2 py-2",children:"Staff"}),r.jsx("th",{className:"px-2 py-2",children:"Actions"})]})}),r.jsx("tbody",{children:f?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"text-center p-4 text-xs text-slate-500",children:"Loading tickets"})}):u.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"text-center p-4 text-xs text-slate-500",children:"No tickets yet."})}):u.map(w=>r.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700",children:[r.jsx("td",{className:"px-2 py-2 font-mono text-xs text-slate-600",children:w.ticket_number}),r.jsx("td",{className:"px-2 py-2",children:w.customer?r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:w.customer.name}),w.customer.phone&&r.jsx("div",{className:"text-[11px] text-slate-500",children:w.customer.phone})]}):r.jsx("span",{className:"text-xs text-slate-500",children:"Walk-in"})}),r.jsx("td",{className:"px-2 py-2 capitalize",children:w.ticket_type}),r.jsx("td",{className:"px-2 py-2",children:r.jsx("span",{className:`text-[11px] px-2 py-1 rounded-full ${F(w.status)}`,children:w.status.replace("_"," ")})}),r.jsx("td",{className:"px-2 py-2",children:new Date(w.checkin_at).toLocaleString()}),r.jsx("td",{className:"px-2 py-2",children:w.promised_at?new Date(w.promised_at).toLocaleString():""}),r.jsx("td",{className:"px-2 py-2",children:w.staff_id||""}),r.jsxs("td",{className:"px-2 py-2 space-x-1",children:[w.status==="waiting"&&r.jsx("button",{className:"text-xs text-blue-600",onClick:()=>W(w,"in_progress"),children:"Start"}),w.status==="in_progress"&&r.jsx("button",{className:"text-xs text-amber-600",onClick:()=>W(w,"ready"),children:"Ready"}),w.status==="ready"&&r.jsx("button",{className:"text-xs text-green-600",onClick:()=>W(w,"completed"),children:"Complete"}),w.status!=="cancelled"&&w.status!=="completed"&&r.jsx("button",{className:"text-xs text-red-600",onClick:()=>W(w,"cancelled"),children:"Cancel"})]})]},w.id))})]})})]}),D&&r.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4 overflow-hidden",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-xl border border-slate-200 dark:border-slate-700 max-h-[90vh] flex flex-col overflow-hidden mt-6",children:[r.jsxs("div",{className:"p-5 space-y-4 overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Create Ticket"}),r.jsx("button",{type:"button",className:"text-slate-500",onClick:()=>$(!1),children:"Cancel"})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Existing customer (optional)"}),r.jsxs("select",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:z.customer_id,onChange:w=>ee(P=>({...P,customer_id:w.target.value})),children:[r.jsx("option",{value:"",children:"Select a customer"}),j.map(w=>r.jsxs("option",{value:w.id,children:[w.name," ",w.phone?`(${w.phone})`:""]},w.id))]})]}),!O&&r.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2 rounded-lg border border-indigo-200 bg-indigo-50 px-3 py-2",children:[r.jsx("p",{className:"text-xs text-indigo-700",children:j.length===0?"No CRM customers yet. Create one to reuse profiles.":"Reuse CRM customers for faster ticket intake."}),r.jsx("button",{type:"button",className:"text-xs font-semibold text-white bg-indigo-600 hover:bg-indigo-500 px-3 py-1 rounded focus:outline-none focus-visible:ring focus-visible:ring-indigo-500/40",onClick:()=>{$(!1),window.location.hash="#/clients"},children:"Create customer"})]}),!me&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Client name"}),r.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Client name",value:z.client_name,onChange:w=>ee(P=>({...P,client_name:w.target.value}))})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Mobile number"}),r.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Mobile number",value:z.client_phone,onChange:w=>ee(P=>({...P,client_phone:w.target.value}))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Ticket type"}),r.jsx("select",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:z.ticket_type,onChange:w=>ee(P=>({...P,ticket_type:w.target.value})),children:_0.filter(w=>w!=="all").map(w=>r.jsx("option",{value:w,children:w.charAt(0).toUpperCase()+w.slice(1)},w))})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Assign staff"}),r.jsxs("select",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:z.staff_id,onChange:w=>ee(P=>({...P,staff_id:w.target.value})),children:[r.jsx("option",{value:"",children:"Not assigned"}),G.map(w=>r.jsx("option",{value:w.id,children:w.name},w.id))]})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Promised at"}),r.jsx("input",{type:"datetime-local",className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:z.promised_at,onChange:w=>ee(P=>({...P,promised_at:w.target.value}))})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Estimated total"}),r.jsx("input",{type:"number",step:"0.01",className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:z.total_amount,onChange:w=>ee(P=>({...P,total_amount:w.target.value}))})]})]}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Notes"}),r.jsx("textarea",{rows:3,className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",value:z.notes,onChange:w=>ee(P=>({...P,notes:w.target.value}))})]}),H&&r.jsx("p",{className:"text-xs text-red-600",children:H})]}),r.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 flex justify-end gap-3",children:[r.jsx("button",{type:"button",className:"text-slate-600",onClick:()=>$(!1),children:"Cancel"}),r.jsx("button",{type:"button",className:"px-4 py-2 bg-indigo-600 text-white rounded text-sm",onClick:ie,disabled:T,children:T?"Creating":"Create ticket"})]})]})})]})}const Fw=["all","unsettled","settled"],Ww=(o,a,l)=>{const i=new Date;if(o==="today"){const u=new Date(i);return u.setHours(0,0,0,0),{from:u.toISOString(),to:i.toISOString()}}if(o==="this_week"){const u=new Date(i),d=u.getDay();return u.setDate(u.getDate()-d+1),u.setHours(0,0,0,0),{from:u.toISOString(),to:i.toISOString()}}return{from:a?new Date(a).toISOString():void 0,to:l?new Date(l).toISOString():void 0}},ej=()=>{const[o,a]=S.useState(null),[l,i]=S.useState("myPOS"),[u,d]=S.useState([]),[f,m]=S.useState(!1),[p,x]=S.useState("all"),[y,v]=S.useState("today"),[j,k]=S.useState(""),[O,U]=S.useState(""),[D,$]=S.useState(""),[H,C]=S.useState([]),[T,M]=S.useState(jt.getAll()),[G,z]=S.useState(!1);S.useEffect(()=>{Je.from("stores").select("id,name").eq("code","DEMO_STORE").maybeSingle().then(W=>{W.data&&(a(W.data.id),i(W.data.name))})},[]);const ee=async()=>{if(o){m(!0);try{const W=Ww(y,j,O),ie=await Hw({storeId:o,status:p==="all"?void 0:p,from:W.from,to:W.to,staffId:D||void 0});d(ie)}finally{m(!1)}}};S.useEffect(()=>{ee()},[o,p,y,j,O,D]);const me=S.useMemo(()=>{var K;const W=u.reduce((re,_)=>re+_.total_tip,0),ie=u.filter(re=>re.status==="unsettled").reduce((re,_)=>re+_.total_tip,0),F=W-ie,w={};u.forEach(re=>{re.shares.forEach(_=>{w[_.staff_id]=(w[_.staff_id]||0)+_.amount})});const P=Object.entries(w).sort((re,_)=>_[1]-re[1])[0],ne=P?((K=T.find(re=>re.id===P[0]))==null?void 0:K.name)??"Staff":"";return{total:W,unsettled:ie,settled:F,topStaff:`${ne} ${((P==null?void 0:P[1])??0).toFixed(2)}`}},[u,T]),Y=W=>{C(ie=>ie.includes(W)?ie.filter(F=>F!==W):[...ie,W])},I=u.filter(W=>W.status==="unsettled").map(W=>W.id).filter(W=>H.includes(W)),te=async()=>{if(!(!o||I.length===0)&&window.confirm(`Mark ${I.length} tip(s) as settled?`)){z(!0);try{await $w(o,I),C([]),await ee()}finally{z(!1)}}};return r.jsxs("div",{className:"p-4 lg:p-6 w-full max-w-6xl mx-auto space-y-5",children:[r.jsx(ha,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xl font-semibold",children:"Tips & Gratuity"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Record and settle shared tips per store."})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4 space-y-1",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Total tips"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",me.total.toFixed(2)]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4 space-y-1",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Unsettled"}),r.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["",me.unsettled.toFixed(2)]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4 space-y-1",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Settled"}),r.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:["",me.settled.toFixed(2)]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4 space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[Fw.map(W=>r.jsx("button",{onClick:()=>x(W),className:`px-3 py-1 text-xs font-semibold rounded-full ${p===W?"bg-indigo-600 text-white":"bg-slate-100 text-slate-500"}`,children:W==="all"?"All":W.replace("_"," ")},W)),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[r.jsx("span",{children:"Date range"}),r.jsxs("select",{className:"border border-slate-300 rounded px-2 py-1 text-xs",value:y,onChange:W=>v(W.target.value),children:[r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"this_week",children:"This Week"}),r.jsx("option",{value:"custom",children:"Custom"})]})]}),y==="custom"&&r.jsxs("div",{className:"flex gap-2 text-xs",children:[r.jsx("input",{type:"date",className:"border border-slate-300 rounded px-2 py-1",value:j,onChange:W=>k(W.target.value)}),r.jsx("input",{type:"date",className:"border border-slate-300 rounded px-2 py-1",value:O,onChange:W=>U(W.target.value)})]}),r.jsxs("select",{className:"border border-slate-300 rounded px-2 py-1 text-xs ml-auto",value:D,onChange:W=>$(W.target.value),children:[r.jsx("option",{value:"",children:"All staff"}),T.map(W=>r.jsx("option",{value:W.id,children:W.name},W.id))]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-500",children:l}),r.jsx("button",{type:"button",className:"px-3 py-1 text-xs font-semibold rounded-md bg-emerald-600 text-white disabled:bg-slate-400",disabled:I.length===0||G,onClick:te,children:G?"Settling":"Mark as settled"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"text-left text-xs uppercase text-slate-500 tracking-wide",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-2",children:r.jsx("input",{type:"checkbox",checked:H.length===u.length&&u.length>0,onChange:W=>C(W.target.checked?u.map(ie=>ie.id):[])})}),r.jsx("th",{className:"px-2 py-2",children:"Date"}),r.jsx("th",{className:"px-2 py-2",children:"Sale"}),r.jsx("th",{className:"px-2 py-2",children:"Customer"}),r.jsx("th",{className:"px-2 py-2",children:"Total tip"}),r.jsx("th",{className:"px-2 py-2",children:"Staff"}),r.jsx("th",{className:"px-2 py-2",children:"Method"}),r.jsx("th",{className:"px-2 py-2",children:"Status"})]})}),r.jsx("tbody",{children:f?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"p-4 text-center text-xs text-slate-500",children:"Loading"})}):u.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"p-4 text-center text-xs text-slate-500",children:"No tips recorded."})}):u.map(W=>r.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700",children:[r.jsx("td",{className:"px-2 py-2",children:r.jsx("input",{type:"checkbox",checked:H.includes(W.id),onChange:()=>Y(W.id)})}),r.jsx("td",{className:"px-2 py-2 text-xs text-slate-500",children:new Date(W.created_at).toLocaleString()}),r.jsx("td",{className:"px-2 py-2 text-xs font-mono text-slate-600",children:W.sale_id}),r.jsx("td",{className:"px-2 py-2",children:W.customer_id?"Linked customer":"Walk-in"}),r.jsxs("td",{className:"px-2 py-2",children:["",W.total_tip.toFixed(2)]}),r.jsx("td",{className:"px-2 py-2 text-xs",children:W.shares.length?W.shares.map(ie=>{var F;return`${((F=ie.staff)==null?void 0:F.name)??ie.staff_id} ${ie.amount.toFixed(2)}`}).join(", "):""}),r.jsx("td",{className:"px-2 py-2",children:W.method.toUpperCase()}),r.jsx("td",{className:"px-2 py-2",children:r.jsx("span",{className:`text-[11px] px-2 py-1 rounded-full ${W.status==="unsettled"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:W.status})})]},W.id))})]})})]})]})},tj=[{key:"pos",label:"POS Terminal"},{key:"inventory",label:"Inventory"},{key:"reports",label:"Reports"},{key:"staff",label:"Staff"},{key:"appointments",label:"Appointments"},{key:"commissions",label:"Commissions"},{key:"clients",label:"CRM"},{key:"tips",label:"Tips"},{key:"multi_branch",label:"Multi-Branch"},{key:"export",label:"Export"},{key:"reminders",label:"Reminders"},{key:"loyalty",label:"Loyalty"}],sj=[{label:"Client name",key:"name",placeholder:"Juan Dela Cruz",required:!0},{label:"Mobile number",key:"phone",placeholder:"09171234567",required:!0},{label:"Email",key:"email",placeholder:"juan@sample.com",required:!0},{label:"Tags (comma separated)",key:"tags",placeholder:"VIP,referral",required:!1}],iu={name:"",phone:"",email:"",tags:"",notes:""};function aj(){const[o,a]=S.useState([]),[l,i]=S.useState([]),[u,d]=S.useState({}),[f,m]=S.useState(null),[p,x]=S.useState(!1),[y,v]=S.useState(iu),[j,k]=S.useState(!1),[O,U]=S.useState(null),[D,$]=S.useState(null),[H,C]=S.useState(!1),[T,M]=S.useState(""),G=S.useMemo(()=>{const I=o.length,te=o.filter(ie=>{const F=new Date(ie.created_at),w=new Date;return w.setDate(w.getDate()-30),F>=w}).length,W=l.filter(ie=>new Date(ie.starts_at)>=new Date&&ie.status==="pending").length;return{total:I,last30:te,upcoming:W}},[o,l]),z=S.useMemo(()=>{if(!T.trim())return o;const I=T.toLowerCase();return o.filter(te=>te.name.toLowerCase().includes(I)||(te.phone??"").toLowerCase().includes(I)||(te.email??"").toLowerCase().includes(I))},[o,T]),ee=async()=>{var I;x(!0);try{const W=((I=(await Je.from("stores").select("id").eq("code","DEMO_STORE").maybeSingle()).data)==null?void 0:I.id)??null;m(W);const ie=Je.from("clients").select("id,name,phone,email,tags,notes,created_at").order("created_at",{ascending:!1}),F=Je.from("appointments").select("client_name,starts_at,status"),w=W?Je.from("store_modules").select("module_name,is_enabled").eq("store_id",W):Promise.resolve({data:[]}),[{data:P,error:ne},{data:K,error:re},_]=await Promise.all([ie,F,w]);if(ne)throw ne;if(re)throw re;if(a(P??[]),i(K??[]),_!=null&&_.data){const A={};_.data.forEach(({module_name:Z,is_enabled:ae})=>{A[Z]=ae}),d(A)}}catch(te){console.error("CRM load error",te),U("Unable to load CRM data. Please refresh.")}finally{x(!1)}};S.useEffect(()=>{ee()},[]);const me=async()=>{if(C(!0),!y.name.trim()||!y.phone.trim()||!y.email.trim()){U("Name, phone, and email are required."),$(null);return}k(!0),U(null),$(null);const I={name:y.name.trim(),phone:y.phone.trim(),email:y.email.trim(),tags:y.tags.split(",").map(te=>te.trim()).filter(Boolean),notes:y.notes.trim()||null,store_id:f};try{const{error:te}=await Je.from("clients").insert(I);if(te)throw te;$("Client saved."),v(iu),C(!1),await ee()}catch(te){console.error("CRM save error",te),U("Something went wrong while saving. Please try again.")}finally{k(!1)}},Y=()=>{v(iu),C(!1),U(null),$(null)};return r.jsxs("div",{className:"p-4 lg:p-6 w-full max-w-6xl mx-auto space-y-5",children:[r.jsx(ha,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-lg font-semibold",children:"Clients & CRM"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Track your clients, appointments, and loyalty data in one place."})]}),r.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-4 space-y-1",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Total clients"}),r.jsx("p",{className:"text-2xl font-bold",children:G.total}),r.jsxs("p",{className:"text-xs text-slate-400",children:["New in 30 days: ",G.last30]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-4 space-y-1",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Upcoming appointments"}),r.jsx("p",{className:"text-2xl font-bold",children:G.upcoming}),r.jsx("p",{className:"text-xs text-slate-400",children:"Pending bookings to confirm"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-4 space-y-1",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"CRM modules"}),r.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:tj.map(I=>r.jsx("span",{className:`px-2 py-1 rounded-full border text-[10px] uppercase tracking-wide ${u[I.key]?"border-emerald-500 text-emerald-600 bg-emerald-50 dark:bg-emerald-800/40 dark:border-emerald-700":"border-slate-300 text-slate-500 bg-slate-50 dark:bg-slate-900 dark:border-slate-600"}`,children:I.label},I.key))})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm p-5 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Add a client"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Every client you save here can be linked to appointments, purchases, and loyalty."})]}),r.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:sj.map(I=>{var te;return r.jsxs("label",{className:"space-y-1",children:[r.jsxs("span",{className:"text-xs font-medium text-slate-500",children:[I.label," ",I.required&&r.jsx("span",{className:"text-pink-600",children:"*"})]}),r.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:I.placeholder,value:y[I.key],onChange:W=>v(ie=>({...ie,[I.key]:W.target.value}))}),H&&I.required&&!((te=y[I.key])!=null&&te.trim())&&r.jsxs("p",{className:"text-xs text-red-600",children:[I.label," is required."]})]},I.key)})}),r.jsxs("label",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Notes"}),r.jsx("textarea",{rows:3,className:"w-full border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Add any notes about this client...",value:y.notes,onChange:I=>v(te=>({...te,notes:I.target.value}))})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[O&&r.jsx("p",{className:"text-sm text-red-600",children:O}),D&&r.jsx("p",{className:"text-sm text-emerald-600",children:D})]}),r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[r.jsx("button",{type:"button",onClick:Y,className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100",children:"Clear form"}),r.jsx("button",{type:"button",onClick:me,disabled:j,className:"px-4 py-2 bg-black text-white rounded text-sm disabled:opacity-40",children:j?"Saving":"Save client"})]})]})]}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Client list"}),r.jsxs("p",{className:"text-xs text-slate-500",children:[o.length," clients stored"]})]}),r.jsx("input",{className:"border border-slate-300 dark:border-slate-600 rounded px-3 py-2 text-sm bg-white dark:bg-slate-900",placeholder:"Search clients",value:T,onChange:I=>M(I.target.value)})]}),p?r.jsx("div",{className:"text-sm text-slate-500",children:"Loading clients"}):z.length===0?r.jsx("div",{className:"text-center text-sm text-slate-500",children:"No clients yet. Customers synced here from POS, bookings, and loyalty will appear as soon as you add them."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500",children:[r.jsx("th",{className:"px-2 py-2",children:"Client"}),r.jsx("th",{className:"px-2 py-2",children:"Phone"}),r.jsx("th",{className:"px-2 py-2",children:"Email"}),r.jsx("th",{className:"px-2 py-2",children:"Tags"}),r.jsx("th",{className:"px-2 py-2",children:"Last activity"}),r.jsx("th",{className:"px-2 py-2 text-right",children:"Actions"})]})}),r.jsx("tbody",{children:z.map(I=>{const te=l.find(W=>{var ie;return(ie=W.client_name)==null?void 0:ie.toLowerCase().includes(I.name.toLowerCase())});return r.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[r.jsxs("td",{className:"px-2 py-3",children:[r.jsx("div",{className:"font-semibold",children:I.name}),r.jsxs("div",{className:"text-xs text-slate-500",children:["Added ",new Date(I.created_at).toLocaleDateString()]})]}),r.jsx("td",{className:"px-2 py-3",children:I.phone||""}),r.jsx("td",{className:"px-2 py-3",children:I.email||""}),r.jsxs("td",{className:"px-2 py-3 space-x-1",children:[(I.tags??[]).map(W=>r.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-300",children:W},W)),(I.tags??[]).length===0&&r.jsx("span",{className:"text-xs text-slate-400",children:"none"})]}),r.jsx("td",{className:"px-2 py-3",children:te?r.jsxs("span",{className:"text-xs text-slate-500",children:[new Date(te.starts_at).toLocaleString(),"  ",te.status]}):r.jsx("span",{className:"text-xs text-slate-500",children:"No appointments yet"})}),r.jsx("td",{className:"px-2 py-3 text-right",children:r.jsx("a",{className:"text-slate-600 text-xs underline hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",href:"#/appointments",children:"Schedule appointment"})})]},I.id)})})]})})]})]})}function nj({stores:o,transactions:a,expenses:l,currentStoreId:i}){const u=o.map(d=>{var f;return{id:d.id,name:((f=d.settings)==null?void 0:f.storeName)||d.name}});return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(ha,{}),r.jsx(M0,{stores:u,transactions:a,expenses:l,currentStoreId:i})]})}function lj(){return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(ha,{}),r.jsx("p",{children:"Export tools coming soon."})]})}function rj(){return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(ha,{}),r.jsx("p",{children:"Reminders coming soon."})]})}function ij(){return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(ha,{}),r.jsx("p",{children:"Multi-Branch admin coming soon."})]})}const oj=({storeId:o,onClose:a})=>{const l=`ledger_${o}`,[i,u]=S.useState([]),[d,f]=S.useState(""),[m,p]=S.useState(""),[x,y]=S.useState("");S.useEffect(()=>{try{const O=localStorage.getItem(l);u(O?JSON.parse(O):[])}catch{u([])}},[l]);const v=O=>{u(O),localStorage.setItem(l,JSON.stringify(O))},j=O=>{const U=Number(m);if(!d.trim()||isNaN(U)||U<=0)return;const D={id:`l_${Date.now()}`,customer:d.trim(),amount:O*U,note:x.trim()||void 0,date:new Date().toISOString()};v([D,...i]),p(""),y("")},k=i.reduce((O,U)=>O+U.amount,0);return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:a}),r.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-3xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Utang Ledger"}),r.jsx("button",{className:"px-3 py-1 rounded-md bg-slate-200 dark:bg-slate-700",onClick:a,children:"Close"})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("input",{value:d,onChange:O=>f(O.target.value),placeholder:"Customer",className:"px-2 py-2 border rounded-md dark:bg-slate-900 dark:border-slate-700"}),r.jsx("input",{value:m,onChange:O=>p(O.target.value),placeholder:"Amount",className:"px-2 py-2 border rounded-md dark:bg-slate-900 dark:border-slate-700"}),r.jsx("input",{value:x,onChange:O=>y(O.target.value),placeholder:"Note",className:"px-2 py-2 border rounded-md dark:bg-slate-900 dark:border-slate-700"}),r.jsx("button",{onClick:()=>j(1),className:"px-3 py-2 bg-emerald-600 text-white rounded-md",children:"Add Loan"}),r.jsx("button",{onClick:()=>j(-1),className:"px-3 py-2 bg-sky-600 text-white rounded-md",children:"Add Payment"})]}),r.jsxs("div",{className:"mb-2 text-sm",children:["Balance: ",r.jsx("span",{className:k>=0?"text-amber-600":"text-emerald-600",children:k>=0?""+k.toFixed(2):""+(-k).toFixed(2)+" credit"})]}),r.jsxs("div",{className:"max-h-80 overflow-y-auto divide-y divide-slate-200 dark:divide-slate-700",children:[i.map(O=>r.jsxs("div",{className:"py-2 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:O.customer}),r.jsx("div",{className:"text-xs text-slate-500",children:new Date(O.date).toLocaleString()}),O.note&&r.jsx("div",{className:"text-xs text-slate-500",children:O.note})]}),r.jsx("div",{className:`text-sm font-semibold ${O.amount>0?"text-amber-700":"text-emerald-700"}`,children:O.amount>0?"+"+O.amount.toFixed(2):"-"+(-O.amount).toFixed(2)})]},O.id)),i.length===0&&r.jsx("div",{className:"text-sm text-slate-500",children:"No ledger entries yet."})]})]})]})};function Ua(o,a){const[l,i]=S.useState(()=>{try{const d=window.localStorage.getItem(o);return d?JSON.parse(d,(m,p)=>m==="timestamp"||m==="date"?new Date(p):p)??a:a}catch(d){return console.error(`Error parsing localStorage key "${o}":`,d),a}});return[l,d=>{try{const f=d instanceof Function?d(l):d;i(f),window.localStorage.setItem(o,JSON.stringify(f))}catch(f){console.error(`Error setting localStorage key "${o}":`,f)}}]}const cj=()=>{const[o,a]=Ua("theme","light"),[l,i]=S.useState(window.location.hash||"#/"),[u,d]=Ua("products",[]),[f,m]=Ua("cart",[]),[p,x]=Ua("transactions",[]),[y,v]=Ua("expenses",[]),[j,k]=Ua("settings",{storeName:"myPOS",storeAddress:"",contactInfo:"",taxRate:12,lowStockThreshold:10}),[O,U]=S.useState([]),[D,$]=S.useState(null),[H,C]=S.useState(null),[T,M]=S.useState([]),G=S.useMemo(()=>{var le;if((H==null?void 0:H.role)==="super_admin")return"myPOS Admin";if(D){const ce=O.find(xe=>xe.id===D);if(ce)return((le=ce.settings)==null?void 0:le.storeName)||ce.name}return"myPOS"},[H,D,O]),z=S.useMemo(()=>O.find(le=>le.id===D)||null,[O,D]),[ee,me]=S.useState("All"),[Y,I]=S.useState(!1),[te,W]=S.useState(!1),[ie,F]=Ua("discount",null),[w,P]=S.useState([]),[ne,K]=S.useState(null),[re,_]=S.useState(!1),[A,Z]=S.useState(ss);S.useEffect(()=>{document.documentElement.classList.toggle("dark",o==="dark")},[o]),S.useEffect(()=>{const le=()=>{i(window.location.hash||"#/")};return window.addEventListener("hashchange",le),()=>window.removeEventListener("hashchange",le)},[]),S.useEffect(()=>{const le=Ul();C(le),le&&le.storeId&&$(le.storeId)},[]),S.useEffect(()=>{D&&Ai(D).then(Z).catch(()=>Z(ss))},[D]),S.useEffect(()=>{try{M(jt.getAll())}catch{}},[]),S.useEffect(()=>{(async()=>{if(D)try{const ce=await Bw.getProducts(D);Array.isArray(ce)&&ce.length>0&&d(ce)}catch{}})()},[D,d]),S.useEffect(()=>{(async()=>{try{const ce=await ua.getAllStores();U(ce)}catch(ce){console.error("Failed to initialize stores:",ce)}})()},[]);const ae=S.useMemo(()=>["All",...new Set(u.map(le=>{const ce=le.categoryId||le.category;return ce==="cat_appetizers"?"Appetizers":ce==="cat_main_courses"?"Main Courses":ce==="cat_desserts"?"Desserts":ce==="cat_drinks"?"Drinks":le.category||"Other"}))],[u]),oe=S.useMemo(()=>ee==="All"?u:u.filter(le=>{const ce=le.categoryId||le.category;let xe="";return ce==="cat_appetizers"?xe="Appetizers":ce==="cat_main_courses"?xe="Main Courses":ce==="cat_desserts"?xe="Desserts":ce==="cat_drinks"?xe="Drinks":xe=le.category||"Other",xe===ee}),[u,ee]),{cartSubtotal:de,discountAmount:je,taxAmount:Ze,finalTotal:Ge}=S.useMemo(()=>{const le=f.reduce((Be,ms)=>Be+ms.price*ms.quantity,0);let ce=0;ie&&(ie.type==="percent"?ce=le*(ie.value/100):ce=ie.value),ce=Math.min(le,ce);const xe=le-ce,Ne=xe*(j.taxRate/100),De=xe+Ne;return{cartSubtotal:le,discountAmount:ce,taxAmount:Ne,finalTotal:De}},[f,ie,j.taxRate]),ct=(le,ce)=>{const xe={id:Date.now(),message:le,type:ce};P(Ne=>[...Ne,xe])},Ms=S.useCallback((le,ce)=>{ce<=0||(m(xe=>{const Ne=xe.find(Be=>Be.id===le.id),De=((Ne==null?void 0:Ne.quantity)||0)+ce;return le.stock!==1/0&&De>le.stock?(ct(`Not enough stock for ${le.name}. Only ${le.stock} available.`,"error"),xe):Ne?(ct(`${ce} more ${le.name}(s) added to order`,"success"),xe.map(Be=>Be.id===le.id?{...Be,quantity:De}:Be)):(ct(`${ce} ${le.name}(s) added to order`,"success"),[...xe,{...le,quantity:ce}])}),K(null))},[m]),fa=S.useCallback((le,ce)=>{m(xe=>ce<=0?xe.filter(Ne=>Ne.id!==le):xe.map(Ne=>Ne.id===le?{...Ne,quantity:ce}:Ne))},[m]),Us=S.useCallback(()=>{m([]),F(null)},[m,F]),Yt=()=>{f.length>0&&I(!0)},se=le=>{F(le);const ce=f.reduce((Ne,De)=>Ne+De.price*De.quantity,0);let xe=0;le.type==="percent"?xe=ce*(le.value/100):xe=le.value,xe=Math.min(ce,xe),ct(`Discount of ${xe.toFixed(2)} applied.`,"success"),W(!1)},ye=S.useCallback(async le=>{if(!D||f.length===0)return;const ce=f.reduce((Ne,De)=>{if(De.isCommissionable&&De.commissionRate){const Be=De.price*De.quantity;return Ne+Be*De.commissionRate}return Ne},0),xe={id:`TX-${Date.now()}`,storeId:D,cashierId:"user_default",items:f,subtotal:de,tax:Ze,discountAmount:je,discountDetails:ie,total:Ge,timestamp:new Date,paymentMethod:le.paymentMethod.toLowerCase(),status:"completed",commissionTotal:ce>0?ce:0};if(x(Ne=>[...Ne,xe]),ce>0){const Ne=new Date,De={id:`comm-${xe.id}`,storeId:D,recordedBy:(H==null?void 0:H.id)||"system_auto",description:`Auto: Commissions for transaction ${xe.id}`,amount:ce,category:"COMMISSIONS",date:Ne,approved:!0,createdAt:Ne};v(Be=>[...Be,De])}d(Ne=>{const De=[...Ne];return f.forEach(Be=>{const ms=Be.itemType||"product";if(ms==="menu"&&Array.isArray(Be.bundleItems)&&Be.bundleItems.forEach(We=>{const Et=De.findIndex(_t=>_t.id===We.itemId);Et>-1&&De[Et].stock!==1/0&&(De[Et].stock-=(We.qty||1)*Be.quantity)}),ms!=="service"){const Ut=De.findIndex(We=>We.id===Be.id);Ut>-1&&De[Ut].stock!==1/0&&(De[Ut].stock-=Be.quantity)}const Yl=Be.consumedItems;Array.isArray(Yl)&&Yl.forEach(Ut=>{const We=De.findIndex(Et=>Et.id===Ut.itemId);We>-1&&De[We].stock!==1/0&&(De[We].stock-=(Ut.qty||1)*Be.quantity)})}),De});try{le.tipAmount&&le.tipAmount>0&&D&&await qw({storeId:D,saleId:xe.id,totalTip:le.tipAmount,method:le.tipMethod??"cash",allocations:le.allocations??[]})}catch(Ne){console.error("Failed to record tip",Ne)}Us(),I(!1),ct("Transaction completed successfully!","success")},[f,de,Ze,je,Ge,ie,D,H,x,Us,d,v]),ke=le=>{k(le),ct("Settings saved!","success")},Le=()=>{Hb(),C(null),$(null),window.location.hash="#/login-admin"},Ae=le=>{const ce={...le,id:`p${Date.now()}`};d(xe=>[...xe,ce]),ct("Menu item added!","success")},St=le=>{d(ce=>ce.map(xe=>xe.id===le.id?le:xe)),ct("Menu item updated!","success")},zs=le=>{d(ce=>ce.filter(xe=>xe.id!==le)),ct("Menu item deleted!","success")},$a=le=>{d(ce=>ce.filter(xe=>!le.includes(xe.id))),ct(`${le.length} menu item(s) deleted!`,"success")},Ia=le=>{if(!D)return;const ce={...le,id:`ex-${Date.now()}`,storeId:D,recordedBy:"cashier_default",approved:!0,createdAt:new Date};v(xe=>[...xe,ce]),ct("Expense logged!","success")},ht=()=>{var le,ce,xe,Ne;if(!D&&l==="#/pos")return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Please login to a store to continue."}),r.jsx("div",{className:"mt-4",children:r.jsx("a",{href:"#/login-store",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Owner Login"})})]})});switch(l){case"#/login-admin":return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(ru,{onSuccess:()=>{C(Ul()),window.location.hash="#/admin"}})});case"#/login-store":return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(kw,{stores:O,onSuccess:De=>{$(De),C(Ul()),window.location.hash="#/"}})});case"#/login":return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(Ew,{})});case"#/pos":return r.jsxs("div",{className:"flex flex-col h-full w-full gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>{window.history.back()},className:"px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-200 dark:bg-slate-700 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600","aria-label":"Back to Main Menu",children:" Back"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Point of Sale"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[((le=z==null?void 0:z.features)==null?void 0:le.enableTables)&&r.jsx("div",{className:"px-2 py-1 text-xs rounded-md bg-indigo-100 text-indigo-700",children:"Tables"}),((ce=z==null?void 0:z.features)==null?void 0:ce.enableUtangLedger)&&r.jsx("button",{onClick:()=>_(!0),className:"px-2 py-1 text-xs rounded-md bg-emerald-100 text-emerald-700",children:"Utang Ledger"}),((xe=z==null?void 0:z.features)==null?void 0:xe.enableExpiryAlerts)&&r.jsx("div",{className:"px-2 py-1 text-xs rounded-md bg-red-100 text-red-700",children:"Expiry Alerts"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 flex-grow min-h-0",children:[r.jsxs("div",{className:"lg:col-span-2 flex flex-col min-h-0",children:[r.jsx(Cb,{categories:ae,selectedCategory:ee,onSelectCategory:me}),r.jsx("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2 min-h-0",children:r.jsx(kb,{products:oe,onProductClick:K,lowStockThreshold:j.lowStockThreshold,showExpiryBadge:!!((Ne=z==null?void 0:z.features)!=null&&Ne.enableExpiryAlerts)})})]}),r.jsx("div",{className:"flex flex-col min-h-0",children:r.jsx(Ab,{items:f,settings:j,discount:je,onUpdateQuantity:fa,onClearCart:Us,onCheckout:Yt,onOpenDiscountModal:()=>W(!0)})})]})]});case"#/admin":return!H||H.role!=="super_admin"?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(ru,{onSuccess:()=>{C(Ul()),window.location.hash="#/admin"}})}):r.jsx(Sw,{});case"#/admin-modules":return!H||H.role!=="super_admin"?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(ru,{onSuccess:()=>{C(Ul()),window.location.hash="#/admin-modules"}})}):r.jsx(Nw,{storeId:D||""});case"#/appointments":return r.jsx(Gw,{});case"#/tickets":return r.jsx(Zw,{});case"#/tips":return r.jsx(ej,{});case"#/clients":return r.jsx(aj,{});case"#/commissions":return r.jsx(nj,{stores:O,transactions:p,expenses:y,currentStoreId:D});case"#/export":return r.jsx(lj,{});case"#/reminders":return r.jsx(rj,{});case"#/multi-branch":return r.jsx(ij,{});case"#/inventory":return D?r.jsx(Rb,{products:u,onAddProduct:Ae,onUpdateProduct:St,onDeleteProduct:zs,onDeleteMultipleProducts:$a,lowStockThreshold:j.lowStockThreshold,hideCategory:(z==null?void 0:z.businessType)==="SALON"}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Please login to a store to manage inventory."}),r.jsx("div",{className:"mt-4",children:r.jsx("a",{href:"#/login-store",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Owner Login"})})]})});case"#/reports":return D?r.jsx(zb,{transactions:p,expenses:y,onAddExpense:Ia,stores:O,currentStoreId:D}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Please login to a store to view reports."}),r.jsx("div",{className:"mt-4",children:r.jsx("a",{href:"#/login-store",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Owner Login"})})]})});case"#/settings":return z?r.jsx(Gb,{settings:j,store:z,modules:A,staff:T,onSave:ke,onStaffsChanged:M}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Please login to a store to adjust settings."}),r.jsx("div",{className:"mt-4",children:r.jsx("a",{href:"#/login-store",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Owner Login"})})]})});default:return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(Uw,{storeName:G,modules:A,features:z==null?void 0:z.features})})}};return r.jsx(_b,{children:r.jsxs("div",{className:"flex flex-col min-h-screen w-full bg-slate-100 dark:bg-slate-900 text-slate-900 dark:text-slate-200 font-sans overflow-x-hidden",children:[r.jsx(jb,{theme:o,setTheme:a,storeName:G,stores:O,currentStoreId:D,onStoreChange:$,currentUser:H,onLogout:Le}),r.jsx("main",{className:"flex-grow w-full p-4 lg:p-6 overflow-y-auto",children:ht()}),Y&&r.jsx(Aw,{cartItems:f,subtotal:de,tax:Ze,discount:je,total:Ge,settings:j,onClose:()=>I(!1),onConfirm:ye,staff:T}),te&&r.jsx(Cw,{onClose:()=>W(!1),onApply:se,subtotal:de,currentDiscount:ie}),ne&&r.jsx(Ow,{product:ne,onClose:()=>K(null),onAddToCart:le=>Ms(ne,le)}),re&&D&&r.jsx(oj,{storeId:D,onClose:()=>_(!1)}),r.jsx(Lw,{children:w.map(le=>r.jsx(zw,{message:le.message,type:le.type,onClose:()=>P(ce=>ce.filter(xe=>xe.id!==le.id))},le.id))})]})})},N0="DEMO_DATA_CLEARED_V1",uj=["stores","TEST_SEED_DONE","DEMO_SEEDED_V2","test_users_v1","store_owners_v1","cart","products","transactions","expenses","settings","discount","staff","appointments","tickets"],dj=["products_","categories_","transactions_","expenses_","staff_","appointments_","tickets_"];function hj(){if(!(typeof window>"u"||!window.localStorage))try{const o=window.localStorage;if(o.getItem(N0)==="1")return;uj.forEach(a=>o.removeItem(a));for(let a=o.length-1;a>=0;a-=1){const l=o.key(a);l&&dj.some(i=>l.startsWith(i))&&o.removeItem(l)}o.setItem(N0,"1")}catch(o){console.warn("Demo data cleanup skipped:",o)}}const Dg=document.getElementById("root");if(!Dg)throw new Error("Could not find root element to mount to");hj();const fj=ib.createRoot(Dg);fj.render(r.jsx(_u.StrictMode,{children:r.jsx(cj,{})}));
